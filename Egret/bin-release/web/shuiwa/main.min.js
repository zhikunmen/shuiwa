var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),__read=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),a=[];try{for(;(void 0===e||e-->0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r["return"])&&n.call(r)}finally{if(o)throw o.error}}return a},__values=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},__spread=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(__read(arguments[e]));return t},Cmd;!function(t){var e;!function(t){t[t.OnlineState_Online=1]="OnlineState_Online",t[t.OnlineState_Slow=2]="OnlineState_Slow",t[t.OnlineState_Leave=4]="OnlineState_Leave",t[t.OnlineState_Watching=6]="OnlineState_Watching",t[t.OnlineState_Calling=8]="OnlineState_Calling",t[t.OnlineState_Hosting=16]="OnlineState_Hosting"}(e=t.SWOnlineState||(t.SWOnlineState={}));var n=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWUserBaseInfo"},t}();t.SWUserBaseInfo=n,__reflect(n.prototype,"Cmd.SWUserBaseInfo");var i=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWRoomInfo"},t}();t.SWRoomInfo=i,__reflect(i.prototype,"Cmd.SWRoomInfo");var o=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.GameRoundInfo"},t}();t.GameRoundInfo=o,__reflect(o.prototype,"Cmd.GameRoundInfo");var r=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.PokerEchoRoomCmd_CS"},t}();t.PokerEchoRoomCmd_CS=r,__reflect(r.prototype,"Cmd.PokerEchoRoomCmd_CS");var a=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWEnterRoomCmd_C"},t}();t.SWEnterRoomCmd_C=a,__reflect(a.prototype,"Cmd.SWEnterRoomCmd_C");var s=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWTableRoomConfig"},t}();t.SWTableRoomConfig=s,__reflect(s.prototype,"Cmd.SWTableRoomConfig");var h=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWEnterRoomCmd_S"},t}();t.SWEnterRoomCmd_S=h,__reflect(h.prototype,"Cmd.SWEnterRoomCmd_S");var c=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWEnterRoomCmd_Brd"},t}();t.SWEnterRoomCmd_Brd=c,__reflect(c.prototype,"Cmd.SWEnterRoomCmd_Brd");var _=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWOnlineStateCmd_Brd"},t}();t.SWOnlineStateCmd_Brd=_,__reflect(_.prototype,"Cmd.SWOnlineStateCmd_Brd");var d=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWChangeRoomCmd_C"},t}();t.SWChangeRoomCmd_C=d,__reflect(d.prototype,"Cmd.SWChangeRoomCmd_C");var p=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWChangeRoomCmd_S"},t}();t.SWChangeRoomCmd_S=p,__reflect(p.prototype,"Cmd.SWChangeRoomCmd_S");var u=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWChangeSeatCmd_C"},t}();t.SWChangeSeatCmd_C=u,__reflect(u.prototype,"Cmd.SWChangeSeatCmd_C");var l=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWChangeSeatCmd_S"},t}();t.SWChangeSeatCmd_S=l,__reflect(l.prototype,"Cmd.SWChangeSeatCmd_S");var m=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWChangeSeatCmd_Brd"},t}();t.SWChangeSeatCmd_Brd=m,__reflect(m.prototype,"Cmd.SWChangeSeatCmd_Brd");var f=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWLeaveRoomCmd_C"},t}();t.SWLeaveRoomCmd_C=f,__reflect(f.prototype,"Cmd.SWLeaveRoomCmd_C");var C=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWLeaveRoomCmd_S"},t}();t.SWLeaveRoomCmd_S=C,__reflect(C.prototype,"Cmd.SWLeaveRoomCmd_S");var E=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWLeaveRoomCmd_Brd"},t}();t.SWLeaveRoomCmd_Brd=E,__reflect(E.prototype,"Cmd.SWLeaveRoomCmd_Brd");var S=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWRequestDissolveRoomCmd_C"},t}();t.SWRequestDissolveRoomCmd_C=S,__reflect(S.prototype,"Cmd.SWRequestDissolveRoomCmd_C");var g=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWRequestDissolveRoomCmd_S"},t}();t.SWRequestDissolveRoomCmd_S=g,__reflect(g.prototype,"Cmd.SWRequestDissolveRoomCmd_S");var y=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWRequestDissolveRoomCmd_Brd"},t}();t.SWRequestDissolveRoomCmd_Brd=y,__reflect(y.prototype,"Cmd.SWRequestDissolveRoomCmd_Brd");var A=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWReplyDissolveRoomCmd_C"},t}();t.SWReplyDissolveRoomCmd_C=A,__reflect(A.prototype,"Cmd.SWReplyDissolveRoomCmd_C");var v=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWReplyDissolveRoomCmd_S"},t}();t.SWReplyDissolveRoomCmd_S=v,__reflect(v.prototype,"Cmd.SWReplyDissolveRoomCmd_S");var I=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWReplyDissolveRoomCmd_Brd"},t}();t.SWReplyDissolveRoomCmd_Brd=I,__reflect(I.prototype,"Cmd.SWReplyDissolveRoomCmd_Brd");var T=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWSuccessDissolveRoomCmd_Brd"},t}();t.SWSuccessDissolveRoomCmd_Brd=T,__reflect(T.prototype,"Cmd.SWSuccessDissolveRoomCmd_Brd");var R=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWChatContent"},t}();t.SWChatContent=R,__reflect(R.prototype,"Cmd.SWChatContent");var b=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWCommonChatCmd_C"},t}();t.SWCommonChatCmd_C=b,__reflect(b.prototype,"Cmd.SWCommonChatCmd_C");var M=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWCommonChatCmd_S"},t}();t.SWCommonChatCmd_S=M,__reflect(M.prototype,"Cmd.SWCommonChatCmd_S");var B=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWCommonChatCmd_Brd"},t}();t.SWCommonChatCmd_Brd=B,__reflect(B.prototype,"Cmd.SWCommonChatCmd_Brd");var G=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWVoiceChatContent"},t}();t.SWVoiceChatContent=G,__reflect(G.prototype,"Cmd.SWVoiceChatContent");var P=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWVoiceChatCmd_C"},t}();t.SWVoiceChatCmd_C=P,__reflect(P.prototype,"Cmd.SWVoiceChatCmd_C");var W=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWVoiceChatCmd_S"},t}();t.SWVoiceChatCmd_S=W,__reflect(W.prototype,"Cmd.SWVoiceChatCmd_S");var O=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWVoiceChatCmd_Brd"},t}();t.SWVoiceChatCmd_Brd=O,__reflect(O.prototype,"Cmd.SWVoiceChatCmd_Brd");var w=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWGiftsInfo"},t}();t.SWGiftsInfo=w,__reflect(w.prototype,"Cmd.SWGiftsInfo");var N=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SendGiftCmd_C"},t}();t.SendGiftCmd_C=N,__reflect(N.prototype,"Cmd.SendGiftCmd_C");var L=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SendGiftCmd_S"},t}();t.SendGiftCmd_S=L,__reflect(L.prototype,"Cmd.SendGiftCmd_S");var U=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWSendGiftCmd_Brd"},t}();t.SWSendGiftCmd_Brd=U,__reflect(U.prototype,"Cmd.SWSendGiftCmd_Brd");var D=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWGameStartCmd_Brd"},t}();t.SWGameStartCmd_Brd=D,__reflect(D.prototype,"Cmd.SWGameStartCmd_Brd");var F=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWGameRoundEndCmd_Brd"},t}();t.SWGameRoundEndCmd_Brd=F,__reflect(F.prototype,"Cmd.SWGameRoundEndCmd_Brd");var k=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWRequestUserInfoCmd_C"},t}();t.SWRequestUserInfoCmd_C=k,__reflect(k.prototype,"Cmd.SWRequestUserInfoCmd_C");var H=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWRequestUserInfoCmd_S"},t}();t.SWRequestUserInfoCmd_S=H,__reflect(H.prototype,"Cmd.SWRequestUserInfoCmd_S");var x=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWSysMessageCmd_S"},t}();t.SWSysMessageCmd_S=x,__reflect(x.prototype,"Cmd.SWSysMessageCmd_S");var V=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWJsonCompressKey"},t}();t.SWJsonCompressKey=V,__reflect(V.prototype,"Cmd.SWJsonCompressKey");var Y=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWJsonCompressNullUserPmd_CS"},t}();t.SWJsonCompressNullUserPmd_CS=Y,__reflect(Y.prototype,"Cmd.SWJsonCompressNullUserPmd_CS");var z=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWPersonInfo"},t}();t.SWPersonInfo=z,__reflect(z.prototype,"Cmd.SWPersonInfo");var K=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWUpdataUserPointCmd_Brd"},t}();t.SWUpdataUserPointCmd_Brd=K,__reflect(K.prototype,"Cmd.SWUpdataUserPointCmd_Brd");var X=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWResetRoomStateCmd_Brd"},t}();t.SWResetRoomStateCmd_Brd=X,__reflect(X.prototype,"Cmd.SWResetRoomStateCmd_Brd")}(Cmd||(Cmd={}));var SWGAME;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.initUI()},e.prototype.initUI=function(){},e.prototype.destroy=function(){uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this)},e}(eui.Component);t.BaseVc=e,__reflect(e.prototype,"SWGAME.BaseVc")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t._myBetPoint=0,t._totalBetPoint=0,t}return __extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._factory=new dragonBones.EgretFactory,this.initUI()},n.prototype.initUI=function(){this._betTxtGroup.visible=!1,this._betTotalTxt.text="0",this._betPlayerTxt.text="0",this._betChessSeleted.visible=!1,this.touchEnabled=!1,this.touchChildren=!1},Object.defineProperty(n.prototype,"chessId",{get:function(){return this._chessId},enumerable:!0,configurable:!0}),n.prototype.setChess=function(e){this._betChessBg.texture=RES.getRes(t.GameData.getInstance().getBetChessBgResName(e)),this._chessId=e},n.prototype.reset=function(){this.initUI(),this._myBetPoint=0,this._totalBetPoint=0},n.prototype.Active=function(){this._betChessSeleted.visible=!0},n.prototype.DeActive=function(){this._betChessSeleted.visible=!1},n.prototype.enableBet=function(){return this._betTxtGroup.visible=!0,this._betPlayerTxt.visible=!0,t.RoomInfo.getInstance().bankerUid==uniLib.NetMgr.UID?void(this._betPlayerTxt.visible=!1):void(this.touchEnabled=!0)},n.prototype.disableBet=function(){this._betTxtGroup.visible=!1,this.touchEnabled=!1},n.prototype.updatePoints=function(e,n){e&&(t.EffectFactory.getInstance().addNumEffect(this._betPlayerTxt,this._myBetPoint,e,!0),this._myBetPoint=e),t.EffectFactory.getInstance().addNumEffect(this._betTotalTxt,this._totalBetPoint,n,!1),this._totalBetPoint=n},n.prototype.showPoints=function(t,e){this._betPlayerTxt.text=t.toString(),this._betTotalTxt.text=e.toString()},n.prototype.createAnimation=function(t,e,n,i){var o=RES.getRes(t),r=RES.getRes(e),a=RES.getRes(n),s=new dragonBones.EgretFactory;s.addDragonBonesData(dragonBones.DataParser.parseDragonBonesData(o)),s.addTextureAtlasData(this._factory.parseTextureAtlasData(r,a)),this._factory=s;var h=this._factory.buildArmature(i);return h},n.prototype.twinkleHideChess=function(){var t=this.createAnimation("sw_twinkle_hide_chess_ske_json","sw_twinkle_hide_chess_tex_json","sw_twinkle_hide_chess_tex_png","Armature"),e=t.display;this._factory.clock.add(t),this.addChild(e),n=__read([this.width/2,this.height/2],2),e.x=n[0],e.y=n[1],e.scaleX=e.scaleY=2,t.animation.play("newAnimation",2),e.addEventListener(dragonBones.EventObject.COMPLETE,this.onTwinkleEnd,this),this._display=e;var n},n.prototype.onTwinkleEnd=function(e){var n=e.target;n.removeEventListener(dragonBones.EventObject.COMPLETE,this.onTwinkleEnd,this),this._display=null,this.removeChild(n),this.dispatchEventWith(t.UIEventConsts.CHESS_TWINKLE_END)},n.prototype.destroy=function(){this._display&&(this._display.removeEventListener(dragonBones.EventObject.COMPLETE,this.onTwinkleEnd,this),this._display=null)},n}(eui.Component);t.BetChess=e,__reflect(e.prototype,"SWGAME.BetChess")}(SWGAME||(SWGAME={}));var ZMShuiWaMain=function(t){function e(e){var n=t.call(this,e)||this;return n._countGroupError=0,n._gameInfo&&(SWGAME.DataCache.gameInfo=n._gameInfo),e&&e.destroyResOnExit&&(SWGAME.DataCache.destroyResOnExit=e.destroyResOnExit),n._gameInfo&&n._gameInfo.extData&&(SWGAME.DataCache.platParam=n._gameInfo.extData),n._gameInfo&&n._gameInfo.extData&&n._gameInfo.extData.video?(SWGAME.RoomInfo.getInstance().video=n._gameInfo.extData.video,SWGAME.RoomInfo.getInstance().videoUid=n._gameInfo.extData.videoUid):(SWGAME.RoomInfo.getInstance().video=0,SWGAME.RoomInfo.getInstance().videoUid=0),n}return __extends(e,t),e.prototype.start=function(t){void 0===t&&(t=null),egret.ImageLoader.crossOrigin="anonymous";var e={};e.designWidth=1280,e.designHeight=720,e.debug=!0,e.scaleMode=egret.StageScaleMode.FIXED_HEIGHT,uniLib.init(e),RES.setMaxLoadingThread(10),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/zmshuiwa.res.json","resource/")},e.prototype.onConfigComplete=function(t){var e=this;RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var n=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",n),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter);var i=new eui.Theme("resource/zmshuiwa.thm.json",this.stage);i.addEventListener(eui.UIEvent.COMPLETE,function(){e.preLoadEnd()},this)},e.prototype.preLoadEnd=function(){RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.resLoadError,this),uniLib.UIMgr.instance.showProcessBar(null,2,100,"正在加载游戏资源..."),uniLib.Global.lobbyMode?uniLib.ResLoadMgr.instance.load("zmshuiwa",this.createGameScene,null,this,null):uniLib.ResLoadMgr.instance.load("zmshuiwa",this.loadGameRes,null,this,null)},e.prototype.resLoadError=function(t){++this._countGroupError<3?(console.error(t.groupName+"资源组加载失败，重试第"+this._countGroupError+"次"),uniLib.ResLoadMgr.instance.load(t.groupName,this.createGameScene,null,this,null)):(console.error(t.groupName+"资源组加载失败,返回大厅"),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.resLoadError,this),SWGAME.DataCache.gameInfo&&SWGAME.DataCache.gameInfo.defaultOrientation!=egret.OrientationMode.LANDSCAPE&&(uniLib.ScreenUtils.landscape=!1),uniLib.GameModuleUtils.ExitGame(!1),RES.destroyRes(t.groupName,!0),uniLib.ResUtils.clearResConfigByGroupName([t.groupName]),uniLib.UIMgr.instance.hideLoading())},e.prototype.loadGameRes=function(){uniLib.UIMgr.instance.showProcessBar(null,2,100,"正在加载游戏资源..."),uniLib.ResLoadMgr.instance.load("zmshuiwa",this.createGameScene,null,this,null)},e.prototype.createGameScene=function(){if(RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.resLoadError,this),uniLib.SceneMgr.instance.changeScene(SWGAME.SWMainScene),!RES.hasRes("TableGift_json"),!1){var t=chessCommonLib.zm_UserInfoPanel.prototype;t.loadTable=function(){return RES.getRes("sw_TableGift_json")}}},e.prototype.resize=function(){},e}(uniLib.GameDoc);__reflect(ZMShuiWaMain.prototype,"ZMShuiWaMain");var SWGAME;!function(t){var e=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.getInstance=function(){return null==n._instance&&(n._instance=new n),puremvc.Facade.instance=null,n._instance},n.prototype.initializeController=function(){e.prototype.initializeController.call(this),this.registerCommand(t.AppFacadeConst.STARTUP,t.StartupCommand)},n.prototype.startUp=function(e){this.sendNotification(t.AppFacadeConst.STARTUP,e),this.removeCommand(t.AppFacadeConst.STARTUP)},n}(puremvc.Facade);t.AppFacade=e,__reflect(e.prototype,"SWGAME.AppFacade")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(){function t(){}return t.STARTUP="shuiwa_startup",t.SEND_DATA="senddata",t.DESTORY="destroy",t.EXIT_GAME="exitGame",t.USER_ENTER_ROOM="user_enter_room",t.PlAYER_ENTER_ROOM="player_enter_room",t.FREE_TIME="FREE_TIME",t.BANKER_GRAB_BEGIN="banker_grab_begin",t.BANKER_GRAB_CONFIRM="banker_grab_confirm",t.BANKER_GRAB_END="banker_grab_end",t.BANKER_GRAB_ADD="banker_grab_add",t.BANKER_GRAB_BRD="banker_grab_brd",t.CLOSE_BANKER_GRAB="close_banker_grab",t.RESET_ROOM_ONE_PLAYER="reset_room_ONE_PLAYER",t.TIMER_START="timer_start",t.HIDE_CHESS_START="hide_chess_start",t.HIDE_CHESS_SUCCESS="hide_chess_success",t.HIDE_CHESS_SUCCESS_BRD="hide_chess_success_brd",t.BET_START="bet_start",t.BET_SUCCESS_MYSELF="bet_success_myself",t.BET_SUCCESS_BRD="bet_success_brd",t.OPEN_CHESS="open_chess",t.ROUND_END="round_end",t.DOWN_BANKER="down_banker",t.FLY_CHIP_END="fly_chip_end",t.NEW_ROUND_START="new_round_start",t.FLY_KANTOU_END="fly_kantou_end",t.RECONNECT="reconnect",t.UPDATE_USER_POINT="update_user_point",t.SHOW_TIP="show_tip",t.SHOW_STATUS="show_status",t.UN_SHOW_STATUS="un_show_status",t.VOICE_NOTICE="voice_notice",t.NOTIFY_COMMON_CHAT="notify_common_chat",t.SERVICE_COST="service_cost",t.SEND_GIFTS_NOTICE="send_gifts_notice",t.RESET_ROOM_ENTER="reset_room_enter",t.READY_SEND="ready_send",t.RESET_TABLE="reset_table",t.READY_BUTTON_HIDE="ready_button_hide",t.PLAYER_ENTER_ROOM="player_enter_room",t.PLAYER_CONNECT="player_connect",t.USERINFO_DATA="userinfo_data",t.READY_NOTICE="ready_notice",t.ROB_BANKER="rob_banker",t.SHOW_BANKER="show_banker",t.SHOW_PLAYER_BET="show_player_bet",t.SEND_CARD_READY="send_card_ready",t.SEND_PLAYER_CARD="send_player_card",t.SHOW_RESULT="show_result",t.SHOW_TOTAL_RESULT="show_total_result",t.SHOW_POKER_READY="show_poker_ready",t.SHOW_USER_CARD="show_user_card",t.NOTIFY_CHAT_RECORD="notify_chat_record",t.DISS_RESULT_NOTICE="diss_result_notice",t.DISS_REQUEST_NOTICE="diss_request_notice",t.DISS_NOTICE="diss_notice",t.GAME_START="game_start",t.RESET_RESULT_PANEL="reset_result_panel",t.SHOW_ADVANCE="show_advance",t.NOTIFY_ONLINE_STATE="notify_online_state",t.SHOW_MY_CARD="show_my_card",t.PLAYER_DISCONNECT="player_disconnect",t.PLAYER_LEFT="player_left",t.GM_HEAP_CARD="gm_heap_card",t.GM_CHANGE_CARD="gm_change_card",t.GM_DELETE="gm_delete",t.BET_SUCCESS="bet_success",t.CLEAR_TIMER="clear_timer",t.PERSONAL_COUNT="personal_count",t.ClEAR_PERSONAL_COUNT="stop_personal_count",t}();t.AppFacadeConst=e,__reflect(e.prototype,"SWGAME.AppFacadeConst")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(){function t(){}return t.setGreen=function(t){void 0===t&&(t=0),1==t&&(this.green="green_",this.greenFont=5284689,this.greenFanghao=5284689,this.resetFont=7337615)},t.green="",t.greenFont=7055559,t.greenFanghao=7186632,t.resetFont=16774656,t.zmRoomIDcolor=9338211,t}();t.ColorConst=e,__reflect(e.prototype,"SWGAME.ColorConst")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e;!function(t){var e;!function(t){t[t.NormalEnter=1]="NormalEnter",t[t.InGameEnter=2]="InGameEnter"}(e=t.EnterType||(t.EnterType={}))}(e=t.GameEnum||(t.GameEnum={}))}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(){function t(){}return t.SUCCESS=0,t.CANCLEOPEARET=1,t.PRIORITY=32,t}();t.NetConsts=e,__reflect(e.prototype,"SWGAME.NetConsts")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(){function t(){}return t.BACKGROUND="sw_bg_mp3",t.BET_BEGIN_VOICE="sw_bet_begin_mp3",t.BET_STOP_VOICE="sw_bet_stop_mp3",t.BET_BG="sw_bet_bg_mp3",t.DO_BET="sw_bet_mp3",t.KAIZI_BG="sw_kaizi_bg_mp3",t.KAIZI_OPEN="sw_kaizi_open_mp3",t.WIN="sw_win_mp3",t.FAIL="sw_lose_mp3",t}();t.SoundConsts=e,__reflect(e.prototype,"SWGAME.SoundConsts")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(){function t(){}return t.ON_BET="on_bet",t.BET_INFO_OPEN="bet_info_open",t.EXIT_GAME="exit_game",t.ACTION_GRAB_BANKER="action_grab_banker",t.ACTION_NO_GRAB_BANKER="action_no_grab_banker",t.HIDE_CHESS_CONFIRM="hide_chess_confirm",t.SELECT_CHIP="select_chip",t.FLY_KANTOU_END="fly_kantou_end",t.FLY_CHIP_END="fly_chip_end",t.CONTINUE_BET="continue_bet",t.CHESS_TWINKLE_END="chess_tinkle_end",t.READY="ready",t.GET_SCORE_DATA="GET_SCORE_DATA",t.SHOW_USER_INFO="SHOW_USER_INFO",t.GIFT_SEND="GIFT_SEND",t.SHOW_SETTING="SHOW_SETTING",t.SHOW_HELP="SHOW_HELP",t.SHOW_SHORT_CHAT="SHOW_SHORT_CHAT",t.SHARE_GAME="share_game",t.RECORD_TIME_OUT="RECORD_TIME_OUT",t.RECORD_CANCEL="RECORD_CANCEL",t.SEND_RECORD="SEND_RECORD",t.SEND_COMMON_CHAT="send_common_chat",t.SEND_COMMON_TALK="send_common_talk",t.SEND_CHAT_RECORD="send_chat_record",t.GM_SELECT_HANDCARD="gm_select_handcard",t.GM_SELECT_HEAPCARD="gm_select_heapcard",t.GM_SELECT_CARDS="gm_select_cards",t.REMOVE_READYHAND="remove_readyhand",t.ACTION_HOST="action_host",t.USER_DODISCARD="user_dodiscard",t.USER_DODISCARD_FAIL="user_dodiscard_fail",t.VIDEO_BACK="video_back",t.VIDEO_STOP="video_stop",t.VIDEO_ADVANCE="video_advance",t.VIDEO_CLOSE="video_close",t.SICHUAN_CHANGECARD="sichuan_changecard",t.DING_QUE="ding_que",t.YUAN_QUE="yuan_que",t.ACTION_LIANG="action_liang",t.ACTION_NOAN_LIANG="action_noan_liang",t.ACTION_SELECT_AN="action_select_an",t.USER_KNOCK_TURN="user_knock_turn",t.ACTION_BEGIN_PONG="action_begin_pong",t.ACTION_BU="action_bu",t.CARD_ADD_MASK="card_add_mask",t.SEND_PIAO_REQUEST="send_piao_request",t.START_READY="start_ready",t.EXCHANGE_DESK="exchange_desk",t.ADVANCE_START="advance_start",t.ROB_BANKER="rob_banker",t.SELF_CHIP="self_chip",t.SHOW_CHECK_PANEL="show_check_panel",t.SWITCH_CHANGE="switch_change",t.SHARE_WX="share_wx",t}();t.UIEventConsts=e,__reflect(e.prototype,"SWGAME.UIEventConsts")}(SWGAME||(SWGAME={}));var Cmd;!function(t){var e=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWCommonChatCmd_Brd"},t}();t.CommonChatCmd_Brd=e,__reflect(e.prototype,"Cmd.CommonChatCmd_Brd")}(Cmd||(Cmd={}));var SWGAME;!function(t){var e=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.prototype.execute=function(e){var i=this.facade.retrieveProxy(t.ServerShuiWaProxy.NAME);switch(e.getType()){case n.GAME_DATA:i.sendData(e.getBody());break;case n.CONNECT_GAME_SERVER:i.initServer();break;case n.CLOSE:i.closeSocket()}},n.GAME_DATA="game_data",n.CONNECT_GAME_SERVER="connect_game_server",n.CLOSE="close",n}(puremvc.SimpleCommand);t.DataRequestCommand=e,__reflect(e.prototype,"SWGAME.DataRequestCommand")}(SWGAME||(SWGAME={}));var Cmd;!function(t){var e;!function(t){t[t.Status_Ready=1]="Status_Ready",t[t.Status_Banker=2]="Status_Banker",t[t.Status_HindCard=3]="Status_HindCard",t[t.Status_Bet=4]="Status_Bet",t[t.Status_OpenCard=5]="Status_OpenCard",t[t.Status_RoundEnd=6]="Status_RoundEnd",t[t.Status_GameEnd=7]="Status_GameEnd",t[t.Status_LeisureTime=8]="Status_LeisureTime"}(e=t.GameStatus||(t.GameStatus={}));var n=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.PokerTuple"},t}();t.PokerTuple=n,__reflect(n.prototype,"Cmd.PokerTuple");var i=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.GameUnitResult"},t}();t.GameUnitResult=i,__reflect(i.prototype,"Cmd.GameUnitResult");var o=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.GameRoundResult"},t}();t.GameRoundResult=o,__reflect(o.prototype,"Cmd.GameRoundResult");var r=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWBetSet"},t}();t.SWBetSet=r,__reflect(r.prototype,"Cmd.SWBetSet");var a=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.UserRoundInfo"},t}();t.UserRoundInfo=a,__reflect(a.prototype,"Cmd.UserRoundInfo");var s=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.RoomRoundInfo"},t}();t.RoomRoundInfo=s,__reflect(s.prototype,"Cmd.RoomRoundInfo");var h=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWGameReadyCmd_Brd"},t}();t.SWGameReadyCmd_Brd=h,__reflect(h.prototype,"Cmd.SWGameReadyCmd_Brd");var c=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWBankerStartCmd_Brd"},t}();t.SWBankerStartCmd_Brd=c,__reflect(c.prototype,"Cmd.SWBankerStartCmd_Brd");var _=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWBankerCmd_C"},t}();t.SWBankerCmd_C=_,__reflect(_.prototype,"Cmd.SWBankerCmd_C");var d=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWBankerCmd_S"},t}();t.SWBankerCmd_S=d,__reflect(d.prototype,"Cmd.SWBankerCmd_S");var p=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWBankerCmd_Brd"},t}();t.SWBankerCmd_Brd=p,__reflect(p.prototype,"Cmd.SWBankerCmd_Brd");var u=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWBankerEndCmd_Brd"},t}();t.SWBankerEndCmd_Brd=u,__reflect(u.prototype,"Cmd.SWBankerEndCmd_Brd");var l=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWHideCardStartCmd_Brd"},t}();t.SWHideCardStartCmd_Brd=l,__reflect(l.prototype,"Cmd.SWHideCardStartCmd_Brd");var m=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWHideCardCmd_C"},t}();t.SWHideCardCmd_C=m,__reflect(m.prototype,"Cmd.SWHideCardCmd_C");var f=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWHideCardCmd_S"},t}();t.SWHideCardCmd_S=f,__reflect(f.prototype,"Cmd.SWHideCardCmd_S");var C=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWHideCardCmd_Brd"},t}();t.SWHideCardCmd_Brd=C,__reflect(C.prototype,"Cmd.SWHideCardCmd_Brd");var E=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWBetStartCmd_Brd"},t}();t.SWBetStartCmd_Brd=E,__reflect(E.prototype,"Cmd.SWBetStartCmd_Brd");var S=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWBetCmd_C"},t}();t.SWBetCmd_C=S,__reflect(S.prototype,"Cmd.SWBetCmd_C");var g=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWConBetCmd_C"},t}();t.SWConBetCmd_C=g,__reflect(g.prototype,"Cmd.SWConBetCmd_C");var y=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWBetCmd_S"},t}();t.SWBetCmd_S=y,__reflect(y.prototype,"Cmd.SWBetCmd_S");var A=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWBetCmd_Brd"},t}();t.SWBetCmd_Brd=A,__reflect(A.prototype,"Cmd.SWBetCmd_Brd");var v=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWReduceServerCostCmd_Brd"},t}();t.SWReduceServerCostCmd_Brd=v,__reflect(v.prototype,"Cmd.SWReduceServerCostCmd_Brd");var I=function(){function t(){}return t.prototype.GetType=function(){return"Cmd.SWOpenCardCmd_Brd"},t}();t.SWOpenCardCmd_Brd=I,__reflect(I.prototype,"Cmd.SWOpenCardCmd_Brd")}(Cmd||(Cmd={}));var SWGAME;!function(t){var e=function(){function e(){}return e.prototype.runTest=function(){},e.prototype.testSWHideCardStartCmd_Brd=function(){t.RoomInfo.getInstance().bankerUid=uniLib.NetMgr.UID,t.RoomInfo.getInstance().bankerSeatId=t.RoomInfo.getInstance().getSeatIdByUserId(uniLib.NetMgr.UID),console.warn("TEST--SWHideCardStartCmd_Brd--begin");var e=new Cmd.SWHideCardStartCmd_Brd;e.hideCardTimeout=1e4,Cmd.OnSWHideCardStartCmd_Brd(e)},e.prototype.testSWHideCardCmd_S=function(){console.warn("TEST--SWHideCardCmd_S--begin");var t=new Cmd.SWHideCardCmd_S;t.resultCode=0,Cmd.OnSWHideCardCmd_S(t)},e.prototype.testSWHideCardCmd_Brd=function(){console.warn("TEST--SWHideCardCmd_BrdS--begin");var t=new Cmd.SWHideCardCmd_Brd;Cmd.OnSWHideCardCmd_Brd(t)},e}();t.LocalTestCommand=e,__reflect(e.prototype,"SWGAME.LocalTestCommand")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.prototype.execute=function(t){t.getBody();this.removeMediator(),this.removeController(),this.removeProxy()},n.prototype.removeController=function(){this.facade.removeCommand(t.AppFacadeConst.SEND_DATA),this.facade.removeCommand(t.AppFacadeConst.STARTUP),this.facade.removeCommand(t.AppFacadeConst.DESTORY)},n.prototype.removeMediator=function(){this.facade.removeMediator(t.GameMediator.NAME),this.facade.removeMediator(t.BetMediator.NAME),this.facade.removeMediator(t.OperateMediator.NAME),this.facade.removeMediator(t.SeatPlayMediator.NAME),this.facade.removeMediator(t.EffectMediator.NAME),this.facade.removeMediator(t.ChatPopMediator.NAME),this.facade.removeMediator(t.MenuMediator.NAME),this.facade.removeMediator(t.VoiceMediator.NAME),this.facade.removeMediator(t.NotifyMediator.NAME)},n.prototype.removeProxy=function(){this.facade.removeProxy(t.ServerShuiWaProxy.NAME),this.facade=null,puremvc.Facade.instance=null},n}(puremvc.MacroCommand);t.RemoveCommand=e,__reflect(e.prototype,"SWGAME.RemoveCommand")}(SWGAME||(SWGAME={}));var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,n){function i(i){e.call(n,i,t)}if(RES.hasRes(t)){var o=RES.getRes(t);o?i(o):RES.getResAsync(t,i,this)}else RES.getResByUrl(t,i,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var Cmd;!function(t){function e(t,e,n){var i=SWGAME.AppFacade.getInstance();i.sendNotification(t,e,n)}function n(n){if(uniLib.UIMgr.instance.hideLoading(),SWGAME.RoomInfo.getInstance().resetRoomAll(),e(SWGAME.AppFacadeConst.RESET_ROOM_ENTER),n.resultCode)return console.error(n),console.warn("OnSWEnterRoomCmd_S:房间进入失败"),void e(SWGAME.AppFacadeConst.EXIT_GAME);var i=n.roomInfo;if(SWGAME.RoomInfo.getInstance().setData(i),uniLib.UserInfo.uid=uniLib.NetMgr.UID,n.bankerId&&(SWGAME.RoomInfo.getInstance().bankerUid=n.bankerId,SWGAME.RoomInfo.getInstance().bankerSeatId=SWGAME.RoomInfo.getInstance().getSeatIdByUserId(n.bankerId)),SWGAME.RoomInfo.getInstance().setRoundInfo(n.roundInfo),SWGAME.RoomInfo.getInstance().gameStatus=n.roundInfo.gameStatus,SWGAME.GameData.getInstance().initTime(n.tableRoomConfig),n.roomPoint&&(SWGAME.RoomInfo.getInstance().getMyUserInfo().score=n.roomPoint),e(SWGAME.AppFacadeConst.USER_ENTER_ROOM,n),n.roundInfo.gameStatus!=t.GameStatus.Status_Ready){var o=(n.roundInfo.userRoundInfo,n.roundInfo.roomRoundInfo);if(SWGAME.RoomInfo.getInstance().enterType=n.enterType,SWGAME.RoomInfo.getInstance().curOperateTime=n.roundInfo.operateTime,SWGAME.GameData.getInstance().timeTable[n.roundInfo.gameStatus]&&(SWGAME.GameData.getInstance().timeTable[n.roundInfo.gameStatus]=n.roundInfo.operateTime),o&&Object.keys(o.getBankerId).length)try{for(var r=__values(o.getBankerId),a=r.next();!a.done;a=r.next()){var s=a.value;SWGAME.RoomInfo.getInstance().addGrabBankerUid(s)}}catch(h){A={error:h}}finally{try{a&&!a.done&&(v=r["return"])&&v.call(r)}finally{if(A)throw A.error}}switch(n.roundInfo.gameStatus){case t.GameStatus.Status_Banker:break;case t.GameStatus.Status_HindCard:break;case t.GameStatus.Status_Bet:if(n.roundInfo&&n.roundInfo.userRoundInfo&&Object.keys(n.roundInfo.userRoundInfo).length)try{for(var c=__values(n.roundInfo.userRoundInfo),_=c.next();!_.done;_=c.next()){var d=_.value;if(d.betSet&&Object.keys(d.betSet).length){var p=SWGAME.RoomInfo.getInstance().getUserVoByUid(d.uid);try{for(var u=__values(d.betSet),l=u.next();!l.done;l=u.next()){var m=l.value;try{for(var f=__values(m.betPoint),C=f.next();!C.done;C=f.next()){var E=C.value;p.tmpBetReducePoint+=E,p.updateBetInfo(E,m.betChessId)}}catch(S){M={error:S}}finally{try{C&&!C.done&&(B=f["return"])&&B.call(f)}finally{if(M)throw M.error}}}}catch(g){R={error:g}}finally{try{l&&!l.done&&(b=u["return"])&&b.call(u)}finally{if(R)throw R.error
}}}}}catch(y){I={error:y}}finally{try{_&&!_.done&&(T=c["return"])&&T.call(c)}finally{if(I)throw I.error}}break;case t.GameStatus.Status_RoundEnd:}n.roundInfo.gameStatus==t.GameStatus.Status_LeisureTime&&(n.enterType=SWGAME.GameEnum.EnterType.NormalEnter),e(SWGAME.AppFacadeConst.RECONNECT,n.roundInfo),n.roundInfo.operateTime&&e(SWGAME.AppFacadeConst.TIMER_START,n.roundInfo.operateTime),e(SWGAME.AppFacadeConst.SHOW_STATUS)}var A,v,I,T,R,b,M,B}function i(t){if(0==t.resultCode)e(SWGAME.AppFacadeConst.EXIT_GAME);else switch(t.resultCode){case 1:uniLib.TipsUtils.showTipsDownToUp("已经开局，不能离开房间");break;case 2:uniLib.TipsUtils.showTipsDownToUp("庄家不能离开房间");break;case 3:uniLib.TipsUtils.showTipsDownToUp("抢过庄，本局不能离开房间")}}function o(t){var n=t.userInfo;n.uid!=uniLib.NetMgr.UID&&(SWGAME.RoomInfo.getInstance().getUserVoByUid(n.uid)||(SWGAME.RoomInfo.getInstance().addUser(n),e(SWGAME.AppFacadeConst.PLAYER_ENTER_ROOM,n)))}function r(t){if(!t.state){if(t.userId==uniLib.NetMgr.UID)return void e(SWGAME.AppFacadeConst.EXIT_GAME);if(e(SWGAME.AppFacadeConst.PLAYER_LEFT,t.userId),SWGAME.RoomInfo.getInstance().removeUser(t.userId)){var n=SWGAME.RoomInfo.getInstance().resetRoomAlone();n&&(e(SWGAME.AppFacadeConst.RESET_ROOM_ONE_PLAYER),e(SWGAME.AppFacadeConst.SHOW_TIP))}}}function a(n){if(SWGAME.RoomInfo.getInstance().gameStatus=t.GameStatus.Status_Banker,SWGAME.GameData.getInstance().updateWaitTimeByStatus(t.GameStatus.Status_Banker,n.bankerTimeout),SWGAME.RoomInfo.getInstance().resetGrabBankerSeatIdArr(),e(SWGAME.AppFacadeConst.BANKER_GRAB_BEGIN,n),!n.bankerTimeout)throw new Error("SWBankerStartCmd_Brd,没有收到倒计时字段bankerTimeout");e(SWGAME.AppFacadeConst.TIMER_START,n.bankerTimeout),e(SWGAME.AppFacadeConst.SHOW_STATUS)}function s(t){if(0==t.resultCode)e(SWGAME.AppFacadeConst.BANKER_GRAB_CONFIRM);else switch(t.resultCode){case 1:uniLib.TipsUtils.showTipsDownToUp("不在游戏中，不能抢庄");break;case 2:uniLib.TipsUtils.showTipsDownToUp("已经抢庄");break;case 3:var n=void 0;n=1==SWGAME.RoomInfo.getInstance().roomType?"金豆":"钻石",uniLib.TipsUtils.showTipsDownToUp("需要"+t.minCarry+n+"才可抢庄，请补充"+n),e(SWGAME.AppFacadeConst.CLOSE_BANKER_GRAB)}}function h(t){t.bBanker&&(SWGAME.RoomInfo.getInstance().addGrabBankerUid(t.uid),e(SWGAME.AppFacadeConst.BANKER_GRAB_ADD)),e(SWGAME.AppFacadeConst.BANKER_GRAB_BRD,t)}function c(t){t.uid?(SWGAME.RoomInfo.getInstance().bankerUid=t.uid,SWGAME.RoomInfo.getInstance().bankerSeatId=SWGAME.RoomInfo.getInstance().getSeatIdByUserId(t.uid),SWGAME.RoomInfo.getInstance().bankerLeftRound=SWGAME.GameData.getInstance().BankDefaultRoundNum,SWGAME.RoomInfo.getInstance().rebanker=!1):(SWGAME.RoomInfo.getInstance().bankerUid=null,SWGAME.RoomInfo.getInstance().bankerSeatId=null,SWGAME.RoomInfo.getInstance().rebanker=!0),e(SWGAME.AppFacadeConst.BANKER_GRAB_END),e(SWGAME.AppFacadeConst.UN_SHOW_STATUS)}function _(n){if(SWGAME.RoomInfo.getInstance().gameStatus=t.GameStatus.Status_HindCard,SWGAME.GameData.getInstance().updateWaitTimeByStatus(t.GameStatus.Status_HindCard,n.hideCardTimeout),!n.hideCardTimeout)throw new Error("hideCardTimeout不正确");SWGAME.RoomInfo.getInstance().hideCardTimeout=n.hideCardTimeout,e(SWGAME.AppFacadeConst.HIDE_CHESS_START),e(SWGAME.AppFacadeConst.TIMER_START,n.hideCardTimeout),e(SWGAME.AppFacadeConst.SHOW_STATUS)}function d(t){0==t.resultCode?e(SWGAME.AppFacadeConst.HIDE_CHESS_SUCCESS):console.error("藏子失败")}function p(t){e(SWGAME.AppFacadeConst.HIDE_CHESS_SUCCESS_BRD)}function u(n){SWGAME.RoomInfo.getInstance().gameStatus=t.GameStatus.Status_Bet,SWGAME.GameData.getInstance().updateWaitTimeByStatus(t.GameStatus.Status_Bet,n.betTimeout),e(SWGAME.AppFacadeConst.BET_START),e(SWGAME.AppFacadeConst.TIMER_START,n.betTimeout),e(SWGAME.AppFacadeConst.SHOW_STATUS)}function l(t){if(0!=t.resultCode)switch(t.resultCode){case 1:return void uniLib.TipsUtils.showTipsDownToUp("您的筹码不足，请及时补充！");case 2:return void uniLib.TipsUtils.showTipsDownToUp("您的押注已达上限！");case 3:return void uniLib.TipsUtils.showTipsDownToUp("筹码不足!");default:return}uniLib.SoundMgr.instance.playSound(SWGAME.SoundConsts.DO_BET),e(SWGAME.AppFacadeConst.BET_SUCCESS_MYSELF,t)}function m(t){var n=SWGAME.RoomInfo.getInstance().getUserVoByUid(t.uid);n?(n.tmpBetReducePoint+=t.betPoint,t.uid==uniLib.NetMgr.UID&&n.updateBetInfo(t.betPoint,t.betChessId)):console.error("用户"+t.uid+":不在房间中"),uniLib.SoundMgr.instance.playSound(SWGAME.SoundConsts.DO_BET),e(SWGAME.AppFacadeConst.BET_SUCCESS_BRD,t)}function f(n){SWGAME.RoomInfo.getInstance().hideChessId=n.hideChessId,SWGAME.RoomInfo.getInstance().gameStatus=t.GameStatus.Status_OpenCard,SWGAME.RoomInfo.getInstance().clearTmpBetReduce(),SWGAME.RoomInfo.getInstance().getMyUserInfo().betInfo=[],Object.keys(n.hideCards).length||(n.hideCards=[]),n.hideCards.unshift(n.hideChessId),n.hideCards.length<5&&n.hideCards.push(7),n.hideCards.length>5&&(n.hideCards=n.hideCards.slice(0,5)),SWGAME.RoomInfo.getInstance().hideChessIdLog=n.hideCards,e(SWGAME.AppFacadeConst.OPEN_CHESS),e(SWGAME.AppFacadeConst.SHOW_STATUS)}function C(n){var i=n.userResult;SWGAME.RoomInfo.getInstance().userResult=i,SWGAME.RoomInfo.getInstance().gameStatus=t.GameStatus.Status_RoundEnd;try{for(var o=__values(i),r=o.next();!r.done;r=o.next()){var a=r.value,s=SWGAME.RoomInfo.getInstance().getUserVoByUid(a.uid);s?(1==SWGAME.RoomInfo.getInstance().roomType?s.chips=a.userPoint:s.diamond=a.userPoint,s.score=a.roomPoint):console.warn(a.uid+":已经不在房间")}}catch(h){c={error:h}}finally{try{r&&!r.done&&(_=o["return"])&&_.call(o)}finally{if(c)throw c.error}}e(SWGAME.AppFacadeConst.TIMER_START,n.roundEndTime),n.isDownBanker&&(e(SWGAME.AppFacadeConst.DOWN_BANKER),SWGAME.RoomInfo.getInstance().bankerUid=null,SWGAME.RoomInfo.getInstance().bankerSeatId=null);var c,_}function E(t){t.uid||(SWGAME.RoomInfo.getInstance().bankerUid=null,SWGAME.RoomInfo.getInstance().bankerSeatId=null),SWGAME.RoomInfo.getInstance().enterType=SWGAME.GameEnum.EnterType.NormalEnter,SWGAME.RoomInfo.getInstance().bankerLeftRound=t.haveRound,uniLib.DisplayUtils.removeAllChildren(SWGAME.GameInfo.topLayer),e(SWGAME.AppFacadeConst.NEW_ROUND_START),e(SWGAME.AppFacadeConst.UN_SHOW_STATUS)}function S(n){SWGAME.RoomInfo.getInstance().gameStatus=t.GameStatus.Status_LeisureTime,SWGAME.RoomInfo.getInstance().enterType=SWGAME.GameEnum.EnterType.NormalEnter,e(SWGAME.AppFacadeConst.FREE_TIME),n.readyTimeout&&e(SWGAME.AppFacadeConst.TIMER_START,n.readyTimeout),e(SWGAME.AppFacadeConst.SHOW_STATUS)}function g(t){e(SWGAME.AppFacadeConst.NOTIFY_COMMON_CHAT,t)}function y(t){var n=t.gift;n.toUid&&e(SWGAME.AppFacadeConst.SEND_GIFTS_NOTICE,n)}function A(t){var n,i=SWGAME.RoomInfo.getInstance().getUserVoByUid(t.uid);1==SWGAME.RoomInfo.getInstance().roomType?(i.chips=t.userPoint,n="金豆"):(i.diamond=t.userPoint,n="钻石"),t.uid==uniLib.NetMgr.UID&&chessCommonLib.PublicTipMgr.getInstance().showTipsShow("本局收取服务费"+t.cost+n+"，祝您好运"),e(SWGAME.AppFacadeConst.SERVICE_COST,t)}function v(t){var n=SWGAME.RoomInfo.getInstance().getUserVoByUid(t.uid);return n?(n.chips=t.chips,n.diamond=t.diamond,void e(SWGAME.AppFacadeConst.UPDATE_USER_POINT,t)):void console.error("用户:"+t.uid+"不在房间中")}function I(){var t=SWGAME.RoomInfo.getInstance().resetRoomAlone(!0);t&&(e(SWGAME.AppFacadeConst.RESET_ROOM_ONE_PLAYER),SWGAME.RoomInfo.getInstance().userList.length<5&&e(SWGAME.AppFacadeConst.SHOW_TIP))}t.gameDispatch=e,t.OnSWEnterRoomCmd_S=n,t.OnSWLeaveRoomCmd_S=i,t.OnSWEnterRoomCmd_Brd=o,t.OnSWLeaveRoomCmd_Brd=r,t.OnSWBankerStartCmd_Brd=a,t.OnSWBankerCmd_S=s,t.OnSWBankerCmd_Brd=h,t.OnSWBankerEndCmd_Brd=c,t.OnSWHideCardStartCmd_Brd=_,t.OnSWHideCardCmd_S=d,t.OnSWHideCardCmd_Brd=p,t.OnSWBetStartCmd_Brd=u,t.OnSWBetCmd_S=l,t.OnSWBetCmd_Brd=m,t.OnSWOpenCardCmd_Brd=f,t.OnSWGameRoundEndCmd_Brd=C,t.OnSWGameStartCmd_Brd=E,t.OnSWGameReadyCmd_Brd=S,t.OnCommonChatCmd_Brd=g,t.OnSWSendGiftCmd_Brd=y,t.OnSWReduceServerCostCmd_Brd=A,t.OnSWUpdataUserPointCmd_Brd=v,t.OnSWResetRoomStateCmd_Brd=I}(Cmd||(Cmd={}));var SWGAME;!function(t){var e=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.prototype.execute=function(t){this.initController(),this.initProxy(),this.initMediator()},n.prototype.initController=function(){this.facade.registerCommand(t.AppFacadeConst.SEND_DATA,t.DataRequestCommand),this.facade.registerCommand(t.AppFacadeConst.DESTORY,t.RemoveCommand)},n.prototype.initMediator=function(){},n.prototype.initProxy=function(){this.facade.registerProxy(new t.ServerShuiWaProxy)},n}(puremvc.MacroCommand);t.StartupCommand=e,__reflect(e.prototype,"SWGAME.StartupCommand")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(){function t(){}return t.defaultWidth=1280,t.defaultHeight=720,t.path="",t.destroyResOnExit=!1,t}();t.DataCache=e,__reflect(e.prototype,"SWGAME.DataCache")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(){function t(){this.statusNameMap=new Map,this.ShortTalkArr=["又断线了，网络怎么这么差啊！","各位，真不好意思，我要离开一会","你的牌打得也忒好了！","下次咱们再玩吧！","不要走，决战到天亮！","快点吧，都等得我花都谢了！"],this.resultDelayTime=3500,this.BankDefaultRoundNum=11,this.bankerMulti=9,this.timeTable=[0],this.timeTable[Cmd.GameStatus.Status_Ready]=0,this.timeTable[Cmd.GameStatus.Status_Banker]=1e4,this.timeTable[Cmd.GameStatus.Status_HindCard]=1e4,this.timeTable[Cmd.GameStatus.Status_Bet]=1e4,this.timeTable[Cmd.GameStatus.Status_OpenCard]=5e3,this.statusNameMap.set(Cmd.GameStatus.Status_Banker,"抢庄阶段"),this.statusNameMap.set(Cmd.GameStatus.Status_HindCard,"藏子阶段"),this.statusNameMap.set(Cmd.GameStatus.Status_Bet,"下注阶段"),this.statusNameMap.set(Cmd.GameStatus.Status_OpenCard,"开子阶段"),this.statusNameMap.set(Cmd.GameStatus.Status_RoundEnd,"结算阶段"),this.statusNameMap.set(Cmd.GameStatus.Status_LeisureTime,"空闲阶段")}return t.getInstance=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.initTime=function(t){this.timeTable[Cmd.GameStatus.Status_Banker]=t.bankerTime,this.timeTable[Cmd.GameStatus.Status_HindCard]=t.hideTime,this.timeTable[Cmd.GameStatus.Status_Bet]=t.betTime},t.prototype.getBetChessBgResName=function(t){if(1>t||t>12)throw new Error("chessId超出范围");return"sw_chessBetIcon_"+t+"_png"},t.prototype.getChessBgResByChessId=function(t){if(1>t||t>12)throw new Error("chessId超出范围");var e=RES.getRes("sw_chess_"+t+"_png");if(!e)throw new Error("象棋资源获取失败!!!:资源名:sw_chess_"+t+"_png");return e},t.prototype.getChipResByPoint=function(t){var e="sw_chip_"+t+"_png",n=RES.getRes(e);if(!n)throw new Error("筹码资源获取失败!!!:资源名:"+e);return n},t.prototype.updateWaitTimeByStatus=function(t,e){this.timeTable[t]=e},t.prototype.getNextRoundWaitTime=function(t){return this.timeTable.slice(t).reduce(function(t,e){return t+e},0)},t.prototype.destroy=function(){t.instance=null},t}();t.GameData=e,__reflect(e.prototype,"SWGAME.GameData")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(){function t(){}return t.destroy=function(){t.main=null,t.stage=null,t.mainUILayer=null,t.uiLayer=null,t.topLayer=null,t.scence=null},t}();t.GameInfo=e,__reflect(e.prototype,"SWGAME.GameInfo")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(){function e(){this.normalBgName="sw_bg_1_jpg",this.iphonXBgName="sw_bg_2_jpg",this.iphonXBgWidth=1520,this.seatPosArr=[null,new egret.Point(865,539),new egret.Point(976,539),new egret.Point(1085,488),new egret.Point(1173,390),new egret.Point(1173,286),new egret.Point(1173,180),new egret.Point(1085,81),new egret.Point(960,18),new egret.Point(844,18),new egret.Point(349,18),new egret.Point(234,18),new egret.Point(107,78),new egret.Point(19,180),new egret.Point(19,282),new egret.Point(19,388),new egret.Point(107,488),new egret.Point(222,539),new egret.Point(333,539)],this.seatPlayerSize={width:88,height:100},this.chessBetIconBg={startPoint:new egret.Point(228,123),width:823,height:413},this.chessBetIcon={width:193,height:127},this.betChessStartArr=[null,new egret.Point(848,134),new egret.Point(848,266),new egret.Point(848,400),new egret.Point(443,134),new egret.Point(443,266),new egret.Point(443,400),new egret.Point(240,134),new egret.Point(240,266),new egret.Point(240,400),new egret.Point(646,134),new egret.Point(646,266),new egret.Point(646,400)],this.betChessBgSize={height:30},this.flyChipSize=[35,35],this.shaizhongPos=new egret.Point(1113,341),this.kantouPos=new egret.Point(639,59),this.kantouSize=[90,90],this.hideChessAnimationTime=2500,this.bankerIconEffectTime=1300,this.grabBankerEffectTime=1e3,this.flyChipTime=400,this.roundEndFlyChipInterval=50,this.roundEndFlyChipMax=3e3,this.roundEndFlyChipTime=300,this.popTime=300,this.outTime=300,this.stayTime=700,this.totalNotifyTime=1300,this.faceSize=[88,88],this.bankerAnimationScale=1.2}return e.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.stageSizeChange=function(){},e.prototype.betArea=function(t){var e=new egret.Point(this.betChessStartArr[t].x+10,this.betChessStartArr[t].y+this.betChessBgSize.height+10),n=new egret.Point(this.betChessStartArr[t].x+this.chessBetIcon.width-10,this.betChessStartArr[t].y+this.chessBetIcon.height-this.betChessBgSize.height-10);return[e,n]},e.prototype.getFlyChipInitPoint=function(e){if(e==t.RoomInfo.getInstance().getMyUserInfo().seatId)return new egret.Point(660,620);var n=new egret.Point;switch(e){case 1:case 2:case 3:case 16:case 17:case 18:n.x=this.seatPosArr[e].x+this.seatPlayerSize.width/2,n.y=this.seatPosArr[e].y;break;case 4:case 5:case 6:n.x=this.seatPosArr[e].x,n.y=this.seatPosArr[e].y+this.seatPlayerSize.height/2;break;case 7:case 8:case 9:case 10:case 11:case 12:n.x=this.seatPosArr[e].x+this.seatPlayerSize.width/2,n.y=this.seatPosArr[e].y+this.seatPlayerSize.height;break;case 13:case 14:case 15:n.x=this.seatPosArr[e].x+this.seatPlayerSize.width,n.y=this.seatPosArr[e].y+this.seatPlayerSize.height/2}return n},e.prototype.getFacePos=function(t){var e=new egret.Point;return e.x=this.seatPosArr[t].x+this.seatPlayerSize.width/2,e.y=this.seatPosArr[t].y+this.seatPlayerSize.width/2,e},e.prototype.getBankerAnimationPos=function(t){var e=this.seatPosArr[t].clone();return e.x+=this.seatPlayerSize.width/2,e.y+=this.seatPlayerSize.height/2,e},e}();t.PositionData=e,__reflect(e.prototype,"SWGAME.PositionData",["SWGAME.ScreenChangeObserver"])}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(){function e(){this.bankerSeatId=0,this.bankerUid=0,this.rebanker=!1,this.bankerLeftRound=0,this.hideChessIdLog=[],this.isStart=!1,this.gameStatus=0,this.curOperateTime=0,this.hasExit=!1,this._betPointArr=[],this._grabBankerSeatIdArr=[]}return e.getInstance=function(){return this.instance||(this.instance=new e),this.instance},Object.defineProperty(e.prototype,"roomType",{get:function(){return this._roomType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"betPointArr",{get:function(){return this._betPointArr},enumerable:!0,configurable:!0}),e.prototype.setData=function(t){this.userList=[],this._roomId=t.roomId,this._basePoint=t.basePoint,this._roomType=t.roomType,this.betLimit=t.betLimit,this.enterPoint=t.enterPoint,this.leavePoint=t.leavePoint,this.bankerLeftRound=t.haveRound,this.initBetPointArr(t.basePoint),this.initUserList(t.userInfo)},e.prototype.resetRoomAll=function(){this.userList=[],this._roomId=0,this._basePoint=0,this._roomType=0,this.betLimit=0,this.enterPoint=0,this.leavePoint=0,this.bankerLeftRound=0,this.userList=[],this._betPointArr=[],this.gameStatus=0,this.bankerSeatId=null,this.bankerUid=null,this.rebanker=!1,this.hideChessIdLog=[7],this.hideChessId=7,this.userResult=[],this.curOperateTime=0,this._grabBankerSeatIdArr=[],this.userResult=null},e.prototype.setRoundInfo=function(t){t.roomRoundInfo&&t.roomRoundInfo.hideCards&&Object.keys(t.roomRoundInfo.hideCards).length?(this.hideChessIdLog=t.roomRoundInfo.hideCards,this.hideChessIdLog.length<5&&this.hideChessIdLog.push(7),this.hideChessId=this.hideChessIdLog[0]):(this.hideChessIdLog=[7],this.hideChessId=7)},e.prototype.initUserList=function(e){for(var n=0;n<e.length;n++){var i=e[n],o=new t.UserVo(i);this.userList.push(o)}},e.prototype.initBetPointArr=function(t){this._betPointArr.length&&(this._betPointArr=[]),this._betPointArr.push(t);for(var e=0;4>e;e++){var n=e+2;this._betPointArr.push(n*this._basePoint)}},e.prototype.getGrabBankerSeatIdArr=function(){return this._grabBankerSeatIdArr},e.prototype.resetGrabBankerSeatIdArr=function(){this._grabBankerSeatIdArr=[]},e.prototype.addGrabBankerUid=function(t){var e=this.getSeatIdByUserId(t);-1==this._grabBankerSeatIdArr.indexOf(e)&&(this._grabBankerSeatIdArr.push(e),this._grabBankerSeatIdArr.sort(function(t,e){return t-e}))},e.prototype.getBasePoint=function(){return this._basePoint},e.prototype.getSeatIdByUserId=function(t){var e=this.getUserVoByUid(t);if(e){var n=e.seatId;return n}return null},e.prototype.getUserVoBySeatId=function(t){if(!this.userList)return null;for(var e=0;e<this.userList.length;e++)if(this.userList[e].seatId==t)return this.userList[e];return null},e.prototype.addUser=function(e){for(var n=new t.UserVo(e),i=0;i<this.userList.length;i++)if(this.userList[i].uid==n.uid)return void(this.userList[i]=n);this.userList.push(n)},e.prototype.destroy=function(){},e.prototype.getUserVoByUid=function(t){for(var e=0;e<this.userList.length;e++)if(this.userList[e].uid==t)return this.userList[e];return null},e.prototype.removeUser=function(t){for(var e=0;e<this.userList.length;e++)if(this.userList[e].uid==t)return this.userList.splice(e,1),!0;return!1},e.prototype.clearTmpBetReduce=function(){try{for(var t=__values(this.userList),e=t.next();!e.done;e=t.next()){var n=e.value;n.tmpBetReducePoint=0}}catch(i){o={error:i}}finally{try{e&&!e.done&&(r=t["return"])&&r.call(t)}finally{if(o)throw o.error}}var o,r},e.prototype.getPlayTypeByList=function(){},e.prototype.getMyUserInfo=function(){return this.getUserVoByUid(uniLib.NetMgr.UID)},e.prototype.isHalfWayEnter=function(){},e.prototype.resetRoomAlone=function(t){return t||1==this.userList.length?(this.bankerUid=null,this.bankerSeatId=null,this.rebanker=!1,this.bankerLeftRound=0,this.hideChessId=7,this.hideChessIdLog=[7],!0):!1},e}();t.RoomInfo=e,__reflect(e.prototype,"SWGAME.RoomInfo")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(e){function n(){return e.call(this,n.NAME)||this}return __extends(n,e),n.prototype.onRegister=function(){},n.prototype.initServer=function(){console.warn("ServerSanGongProxy:initServer"),uniLib.UIMgr.instance.showProcessBar(null,99,100,"正在连接游戏服务器...","",!0);var e=Number(uniLib.BrowersUtils.GetRequest("gameId")),n=Number(uniLib.BrowersUtils.GetRequest("zoneId"));null==t.DataCache.gameInfo||null==t.DataCache.gameInfo.zoneInfo?(this._config=RES.getRes("sw_config_json"),uniLib.NetMgr.init(this._config.LoginUrl,e?e:this._config.GameID,n?n:this._config.ZoneID,this.onHttpInitSucc,this.onHttpInitFail,this)):uniLib.NetMgr.init(uniLib.Global.defaultConfig.login_url,t.DataCache.gameInfo.zoneInfo.gameid,t.DataCache.gameInfo.zoneInfo.zoneid,this.onHttpInitSucc,this.onHttpInitFail,this)},n.prototype.onHttpInitSucc=function(t){console.warn("ServerSanGongProxy:onHttpInitSucc"),uniLib.NetMgr.initSocket(this.onSockInitSucc,this.onSockInitFail,this,"","","",!1,!0)},n.prototype.onHttpInitFail=function(e){return console.warn("ServerSanGongProxy:onHttpInitFail"),e?uniLib.TipsUtils.showTipsDownToUp("游戏登录失败:"+JSON.stringify(e)):uniLib.TipsUtils.showTipsDownToUp("游戏登录失败"),this.facade.sendNotification(t.AppFacadeConst.EXIT_GAME),uniLib.UIMgr.instance.hideLoading(),!0},n.prototype.onSockInitSucc=function(){console.warn("ServerSanGongProxy:onSockInitSucc"),uniLib.UIMgr.instance.showProcessBar(null,100,100,"正在进入房间...","",!0);var e=new Cmd.SWEnterRoomCmd_C,n=Number(uniLib.BrowersUtils.GetRequest("roomId")),i=(Number(uniLib.BrowersUtils.GetRequest("SWGAME")),Number(uniLib.BrowersUtils.GetRequest("robotId")),Number(uniLib.BrowersUtils.GetRequest("robotNum")));e.roomId=n?n:0,e.globalRoomId=n?n:111111,i>0&&(e.robotNum=i),t.DataCache.platParam&&(e.globalRoomId=t.DataCache.platParam.globalRoomId,e.roomId=t.DataCache.platParam.roomId);this.sendData(e)},n.prototype.onSockInitFail=function(e){return console.warn("ServerSanGongProxy:onSockInitFail"),e?uniLib.TipsUtils.showTipsDownToUp("游戏服务器连接失败:"+JSON.stringify(e)):uniLib.TipsUtils.showTipsDownToUp("游戏服务器连接失败"),this.facade.sendNotification(t.AppFacadeConst.EXIT_GAME),uniLib.UIMgr.instance.hideLoading(),!0},n.prototype.sendData=function(t){uniLib.NetMgr.tcpSend(t),uniLib.NetMgr.setMsgTimeout(8,"ServerMJProxy.sendData")},n.prototype.onRemove=function(){e.prototype.onRemove.call(this),uniLib.NetMgr.closeSocket(),t.GameData.getInstance().destroy(),uniLib.Global.removeEventListener(uniLib.ZqEvent.ON_RECONNEC,this.onSockInitSucc,this)},n.prototype.closeSocket=function(){console.trace("closeSocket"),uniLib.NetMgr.closeSocket()},n.NAME="ServerSanGongProxy",n}(puremvc.Proxy);t.ServerShuiWaProxy=e,__reflect(e.prototype,"SWGAME.ServerShuiWaProxy")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(e){function n(){var n=e.call(this)||this;return t.ScreenAdaptMgr.getInstance().registerObserver(n),n.stageSizeChange(),n.width=t.ScreenAdaptMgr.getInstance().defaultWidth,n.height=t.ScreenAdaptMgr.getInstance().defaultHeight,n}return __extends(n,e),n.prototype.destroy=function(){uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this)},n.prototype.stageSizeChange=function(){if(t.ScreenAdaptMgr.getInstance().stageWidth>t.ScreenAdaptMgr.getInstance().defaultWidth){var e=(t.ScreenAdaptMgr.getInstance().stageWidth-t.ScreenAdaptMgr.getInstance().defaultWidth)/2;this.width=t.ScreenAdaptMgr.getInstance().defaultWidth,this.anchorOffsetX=-e}else this.width=t.ScreenAdaptMgr.getInstance().stageWidth,this.anchorOffsetX=0},n}(egret.DisplayObjectContainer);t.AdaptLayer=e,__reflect(e.prototype,"SWGAME.AdaptLayer",["SWGAME.ScreenChangeObserver"])}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(){function t(){this._times=15,this._msec=300,this._effectScale=1.2}return t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.destroy=function(){t._instance&&(t._instance=null)},t.prototype.addNumEffect=function(t,e,n,i){void 0===i&&(i=!1);var o=this._msec/this._times,r=Math.floor((n-e)/this._times),a=egret.setInterval(function(){t.text=(Number(t.text)+r).toString()},this,o);i&&egret.Tween.get(t).to({scaleX:this._effectScale,scaleY:this._effectScale},this._msec/4,egret.Ease.sineInOut).wait(this._msec/2).to({scaleX:1,scaleY:1},this._msec/4,egret.Ease.sineInOut).call(function(){egret.Tween.removeTweens(t)}),egret.setTimeout(function(){egret.clearInterval(a),t.text=n.toString()},this,this._msec)},t.prototype.flyChip=function(t,e,n,i,o,r,a,s,h){if(void 0===o&&(o=!1),void 0===r&&(r=egret.Ease.circInOut),void 0===a&&(a=null),void 0===s&&(s=null),void 0===h&&(h=null),!e)throw new Error("必须有一个动画目标点");var c;n&&(c={point1:e,point2:n});var _=function(e,n){egret.Tween.get(t).to({x:e,y:n},i,r).call(function(){if(egret.Tween.removeTweens(t),s){if(!h)throw new Error("如果传入结束回调函数，必须设置thisObj参数");s.call(h,t)}})};if(c){if(c.point1.x==c.point2.x&&c.point1.y==c.point2.y)throw new Error("disPoint和disPoint2不能是同一个点");var d=c.point2.x-c.point1.x,p=c.point2.y-c.point1.y,u=d*Math.random(),l=p*Math.random(),m=c.point1.x+u,f=c.point1.y+l;_(m,f)}else _(e.x,e.y);o&&egret.Tween.get(t,{loop:!0}).to({rotation:360},300),a&&egret.Tween.get(t).to({scaleX:a,scaleY:a},1*i/3).wait(0).to({scaleX:1,scaleY:1},1*i/3)},t.prototype.handleNum=function(t,e,n){if(void 0===n&&(n=!1),!e)throw new Error("小数位数不能为0");var i,o=Math.pow(10,e);if(1e4>t&&t>-1e4)i=t.toString();else if(1e8>t&&t>-1e8){var r=Math.floor(t/1e4*o);i=t>0?r/o==Math.floor(r/o)?(r/o).toString()+"万":(r/o).toFixed(e).toString()+"万":r/o==Math.ceil(r/o)?(r/o).toString()+"万":(r/o).toFixed(e).toString()+"万"}else{var r=Math.floor(t/1e8*o);i=t>0?r/o==Math.floor(r/o)?(r/o).toString()+"亿":(r/o).toFixed(e).toString()+"亿":r/o==Math.ceil(r/o)?(r/o).toString()+"亿":(r/o).toFixed(e).toString()+"亿"}return n&&"0"!=i&&"-"!=i[0]&&(i="+"+i),i},t.prototype.publicTimer=function(){},t}();t.EffectFactory=e,__reflect(e.prototype,"SWGAME.EffectFactory")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(){function t(){}return t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.destroy=function(){t._instance&&(t._instance=null)},t.prototype.load=function(t,e,n,i){var o=this,r=this.getHeadCache(t);if(r)e&&e.call(i,r);else{var a,s,h=new egret.ImageLoader;s=function(n){h.removeEventListener(egret.IOErrorEvent.IO_ERROR,a,o);var r=n.currentTarget;o.saveHeadCache(t,r.data),e&&e.call(i,r.data)},a=function(e){h.removeEventListener(egret.IOErrorEvent.IO_ERROR,s,o),n&&n.call(i,[t])},h.once(egret.Event.COMPLETE,s,this),h.once(egret.IOErrorEvent.IO_ERROR,a,this),h.load(t)}},t.prototype.getHeadCache=function(t){if(uniLib.Global.localCache){if(uniLib.Global.localCache[t])return uniLib.Global.localCache[t]}else uniLib.Global.localCache={};return null},t.prototype.saveHeadCache=function(t,e){uniLib.Global.localCache||(uniLib.Global.localCache={}),uniLib.Global.localCache[t]=e},t}();t.HeadLoader=e,__reflect(e.prototype,"SWGAME.HeadLoader")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._supportScaleArr=[egret.StageScaleMode.FIXED_WIDTH,egret.StageScaleMode.FIXED_HEIGHT],e._defaultWidth=1280,e._defaultHeight=720,e.observerArr=[],e.name="ScreenAdaptMgr",e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAdd,e),e}return __extends(e,t),e.getInstance=function(){return e._instance?e._instance:(e._instance=new e,e._instance)},e.destroy=function(){e._instance&&(e._instance.parent&&(e._instance.stage.removeEventListener(egret.Event.RESIZE,e._instance.onScreenSizeCh,e._instance),e._instance.parent.removeChild(e._instance)),e._instance=null)},Object.defineProperty(e.prototype,"defaultWidth",{get:function(){return this._defaultWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultHeight",{get:function(){return this._defaultHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"factor",{get:function(){return this._factor},enumerable:!0,configurable:!0}),e.prototype.onAdd=function(){return this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAdd,this),this._scaleMode=this.stage.scaleMode,-1==this._supportScaleArr.indexOf(this._scaleMode)?void console.warn("[ScreenAdaptMgr]当前egret适配模式("+this._scaleMode+")未做支持"):this._scaleMode==egret.StageScaleMode.FIXED_WIDTH&&this.stage.stageWidth!=this._defaultWidth?void console.warn("[ScreenAdaptMgr]在"+this._scaleMode+"下，stage宽度与_defaultWidth不匹配"):this._scaleMode==egret.StageScaleMode.FIXED_HEIGHT&&this.stage.stageHeight!=this._defaultHeight?void console.warn("[ScreenAdaptMgr]在"+this._scaleMode+"下，stage高度与_defaultHeight不匹配"):(this.stage.addEventListener(egret.Event.RESIZE,this.onScreenSizeCh,this),void this.onScreenSizeCh())},e.prototype.onScreenSizeCh=function(){var t=0;switch(this.stageWidth=this.stage.stageWidth,this.stageHeight=this.stage.stageHeight,console.warn(this.stage.stageWidth),console.warn(this.stage.stageHeight),this._scaleMode){case egret.StageScaleMode.FIXED_WIDTH:t=this.stage.stageHeight/this._defaultHeight;break;case egret.StageScaleMode.FIXED_HEIGHT:t=this.stageWidth/this._defaultWidth}t&&(console.warn("my factor:"+t),this._factor=t,this.notifyObserver())},e.prototype.notifyObserver=function(){if(this.observerArr.length){try{for(var t=__values(this.observerArr),e=t.next();!e.done;e=t.next()){var n=e.value;if(!n.stageSizeChange||"function"!=typeof n.stageSizeChange)throw new Error("[ScreenAdaptMgr]类"+n.constructor.name+"，没有观察者屏幕适配方法stageSizeChange");n.stageSizeChange()}}catch(i){o={error:i}}finally{try{e&&!e.done&&(r=t["return"])&&r.call(t)}finally{if(o)throw o.error}}var o,r}},e.prototype.registerObserver=function(t){-1==this.observerArr.indexOf(t)&&this.observerArr.push(t)},e}(egret.DisplayObject);t.ScreenAdaptMgr=e,__reflect(e.prototype,"SWGAME.ScreenAdaptMgr")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.prototype.start=function(){e.prototype.start.call(this),this.stage.scaleMode=egret.StageScaleMode.FIXED_HEIGHT,t.DataCache.gameInfo&&t.DataCache.gameInfo.defaultOrientation!=egret.OrientationMode.LANDSCAPE&&(uniLib.ScreenUtils.landscape=!0),t.GameInfo.scence=this,t.GameInfo.uiLayer=this.uiLayer,t.GameInfo.mainUILayer=this.mainUILayer,t.GameInfo.topLayer=this.topLayer,t.GameInfo.main=this.tipsLayer,t.GameInfo.stage=this.stage,t.GameInfo.uiLayer.name="uiLayer",t.GameInfo.mainUILayer.name="mainUILayer",t.GameInfo.topLayer.name="topLayer",t.GameInfo.main.name="tipsLayer",this.stage.addChild(t.ScreenAdaptMgr.getInstance()),t.AppFacade.getInstance().startUp(this),this.initGameSpecialData(),this.initSound(),t.AppFacade.getInstance().sendNotification(t.AppFacadeConst.SEND_DATA,null,t.DataRequestCommand.CONNECT_GAME_SERVER)},n.prototype.destroy=function(){e.prototype.destroy.call(this),this._adaptLayer&&(this._adaptLayer.destroy(),this._adaptLayer=null),this._gameVc&&(this._gameVc.destroy(),this._gameVc=null),this._seatPlayVc&&(this._seatPlayVc.destroy(),this._seatPlayVc=null),this._betVc&&(this._betVc.destroy(),this._betVc=null),this._effectVc&&(this._effectVc.destroy(),this._effectVc=null),this._chatPopVc&&(this._chatPopVc.destroy(),this._chatPopVc=null),this._operateVc&&(this._operateVc.destroy(),this._operateVc=null),this._menuVc&&(this._menuVc.destroy(),this._menuVc=null),this._voiceVc&&(this._voiceVc.destroy(),this._voiceVc=null),this._noitfyVc&&(this._noitfyVc.destroy(),this._noitfyVc=null),egret.Tween.removeAllTweens(),uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this),t.AppFacade.getInstance().sendNotification(t.AppFacadeConst.DESTORY),t.ScreenAdaptMgr.destroy(),t.HeadLoader.destroy(),t.EffectFactory.destroy(),t.GameInfo.destroy()},n.prototype.initGameSpecialData=function(){this._adaptLayer=new t.AdaptLayer,t.GameInfo.adaptLayer=this._adaptLayer,t.GameInfo.uiLayer.addChild(this._adaptLayer),this._gameVc=new t.GameVc,t.GameInfo.adaptLayer.addChild(this._gameVc),t.AppFacade.getInstance().registerMediator(new t.GameMediator(this._gameVc)),this._seatPlayVc=new t.SeatPlayVc,t.GameInfo.adaptLayer.addChild(this._seatPlayVc),t.AppFacade.getInstance().registerMediator(new t.SeatPlayMediator(this._seatPlayVc)),this._betVc=new t.BetVc,t.GameInfo.adaptLayer.addChild(this._betVc),t.AppFacade.getInstance().registerMediator(new t.BetMediator(this._betVc)),this._effectVc=new t.EffectVc,t.GameInfo.adaptLayer.addChild(this._effectVc),t.AppFacade.getInstance().registerMediator(new t.EffectMediator(this._effectVc)),this._chatPopVc=new t.ChatPopVc,t.GameInfo.adaptLayer.addChild(this._chatPopVc),t.AppFacade.getInstance().registerMediator(new t.ChatPopMediator(this._chatPopVc)),this._operateVc=new t.OperateVc,t.GameInfo.adaptLayer.addChild(this._operateVc),t.AppFacade.getInstance().registerMediator(new t.OperateMediator(this._operateVc)),this._noitfyVc=new t.NotifyVc,t.GameInfo.adaptLayer.addChild(this._noitfyVc),t.AppFacade.getInstance().registerMediator(new t.NotifyMediator(this._noitfyVc)),this._menuVc=new t.MenuVc,t.GameInfo.adaptLayer.addChild(this._menuVc),t.AppFacade.getInstance().registerMediator(new t.MenuMediator(this._menuVc)),this._voiceVc=new t.VoiceVc,t.GameInfo.adaptLayer.addChild(this._voiceVc),t.AppFacade.getInstance().registerMediator(new t.VoiceMediator(this._voiceVc)),this.width=uniLib.Global.screenWidth,this.height=uniLib.Global.screenHeight},n.prototype.initSound=function(){var e=this;if(Number(uniLib.Utils.getLocalStorage("MusicVolime"))){uniLib.SoundMgr.instance.musicVolume=uniLib.Utils.getLocalStorage("MusicVolime"),uniLib.SoundMgr.instance.musicOpen=!0;var n=new egret.Timer(100,1);n.addEventListener(egret.TimerEvent.TIMER_COMPLETE,function(){n.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,null,e),uniLib.SoundMgr.instance.playBgMusic([t.SoundConsts.BACKGROUND])},this),n.start()}else uniLib.SoundMgr.instance.musicVolume=0,uniLib.SoundMgr.instance.musicOpen=!1;Number(uniLib.Utils.getLocalStorage("SoundVolime"))?(uniLib.SoundMgr.instance.soundVolume=uniLib.Utils.getLocalStorage("SoundVolime"),uniLib.SoundMgr.instance.soundOpen=!0):(uniLib.SoundMgr.instance.soundVolume=0,uniLib.SoundMgr.instance.soundOpen=!1)
},n.prototype.shareWx=function(){var e=new uniLib.WXShareVo;e.shareWay=0;var n=(this.globalToLocal(0,0),new egret.Bitmap(uniLib.DisplayUtils.catchScreenToTex(this,new egret.Rectangle(0,0,t.DataCache.defaultWidth,t.DataCache.defaultHeight),.6)));e.shareImageData=uniLib.DisplayUtils.catchScreen(n,new egret.Rectangle(0,0,t.DataCache.defaultWidth,t.DataCache.defaultHeight)),uniLib.ZQGameSdk.share(e,null,null)},n}(uniLib.GameScene);t.SWMainScene=e,__reflect(e.prototype,"SWGAME.SWMainScene")}(SWGAME||(SWGAME={}));var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.setProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var SWGAME;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t._pointArr=[],t.inEffect=!1,t.closed=!0,t.skinName=sw_BetPanel,t}return __extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.initUI()},n.prototype.initUI=function(){this._pointArr=[null,this._point_1,this._point_2,this._point_3,this._point_4,this._point_5,this._point_6,this._point_7,this._point_8,this._point_9,this._point_10,this._point_11,this._point_12];try{for(var e=__values(this._pointArr),n=e.next();!n.done;n=e.next()){var i=n.value;i&&(i.text="0")}}catch(o){r={error:o}}finally{try{n&&!n.done&&(a=e["return"])&&a.call(e)}finally{if(r)throw r.error}}this.anchorOffsetX=this.width,this.anchorOffsetY=this.height,this.x=1252,this.y=628,this.scaleX=this.scaleY=0,t.GameInfo.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this,!1);var r,a},n.prototype.open=function(){var t=this;if(!this.inEffect){if(!this.closed)return void this.close();egret.Tween.removeTweens(this),egret.Tween.get(this).to({scaleX:1,scaleY:1},400,egret.Ease.backOut).call(function(){t.inEffect=!1,t.closed=!1}),this.inEffect=!0}},n.prototype.close=function(){var t=this;this.inEffect||this.closed||(egret.Tween.removeTweens(this),egret.Tween.get(this).to({scaleX:0,scaleY:0},400,egret.Ease.backIn).call(function(){t.inEffect=!1,t.closed=!0}),this.inEffect=!0)},n.prototype.clear=function(){egret.Tween.removeTweens(this),this.scaleX=this.scaleY=0,this.inEffect=!1,this.closed=!0;try{for(var t=__values(this._pointArr),e=t.next();!e.done;e=t.next()){var n=e.value;n&&(n.text="0")}}catch(i){o={error:i}}finally{try{e&&!e.done&&(r=t["return"])&&r.call(t)}finally{if(o)throw o.error}}var o,r},n.prototype.updateBetPoint=function(t,e){this._pointArr[e].text="+"+t.toString()},n.prototype.destroy=function(){egret.Tween.removeTweens(this),t.GameInfo.stage.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this,!0)},n}(eui.Component);t.BetPanel=e,__reflect(e.prototype,"SWGAME.BetPanel")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.isActive=!1,t}return __extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.initUI()},n.prototype.initUI=function(){this._chip_selected.visible=!1},n.prototype.getBetPoint=function(){return this._betPoint},n.prototype.initChip=function(e){this._betPoint=e,this._chipBg.texture=t.GameData.getInstance().getChipResByPoint(e)},n.prototype.OnClick=function(){this.isActive||(this.isActive=!0,this._chip_selected.visible=!0,this.dispatchEventWith(t.UIEventConsts.SELECT_CHIP,!1,this._betPoint))},n.prototype.deActive=function(){this.isActive=!1,this._chip_selected.visible=!1},n.prototype.clearChip=function(){this.deActive(),this._betPoint=null,this._chipBg.texture=null},n.prototype.destory=function(){uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this)},n}(eui.Component);t.ChipReal=e,__reflect(e.prototype,"SWGAME.ChipReal")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(t){function e(e,n,i){void 0===n&&(n=null),void 0===i&&(i=!0);var o=t.call(this)||this;return o.srcArr=e,o._label=n,o._autoDestory=i,o.initUI(),o.addEventListener(egret.Event.REMOVED_FROM_STAGE,o.onRemove,o),o}return __extends(e,t),e.prototype.iconTexture=function(t){this.srcArr=t,this._icon.texture=RES.getRes(t[0])},e.prototype.onRemove=function(t){this._autoDestory&&this.destory()},e.prototype.initUI=function(){var t;t=this.srcArr[0],this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this._icon?this._icon.texture=RES.getRes(t):(this._icon=uniLib.DisplayUtils.createBitmapByName(t),this.addChild(this._icon)),this._label&&(this._labelTxt=uniLib.DisplayUtils.createTextLabel(16777215,egret.HorizontalAlign.CENTER,this._label,25,0,8,this._icon.width),this.addChild(this._labelTxt))},e.prototype.onTouchBegin=function(t){this._icon.texture=RES.getRes(this.srcArr[1]),egret.MainContext.instance.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},e.prototype.onTouchEnd=function(t){egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this._icon.texture=RES.getRes(this.srcArr[0])},e.prototype.addClickArea=function(t){this._area||(this._area=new egret.Sprite,this._area.touchEnabled=!0,this.addChild(this._area)),this._area.graphics.clear(),this._area.graphics.beginFill(16711680,0),this._area.graphics.drawRect(-t,-t,this._icon.width+2*t,this._icon.height+2*t),this._area.graphics.endFill()},e.prototype.destory=function(){this.touchEnabled=!1,egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),uniLib.DisplayUtils.removeFromParent(this),uniLib.DisplayUtils.removeAllChildren(this),this._area=null,this._icon=null,this._label=null,this._labelTxt=null},e}(egret.Sprite);t.GameButton=e,__reflect(e.prototype,"SWGAME.GameButton")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(e){function n(t){var n=e.call(this)||this;return n.chessBtnArr=[],n._selectedChessId=null,n.skinName=sw_HideChessPanel,n.msec=t,n}return __extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.initUI()},n.prototype.initUI=function(){this.chessBtnArr=[null,this._chess_1,this._chess_2,this._chess_3,this._chess_4,this._chess_5,this._chess_6,this._chess_7,this._chess_8,this._chess_9,this._chess_10,this._chess_11,this._chess_12];try{for(var e=__values(this.chessBtnArr),n=e.next();!n.done;n=e.next()){var i=n.value;i&&i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.chessSelected,this)}}catch(o){a={error:o}}finally{try{n&&!n.done&&(s=e["return"])&&s.call(e)}finally{if(a)throw a.error}}this._panel_hide_select_frame.visible=!1,this._ok_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickOK,this);var r=t.RoomInfo.getInstance().hideChessId;r||(r=7),this.setUnTouchableChess(r),this.startTimer(Math.ceil(this.msec/1e3));var a,s},n.prototype.chessSelected=function(t){var e=t.target;this._panel_hide_select_frame.visible=!0,this._panel_hide_select_frame.x=e.x,this._panel_hide_select_frame.y=e.y-2,this._selectedChessId=this.chessBtnArr.indexOf(e)},n.prototype.setUnTouchableChess=function(t){this.chessBtnArr[t].touchEnabled=!1;var e=[.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0],n=new egret.ColorMatrixFilter(e);this.chessBtnArr[t].filters=[n]},n.prototype.onClickOK=function(){this._selectedChessId&&this.dispatchEventWith(t.UIEventConsts.HIDE_CHESS_CONFIRM,!1,this._selectedChessId)},n.prototype.startTimer=function(t){var e=this;if(this._timer&&this.clearTimer(),this._countNum=t,!(this._countNum<=0)){this._timerNum.text=this._countNum.toString();var n=new egret.Timer(1e3,this._countNum+1);this._timer=n,n.addEventListener(egret.TimerEvent.TIMER,function(){e._countNum--,e._countNum<0||(e._timerNum.text=e._countNum.toString())},this),n.addEventListener(egret.TimerEvent.TIMER_COMPLETE,function(){e.clearTimer()},this),n.start()}},n.prototype.clearTimer=function(){this._timer&&(this._timer.removeEventListener(egret.TimerEvent.TIMER,null,this),this._timer.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,null,this),this._timer.stop(),this._timer=null)},n.prototype.destroy=function(){this.clearTimer();try{for(var t=__values(this.chessBtnArr),e=t.next();!e.done;e=t.next()){var n=e.value;n&&(n.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.chessSelected,this),this._ok_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickOK,this))}}catch(i){o={error:i}}finally{try{e&&!e.done&&(r=t["return"])&&r.call(t)}finally{if(o)throw o.error}}var o,r},n}(eui.Component);t.HideChessPanel=e,__reflect(e.prototype,"SWGAME.HideChessPanel")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.initUI(),t}return __extends(n,e),n.prototype.initUI=function(){this.name="menuArea",this._foldBtn=new t.GameButton(["sw_btn_fold_png","sw_btn_fold_png"]),this._foldBtn.anchorOffsetX=this._foldBtn.width/2,this._foldBtn.anchorOffsetY=this._foldBtn.height/2,this._foldBtn.x=25+this._foldBtn.width/2,this._foldBtn.y=25+this._foldBtn.height/2,this._foldBtn.touchEnabled=!0,this.addChild(this._foldBtn),this._foldBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onFold,this),this._btnFrame=new egret.DisplayObjectContainer,n=__read([21,97],2),this._btnFrame.x=n[0],this._btnFrame.y=n[1];var e=new egret.Bitmap;e.texture=RES.getRes("sw_btn_bg_png"),e.scale9Grid=new egret.Rectangle(12,12,9,10),e.width=200,e.height=85,e.name="sw_btn_bg_img",e.visible=!1,this._btnFrame.addChild(e),this._btnBg=e,this.addChild(this._btnFrame),this._btnArrY={bgHeight:276,setBtnY:0,helpBtnY:0,safeBtnY:0,backBtnY:0},this._btnArrY.setBtnY=20,this._setBtn=new t.GameButton(["sw_btn_set_png","sw_btn_set_png"]),this._setBtn.x=19,this._setBtn.y=20,this._setBtn.touchEnabled=!1,this._setBtn.visible=!1,this._setBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSet,this),this._btnFrame.addChild(this._setBtn),this._btnArrY.helpBtnY=this._btnArrY.setBtnY+this._setBtn.height+20,this._helpBtn=new t.GameButton(["sw_btn_help_png","sw_btn_help_png"]),this._helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHelpBtnTouch,this),this._helpBtn.x=19,this._helpBtn.y=this._btnArrY.setBtnY,this._helpBtn.touchEnabled=!1,this._helpBtn.visible=!1,this._btnFrame.addChild(this._helpBtn),this._btnArrY.safeBtnY=this._btnArrY.helpBtnY+this._helpBtn.height+20,this._safeBtn=new t.GameButton(["sw_btn_safe_png","sw_btn_safe_png"]),this._safeBtn.x=19,this._safeBtn.y=this._btnArrY.setBtnY,this._safeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSafeBtnTouch,this),this._safeBtn.touchEnabled=!1,this._safeBtn.visible=!1,this._btnFrame.addChild(this._safeBtn),this._btnArrY.backBtnY=this._btnArrY.safeBtnY+this._safeBtn.height+20,this._backBtn=new t.GameButton(["sw_btn_return_png","sw_btn_return_png"]),this._backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLeaveRoom,this),this._backBtn.x=19,this._backBtn.y=this._btnArrY.setBtnY,this._backBtn.touchEnabled=!1,this._backBtn.visible=!1,this._btnFrame.addChild(this._backBtn),this._btnFrame.swapChildren(this._backBtn,this._setBtn),this._btnFrame.swapChildren(this._safeBtn,this._helpBtn);var n},n.prototype.destroy=function(){uniLib.DisplayUtils.removeFromParent(this),uniLib.DisplayUtils.removeAllChildren(this),this._setBtn&&(this._setBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onSet,this),uniLib.DisplayUtils.removeFromParent(this._setBtn),this._setBtn.destory()),this._backBtn&&(this._backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onLeaveRoom,this),uniLib.DisplayUtils.removeFromParent(this._backBtn),this._backBtn.destory()),this._helpBtn&&(this._helpBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onHelpBtnTouch,this),uniLib.DisplayUtils.removeFromParent(this._helpBtn),this._helpBtn.destory()),this._setBtn=null,this._backBtn=null,this._helpBtn=null},n.prototype.onFold=function(){function t(t,e,n){egret.Tween.get(t).to({y:e},200,egret.Ease.circInOut).call(function(){n?t.touchEnabled=!0:t.visible=!1})}var e=this;return this._btnBg.visible?(this._setBtn.touchEnabled=!1,this._helpBtn.touchEnabled=!1,this._safeBtn.touchEnabled=!1,this._backBtn.touchEnabled=!1,t(this._setBtn,this._setBtn.y,!1),t(this._helpBtn,this._setBtn.y,!1),t(this._safeBtn,this._setBtn.y,!1),t(this._backBtn,this._setBtn.y,!1),egret.Tween.get(this._btnBg).to({height:85},200,egret.Ease.circInOut).call(function(){e._btnBg.visible=!1}),void egret.Tween.get(this._foldBtn).to({rotation:0},200,egret.Ease.circInOut)):(this._setBtn.visible=!0,this._helpBtn.visible=!0,this._safeBtn.visible=!0,this._backBtn.visible=!0,this._btnBg.visible=!0,t(this._setBtn,this._btnArrY.setBtnY,!0),t(this._helpBtn,this._btnArrY.helpBtnY,!0),t(this._safeBtn,this._btnArrY.safeBtnY,!0),t(this._backBtn,this._btnArrY.backBtnY,!0),egret.Tween.get(this._btnBg).to({height:this._btnArrY.bgHeight},200,egret.Ease.circInOut),void egret.Tween.get(this._foldBtn).to({rotation:-180},200,egret.Ease.circInOut))},n.prototype.onSet=function(){this.dispatchEventWith(t.UIEventConsts.SHOW_SETTING)},n.prototype.onHelpBtnTouch=function(){this.dispatchEventWith(t.UIEventConsts.SHOW_HELP)},n.prototype.onLeaveRoom=function(){this.dispatchEventWith(t.UIEventConsts.EXIT_GAME,!1)},n.prototype.onSafeBtnTouch=function(){console.warn("open safe"),uniLib.Global.dispatchEvent(chessCommonLib.CommonModelEvent.SAFEBOX)},n}(egret.DisplayObjectContainer);t.MenuArea=e,__reflect(e.prototype,"SWGAME.MenuArea")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName=sw_RechageBtn,e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.initUI()},e.prototype.initUI=function(){},e}(eui.Component);t.RechargeBtn=e,__reflect(e.prototype,"SWGAME.RechargeBtn")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(e){function n(t){var n=e.call(this)||this;return n._pointArr=[],n.skinName=sw_resultPanel,n.resultData=t,n}return __extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.initUI()},n.prototype.initUI=function(){var e=this;this._rankDataGroup.itemRenderer=t.ResultPanelRankItem,this._pointArr=[null,this._point_1,this._point_2,this._point_3,this._point_4,this._point_5,this._point_6,this._point_7,this._point_8,this._point_9,this._point_10,this._point_11,this._point_12];try{for(var n=__values(this._pointArr),i=n.next();!i.done;i=n.next()){var o=i.value;o&&(o.text="0")}}catch(r){p={error:r}}finally{try{i&&!i.done&&(u=n["return"])&&u.call(n)}finally{if(p)throw p.error}}this._my_total_point.text="0",this._banker_point.text="0";var a=t.RoomInfo.getInstance().hideChessId;this._hide_chess_img.texture=t.GameData.getInstance().getChessBgResByChessId(a);var s=[];try{for(var h=__values(this.resultData),c=h.next();!c.done;c=h.next()){var _=c.value;_.uid==uniLib.NetMgr.UID&&(this._my_total_point.text=t.EffectFactory.getInstance().handleNum(_.totalPoint,2,!0),_.unitPoint&&0!=Object.keys(_.unitPoint).length&&_.unitPoint.forEach(function(n){e._pointArr[n.chessId].text=t.EffectFactory.getInstance().handleNum(n.totalPoint,2,!0)},this)),_.uid==t.RoomInfo.getInstance().bankerUid&&(this._banker_point.text=t.EffectFactory.getInstance().handleNum(_.totalPoint,2,!0)),s.push({headUrl:_.headurl,nickName:_.name,point:_.totalPoint.toString()})}}catch(d){l={error:d}}finally{try{c&&!c.done&&(m=h["return"])&&m.call(h)}finally{if(l)throw l.error}}s.sort(function(t,e){return Number(e.point)-Number(t.point)}),s.map(function(t,e){switch(t.rank=(e+1).toString(),t.rank){case"1":t.rank="a";break;case"2":t.rank="b";break;case"3":t.rank="c"}}),this._rankDataGroup.dataProvider=new eui.ArrayCollection(s),this._close_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this);var p,u,l,m},n.prototype.onClose=function(){this.destroy(),uniLib.PopUpMgr.removePopUp(this)},n.prototype.destroy=function(){this._close_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this)},n}(eui.Component);t.ResultPanel=e,__reflect(e.prototype,"SWGAME.ResultPanel")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.skinName=sw_resultPanelRankItem,t}return __extends(n,e),n.prototype.dataChanged=function(){1==t.RoomInfo.getInstance().roomType?this._diamond_icon.visible=!1:this._golden_icon.visible=!1,this._headImg_bg.source=this.data.headUrl},n}(eui.ItemRenderer);t.ResultPanelRankItem=e,__reflect(e.prototype,"SWGAME.ResultPanelRankItem")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.initUI()},n.prototype.initUI=function(){this._nameBg.visible=!1,this._name.visible=!1,this._point.visible=!1,this._banker_grab_bg.visible=!1,this._banker_icon.visible=!1},n.prototype.setUserData=function(e){this.realHeadImg&&this.removeUserData(),this._nameBg.visible=!0,this._name.visible=!0,this._point.visible=!0,t.HeadLoader.getInstance().load(e.headUrl,this.onLoadSuccess,this.onLoadError,this),this._name.text=e.nickName,1==t.RoomInfo.getInstance().roomType?this._point.text=t.EffectFactory.getInstance().handleNum(e.chips,2):this._point.text=t.EffectFactory.getInstance().handleNum(e.diamond,2)},n.prototype.removeUserData=function(){this._nameBg.visible=!1,this._name.visible=!1,this._point.visible=!1,this.clearBanker(),this.realHeadImg&&(this.swapChildren(this.realHeadImg,this._headImg),this.removeChild(this.realHeadImg),this.realHeadImg=null),this.deactiveBankerGrab()},n.prototype.updatePoint=function(e){this._point.text=t.EffectFactory.getInstance().handleNum(e,2)},n.prototype.onLoadSuccess=function(t){var e=new egret.Bitmap(t);e.name="headImg_real",e.x=this._headImg.x,e.y=this._headImg.y,e.width=this._headImg.width,e.height=this._headImg.height,this.realHeadImg=e,this.addChild(e),this.swapChildren(e,this._headImg)},n.prototype.onLoadError=function(t){console.warn("SeatPlayer:用户头像获取失败!")},n.prototype.activeBankerGrab=function(){this._banker_grab_bg.visible=!0},n.prototype.deactiveBankerGrab=function(){this._banker_grab_bg.visible=!1},n.prototype.setBanker=function(){var e=this,n=t.AppFacade.getInstance().retrieveMediator(t.EffectMediator.NAME).getViewComponent(),i=new egret.Point;this.localToGlobal(this._banker_icon.x,this._banker_icon.y,i),n.globalToLocal(i.x,i.y,i);var o=new egret.Point;n.globalToLocal(t.ScreenAdaptMgr.getInstance().stageWidth/2,t.ScreenAdaptMgr.getInstance().stageHeight/2,o);var r=new egret.Bitmap;r.texture=RES.getRes("sw_banker_icon_png"),r.x=o.x,r.y=o.y,r.anchorOffsetX=r.width/2,r.anchorOffsetY=r.height/2,this.activeBankerGrab(),n.addChild(r);var a=5*t.PositionData.getInstance().bankerIconEffectTime/13,s=8*t.PositionData.getInstance().bankerIconEffectTime/13;a=Math.floor(a),s=Math.floor(s),egret.Tween.get(r).to({scaleX:2,scaleY:2},a,egret.Ease.sineInOut).wait(0).to({scaleX:1,scaleY:1,x:i.x,y:i.y},s,egret.Ease.sineInOut).call(function(){uniLib.DisplayUtils.removeFromParent(r),egret.Tween.removeTweens(r),r=null,e._banker_icon.visible=!0,e.deactiveBankerGrab()})},n.prototype.clearBanker=function(){this._banker_icon.visible=!1},n.prototype.showBanker=function(){this._banker_icon.visible=!0},n.prototype.destroy=function(){uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this)},n}(eui.Component);t.SeatPlayer=e,__reflect(e.prototype,"SWGAME.SeatPlayer")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(e){function n(i){var o=e.call(this,n.NAME,i)||this;return o.getViewComponent()&&(o.getViewComponent().addEventListener(t.UIEventConsts.ON_BET,o.uiHandle,o),o.getViewComponent().addEventListener(t.UIEventConsts.CONTINUE_BET,o.uiHandle,o),o.getViewComponent().addEventListener(t.UIEventConsts.FLY_CHIP_END,o.uiHandle,o),o.getViewComponent().addEventListener(t.UIEventConsts.SHOW_USER_INFO,o.uiHandle,o)),o}return __extends(n,e),n.prototype.getViewComponent=function(){return this.viewComponent},n.prototype.listNotificationInterests=function(){return[t.AppFacadeConst.USER_ENTER_ROOM,t.AppFacadeConst.EXIT_GAME,t.AppFacadeConst.SEND_CARD_READY,t.AppFacadeConst.ROB_BANKER,t.AppFacadeConst.BET_START,t.AppFacadeConst.BET_SUCCESS_MYSELF,t.AppFacadeConst.BET_SUCCESS_BRD,t.AppFacadeConst.OPEN_CHESS,t.AppFacadeConst.NEW_ROUND_START,t.AppFacadeConst.FLY_KANTOU_END,t.AppFacadeConst.NOTIFY_CHAT_RECORD,t.AppFacadeConst.RECONNECT,t.AppFacadeConst.SERVICE_COST,t.AppFacadeConst.UPDATE_USER_POINT,t.AppFacadeConst.RESET_ROOM_ENTER,t.AppFacadeConst.RESET_ROOM_ONE_PLAYER]},n.prototype.onRegister=function(){e.prototype.onRegister.call(this)},n.prototype.uiHandle=function(e){switch(e.type){case t.UIEventConsts.ON_BET:var n=e.data;this.sendBet(n);break;case t.UIEventConsts.CONTINUE_BET:var i=new Cmd.SWConBetCmd_C;this.sendNotification(t.AppFacadeConst.SEND_DATA,i,t.DataRequestCommand.GAME_DATA);break;case t.UIEventConsts.FLY_CHIP_END:console.warn("send:AppFacadeConst.FLY_CHIP_END"),this.sendNotification(t.AppFacadeConst.FLY_CHIP_END),this.getViewComponent().setMyUserData();break;case t.UIEventConsts.SHOW_USER_INFO:var o=new chessCommonLib.zm_UserInfoPanel(t.RoomInfo.getInstance().getMyUserInfo().uid);uniLib.PopUpMgr.addPopUp(o,null,!0,!0)}},n.prototype.handleNotification=function(e){var n=e.getBody();switch(e.getName()){case t.AppFacadeConst.USER_ENTER_ROOM:var i=t.RoomInfo.getInstance().betPointArr;this.getViewComponent().initChips(i),this.getViewComponent().setMyUserData();break;case t.AppFacadeConst.BET_START:this.getViewComponent().enableBetChess(),t.RoomInfo.getInstance().bankerUid!=uniLib.NetMgr.UID&&this.getViewComponent().defaultSelect();break;case t.AppFacadeConst.BET_SUCCESS_MYSELF:var o=n;this.getViewComponent().updateBetArea(o);var r=t.RoomInfo.getInstance().getMyUserInfo().seatId;this.getViewComponent().flyChip(o.betPoint,o.betChessId,r);break;case t.AppFacadeConst.BET_SUCCESS_BRD:var a=n;if(a.uid==uniLib.NetMgr.UID){var s=t.RoomInfo.getInstance().getUserVoByUid(a.uid),h=void 0;return h=1==t.RoomInfo.getInstance().roomType?s.chips-s.tmpBetReducePoint:s.diamond-s.tmpBetReducePoint,this.getViewComponent().updatePoints(h),void this.getViewComponent().updateBetTotal(s.tmpBetReducePoint)}this.getViewComponent().updateBetArea(a,!1);var c=t.RoomInfo.getInstance().getSeatIdByUserId(a.uid);this.getViewComponent().flyChip(a.betPoint,a.betChessId,c);break;case t.AppFacadeConst.OPEN_CHESS:uniLib.SoundMgr.instance.playSound(t.SoundConsts.BET_STOP_VOICE),this.getViewComponent().unTouchAbleBetChess();break;case t.AppFacadeConst.RESET_ROOM_ONE_PLAYER:case t.AppFacadeConst.NEW_ROUND_START:this.getViewComponent().resetAllBetChess();break;case t.AppFacadeConst.FLY_KANTOU_END:var _=t.RoomInfo.getInstance().hideChessId;this.getViewComponent().twinkleHideChess(_);break;case t.AppFacadeConst.RECONNECT:if(t.RoomInfo.getInstance().gameStatus==Cmd.GameStatus.Status_Bet){this.getViewComponent().enableBetChess(),this.getViewComponent().showFlyChip(n),this.getViewComponent().reSelectChip();var d=t.RoomInfo.getInstance().getMyUserInfo(),h=void 0;h=1==t.RoomInfo.getInstance().roomType?d.chips-d.tmpBetReducePoint:d.diamond-d.tmpBetReducePoint,this.getViewComponent().updatePoints(h),this.getViewComponent().updateBetTotal(d.tmpBetReducePoint)}break;case t.AppFacadeConst.SERVICE_COST:var p=n;p.uid==uniLib.NetMgr.UID&&(console.warn(n),this.getViewComponent().updatePoints(p.userPoint));break;case t.AppFacadeConst.UPDATE_USER_POINT:var u=n;if(u.uid!=uniLib.NetMgr.UID)return;var l=t.RoomInfo.getInstance().getUserVoByUid(u.uid),m=void 0;m=1==t.RoomInfo.getInstance().roomType?u.chips-l.tmpBetReducePoint:u.diamond-l.tmpBetReducePoint,this.getViewComponent().updatePoints(m);break;case t.AppFacadeConst.RESET_ROOM_ENTER:this.getViewComponent().resetAll()}},n.prototype.sendBet=function(e){var n=new Cmd.SWBetCmd_C;n.betChessId=e[0],n.betPoint=e[1],this.sendNotification(t.AppFacadeConst.SEND_DATA,n,t.DataRequestCommand.GAME_DATA)},n.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.getViewComponent().removeEventListener(t.UIEventConsts.ON_BET,this.uiHandle,this),this.getViewComponent().removeEventListener(t.UIEventConsts.CONTINUE_BET,this.uiHandle,this),this.getViewComponent().removeEventListener(t.UIEventConsts.FLY_CHIP_END,this.uiHandle,this),this.getViewComponent().removeEventListener(t.UIEventConsts.SHOW_USER_INFO,this.uiHandle,this)},n.NAME="SWBetMediator",n}(puremvc.Mediator);t.BetMediator=e,__reflect(e.prototype,"SWGAME.BetMediator")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(e){function n(t){var i=e.call(this,n.NAME,t)||this;return i.viewComponent,i}return __extends(n,e),n.prototype.getViewComponent=function(){return this.viewComponent},n.prototype.listNotificationInterests=function(){return[t.AppFacadeConst.NOTIFY_COMMON_CHAT,t.AppFacadeConst.BANKER_GRAB_BRD]},n.prototype.onRegister=function(){e.prototype.onRegister.call(this)},n.prototype.handleNotification=function(e){var n=e.getBody();switch(e.getName()){case t.AppFacadeConst.NOTIFY_COMMON_CHAT:var i=n,o=t.RoomInfo.getInstance().getSeatIdByUserId(i.uid);i.chatContent.predefId?this.getViewComponent().showCommonChat(o,i.chatContent.predefId):this.getViewComponent().showChatPop(o,i.chatContent.strWords);break;case t.AppFacadeConst.BANKER_GRAB_BRD:var r=n,a=t.RoomInfo.getInstance().getSeatIdByUserId(r.uid),s=void 0;s=r.bBanker?"抢庄":"不抢",this.getViewComponent().showChatPop(a,s)}},n.prototype.onRemove=function(){e.prototype.onRemove.call(this)},n.NAME="SWChatPopMediator",n}(puremvc.Mediator);t.ChatPopMediator=e,__reflect(e.prototype,"SWGAME.ChatPopMediator")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(e){function n(i){var o=e.call(this,n.NAME,i)||this;return o._hideChessPanel=[],o.viewComponent&&o.getViewComponent().addEventListener(t.UIEventConsts.FLY_KANTOU_END,o.uiHandle,o),o}return __extends(n,e),n.prototype.getViewComponent=function(){return this.viewComponent},n.prototype.listNotificationInterests=function(){return[t.AppFacadeConst.USER_ENTER_ROOM,t.AppFacadeConst.TIMER_START,t.AppFacadeConst.BANKER_GRAB_END,t.AppFacadeConst.HIDE_CHESS_START,t.AppFacadeConst.HIDE_CHESS_SUCCESS,t.AppFacadeConst.HIDE_CHESS_SUCCESS_BRD,t.AppFacadeConst.OPEN_CHESS,t.AppFacadeConst.SEND_GIFTS_NOTICE,t.AppFacadeConst.RECONNECT,t.AppFacadeConst.RESET_ROOM_ONE_PLAYER,t.AppFacadeConst.RESET_ROOM_ENTER,t.AppFacadeConst.NEW_ROUND_START,t.AppFacadeConst.SHOW_TIP,t.AppFacadeConst.SHOW_STATUS,t.AppFacadeConst.UN_SHOW_STATUS]},n.prototype.onRegister=function(){e.prototype.onRegister.call(this)},n.prototype.uiHandle=function(e){switch(e.type){case t.UIEventConsts.FLY_KANTOU_END:console.warn("send:AppFacadeConst.FLY_KANTOU_END"),this.sendNotification(t.AppFacadeConst.FLY_KANTOU_END),this.sendNotification(t.AppFacadeConst.SHOW_STATUS),uniLib.SoundMgr.instance.stopSound(t.SoundConsts.KAIZI_BG),uniLib.SoundMgr.instance.resumeBgMusic()}},n.prototype.handleNotification=function(e){var n=this,i=e.getBody(),o=t.RoomInfo.getInstance().bankerUid;switch(e.getName()){case t.AppFacadeConst.USER_ENTER_ROOM:t.RoomInfo.getInstance().hideChessId&&this.getViewComponent().showKantou(t.RoomInfo.getInstance().hideChessId),1==t.RoomInfo.getInstance().gameStatus&&t.RoomInfo.getInstance().userList.length<5&&this.getViewComponent().showTip();break;case t.AppFacadeConst.NEW_ROUND_START:this.getViewComponent().closeTip();break;case t.AppFacadeConst.TIMER_START:var r=e.getBody();this.getViewComponent().startTimer(Math.ceil(r/1e3));break;case t.AppFacadeConst.BANKER_GRAB_END:this.getViewComponent().clearTimer();break;case t.AppFacadeConst.RECONNECT:if(t.RoomInfo.getInstance().gameStatus==Cmd.GameStatus.Status_HindCard&&t.RoomInfo.getInstance().enterType!=t.GameEnum.EnterType.InGameEnter){if(o!=uniLib.NetMgr.UID)return;var a=t.RoomInfo.getInstance().curOperateTime;this._hideChessPanel.push(new t.HideChessPanel(a)),uniLib.PopUpMgr.addPopUp(this._hideChessPanel[this._hideChessPanel.length-1],null,!0,!0,!1,uniLib.PopUpEffect.CENTER,0,0,uniLib.UserInfo.uid),this._hideChessPanel[this._hideChessPanel.length-1].addEventListener(t.UIEventConsts.HIDE_CHESS_CONFIRM,this.onHideChess,this)}t.RoomInfo.getInstance().gameStatus==Cmd.GameStatus.Status_Bet&&this.getViewComponent().showHideChessAnimation();break;case t.AppFacadeConst.HIDE_CHESS_START:if(o!=uniLib.NetMgr.UID)return;var s=t.RoomInfo.getInstance().hideCardTimeout;this._hideChessPanel.push(new t.HideChessPanel(s)),uniLib.PopUpMgr.addPopUp(this._hideChessPanel[this._hideChessPanel.length-1],null,!0,!0,!1,uniLib.PopUpEffect.CENTER,0,0,uniLib.UserInfo.uid),this._hideChessPanel[this._hideChessPanel.length-1].addEventListener(t.UIEventConsts.HIDE_CHESS_CONFIRM,this.onHideChess,this);break;case t.AppFacadeConst.HIDE_CHESS_SUCCESS:o==uniLib.NetMgr.UID&&this.closeHideChessPanel();break;case t.AppFacadeConst.HIDE_CHESS_SUCCESS_BRD:o==uniLib.NetMgr.UID&&this.closeHideChessPanel(),this.getViewComponent().startHideChessAnimation();break;case t.AppFacadeConst.OPEN_CHESS:this._openChessTimer=egret.setTimeout(function(){uniLib.SoundMgr.instance.playSound2(t.SoundConsts.KAIZI_BG);var e=t.RoomInfo.getInstance().hideChessId;n.getViewComponent().startOpenChessAnimation(e),n._soundKaiziTimer=egret.setTimeout(function(){uniLib.SoundMgr.instance.playSound(t.SoundConsts.KAIZI_OPEN),n._soundKaiziTimer=null},n,1750),n._openChessTimer=null},this,t.PositionData.getInstance().totalNotifyTime);break;case t.AppFacadeConst.SEND_GIFTS_NOTICE:var h=i;this.getViewComponent().sendGift(h.giftsId,h.toUid,h.fromUid);break;case t.AppFacadeConst.RESET_ROOM_ONE_PLAYER:case t.AppFacadeConst.RESET_ROOM_ENTER:this._hideChessPanel.length&&this.closeHideChessPanel(),this._openChessTimer&&(egret.clearTimeout(this._openChessTimer),this._openChessTimer=null),this._soundKaiziTimer&&(egret.clearTimeout(this._soundKaiziTimer),this._soundKaiziTimer=null),this.getViewComponent().clearAll(),this.getViewComponent().showKantou(t.RoomInfo.getInstance().hideChessId),this.getViewComponent().removeStatus();break;case t.AppFacadeConst.SHOW_TIP:this.getViewComponent().showTip();break;case t.AppFacadeConst.SHOW_STATUS:this.getViewComponent().showStatus(t.RoomInfo.getInstance().gameStatus);break;case t.AppFacadeConst.UN_SHOW_STATUS:this.getViewComponent().removeStatus()}},n.prototype.onHideChess=function(e){var n=e.data,i=new Cmd.SWHideCardCmd_C;i.hideChessId=n,this.sendNotification(t.AppFacadeConst.SEND_DATA,i,t.DataRequestCommand.GAME_DATA)},n.prototype.closeHideChessPanel=function(){if(this._hideChessPanel.length){try{for(var e=__values(this._hideChessPanel),n=e.next();!n.done;n=e.next()){var i=n.value;i.destroy(),uniLib.PopUpMgr.removePopUp(i),i.removeEventListener(t.UIEventConsts.HIDE_CHESS_CONFIRM,this.onHideChess,this)}}catch(o){r={error:o}}finally{try{n&&!n.done&&(a=e["return"])&&a.call(e)}finally{if(r)throw r.error}}this._hideChessPanel=[];var r,a}},n.prototype.onRemove=function(){e.prototype.onRemove.call(this),this._hideChessPanel.length&&this.closeHideChessPanel(),this.getViewComponent().removeEventListener(t.UIEventConsts.FLY_KANTOU_END,this.uiHandle,this),this._openChessTimer&&(egret.clearTimeout(this._openChessTimer),this._openChessTimer=null),this._soundKaiziTimer&&(egret.clearTimeout(this._soundKaiziTimer),this._soundKaiziTimer=null)},n.NAME="SWEffectMediator",n}(puremvc.Mediator);t.EffectMediator=e,__reflect(e.prototype,"SWGAME.EffectMediator")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(e){function n(t){return e.call(this,n.NAME,t)||this}return __extends(n,e),n.prototype.getViewComponent=function(){return this.viewComponent},n.prototype.listNotificationInterests=function(){return[t.AppFacadeConst.USER_ENTER_ROOM,t.AppFacadeConst.NEW_ROUND_START,t.AppFacadeConst.BANKER_GRAB_END,t.AppFacadeConst.FLY_KANTOU_END,t.AppFacadeConst.FLY_CHIP_END,t.AppFacadeConst.RESET_ROOM_ONE_PLAYER,t.AppFacadeConst.DOWN_BANKER,t.AppFacadeConst.RESET_ROOM_ENTER]
},n.prototype.onRegister=function(){e.prototype.onRegister.call(this)},n.prototype.uiHandle=function(e){switch(e.type){case t.UIEventConsts.SHARE_GAME:this.showShare();break;case t.UIEventConsts.ADVANCE_START:}},n.prototype.handleNotification=function(e){var n=e.getBody(),i=this.getViewComponent();switch(e.getName()){case t.AppFacadeConst.USER_ENTER_ROOM:i.updateRoomInfoText(n.roomInfo),t.RoomInfo.getInstance().hideChessIdLog.length&&i.updatePrevHideChess(t.RoomInfo.getInstance().hideChessIdLog);break;case t.AppFacadeConst.FLY_CHIP_END:i.showResultPanel(t.RoomInfo.getInstance().userResult);break;case t.AppFacadeConst.BANKER_GRAB_END:i.updateBankerRoundLeft(t.RoomInfo.getInstance().bankerLeftRound);break;case t.AppFacadeConst.NEW_ROUND_START:i.updateBankerRoundLeft(t.RoomInfo.getInstance().bankerLeftRound),i.closeResultPanel();break;case t.AppFacadeConst.FLY_KANTOU_END:i.updatePrevHideChess(t.RoomInfo.getInstance().hideChessIdLog);break;case t.AppFacadeConst.RESET_ROOM_ONE_PLAYER:i.updateBankerRoundLeft(t.RoomInfo.getInstance().bankerLeftRound),i.updatePrevHideChess(t.RoomInfo.getInstance().hideChessIdLog),i.closeResultPanel();break;case t.AppFacadeConst.DOWN_BANKER:i.updateBankerRoundLeft(0),t.RoomInfo.getInstance().bankerUid==uniLib.NetMgr.UID&&chessCommonLib.ModuleMgr.getInstance().showConfirm("你的筹码不足上庄，请及时补充筹码。","系统提示","",function(){},null,null,this);break;case t.AppFacadeConst.RESET_ROOM_ENTER:i.closeResultPanel()}},n.prototype.showShare=function(){var e=new uniLib.WXShareVo;e.shareWay=0,t.DataCache.platParam&&(e.title=t.DataCache.platParam.shareInfo.title,e.description=t.DataCache.platParam.shareInfo.content,e.webpageUrl=t.DataCache.platParam.shareInfo.webPageUrl),uniLib.ZQGameSdk.share(e,null,this)},n.prototype.showTotal=function(t){egret.Tween.removeTweens(this),this.showResultPanel(t)},n.prototype.showResultPanel=function(t){},n.prototype.onRemove=function(){e.prototype.onRemove.call(this)},n.NAME="SWGameMediator",n}(puremvc.Mediator);t.GameMediator=e,__reflect(e.prototype,"SWGAME.GameMediator")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(e){function n(i){var o=e.call(this,n.NAME,i)||this;return o.getViewComponent()&&(o.getViewComponent().addEventListener(t.UIEventConsts.EXIT_GAME,o.uiHandle,o),o.getViewComponent().addEventListener(t.UIEventConsts.SHOW_SETTING,o.uiHandle,o),o.getViewComponent().addEventListener(t.UIEventConsts.SHOW_HELP,o.uiHandle,o),o.getViewComponent().addEventListener(t.UIEventConsts.SHOW_SHORT_CHAT,o.uiHandle,o)),o}return __extends(n,e),n.prototype.getViewComponent=function(){return this.viewComponent},n.prototype.listNotificationInterests=function(){return[t.AppFacadeConst.READY_SEND,t.AppFacadeConst.USER_ENTER_ROOM,t.AppFacadeConst.EXIT_GAME,t.AppFacadeConst.SEND_CARD_READY,t.AppFacadeConst.ROB_BANKER,t.AppFacadeConst.SHOW_RESULT,t.AppFacadeConst.SHOW_TOTAL_RESULT,t.AppFacadeConst.NOTIFY_CHAT_RECORD,t.AppFacadeConst.NEW_ROUND_START,t.AppFacadeConst.BET_SUCCESS_BRD,t.AppFacadeConst.RESET_ROOM_ENTER,t.AppFacadeConst.RESET_ROOM_ONE_PLAYER,t.AppFacadeConst.RECONNECT]},n.prototype.onRegister=function(){e.prototype.onRegister.call(this)},n.prototype.uiHandle=function(e){switch(e.type){case t.UIEventConsts.SHOW_SETTING:this.showSetting();break;case t.UIEventConsts.SHOW_HELP:this.showHelp();break;case t.UIEventConsts.SHOW_SHORT_CHAT:this.showShortChat();break;case t.UIEventConsts.EXIT_GAME:var n=new Cmd.SWLeaveRoomCmd_C;n.state=0,this.sendNotification(t.AppFacadeConst.SEND_DATA,n,t.DataRequestCommand.GAME_DATA)}},n.prototype.handleNotification=function(e){var n=e.getBody();switch(e.getName()){case t.AppFacadeConst.EXIT_GAME:this.exitGame();break;case t.AppFacadeConst.BET_SUCCESS_BRD:var i=n;if(i.uid!=uniLib.NetMgr.UID)return;this.getViewComponent().updateBetPanel();break;case t.AppFacadeConst.NEW_ROUND_START:case t.AppFacadeConst.RESET_ROOM_ENTER:case t.AppFacadeConst.RESET_ROOM_ONE_PLAYER:this.getViewComponent().clearAll();break;case t.AppFacadeConst.RECONNECT:this.getViewComponent().updateBetPanel()}},n.prototype.showSetting=function(){var t=["sw_bg_1_jpg"],e=new chessCommonLib.zm_SetPanel(t);e.disableBtn(chessCommonLib.zm_SetPanelBtnType.BtnLocalSound),e.addEventListener(chessCommonLib.zm_SetPanel.SetPanelEvtOccur,this.handleSetPanelEvt,this),uniLib.PopUpMgr.addPopUp(e,null,!0,!0,0,uniLib.PopUpEffect.CENTER,0,0,uniLib.UserInfo.uid)},n.prototype.showHelp=function(){var e="";RES.hasRes("help_4214_txt")&&(e=RES.getRes("help_4214_txt"));var n=t.RoomInfo.getInstance().getBasePoint(),i=t.RoomInfo.getInstance().enterPoint,o=t.RoomInfo.getInstance().leavePoint,r="底注:"+n+"  入场:"+i+"  离场:"+o,a=new chessCommonLib.zm_HelpPanel("水蛙规则",r,e);uniLib.PopUpMgr.addPopUp(a,null,!0,!0,0,uniLib.PopUpEffect.CENTER)},n.prototype.handleSetPanelEvt=function(e){switch(e.data.evtType){case chessCommonLib.zm_SetPanel.SetPanelEvtTypeMusicOff:console.log("音乐关"),uniLib.SoundMgr.instance.musicVolume=0,uniLib.SoundMgr.instance.musicOpen=!1;break;case chessCommonLib.zm_SetPanel.SetPanelEvtTypeMusicOn:console.log("音乐开"),uniLib.SoundMgr.instance.musicVolume=.7,uniLib.SoundMgr.instance.musicOpen=!0,uniLib.SoundMgr.instance.playBgMusic([t.SoundConsts.BACKGROUND]);break;case chessCommonLib.zm_SetPanel.SetPanelEvtTypeSoundOff:console.log("音效关"),uniLib.SoundMgr.instance.soundVolume=0,uniLib.SoundMgr.instance.soundOpen=!1;break;case chessCommonLib.zm_SetPanel.SetPanelEvtTypeSoundOn:console.log("音效开"),uniLib.SoundMgr.instance.soundVolume=1,uniLib.SoundMgr.instance.soundOpen=!0;break;case chessCommonLib.zm_SetPanel.SetPanelEvtTypeLocalSoundOff:console.log("方言关");break;case chessCommonLib.zm_SetPanel.SetPanelEvtTypeLocalSoundOn:console.log("方言开");break;case chessCommonLib.zm_SetPanel.SetPanelEvtChBg:}},n.prototype.exitGame=function(){t.DataCache.gameInfo&&t.DataCache.gameInfo.defaultOrientation!=egret.OrientationMode.LANDSCAPE&&(uniLib.ScreenUtils.landscape=!1),uniLib.GameModuleUtils.ExitGame(!1),RES.destroyRes("zmshuiwa",!0),uniLib.ResUtils.clearResConfigByGroupName(["zmshuiwa"]),t.DataCache.destroyResOnExit},n.prototype.showShortChat=function(){var e=new chessCommonLib.zm_ChatPanel(t.GameData.getInstance().ShortTalkArr);uniLib.PopUpMgr.addPopUp(e,null,!0,!0,0,uniLib.PopUpEffect.CENTER,0,0,uniLib.NetMgr.UID)},n.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.getViewComponent().removeEventListener(t.UIEventConsts.EXIT_GAME,this.uiHandle,this),this.getViewComponent().removeEventListener(t.UIEventConsts.SHOW_SETTING,this.uiHandle,this),this.getViewComponent().removeEventListener(t.UIEventConsts.SHOW_HELP,this.uiHandle,this)},n.NAME="SWMenuMediator",n}(puremvc.Mediator);t.MenuMediator=e,__reflect(e.prototype,"SWGAME.MenuMediator")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(e){function n(t){return e.call(this,n.NAME,t)||this}return __extends(n,e),n.prototype.getViewComponent=function(){return this.viewComponent},n.prototype.listNotificationInterests=function(){return[t.AppFacadeConst.BANKER_GRAB_BEGIN,t.AppFacadeConst.BET_START,t.AppFacadeConst.OPEN_CHESS,t.AppFacadeConst.HIDE_CHESS_START,t.AppFacadeConst.HIDE_CHESS_SUCCESS_BRD,t.AppFacadeConst.RECONNECT,t.AppFacadeConst.NEW_ROUND_START,t.AppFacadeConst.FREE_TIME,t.AppFacadeConst.FLY_CHIP_END,t.AppFacadeConst.RESET_ROOM_ENTER,t.AppFacadeConst.RESET_ROOM_ONE_PLAYER]},n.prototype.onRegister=function(){e.prototype.onRegister.call(this)},n.prototype.uiHandle=function(t){},n.prototype.handleNotification=function(e){e.getBody();switch(e.getName()){case t.AppFacadeConst.BANKER_GRAB_BEGIN:if(t.RoomInfo.getInstance().enterType==t.GameEnum.EnterType.InGameEnter){var n=t.GameData.getInstance().getNextRoundWaitTime(t.RoomInfo.getInstance().gameStatus);this.getViewComponent().startTimer(n);break}this.isInFreeTime&&(this.getViewComponent().freeTimeEnd(),this.isInFreeTime=!1),t.RoomInfo.getInstance().rebanker?this.getViewComponent().reBanker():this.getViewComponent().beginBanker();break;case t.AppFacadeConst.BET_START:if(uniLib.SoundMgr.instance.pauseBgMusic(),uniLib.SoundMgr.instance.playSound(t.SoundConsts.BET_BEGIN_VOICE),uniLib.SoundMgr.instance.playSound2(t.SoundConsts.BET_BG),t.RoomInfo.getInstance().enterType==t.GameEnum.EnterType.InGameEnter){var n=t.GameData.getInstance().getNextRoundWaitTime(t.RoomInfo.getInstance().gameStatus);this.getViewComponent().startTimer(Math.floor(n/1e3));break}this.getViewComponent().beginBet();break;case t.AppFacadeConst.OPEN_CHESS:if(uniLib.SoundMgr.instance.stopSound(t.SoundConsts.BET_BG),t.RoomInfo.getInstance().enterType==t.GameEnum.EnterType.InGameEnter){var n=t.GameData.getInstance().getNextRoundWaitTime(t.RoomInfo.getInstance().gameStatus);this.getViewComponent().startTimer(Math.floor(n/1e3));break}this.getViewComponent().stopBet();break;case t.AppFacadeConst.HIDE_CHESS_START:if(t.RoomInfo.getInstance().enterType==t.GameEnum.EnterType.InGameEnter){var n=t.GameData.getInstance().getNextRoundWaitTime(t.RoomInfo.getInstance().gameStatus);this.getViewComponent().startTimer(Math.floor(n/1e3));break}this.isInFreeTime&&(this.getViewComponent().freeTimeEnd(),this.isInFreeTime=!1),t.RoomInfo.getInstance().bankerUid!=uniLib.NetMgr.UID&&this.getViewComponent().bankerHideChessBegin();break;case t.AppFacadeConst.HIDE_CHESS_SUCCESS_BRD:if(t.RoomInfo.getInstance().enterType==t.GameEnum.EnterType.InGameEnter)break;t.RoomInfo.getInstance().bankerUid!=uniLib.NetMgr.UID&&this.getViewComponent().bankeHideChessEnd();break;case t.AppFacadeConst.RECONNECT:if(t.RoomInfo.getInstance().enterType==t.GameEnum.EnterType.InGameEnter){this.isWaitingNextRound=!0;var i=t.GameData.getInstance().getNextRoundWaitTime(t.RoomInfo.getInstance().gameStatus);console.warn(i),i=Math.floor(i/1e3),this.getViewComponent().waitNextRound(i);break}t.RoomInfo.getInstance().gameStatus==Cmd.GameStatus.Status_HindCard&&t.RoomInfo.getInstance().bankerUid!=uniLib.NetMgr.UID&&this.getViewComponent().bankerHideChessBegin(),t.RoomInfo.getInstance().gameStatus==Cmd.GameStatus.Status_LeisureTime&&(this.getViewComponent().freeTimeStart(),this.isInFreeTime=!0);break;case t.AppFacadeConst.FREE_TIME:this.isWaitingNextRound&&(this.getViewComponent().hideWaitNextRound(),this.isWaitingNextRound=!1),this.getViewComponent().freeTimeStart(),this.isInFreeTime=!0;break;case t.AppFacadeConst.FLY_CHIP_END:case t.AppFacadeConst.NEW_ROUND_START:this.isWaitingNextRound&&(this.getViewComponent().hideWaitNextRound(),this.isWaitingNextRound=!1);break;case t.AppFacadeConst.RESET_ROOM_ONE_PLAYER:case t.AppFacadeConst.RESET_ROOM_ENTER:this.getViewComponent().clearAll()}},n.prototype.onRemove=function(){e.prototype.onRemove.call(this)},n.NAME="SWNotifyMediator",n}(puremvc.Mediator);t.NotifyMediator=e,__reflect(e.prototype,"SWGAME.NotifyMediator")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(e){function n(i){var o=e.call(this,n.NAME,i)||this;return o.viewComponent&&(o.getViewComponent().addEventListener(t.UIEventConsts.ACTION_NO_GRAB_BANKER,o.uiHandle,o),o.getViewComponent().addEventListener(t.UIEventConsts.ACTION_GRAB_BANKER,o.uiHandle,o)),o}return __extends(n,e),n.prototype.getViewComponent=function(){return this.viewComponent},n.prototype.listNotificationInterests=function(){return[t.AppFacadeConst.BANKER_GRAB_BEGIN,t.AppFacadeConst.BANKER_GRAB_CONFIRM,t.AppFacadeConst.BANKER_GRAB_END,t.AppFacadeConst.RECONNECT,t.AppFacadeConst.CLOSE_BANKER_GRAB,t.AppFacadeConst.RESET_ROOM_ONE_PLAYER,t.AppFacadeConst.RESET_ROOM_ENTER]},n.prototype.onRegister=function(){e.prototype.onRegister.call(this)},n.prototype.uiHandle=function(e){switch(e.type){case t.UIEventConsts.ACTION_NO_GRAB_BANKER:var n=new Cmd.SWBankerCmd_C;n.bBanker=!1,this.sendNotification(t.AppFacadeConst.SEND_DATA,n,t.DataRequestCommand.GAME_DATA);break;case t.UIEventConsts.ACTION_GRAB_BANKER:var i=new Cmd.SWBankerCmd_C;i.bBanker=!0,this.sendNotification(t.AppFacadeConst.SEND_DATA,i,t.DataRequestCommand.GAME_DATA);break;case t.UIEventConsts.GM_SELECT_HEAPCARD:break;case t.UIEventConsts.READY:break;case t.UIEventConsts.EXIT_GAME:}},n.prototype.handleNotification=function(e){var n=this,i=e.getBody();switch(e.getName()){case t.AppFacadeConst.BANKER_GRAB_BEGIN:var o=t.PositionData.getInstance().totalNotifyTime;t.RoomInfo.getInstance().rebanker&&(o+=t.PositionData.getInstance().outTime),this._timer=egret.setTimeout(function(){n.getViewComponent().openGrabBanker(),n._timer=null},this,o);break;case t.AppFacadeConst.CLOSE_BANKER_GRAB:this.getViewComponent().closeGrabBanker();break;case t.AppFacadeConst.BANKER_GRAB_CONFIRM:this.getViewComponent().closeGrabBanker();break;case t.AppFacadeConst.BANKER_GRAB_END:this.getViewComponent().closeGrabBanker();break;case t.AppFacadeConst.RECONNECT:if(t.RoomInfo.getInstance().enterType==t.GameEnum.EnterType.InGameEnter)return;if(t.RoomInfo.getInstance().gameStatus==Cmd.GameStatus.Status_Banker){var r=i.userRoundInfo;try{for(var a=__values(r),s=a.next();!s.done;s=a.next()){var h=s.value;h.uid!=uniLib.NetMgr.UID||h.bBanker||this.getViewComponent().openGrabBanker()}}catch(c){_={error:c}}finally{try{s&&!s.done&&(d=a["return"])&&d.call(a)}finally{if(_)throw _.error}}}break;case t.AppFacadeConst.RESET_ROOM_ONE_PLAYER:case t.AppFacadeConst.RESET_ROOM_ENTER:this._timer&&(egret.clearTimeout(this._timer),this._timer=null),this.getViewComponent().closeGrabBanker()}var _,d},n.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.getViewComponent().removeEventListener(t.UIEventConsts.ACTION_NO_GRAB_BANKER,this.uiHandle,this),this.getViewComponent().removeEventListener(t.UIEventConsts.ACTION_GRAB_BANKER,this.uiHandle,this)},n.NAME="SWOperateMediator",n}(puremvc.Mediator);t.OperateMediator=e,__reflect(e.prototype,"SWGAME.OperateMediator")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(e){function n(i){var o=e.call(this,n.NAME,i)||this;return o.viewComponent&&o.viewComponent.addEventListener(t.UIEventConsts.SHOW_USER_INFO,o.uiHandle,o),o}return __extends(n,e),n.prototype.getViewComponent=function(){return this.viewComponent},n.prototype.listNotificationInterests=function(){return[t.AppFacadeConst.USER_ENTER_ROOM,t.AppFacadeConst.PLAYER_ENTER_ROOM,t.AppFacadeConst.PLAYER_LEFT,t.AppFacadeConst.EXIT_GAME,t.AppFacadeConst.BANKER_GRAB_ADD,t.AppFacadeConst.BANKER_GRAB_END,t.AppFacadeConst.RESET_ROOM_ONE_PLAYER,t.AppFacadeConst.FLY_CHIP_END,t.AppFacadeConst.NEW_ROUND_START,t.AppFacadeConst.NOTIFY_CHAT_RECORD,t.AppFacadeConst.RECONNECT,t.AppFacadeConst.SERVICE_COST,t.AppFacadeConst.DOWN_BANKER,t.AppFacadeConst.UPDATE_USER_POINT,t.AppFacadeConst.BET_SUCCESS_BRD,t.AppFacadeConst.RESET_ROOM_ENTER]},n.prototype.onRegister=function(){e.prototype.onRegister.call(this)},n.prototype.uiHandle=function(e){switch(e.type){case t.UIEventConsts.SHOW_USER_INFO:var n=e.data,i=t.RoomInfo.getInstance().getUserVoBySeatId(n);if(!i)return;var o=new chessCommonLib.zm_UserInfoPanel(i.uid);uniLib.PopUpMgr.addPopUp(o,null,!0,!0)}},n.prototype.handleNotification=function(e){var n=this,i=e.getBody();switch(e.getName()){case t.AppFacadeConst.USER_ENTER_ROOM:var o=t.RoomInfo.getInstance().userList;try{for(var r=__values(o),a=r.next();!a.done;a=r.next()){var s=a.value;this.getViewComponent().addUser(s)}}catch(h){B={error:h}}finally{try{a&&!a.done&&(G=r["return"])&&G.call(r)}finally{if(B)throw B.error}}t.RoomInfo.getInstance().bankerSeatId&&this.getViewComponent().showBanker(t.RoomInfo.getInstance().bankerSeatId);break;case t.AppFacadeConst.PLAYER_ENTER_ROOM:var c=i,_=c.uid,d=t.RoomInfo.getInstance().getUserVoByUid(_);this.getViewComponent().addUser(d);break;case t.AppFacadeConst.PLAYER_LEFT:var p=i;this.getViewComponent().removeUser(p);break;case t.AppFacadeConst.BANKER_GRAB_ADD:break;case t.AppFacadeConst.BANKER_GRAB_END:var u=t.RoomInfo.getInstance().bankerSeatId;if(!u)return;this.getViewComponent().bankerGrabEffectStart(),this.bankerEffectTimer=egret.setTimeout(function(){n.getViewComponent().endEffectLoop(),n.getViewComponent().setBanker(u)},this,t.PositionData.getInstance().grabBankerEffectTime);break;case t.AppFacadeConst.BET_SUCCESS_BRD:var l=i,m=t.RoomInfo.getInstance().getUserVoByUid(l.uid),f=m.seatId,C=void 0;C=1==t.RoomInfo.getInstance().roomType?m.chips-m.tmpBetReducePoint:m.diamond-m.tmpBetReducePoint,console.warn(C),this.getViewComponent().updateUserPointsSingle(f,C);break;case t.AppFacadeConst.RESET_ROOM_ONE_PLAYER:this.getViewComponent().clearBanker();break;case t.AppFacadeConst.FLY_CHIP_END:this.getViewComponent().updateUserPoints(t.RoomInfo.getInstance().userResult);break;case t.AppFacadeConst.NEW_ROUND_START:t.RoomInfo.getInstance().bankerUid||this.getViewComponent().clearBanker();break;case t.AppFacadeConst.RECONNECT:if(t.RoomInfo.getInstance().gameStatus==Cmd.GameStatus.Status_Banker){var E=i.userRoundInfo;try{for(var S=__values(E),g=S.next();!g.done;g=S.next()){var y=g.value;y.uid==uniLib.NetMgr.UID&&!y.bBanker}}catch(A){P={error:A}}finally{try{g&&!g.done&&(W=S["return"])&&W.call(S)}finally{if(P)throw P.error}}}break;case t.AppFacadeConst.SERVICE_COST:var v=i,I=t.RoomInfo.getInstance().getSeatIdByUserId(v.uid);this.getViewComponent().updateUserPointsSingle(I,v.userPoint);break;case t.AppFacadeConst.DOWN_BANKER:this.getViewComponent().clearBanker();break;case t.AppFacadeConst.UPDATE_USER_POINT:var T=i,R=t.RoomInfo.getInstance().getUserVoByUid(T.uid),b=R.seatId,M=void 0;M=1==t.RoomInfo.getInstance().roomType?T.chips-R.tmpBetReducePoint:T.diamond-R.tmpBetReducePoint,this.getViewComponent().updateUserPointsSingle(b,M);break;case t.AppFacadeConst.RESET_ROOM_ENTER:this.getViewComponent().resetAll()}var B,G,P,W},n.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.bankerEffectTimer&&egret.clearTimeout(this.bankerEffectTimer),this.viewComponent.removeEventListener(t.UIEventConsts.SHOW_USER_INFO,this.uiHandle,this)},n.NAME="SWSeatPlayMediator",n}(puremvc.Mediator);t.SeatPlayMediator=e,__reflect(e.prototype,"SWGAME.SeatPlayMediator")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(e){function n(t){var i=e.call(this,n.NAME,t)||this;return i.viewComponent,i}return __extends(n,e),n.prototype.listNotificationInterests=function(){return[t.AppFacadeConst.READY_SEND,t.AppFacadeConst.USER_ENTER_ROOM,t.AppFacadeConst.EXIT_GAME,t.AppFacadeConst.SEND_CARD_READY,t.AppFacadeConst.ROB_BANKER,t.AppFacadeConst.SHOW_RESULT,t.AppFacadeConst.SHOW_TOTAL_RESULT,t.AppFacadeConst.NOTIFY_CHAT_RECORD]},n.prototype.onRegister=function(){e.prototype.onRegister.call(this)},n.prototype.uiHandle=function(e){switch(e.type){case t.UIEventConsts.GM_SELECT_CARDS:break;case t.UIEventConsts.GM_SELECT_HANDCARD:break;case t.UIEventConsts.GM_SELECT_HEAPCARD:break;case t.UIEventConsts.READY:break;case t.UIEventConsts.EXIT_GAME:}},n.prototype.handleNotification=function(e){e.getBody();switch(e.getName()){case t.AppFacadeConst.PLAYER_LEFT:break;case t.AppFacadeConst.RESET_RESULT_PANEL:break;case t.AppFacadeConst.GAME_START:break;case t.AppFacadeConst.DISS_RESULT_NOTICE:break;case t.AppFacadeConst.DISS_REQUEST_NOTICE:break;case t.AppFacadeConst.DISS_NOTICE:break;case t.AppFacadeConst.NOTIFY_CHAT_RECORD:break;case t.AppFacadeConst.SHOW_RESULT:}},n.prototype.onRemove=function(){e.prototype.onRemove.call(this)},n.NAME="SWVoiceMediator",n}(puremvc.Mediator);t.VoiceMediator=e,__reflect(e.prototype,"SWGAME.VoiceMediator")}(SWGAME||(SWGAME={}));var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,n,i){function o(t){e.call(i,t)}function r(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),n.call(i))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(t,o,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var SWGAME;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t._chipRealArr=[],t._scale=1.2,t._chipFlyArr=[],t._chipFlyTimerArr=[],t.skinName=sw_BetVc,t}return __extends(n,e),n.prototype.initUI=function(){this._chip_hide_1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.uiHandle,this,!1),this._chip_hide_2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.uiHandle,this,!1),this._chip_hide_3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.uiHandle,this,!1),this._chip_hide_4.addEventListener(egret.TouchEvent.TOUCH_TAP,this.uiHandle,this,!1),this._chip_hide_5.addEventListener(egret.TouchEvent.TOUCH_TAP,this.uiHandle,this,!1),this._chip_hide_group.alpha=0,this._chipRealArr=[this.chip_real_1,this.chip_real_2,this.chip_real_3,this.chip_real_4,this.chip_real_5],this._betChessArr=[null,this._betChessIcon_1,this._betChessIcon_2,this._betChessIcon_3,this._betChessIcon_4,this._betChessIcon_5,this._betChessIcon_6,this._betChessIcon_7,this._betChessIcon_8,this._betChessIcon_9,this._betChessIcon_10,this._betChessIcon_11,this._betChessIcon_12];for(var e=1;e<this._betChessArr.length;e++){var n=this._betChessArr[e];n.setChess(e),n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.betChessHandle,this,!1),n.addEventListener(t.UIEventConsts.CHESS_TWINKLE_END,this.twinkleEnd,this,!1)}this._bet_panel_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBetPanelBtn,this,!1),this._my_bet_total_txt.text="0"},n.prototype.uiHandle=function(t){var e=t.currentTarget;switch(e){case this._chip_hide_1:this.chipActive(this._chipRealArr,this.chip_real_1);break;case this._chip_hide_2:this.chipActive(this._chipRealArr,this.chip_real_2);break;case this._chip_hide_3:this.chipActive(this._chipRealArr,this.chip_real_3);break;case this._chip_hide_4:this.chipActive(this._chipRealArr,this.chip_real_4);break;case this._chip_hide_5:this.chipActive(this._chipRealArr,this.chip_real_5)}},n.prototype.onBetPanelBtn=function(){uniLib.Global.dispatchEvent(t.UIEventConsts.BET_INFO_OPEN,null,!1)},n.prototype.betChessHandle=function(e){var n=e.currentTarget;try{for(var i=__values(this._betChessArr),o=i.next();!o.done;o=i.next()){var r=o.value;r&&r.DeActive()}}catch(a){h={error:a}}finally{try{o&&!o.done&&(c=i["return"])&&c.call(i)}finally{if(h)throw h.error}}n.Active();var s=n.chessId;if(this._selectedBetPoint){this.dispatchEventWith(t.UIEventConsts.ON_BET,!1,[s,this._selectedBetPoint]),console.log(s,this._selectedBetPoint);var h,c}},n.prototype.twinkleEnd=function(){this.roundEndFlyChipToBanker()},n.prototype.twinkleHideChess=function(e){this._betChessArr[e].twinkleHideChess(),t.RoomInfo.getInstance().bankerUid!=uniLib.NetMgr.UID&&(this.isWin()?uniLib.SoundMgr.instance.playSound(t.SoundConsts.WIN):uniLib.SoundMgr.instance.playSound(t.SoundConsts.FAIL))},n.prototype.chipScale=function(t,e){try{for(var n=__values(t),i=n.next();!i.done;i=n.next()){var o=i.value;o.scaleX=o.scaleY=1}}catch(r){a={error:r}}finally{try{i&&!i.done&&(s=n["return"])&&s.call(n)}finally{if(a)throw a.error}}e.scaleX=e.scaleY=this._scale;var a,s},n.prototype.chipActive=function(t,e){this.chipScale(t,e);try{for(var n=__values(t),i=n.next();!i.done;i=n.next()){var o=i.value;o.deActive()}}catch(r){a={error:r}}finally{try{i&&!i.done&&(s=n["return"])&&s.call(n)}finally{if(a)throw a.error}}e.OnClick();var a,s},n.prototype.initChips=function(e){if(5!=e.length)throw console.error(e),new Error("BetVc:筹码数量不正确!不等于5");this._betPointArr=e;for(var n=0;n<this._chipRealArr.length;n++)this._chipRealArr[n].initChip(e[n]),this._chipRealArr[n].addEventListener(t.UIEventConsts.SELECT_CHIP,this.onSelectChip,this)},n.prototype.setMyUserData=function(){var e=t.RoomInfo.getInstance().getMyUserInfo();this._my_nickName.text="昵称："+e.nickName,1==t.RoomInfo.getInstance().roomType?(this._my_point.text=t.EffectFactory.getInstance().handleNum(e.chips,2),this._unit_golden.visible=!0):(this._my_point.text=t.EffectFactory.getInstance().handleNum(e.diamond,2),this._unit_diamond.visible=!0),this._my_score.text="成绩："+t.EffectFactory.getInstance().handleNum(e.score,2),t.HeadLoader.getInstance().load(e.headUrl,this.onLoadSuccess,this.onLoadError,this)},n.prototype.updatePoints=function(e){this._my_point.text=t.EffectFactory.getInstance().handleNum(e,2)},n.prototype.updateBetTotal=function(t){this._my_bet_total_txt.text=t.toString()},n.prototype.onLoadSuccess=function(t){this.realHeadImg&&(this.realHeadImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showMyUserInfo,this,!1),this.removeChild(this.realHeadImg),this.realHeadImg=null);var e=new egret.Bitmap(t);e.name="headImg_real",e.x=this._my_head_url.x,e.y=this._my_head_url.y,e.width=this._my_head_url.width,e.height=this._my_head_url.height,this.realHeadImg=e,this.realHeadImg.touchEnabled=!0,this.realHeadImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showMyUserInfo,this,!1),this.addChild(e)},n.prototype.showMyUserInfo=function(){this.dispatchEventWith(t.UIEventConsts.SHOW_USER_INFO,!1)},n.prototype.onLoadError=function(t){console.warn("betVc:用户头像获取失败! url:"+t)},n.prototype.onSelectChip=function(t){this._selectedBetPoint=t.data,egret.localStorage.setItem("selectedBetPoint",this._selectedBetPoint.toString())},n.prototype.flyChip=function(e,n,i){var o,r;h=__read(t.PositionData.getInstance().betArea(n),2),o=h[0],r=h[1];var a=t.PositionData.getInstance().getFlyChipInitPoint(i),s=new egret.Bitmap(t.GameData.getInstance().getChipResByPoint(e));s.width=t.PositionData.getInstance().flyChipSize[0],s.height=t.PositionData.getInstance().flyChipSize[1],s.anchorOffsetX=t.PositionData.getInstance().flyChipSize[0]/2,s.anchorOffsetY=t.PositionData.getInstance().flyChipSize[1]/2,s.x=a.x,s.y=a.y,s.name=i.toString()+"_"+e,this.addChild(s),this._chipFlyArr[n]||(this._chipFlyArr[n]=[]),this._chipFlyArr[n].push(s),t.EffectFactory.getInstance().flyChip(s,o,r,t.PositionData.getInstance().flyChipTime,!1,null,2);var h},n.prototype.roundEndFlyChipToBanker=function(){var e=this;if(!this._chipFlyArr.length)return console.warn("没人下注"),void this.dispatchEventWith(t.UIEventConsts.FLY_CHIP_END);var n=t.PositionData.getInstance().getFlyChipInitPoint(t.RoomInfo.getInstance().bankerSeatId);try{for(var i=__values(this._chipFlyArr),o=i.next();!o.done;o=i.next()){var r=o.value;if(r){var a=this._chipFlyArr.indexOf(r);if(a!=t.RoomInfo.getInstance().hideChessId){var s=0,h=function(i){var o=t.PositionData.getInstance().roundEndFlyChipInterval*s;o>t.PositionData.getInstance().roundEndFlyChipMax&&(o=t.PositionData.getInstance().roundEndFlyChipMax);var r=egret.setTimeout(function(){t.EffectFactory.getInstance().flyChip(i,n,null,t.PositionData.getInstance().roundEndFlyChipTime,!1,null,null,function(){uniLib.DisplayUtils.removeFromParent(i),e._chipFlyTimerArr.shift(),e.roundEndflyToChess()},e)},c,o);c._chipFlyTimerArr.push(r),s++},c=this;try{for(var _=__values(r),d=_.next();!d.done;d=_.next()){var p=d.value;h(p)}}catch(u){C={error:u}}finally{try{d&&!d.done&&(E=_["return"])&&E.call(_)}finally{if(C)throw C.error}}}}}}catch(l){m={error:l}}finally{try{o&&!o.done&&(f=i["return"])&&f.call(i)}finally{if(m)throw m.error}}this.roundEndflyToChess();var m,f,C,E},n.prototype.roundEndflyToChess=function(){var e=this;if(!this._chipFlyTimerArr.length){if(!this._chipFlyArr[t.RoomInfo.getInstance().hideChessId])return console.warn("没人压中"),this._chipFlyArr=[],void this.dispatchEventWith(t.UIEventConsts.FLY_CHIP_END);console.warn("飞下注区");var n,i;l=__read(t.PositionData.getInstance().betArea(t.RoomInfo.getInstance().hideChessId),2),n=l[0],i=l[1];var o=t.PositionData.getInstance().getFlyChipInitPoint(t.RoomInfo.getInstance().bankerSeatId),r=[];try{for(var a=__values(this._chipFlyArr[t.RoomInfo.getInstance().hideChessId]),s=a.next();!s.done;s=a.next())for(var h=s.value,c=t.GameData.getInstance().bankerMulti,_=function(a){var s=Number(h.name.split("_")[1]),c=new egret.Bitmap(t.GameData.getInstance().getChipResByPoint(s));c.width=t.PositionData.getInstance().flyChipSize[0],c.height=t.PositionData.getInstance().flyChipSize[1],c.anchorOffsetX=t.PositionData.getInstance().flyChipSize[0]/2,c.anchorOffsetY=t.PositionData.getInstance().flyChipSize[1]/2,c.x=o.x,c.y=o.y,c.name=h.name,c.visible=!1,d.addChild(c),r.push(c);var _=t.PositionData.getInstance().roundEndFlyChipInterval*a;_>t.PositionData.getInstance().roundEndFlyChipMax&&(_=t.PositionData.getInstance().roundEndFlyChipMax),console.warn(_);var p=egret.setTimeout(function(){c.visible=!0,t.EffectFactory.getInstance().flyChip(c,n,i,t.PositionData.getInstance().roundEndFlyChipTime,!1,null,null,function(){e._chipFlyTimerArr.shift(),e.roundEndflyToWinner()},e)},d,_);d._chipFlyTimerArr.push(p)},d=this,p=0;c>p;p++)_(p)}catch(u){m={error:u}}finally{try{s&&!s.done&&(f=a["return"])&&f.call(a)}finally{if(m)throw m.error}}(C=this._chipFlyArr[t.RoomInfo.getInstance().hideChessId]).push.apply(C,__spread(r));var l,m,f,C}},n.prototype.roundEndflyToWinner=function(){var e=this;if(!this._chipFlyTimerArr.length){console.warn("飞玩家");var n=[];this._chipFlyArr[t.RoomInfo.getInstance().hideChessId].forEach(function(t){var e=Number(t.name.split("_")[0]);n[e]||(n[e]=[]),n[e].push(t)});var i=function(i){if(!i)return"continue";var r=n.indexOf(i),a=t.PositionData.getInstance().getFlyChipInitPoint(r),s=0,h=function(n){var i=t.PositionData.getInstance().roundEndFlyChipInterval*s;i>t.PositionData.getInstance().roundEndFlyChipMax&&(i=t.PositionData.getInstance().roundEndFlyChipMax),console.warn(i);var r=egret.setTimeout(function(){t.EffectFactory.getInstance().flyChip(n,a,null,t.PositionData.getInstance().roundEndFlyChipTime,!1,null,null,function(){uniLib.DisplayUtils.removeFromParent(n),e._chipFlyTimerArr.shift(),e.roundEndflyEnd()},e)},o,i);o._chipFlyTimerArr.push(r),s++};try{for(var c=__values(i),_=c.next();!_.done;_=c.next()){var d=_.value;h(d)}}catch(p){u={error:p}}finally{try{_&&!_.done&&(l=c["return"])&&l.call(c)}finally{if(u)throw u.error}}var u,l},o=this;try{for(var r=__values(n),a=r.next();!a.done;a=r.next()){var s=a.value;i(s)}}catch(h){c={error:h}}finally{try{a&&!a.done&&(_=r["return"])&&_.call(r)}finally{if(c)throw c.error}}var c,_}},n.prototype.roundEndflyEnd=function(){this._chipFlyTimerArr.length||(console.warn("飞筹码结束"),this._chipFlyArr=[],this.dispatchEventWith(t.UIEventConsts.FLY_CHIP_END))},n.prototype.showFlyChip=function(e){var n=this,i=function(t,e,i){n._betChessArr[i].showPoints(t,e)},o=function(e,i,o){var r,a;l=__read(t.PositionData.getInstance().betArea(i),2),r=l[0],a=l[1];var s=a.x-r.x,h=a.y-r.y,c=s*Math.random(),_=h*Math.random(),d=r.x+c,p=r.y+_,u=new egret.Bitmap(t.GameData.getInstance().getChipResByPoint(e));return u.width=t.PositionData.getInstance().flyChipSize[0],u.height=t.PositionData.getInstance().flyChipSize[1],u.anchorOffsetX=t.PositionData.getInstance().flyChipSize[0]/2,u.anchorOffsetY=t.PositionData.getInstance().flyChipSize[1]/2,u.x=d,u.y=p,u.name=o.toString()+"_"+e,n.addChild(u),u;var l};try{for(var r=__values(e.userRoundInfo),a=r.next();!a.done;a=r.next()){var s=a.value,h=t.RoomInfo.getInstance().getSeatIdByUserId(s.uid),c=s.betSet;if(Object.keys(c).length)try{for(var _=__values(c),d=_.next();!d.done;d=_.next()){var p=d.value;if(s.uid!=uniLib.NetMgr.UID&&(p.betCurPoint=0),i(p.betCurPoint,p.betTotalPoint,p.betChessId),Object.keys(p.betPoint).length)try{for(var u=__values(p.betPoint),l=u.next();!l.done;l=u.next()){var m=l.value,f=o(m,p.betChessId,h);this._chipFlyArr[p.betChessId]||(this._chipFlyArr[p.betChessId]=[]),this._chipFlyArr[p.betChessId].push(f)}}catch(C){I={error:C}}finally{try{l&&!l.done&&(T=u["return"])&&T.call(u)}finally{if(I)throw I.error}}}}catch(E){A={error:E}}finally{try{d&&!d.done&&(v=_["return"])&&v.call(_)}finally{if(A)throw A.error}}}}catch(S){g={error:S}}finally{try{a&&!a.done&&(y=r["return"])&&y.call(r)}finally{if(g)throw g.error}}var g,y,A,v,I,T},n.prototype.isWin=function(){var e=t.RoomInfo.getInstance().getSeatIdByUserId(uniLib.NetMgr.UID);if(this._chipFlyArr[t.RoomInfo.getInstance().hideChessId]&&this._chipFlyArr[t.RoomInfo.getInstance().hideChessId].length)try{for(var n=__values(this._chipFlyArr[t.RoomInfo.getInstance().hideChessId]),i=n.next();!i.done;i=n.next()){var o=i.value;if(o.name.split("_")[0]==e.toString())return!0}}catch(r){a={error:r}}finally{try{i&&!i.done&&(s=n["return"])&&s.call(n)}finally{if(a)throw a.error}}return!1;var a,s},n.prototype.destroy=function(){e.prototype.destroy.call(this),this._chip_hide_1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.uiHandle,this,!1),this._chip_hide_2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.uiHandle,this,!1),this._chip_hide_3.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.uiHandle,this,!1),this._chip_hide_4.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.uiHandle,this,!1),this._chip_hide_5.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.uiHandle,this,!1);
try{for(var n=__values(this._betChessArr),i=n.next();!i.done;i=n.next()){var o=i.value;o&&(o.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.betChessHandle,this,!1),o.removeEventListener(t.UIEventConsts.CHESS_TWINKLE_END,this.twinkleEnd,this,!1),o.destroy())}}catch(r){l={error:r}}finally{try{i&&!i.done&&(m=n["return"])&&m.call(n)}finally{if(l)throw l.error}}this._betChessArr=null;try{for(var a=__values(this._chipRealArr),s=a.next();!s.done;s=a.next()){var h=s.value;h.removeEventListener(t.UIEventConsts.SELECT_CHIP,this.onSelectChip,this)}}catch(c){f={error:c}}finally{try{s&&!s.done&&(C=a["return"])&&C.call(a)}finally{if(f)throw f.error}}if(this._chipRealArr=null,this._chipFlyTimerArr.length)try{for(var _=__values(this._chipFlyTimerArr),d=_.next();!d.done;d=_.next()){var p=d.value;egret.clearTimeout(p)}}catch(u){E={error:u}}finally{try{d&&!d.done&&(S=_["return"])&&S.call(_)}finally{if(E)throw E.error}}egret.localStorage.removeItem("selectedBetPoint"),this.realHeadImg&&(this.realHeadImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showMyUserInfo,this,!1),uniLib.DisplayUtils.removeFromParent(this.realHeadImg),this.realHeadImg=null),this._bet_panel_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBetPanelBtn,this,!1);var l,m,f,C,E,S},n.prototype.enableBetChess=function(){try{for(var e=__values(this._betChessArr),n=e.next();!n.done;n=e.next()){var i=n.value;i&&i.enableBet()}}catch(o){a={error:o}}finally{try{n&&!n.done&&(s=e["return"])&&s.call(e)}finally{if(a)throw a.error}}var r=t.RoomInfo.getInstance().hideChessId;r||(r=7),this._betChessArr[r].disableBet();var a,s},n.prototype.disableBetChess=function(){try{for(var t=__values(this._betChessArr),e=t.next();!e.done;e=t.next()){var n=e.value;n&&n.DeActive()}}catch(i){o={error:i}}finally{try{e&&!e.done&&(r=t["return"])&&r.call(t)}finally{if(o)throw o.error}}var o,r},n.prototype.unTouchAbleBetChess=function(){try{for(var t=__values(this._betChessArr),e=t.next();!e.done;e=t.next()){var n=e.value;n&&(n.touchEnabled=!1)}}catch(i){o={error:i}}finally{try{e&&!e.done&&(r=t["return"])&&r.call(t)}finally{if(o)throw o.error}}this.disableBetChess();var o,r},n.prototype.resetAllBetChess=function(){try{for(var t=__values(this._betChessArr),e=t.next();!e.done;e=t.next()){var n=e.value;n&&n.reset()}}catch(i){o={error:i}}finally{try{e&&!e.done&&(r=t["return"])&&r.call(t)}finally{if(o)throw o.error}}this.updateBetTotal(0);var o,r},n.prototype.defaultSelect=function(){this._selectedBetPoint||this.chipActive(this._chipRealArr,this.chip_real_1)},n.prototype.reSelectChip=function(){var t=Number(egret.localStorage.getItem("selectedBetPoint"));if(!t)return void this.defaultSelect();if(-1==this._betPointArr.indexOf(t))return void this.defaultSelect();var e=this._betPointArr.indexOf(t);this.chipActive(this._chipRealArr,this._chipRealArr[e])},n.prototype.updateBetArea=function(t,e){void 0===e&&(e=!0);var n=t.betChessId,i=(t.betPoint,t.betCurPoint),o=t.betTotalPoint,r=this._betChessArr[n];r.updatePoints(i,o)},n.prototype.resetAll=function(){this.resetAllBetChess();for(var e=0;e<this._chipRealArr.length;e++)this._chipRealArr[e].clearChip(),this._chipRealArr[e].removeEventListener(t.UIEventConsts.SELECT_CHIP,this.onSelectChip,this);if(this._selectedBetPoint=null,this._chipFlyArr.length)try{for(var n=__values(this._chipFlyArr),i=n.next();!i.done;i=n.next()){var o=i.value;if(o)try{for(var r=__values(o),a=r.next();!a.done;a=r.next()){var s=a.value;egret.Tween.removeTweens(s),uniLib.DisplayUtils.removeFromParent(s)}}catch(h){f={error:h}}finally{try{a&&!a.done&&(C=r["return"])&&C.call(r)}finally{if(f)throw f.error}}}}catch(c){l={error:c}}finally{try{i&&!i.done&&(m=n["return"])&&m.call(n)}finally{if(l)throw l.error}}if(this._chipFlyArr=[],this._chipFlyTimerArr.length)try{for(var _=__values(this._chipFlyTimerArr),d=_.next();!d.done;d=_.next()){var p=d.value;egret.clearTimeout(p)}}catch(u){E={error:u}}finally{try{d&&!d.done&&(S=_["return"])&&S.call(_)}finally{if(E)throw E.error}}this._chipFlyTimerArr=[],this.realHeadImg&&(this.realHeadImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showMyUserInfo,this,!1),uniLib.DisplayUtils.removeFromParent(this.realHeadImg),this.realHeadImg=null);var l,m,f,C,E,S},n}(t.BaseVc);t.BetVc=e,__reflect(e.prototype,"SWGAME.BetVc")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.skinName=sw_ChatPopVc,t}return __extends(n,e),n.prototype.initUI=function(){this.labelArr=[null,this._short_labal_1,this._short_labal_2,this._short_labal_3,this._short_labal_4,this._short_labal_5,this._short_labal_6,this._short_labal_7,this._short_labal_8,this._short_labal_9,this._short_labal_10,this._short_labal_11,this._short_labal_12,this._short_labal_13,this._short_labal_14,this._short_labal_15,this._short_labal_16,this._short_labal_17,this._short_labal_18],this.groupArr=[null,this._pop_group_1,this._pop_group_2,this._pop_group_3,this._pop_group_4,this._pop_group_5,this._pop_group_6,this._pop_group_7,this._pop_group_8,this._pop_group_9,this._pop_group_10,this._pop_group_11,this._pop_group_12,this._pop_group_13,this._pop_group_14,this._pop_group_15,this._pop_group_16,this._pop_group_17,this._pop_group_18];try{for(var t=__values(this.groupArr),e=t.next();!e.done;e=t.next()){var n=e.value;n&&(n.visible=!1)}}catch(i){o={error:i}}finally{try{e&&!e.done&&(r=t["return"])&&r.call(t)}finally{if(o)throw o.error}}var o,r},n.prototype.showChatPop=function(t,e){var n=this;this.labelArr[t].text=e,this.groupArr[t].scaleX=this.groupArr[t].scaleY=.1,this.groupArr[t].visible=!0,egret.Tween.get(this.groupArr[t]).to({scaleX:1,scaleY:1},500,egret.Ease.cubicInOut).wait(2e3).to({scaleX:.1,scaleY:.1},500,egret.Ease.cubicInOut).call(function(){n.groupArr[t].visible=!1},this)},n.prototype.showCommonChat=function(e,n){var i;if(n>=20&&26>n)i=n%20,this.showChatPop(e,t.GameData.getInstance().ShortTalkArr[i]);else{i=n>100?n%100:n%10;var o=uniLib.DisplayUtils.createBitmapByName("zmgame_face"+i);console.warn(o),o.width=t.PositionData.getInstance().faceSize[0],o.height=t.PositionData.getInstance().faceSize[1],o.anchorOffsetX=o.width/2,o.anchorOffsetY=o.height/2,this.addChild(o);var r=t.PositionData.getInstance().getFacePos(e);o.x=r.x,o.y=r.y;var a=250,s=0,h=o.y;egret.Tween.get(o).wait(2e3).call(function(){egret.Tween.removeTweens(o),uniLib.DisplayUtils.removeFromParent(o)},this),egret.Tween.get(o,{loop:!0}).to({y:h-10},a,egret.Ease.sineIn).wait(s).to({y:h},a,egret.Ease.sineIn)}},n.prototype.destroy=function(){e.prototype.destroy.call(this)},n}(t.BaseVc);t.ChatPopVc=e,__reflect(e.prototype,"SWGAME.ChatPopVc")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t._giftTimerArr=[],t.tipCount=0,t.skinName=sw_EffectVc,t}return __extends(n,e),n.prototype.initUI=function(){this._timer_group.visible=!1,this._factory=new dragonBones.EgretFactory,this._hideChessArmature=this.createAnimation("sw_shaizhong_ske_json","sw_shaizhong_tex_json","sw_shaizhong_tex_png","Armature"),this._openChessArmature=this.createAnimation("sw_shaizhong_open_ske_json","sw_shaizhong_open_tex_json","sw_shaizhong_open_tex_png","Armature"),this.showKantou(7),this._tips_msg_group.visible=!1,this._status_txt.visible=!1},n.prototype.createAnimation=function(t,e,n,i){var o=RES.getRes(t),r=RES.getRes(e),a=RES.getRes(n),s=new dragonBones.EgretFactory;s.addDragonBonesData(dragonBones.DataParser.parseDragonBonesData(o)),s.addTextureAtlasData(this._factory.parseTextureAtlasData(r,a)),this._factory=s;var h=this._factory.buildArmature(i);return h},n.prototype.startTimer=function(t){var e=this;if(this._timer&&this.clearTimer(),this._countNum=t,!(this._countNum<=0)){this._timerNum.text=this._countNum.toString(),this._timer_group.visible=!0;var n=new egret.Timer(1e3,this._countNum+1);this._timer=n,n.addEventListener(egret.TimerEvent.TIMER,function(){e._countNum--,e._countNum<0||(e._timerNum.text=e._countNum.toString())},this),n.addEventListener(egret.TimerEvent.TIMER_COMPLETE,function(){e.clearTimer()},this),n.start()}},n.prototype.clearTimer=function(){this._timer&&(this._timer.removeEventListener(egret.TimerEvent.TIMER,null,this),this._timer.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,null,this),this._timer.stop(),this._timer=null,this._timer_group.visible=!1)},n.prototype.startHideChessAnimation=function(){var e=this._hideChessArmature.display;this._factory.clock.add(this._hideChessArmature),this.addChild(e),e.x=t.ScreenAdaptMgr.getInstance().defaultWidth/2,e.y=t.ScreenAdaptMgr.getInstance().defaultHeight/2,e.scaleX=e.scaleY=2,this._hideChessArmature.animation.play(null,1);var n=t.PositionData.getInstance().shaizhongPos;egret.Tween.get(e).wait(1500).to({x:n.x,y:n.y},1e3,egret.Ease.sineInOut),this._hideChessDisplay=e},n.prototype.showHideChessAnimation=function(){var e=this._hideChessArmature.display;this._factory.clock.add(this._hideChessArmature);var n=t.PositionData.getInstance().shaizhongPos;this._hideChessArmature.animation.gotoAndPlayByTime("newAnimation",2.5,1),e.x=n.x,e.y=n.y,e.scaleX=e.scaleY=2,this.addChild(e),this._hideChessDisplay=e},n.prototype.startOpenChessAnimation=function(e){var n=t.GameData.getInstance().getChessBgResByChessId(e),i=this._openChessArmature.getSlot("bone12"),o=new egret.Bitmap;o.texture=n,o.x=i.display.x,o.y=i.display.y,o.width=58,o.height=58,o.anchorOffsetX=o.width/2,o.anchorOffsetY=o.height/2,i.display=o;var r=this._openChessArmature.display;this._factory.clock.add(this._openChessArmature),r.scaleX=r.scaleY=2,this.addChild(r);var a=t.PositionData.getInstance().shaizhongPos;r.x=a.x,r.y=a.y,this._hideChessDisplay.parent&&this.removeChild(this._hideChessDisplay),this._openChessArmature.animation.play(null,1),r.addEventListener(dragonBones.EventObject.COMPLETE,this.animitionEventHandle,this);var s=new egret.Point(t.ScreenAdaptMgr.getInstance().defaultWidth/2,t.ScreenAdaptMgr.getInstance().defaultHeight/2);egret.Tween.get(r).to({x:s.x,y:s.y},1e3,egret.Ease.sineInOut),this._openChessDisplay=r},n.prototype.animitionEventHandle=function(t){this._openChessDisplay.removeEventListener(dragonBones.EventObject.COMPLETE,this.animitionEventHandle,this);var e=t.target,n=e.armature.getSlot("bone12"),i=new egret.Point;e.localToGlobal(n.display.x,n.display.y,i),this.globalToLocal(i.x,i.y,i),this.addKantou(i),this.removeChild(this._openChessDisplay)},n.prototype.addKantou=function(e){var n=this;this._kantouChessImg&&uniLib.DisplayUtils.removeFromParent(this._kantouChessImg);var i=t.GameData.getInstance().getChessBgResByChessId(t.RoomInfo.getInstance().hideChessId),o=new egret.Bitmap(i),r=t.PositionData.getInstance().kantouSize;this._kantouChessImg=o,o.width=116,o.height=116,o.anchorOffsetX=r[0]/2,o.anchorOffsetY=r[1]/2,o.x=e.x,o.y=e.y,this.addChild(o);var a=t.PositionData.getInstance().kantouPos;egret.Tween.get(o).to({x:a.x,y:a.y,width:r[0],height:r[1]},600,egret.Ease.cubicInOut).call(function(){egret.Tween.removeTweens(o),n.dispatchEventWith(t.UIEventConsts.FLY_KANTOU_END)})},n.prototype.showKantou=function(e){this._kantouChessImg&&uniLib.DisplayUtils.removeFromParent(this._kantouChessImg);var n=t.PositionData.getInstance().kantouPos,i=t.PositionData.getInstance().kantouSize,o=t.GameData.getInstance().getChessBgResByChessId(e),r=new egret.Bitmap(o);r.width=i[0],r.height=i[1],r.anchorOffsetX=i[0]/2,r.anchorOffsetY=i[1]/2,r.x=n.x,r.y=n.y,this.addChild(r),this._kantouChessImg=r},n.prototype.sendGift=function(e,n,i){var o,r=t.RoomInfo.getInstance().getSeatIdByUserId(i);o=t.PositionData.getInstance().getFlyChipInitPoint(r);var a,s=t.RoomInfo.getInstance().getSeatIdByUserId(n);a=t.PositionData.getInstance().getFacePos(s);var h=new chessCommonLib.zm_GiftAnItem;h.giftId=e,h.x=o.x,h.y=o.y,this.addChild(h),egret.Tween.get(h).to({x:a.x,y:a.y},400,egret.Ease.circOut).call(this.giftMoveEnd,this,[h])},n.prototype.giftMoveEnd=function(t){var e=this;egret.Tween.removeTweens(t),t.play();var n=egret.setTimeout(function(){t.destory(),uniLib.DisplayUtils.removeFromParent(t);var i=e._giftTimerArr.indexOf(n);e._giftTimerArr.splice(i,1)},this,2500);this._giftTimerArr.push(n)},n.prototype.showTip=function(){this._tip_timer||(this._tips_msg_group.visible=!0,this._tip_timer=new egret.Timer(1e3,0),this._tip_timer.addEventListener(egret.TimerEvent.TIMER,this.tipCh,this),this._tip_timer.start())},n.prototype.closeTip=function(){this._tips_msg_group.visible=!1,this._tip_timer&&(this._tip_timer.stop(),this._tip_timer.removeEventListener(egret.TimerEvent.TIMER,this.tipCh,this),this._tip_timer=null)},n.prototype.tipCh=function(){this.tipCount<4?this.tipCount++:this.tipCount=0;var t="...",e=t.substring(0,this.tipCount);this._tips_msg.text="需满5人开局，请等待其他玩家加入"+e},n.prototype.showStatus=function(e){this._status_txt.visible=!0,t.GameData.getInstance().statusNameMap.has(e)&&(this._status_txt.text=t.GameData.getInstance().statusNameMap.get(e))},n.prototype.removeStatus=function(){this._status_txt.visible=!1},n.prototype.clearAll=function(){this.clearTimer(),this.closeTip(),this.removeStatus(),this._hideChessArmature.animation.stop(),this._openChessArmature.animation.stop(),this._hideChessArmature.animation.reset(),this._openChessArmature.animation.reset(),this._hideChessDisplay&&(egret.Tween.removeTweens(this._hideChessDisplay),uniLib.DisplayUtils.removeFromParent(this._hideChessDisplay),this._hideChessDisplay=null),this._openChessDisplay&&(this._openChessDisplay.removeEventListener(dragonBones.EventObject.COMPLETE,this.animitionEventHandle,this),egret.Tween.removeTweens(this._openChessDisplay),uniLib.DisplayUtils.removeFromParent(this._openChessDisplay),this._openChessDisplay=null),this._kantouChessImg&&(egret.Tween.removeTweens(this._kantouChessImg),uniLib.DisplayUtils.removeFromParent(this._kantouChessImg),this._kantouChessImg=null)},n.prototype.destroy=function(){if(e.prototype.destroy.call(this),this.clearTimer(),this.closeTip(),this._hideChessArmature.animation.stop(),this._openChessArmature.animation.stop(),this._hideChessArmature.animation.reset(),this._openChessArmature.animation.reset(),this._openChessDisplay&&this._openChessDisplay.removeEventListener(dragonBones.EventObject.COMPLETE,this.animitionEventHandle,this),this._factory.clock.remove(this._hideChessArmature),this._factory.clock.remove(this._openChessArmature),this._giftTimerArr.length)try{for(var t=__values(this._giftTimerArr),n=t.next();!n.done;n=t.next()){var i=n.value;egret.clearTimeout(i)}}catch(o){r={error:o}}finally{try{n&&!n.done&&(a=t["return"])&&a.call(t)}finally{if(r)throw r.error}}var r,a},n}(t.BaseVc);t.EffectVc=e,__reflect(e.prototype,"SWGAME.EffectVc")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(e){function n(){var n=e.call(this)||this;return n._resultPanel=[],n.skinName=sw_GameVc,t.ScreenAdaptMgr.getInstance().registerObserver(n),n}return __extends(n,e),n.prototype.initUI=function(){this._bg.name="_bg",this.chessHideArr=[this.chess_1,this.chess_2,this.chess_3,this.chess_4,this.chess_5];try{for(var t=__values(this.chessHideArr),e=t.next();!e.done;e=t.next()){var n=e.value;n.texture=null}}catch(i){o={error:i}}finally{try{e&&!e.done&&(r=t["return"])&&r.call(t)}finally{if(o)throw o.error}}this.stageSizeChange();var o,r},n.prototype.updateRoomInfoText=function(t){this._room_id_txt.text="房号："+t.roomId,this._up_limit_txt.text="上限："+t.betLimit,this._bankerLeftRoundTxt.text="还剩"+t.haveRound+"局"},n.prototype.updatePrevHideChess=function(e){try{for(var n=__values(this.chessHideArr),i=n.next();!i.done;i=n.next()){var o=i.value;o.texture=null}}catch(r){h={error:r}}finally{try{i&&!i.done&&(c=n["return"])&&c.call(n)}finally{if(h)throw h.error}}if(e.length){for(var a=0;a<e.length;a++){var s=e[a];this.chessHideArr[a].texture=t.GameData.getInstance().getChessBgResByChessId(s)}var h,c}},n.prototype.updateBankerRoundLeft=function(t){this._bankerLeftRoundTxt.text="还剩"+t+"局"},n.prototype.stageSizeChange=function(){if(this._bg.width=t.ScreenAdaptMgr.getInstance().stageWidth,this._bg.height=t.ScreenAdaptMgr.getInstance().stageHeight,t.ScreenAdaptMgr.getInstance().stageWidth>t.ScreenAdaptMgr.getInstance().defaultWidth){var e=(t.ScreenAdaptMgr.getInstance().stageWidth-t.ScreenAdaptMgr.getInstance().defaultWidth)/2;this._bg.anchorOffsetX=e}else this._bg.anchorOffsetX=0;var n=(t.PositionData.getInstance().iphonXBgWidth-t.ScreenAdaptMgr.getInstance().defaultWidth)/2;t.ScreenAdaptMgr.getInstance().stageWidth-t.ScreenAdaptMgr.getInstance().defaultWidth>n?this._bg.texture=RES.getRes(t.PositionData.getInstance().iphonXBgName):this._bg.texture=RES.getRes(t.PositionData.getInstance().normalBgName)},n.prototype.showResultPanel=function(e){e&&(this._resultPanel.push(new t.ResultPanel(e)),uniLib.PopUpMgr.addPopUp(this._resultPanel[this._resultPanel.length-1],null,!0,!0,0,uniLib.PopUpEffect.CENTER,0,0,uniLib.NetMgr.UID))},n.prototype.closeResultPanel=function(){if(this._resultPanel.length){try{for(var t=__values(this._resultPanel),e=t.next();!e.done;e=t.next()){var n=e.value;n.onClose()}}catch(i){o={error:i}}finally{try{e&&!e.done&&(r=t["return"])&&r.call(t)}finally{if(o)throw o.error}}this._resultPanel=[]}var o,r},n.prototype.destroy=function(){e.prototype.destroy.call(this)},n}(t.BaseVc);t.GameVc=e,__reflect(e.prototype,"SWGAME.GameVc",["SWGAME.ScreenChangeObserver"])}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.prototype.initUI=function(){this._menuArea=new t.MenuArea,this.addChild(this._menuArea),this._menuArea.addEventListener(t.UIEventConsts.EXIT_GAME,this.onLeaveRoom,this),this._menuArea.addEventListener(t.UIEventConsts.SHOW_SETTING,this.uiHandle,this),this._menuArea.addEventListener(t.UIEventConsts.SHOW_HELP,this.uiHandle,this);var e=new egret.Bitmap(RES.getRes("sw_btn_chat_png"));i=__read([1194,620,60,60],4),e.x=i[0],e.y=i[1],e.width=i[2],e.height=i[3],e.name="btn_chat",this.addChild(e),this._chat_btn=e,this._chat_btn.touchEnabled=!0,this._chat_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShortChat,this);var n=new t.RechargeBtn;n.x=112,n.y=5,this.addChild(n),this._recharge_btn=n,this._recharge_btn.touchEnabled=!0,this._recharge_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRecharge,this),uniLib.Global.addEventListener(t.UIEventConsts.BET_INFO_OPEN,this.betPanelOpen,this),this._betPanel=new t.BetPanel,this.addChild(this._betPanel);var i},n.prototype.onLeaveRoom=function(e){this.dispatchEventWith(t.UIEventConsts.EXIT_GAME,!1)},n.prototype.onShortChat=function(){this.dispatchEventWith(t.UIEventConsts.SHOW_SHORT_CHAT,!1)},n.prototype.onRecharge=function(){console.warn("快速充值"),uniLib.Global.dispatchEvent(chessCommonLib.CommonModelEvent.SHOP)},n.prototype.uiHandle=function(e){switch(e.type){case t.UIEventConsts.SHOW_SETTING:this.dispatchEventWith(t.UIEventConsts.SHOW_SETTING);break;case t.UIEventConsts.SHOW_HELP:this.dispatchEventWith(t.UIEventConsts.SHOW_HELP)}},n.prototype.betPanelOpen=function(){this._betPanel.open()},n.prototype.updateBetPanel=function(){var e=this,n=t.RoomInfo.getInstance().getMyUserInfo().betInfo;n.forEach(function(t,n){t&&n&&e._betPanel.updateBetPoint(t,n)},this)},n.prototype.clearAll=function(){this._betPanel.clear()},n.prototype.destroy=function(){e.prototype.destroy.call(this),this._betPanel.destroy(),this._menuArea.removeEventListener(t.UIEventConsts.EXIT_GAME,this.onLeaveRoom,this),this._menuArea.destroy(),this._menuArea=null,this._chat_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onShortChat,this),this._recharge_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRecharge,this),uniLib.Global.removeEventListener(t.UIEventConsts.BET_INFO_OPEN,this.betPanelOpen,this)},n}(t.BaseVc);t.MenuVc=e,__reflect(e.prototype,"SWGAME.MenuVc")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(e){function n(){var n=e.call(this)||this;return n._toPoint=new egret.Point,n._popTime=t.PositionData.getInstance().popTime,n._outTime=t.PositionData.getInstance().outTime,n._stayTime=t.PositionData.getInstance().stayTime,n.startArr=[],n.eleInPop=[],n.skinName=sw_NotifyVc,n}return __extends(n,e),n.prototype.initUI=function(){this._toPoint.x=this._notify_group_main.x;var t=new egret.Point;this.globalToLocal(-this._notify_group_main.width,null,t),this._initPoint=new egret.Point(t.x,null),this._notify_group_main.x=this._initPoint.x},n.prototype.notifyPop=function(t){try{for(var e=__values(t),n=e.next();!n.done;n=e.next()){var i=n.value;i.visible=!0,i.includeInLayout=!0}}catch(o){r={error:o}}finally{try{n&&!n.done&&(a=e["return"])&&a.call(e)}finally{if(r)throw r.error}}this.eleInPop=t,egret.Tween.get(this._notify_group_main).to({x:this._toPoint.x},this._popTime,egret.Ease.cubicInOut);var r,a},n.prototype.hidePop=function(){var t=this;egret.Tween.get(this._notify_group_main).to({x:this._initPoint.x},this._outTime,egret.Ease.cubicInOut).call(function(){try{for(var e=__values(t.eleInPop),n=e.next();!n.done;n=e.next()){var i=n.value;t.resetElement(i)}}catch(o){a={error:o}}finally{try{n&&!n.done&&(s=e["return"])&&s.call(e)}finally{if(a)throw a.error}}if(t.eleInPop=[],t.startArr.length){var r=t.startArr.shift();r.call(t)}var a,s}),this.stayHandler=null},n.prototype.stayTimeCount=function(){this.stayHandler=egret.setTimeout(this.hidePop,this,this._stayTime+this._popTime)},n.prototype.resetElement=function(t){t.visible=!1,t.includeInLayout=!1},n.prototype.beginBanker=function(){return this.eleInPop.length?void this.addToArr(this.beginBanker):(this.notifyPop([this._notify_begin_banker]),void this.stayTimeCount())},n.prototype.reBanker=function(){return this.eleInPop.length?void this.addToArr(this.reBanker):(this.notifyPop([this._notify_restart_banker]),void this.stayTimeCount())},n.prototype.addToArr=function(t){this.startArr.length>1&&(this.startArr=[this.startArr.pop()],this.startArr.push(t))},n.prototype.beginBet=function(){return this.eleInPop.length?void this.addToArr(this.beginBet):(this.notifyPop([this._notify_begin_bet]),void this.stayTimeCount())},n.prototype.stopBet=function(){this.notifyPop([this._notify_end_bet]),this.stayTimeCount()},n.prototype.bankerHideChessBegin=function(){return this.eleInPop.length?void this.addToArr(this.bankerHideChessBegin):void this.notifyPop([this._notify_hide_chess])},n.prototype.bankeHideChessEnd=function(){this.hidePop()},n.prototype.waitNextRound=function(t){this.startTimer(t),this.notifyPop([this._notify_timer_fnt,this._notify_wait_next_round])},n.prototype.hideWaitNextRound=function(){this.clearTimer(),this.hidePop()},n.prototype.startTimer=function(t){if(this._timer&&this.clearTimer(),this._countNum=t,!(this._countNum<=0)){this._notify_timer_fnt.text="("+this._countNum.toString()+")";var e=new egret.Timer(1e3,this._countNum+1);this._timer=e,e.addEventListener(egret.TimerEvent.TIMER,this.updateTimeTxt,this,!1),e.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.clearTimer,this,!1),e.start()}},n.prototype.updateTimeTxt=function(){this._countNum--,this._countNum<0||(this._notify_timer_fnt.text="("+this._countNum.toString()+")")},n.prototype.clearTimer=function(){this._timer&&(this._timer.removeEventListener(egret.TimerEvent.TIMER,this.updateTimeTxt,this,!1),this._timer.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.clearTimer,this,!1),this._timer.stop(),this._timer=null)},n.prototype.freeTimeStart=function(){return this.eleInPop.length?void this.startArr.push(this.freeTimeStart):(this._notify_free.includeInLayout=!0,this._notify_free.visible=!0,void this.notifyPop([this._notify_free]))},n.prototype.freeTimeEnd=function(){this.hidePop()},n.prototype.clearAll=function(){if(egret.Tween.removeTweens(this._notify_group_main),this._stayTime&&egret.clearTimeout(this.stayHandler),this.startArr=[],this.eleInPop.length){try{for(var t=__values(this.eleInPop),e=t.next();!e.done;e=t.next()){var n=e.value;this.resetElement(n)}}catch(i){o={error:i}}finally{try{e&&!e.done&&(r=t["return"])&&r.call(t)}finally{if(o)throw o.error}}this.eleInPop=[]}this.clearTimer(),this._notify_group_main.x=this._initPoint.x;var o,r},n.prototype.destroy=function(){if(e.prototype.destroy.call(this),egret.Tween.removeTweens(this._notify_group_main),this._stayTime&&egret.clearTimeout(this.stayHandler),this.startArr=[],this.eleInPop.length){try{for(var t=__values(this.eleInPop),n=t.next();!n.done;n=t.next()){var i=n.value;this.resetElement(i)}}catch(o){r={error:o}}finally{try{n&&!n.done&&(a=t["return"])&&a.call(t)}finally{if(r)throw r.error}}this.eleInPop=[]}this.clearTimer();var r,a},n}(t.BaseVc);t.NotifyVc=e,__reflect(e.prototype,"SWGAME.NotifyVc")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.skinName=sw_OperateVc,t}return __extends(n,e),n.prototype.initUI=function(){this._qiangzhuang_group.visible=!1,this._qiangzhuang_group.addEventListener(egret.TouchEvent.TOUCH_TAP,this.qiangzhuangAction,this)},n.prototype.qiangzhuangAction=function(e){var n=e.target;switch(n){case this._qiangzhuang_no_btn:this.dispatchEventWith(t.UIEventConsts.ACTION_NO_GRAB_BANKER,!1);break;case this._qiangzhuang_yes_btn:this.dispatchEventWith(t.UIEventConsts.ACTION_GRAB_BANKER,!1)}},n.prototype.openGrabBanker=function(){this._qiangzhuang_group.visible=!0},n.prototype.closeGrabBanker=function(){this._qiangzhuang_group.visible=!1},n.prototype.destroy=function(){e.prototype.destroy.call(this),this._qiangzhuang_group.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.qiangzhuangAction,this)},n}(t.BaseVc);t.OperateVc=e,__reflect(e.prototype,"SWGAME.OperateVc")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.skinName=sw_SeatPlayVc,t}return __extends(n,e),n.prototype.initUI=function(){this.seatPlyerArr=[null,this.seatPlayer_1,this.seatPlayer_2,this.seatPlayer_3,this.seatPlayer_4,this.seatPlayer_5,this.seatPlayer_6,this.seatPlayer_7,this.seatPlayer_8,this.seatPlayer_9,this.seatPlayer_10,this.seatPlayer_11,this.seatPlayer_12,this.seatPlayer_13,this.seatPlayer_14,this.seatPlayer_15,this.seatPlayer_16,this.seatPlayer_17,this.seatPlayer_18];try{for(var e=__values(this.seatPlyerArr),n=e.next();!n.done;n=e.next()){var i=n.value;i&&i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)}}catch(o){r={error:o}}finally{try{n&&!n.done&&(a=e["return"])&&a.call(e)}finally{if(r)throw r.error}}this._bankerAnimation=uniLib.DragonUtils.createFastDragonBones("sw_banker_animation_ske_dbmv","sw_banker_animation_tex_png","MovieClip","banker"),this._bankerAnimation.timeScale=.75,this._bankerAnimation.scaleX=this._bankerAnimation.scaleY=t.PositionData.getInstance().bankerAnimationScale;var r,a},n.prototype.addUser=function(t){this.seatPlyerArr[t.seatId].setUserData(t)},n.prototype.removeUser=function(e){var n=t.RoomInfo.getInstance().getUserVoByUid(e).seatId;if(!n)throw new Error("SeatPlayVc:移除用户失败，通过uid找不到seatId");this.seatPlyerArr[n].removeUserData()},n.prototype.updateUserPoints=function(e){try{for(var n=__values(e),i=n.next();!i.done;i=n.next()){var o=i.value,r=t.RoomInfo.getInstance().getSeatIdByUserId(o.uid);if(!r)return;this.seatPlyerArr[r].updatePoint(o.userPoint)}}catch(a){s={error:a}}finally{try{i&&!i.done&&(h=n["return"])&&h.call(n)}finally{if(s)throw s.error}}var s,h},n.prototype.updateUserPointsSingle=function(t,e){this.seatPlyerArr[t].updatePoint(e)},n.prototype.onClick=function(e){var n=e.currentTarget,i=Number(n.name.slice(10));this.dispatchEventWith(t.UIEventConsts.SHOW_USER_INFO,!1,i)},n.prototype.bankerGrabEffectStart=function(){if(this._bankerGrabSeatIdArr=t.RoomInfo.getInstance().getGrabBankerSeatIdArr(),!this._bankerGrabSeatIdArr.length)throw new Error("参与抢庄玩家seatId数组长度不应该小于1");return console.warn(this._bankerGrabSeatIdArr),1==this._bankerGrabSeatIdArr.length?(this.seatPlyerArr[this._bankerGrabSeatIdArr[0]].activeBankerGrab(),void(this.activeSeatId=this._bankerGrabSeatIdArr[0])):void(this.timer||this.effectLoop())},n.prototype.effectLoop=function(){var t=this;this.activeSeatId||(this.seatPlyerArr[this._bankerGrabSeatIdArr[0]].activeBankerGrab(),this.activeSeatId=this._bankerGrabSeatIdArr[0]);var e=this._bankerGrabSeatIdArr.indexOf(this.activeSeatId);this.seatPlyerArr[this._bankerGrabSeatIdArr[e]].deactiveBankerGrab();var n;n=e==this._bankerGrabSeatIdArr.length-1?0:e+1,this.activeSeatId=this._bankerGrabSeatIdArr[n],this.seatPlyerArr[this.activeSeatId].activeBankerGrab(),this.timer=egret.setTimeout(function(){t.effectLoop()},this,100)},n.prototype.endEffectLoop=function(){this.timer&&(egret.clearTimeout(this.timer),this.timer=null),this.seatPlyerArr[this.activeSeatId].deactiveBankerGrab(),this.activeSeatId=null},n.prototype.setBanker=function(e){var n=this;this._bankerSeatId=e,this.seatPlyerArr[e].setBanker(),this._bankerAnimationTimer=egret.setTimeout(function(){n.playBankerAnimation(e)},this,t.PositionData.getInstance().bankerIconEffectTime)},n.prototype.showBanker=function(t){this._bankerSeatId=t,this.seatPlyerArr[t].showBanker(),this.playBankerAnimation(t)},n.prototype.clearBanker=function(){this._bankerSeatId&&(this.seatPlyerArr[this._bankerSeatId].clearBanker(),this._bankerSeatId=null,this.stopBankerAnimation())},n.prototype.playBankerAnimation=function(e){this._bankerAnimationTimer=null;var n=t.PositionData.getInstance().getBankerAnimationPos(e);this._bankerAnimation.x=n.x,this._bankerAnimation.y=n.y,this._bankerAnimation.play("bankerAnimation",0),this.addChild(this._bankerAnimation)},n.prototype.stopBankerAnimation=function(){this._bankerAnimation.stop(),this._bankerAnimation.parent&&this.removeChild(this._bankerAnimation)},n.prototype.resetAll=function(){this.timer&&(egret.clearTimeout(this.timer),this.timer=null),this.activeSeatId=null,this.clearBanker();try{for(var t=__values(this.seatPlyerArr),e=t.next();!e.done;e=t.next()){var n=e.value;n&&n.removeUserData()}}catch(i){o={error:i}}finally{try{e&&!e.done&&(r=t["return"])&&r.call(t)}finally{if(o)throw o.error}}this.stopBankerAnimation(),this._bankerAnimationTimer&&(egret.clearTimeout(this._bankerAnimationTimer),this._bankerAnimationTimer=null);var o,r},n.prototype.destroy=function(){e.prototype.destroy.call(this),this.timer&&(egret.clearTimeout(this.timer),this.timer=null),this._bankerAnimation.stop(),this._bankerAnimationTimer&&(egret.clearTimeout(this._bankerAnimationTimer),this._bankerAnimationTimer=null)},n}(t.BaseVc);t.SeatPlayVc=e,__reflect(e.prototype,"SWGAME.SeatPlayVc")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(t.BaseVc);t.VoiceVc=e,__reflect(e.prototype,"SWGAME.VoiceVc")}(SWGAME||(SWGAME={}));var SWGAME;!function(t){var e=function(){function t(t){this.betInfo=[],this.score=0,this.tmpBetReducePoint=0,this._uid=t.uid,this._headUrl=t.headUrl,this._diamond=t.diamond,this._nickName=t.nickName,this._points=t.points,this._chips=t.chips,this.seatId=t.seatId,"男"==t.gender?this._gender=0:this._gender=1}return Object.defineProperty(t.prototype,"uid",{get:function(){return this._uid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headUrl",{get:function(){return this._headUrl},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"diamond",{get:function(){return this._diamond},set:function(t){this._diamond=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nickName",{get:function(){return this._nickName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"points",{get:function(){return this._points},set:function(t){this._points=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"chips",{get:function(){return this._chips},set:function(t){this._chips=t},enumerable:!0,configurable:!0}),t.prototype.getGender=function(){return this._gender},t.prototype.updateBetInfo=function(t,e){this.betInfo[e]||(this.betInfo[e]=0),this.betInfo[e]+=t},t}();t.UserVo=e,__reflect(e.prototype,"SWGAME.UserVo")}(SWGAME||(SWGAME={}));