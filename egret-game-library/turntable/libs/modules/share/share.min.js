var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);i.prototype=t.prototype,e.prototype=new i},share;!function(e){function t(e,t,i,n,o,a,s,r,d){if(void 0===t&&(t=0),void 0===i&&(i=""),void 0===n&&(n=""),void 0===o&&(o=""),void 0===a&&(a=""),void 0===s&&(s=null),void 0===r&&(r=null),void 0===d&&(d=0),uniLib.Global.isNative){var h=new uniLib.WXShareVo;h.shareWay=d;var l=MJLobbyData.getInstance().lobbyConfig;if(LobbyDataCache.bundleInfo&&LobbyDataCache.bundleInfo.wx_wbappid){var p=uniLib.UserInfo.nickName;p.length>5&&(p=p.slice(0,5)),h.webpageUrl="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+LobbyDataCache.bundleInfo.wx_wbappid+"&redirect_uri=http://"+l.newLink+"/addons/zqgame/gameshare.php?appid="+LobbyDataCache.bundleInfo.wx_wbappid+"&response_type=code&scope=snsapi_base&state="+uniLib.CompressUtil.base64encode(uniLib.UserInfo.uid+"|"+(t?t:0)+"|"+p+"|"+Cmd.ShareOpType.click+"_"+i)+"&connect_redirect=1#wechat_redirect"}else h.webpageUrl=uniLib.ZQGameSdk.defaultWXShareVo.webpageUrl+"?uid="+uniLib.UserInfo.uid+"&nickName="+uniLib.UserInfo.nickName;h.title=o?o:l.shareTitle,h.description=a?a:l.shareContent,uniLib.ZQGameSdk.share(h,function(t){if(t&&0==t.code){var i=new Cmd.UploadShareInfoLittleGameLobbyCmd_CS;i.opType=Cmd.ShareOpType.share,i.shareType=e,i.extData=n,NetMgr.tcpSend(i),s&&s.call(r)}else 1==t.code?uniLib.TipsUtils.showTipsDownToUp("分享取消"):2==t.code&&uniLib.TipsUtils.showTipsDownToUp("分享被拒绝")},this)}}var i=function(){function e(){}return e.RES_JSON="resource/share/share.res_a799b8f8.json",e.THM_JSON="resource/share/gameEui_a5298458.json",e.PUB_SHARE="pub_share",e.SHARE_INVITEDATA="share_invitedata",e.SHARE_INVITEAWARD="share_inviteaward",e}();e.ShareConst=i,__reflect(i.prototype,"share.ShareConst"),e.shareNativeMessage=t}(share||(share={}));var Cmd;!function(e){function t(e){e.resultCode||uniLib.Global.dispatchEvent(share.ShareConst.SHARE_INVITEDATA,e)}function i(e){e.resultCode||(uniLib.Global.dispatchEvent(share.ShareConst.SHARE_INVITEAWARD,e),wxgame.Global.instance.aldSendEvent("周边系统","分享有礼领取钻石成功"))}e.OnGetInviteInfoLittleGameLobbyCmd_S=t,e.OnGetInviteRewardLittleGameLobbyCmd_S=i}(Cmd||(Cmd={}));var share;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.skinName="LobbySharePanelSkin",e}return __extends(i,t),i.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent(),this.tips_lbl.textFlow=[{text:"邀请",style:{textColor:15322543}},{text:"3名新用户",style:{textColor:14614272}},{text:"领",style:{textColor:15322543}},{text:"0.66元",style:{textColor:14614272}},{text:"及以上随机现金，自动提现！",style:{textColor:15322543}}]},i.prototype.destroy=function(){this._inviteInfo=null,this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this),uniLib.Global.removeEventListener(e.ShareConst.SHARE_INVITEAWARD,this.update,this),uniLib.Global.removeEventListener(e.ShareConst.SHARE_INVITEDATA,this.init,this)},i.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this),uniLib.Global.addEventListener(e.ShareConst.SHARE_INVITEAWARD,this.update,this),uniLib.Global.addEventListener(e.ShareConst.SHARE_INVITEDATA,this.init,this);var t=new Cmd.GetInviteInfoLittleGameLobbyCmd_C;NetMgr.tcpSend(t)},i.prototype.init=function(e){var t=e.param;this.updateHead(t)},i.prototype.update=function(e){var t=e.param;this.updateHead(t)},i.prototype.updateHead=function(e){var t=this;this._inviteInfo=e;var i=e.info;i.forEach(function(e,i){var n;n=ConfigMgr.getInstance().getGoodCfgById(e.goods.goodsId);var o=t["btn_"+i];o&&(32==e.goods.goodsId?o.label=e.goods.goodsNum+"金币":296==e.goods.goodsId?o.label="最高"+e.goods.goodsNum+"元":6==e.goods.goodsId&&(o.label=e.goods.goodsNum+"钻石"),1==e.status?o.touchEnabled=!0:2==e.status?(o.touchEnabled=!0,o.skin.head.mask=o.skin.msk,o.skin.head.source=e.headUrl):3==e.status&&(o.touchEnabled=!1,o.skin.head.mask=o.skin.msk,o.skin.head.source=e.headUrl,o.skin.get.visible=!0))}),3==e.rewardStatus?(this.open_btn.currentState="disabled",this.open_btn.touchEnabled=!1,this.open_img.visible=!0):2==e.rewardStatus?this.open_btn.currentState="up":1==e.rewardStatus&&(this.open_btn.currentState="disabled",this.open_btn.touchEnabled=!1)},i.prototype.btnClick=function(e){switch(e.target){case this.btn_0:case this.btn_1:case this.btn_2:var t=parseInt(e.target.name);if(this._inviteInfo&&this._inviteInfo.info[t]){var i=this._inviteInfo.info[t];if(1==i.status)this.clickShare();else if(2==i.status)if(uniLib.UserInfo.phonenumber){var n=new Cmd.GetInviteRewardLittleGameLobbyCmd_C;n.id=this._inviteInfo.info[t].id,NetMgr.tcpSend(n)}else uniLib.PopUpMgr.addPopUp(myInfo.BindPhoneVC,null,!0,!0,0,uniLib.PopUpEffect.CENTER,0,0,null)}break;case this.open_btn:if(uniLib.UserInfo.phonenumber){if(this._inviteInfo&&this._inviteInfo.info){var n=new Cmd.GetInviteRewardLittleGameLobbyCmd_C;n.id=this._inviteInfo.info[this._inviteInfo.info.length-1].id,NetMgr.tcpSend(n)}}else uniLib.PopUpMgr.addPopUp(myInfo.BindPhoneVC,null,!0,!0,0,uniLib.PopUpEffect.CENTER,0,0,null)}},i.prototype.clickShare=function(){if(uniLib.Global.isWxGame()){var t=new uniLib.WXShareVo;t.shareType=Cmd.ShareType.invite,uniLib.ZQGameSdk.share(t),wxgame.Global.instance.aldSendEvent("周边系统","分享有礼跳转分享")}else e.shareNativeMessage(Cmd.ShareType.invite,0,Cmd.ShareType.invite.toString())},i}(eui.Component);e.sharePanel=t,__reflect(t.prototype,"share.sharePanel")}(share||(share={}));