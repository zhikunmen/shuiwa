var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},club;!function(t){var e=function(){function t(){this.suspendTimer=0,this.renewTimer=0,this.clubDayChose=1,this.isClubOwner=!1,this.clubRefresh=0,this.clubStyle=i.ZHANGZHOU,this.InviteRoomId=0,this.isClubManage=!1,this.ClubImportMatchId=0,this.PartnerImportUidList=[],this.PartnerMatchId=0}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t}();t.ClubData=e,__reflect(e.prototype,"club.ClubData");var i;!function(t){t[t.ZHANGZHOU=0]="ZHANGZHOU",t[t.GUANGDONG=1]="GUANGDONG"}(i=t.CLUBSTYLE||(t.CLUBSTYLE={}))}(club||(club={}));var club;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ClubPlayerListHeadSkin",t._ownerImg.visible=!1,t._adminImg.visible=!1,t}return __extends(i,e),i.prototype.dataChanged=function(){this.info=this.data,this._headImg.source=this.info.headUrl,1==this.info.state?this._onlineImg.visible=!0:this._onlineImg.visible=!1,1==this.info.membertype&&(this._onlineImg.visible=!1,this._ownerImg.visible=!0),2==this.info.membertype&&(this._onlineImg.visible=!1,this._adminImg.visible=!0),1!=this.info.membertype&&2!=this.info.membertype&&(t.ClubData.getInstance().clubDeleteUser?this._deleteBtn.visible=!0:this._deleteBtn.visible=!1);var e,i,n=this.info.nickname;for(i=this.getStrRealLength(n)>8?"...":"";this.getStrRealLength(n)>8;)e=n.length,n=n.substr(0,e-1);this._nameTxt.text=n+i,this._idTxt.text=this.info.uid+""},i.prototype.getStrRealLength=function(t){var e={GetLength:null};return e.GetLength=function(t){return Number(t.replace(/[\u0391-\uFFE5]/g,"aa").length)},e.GetLength(t)},i}(eui.ItemRenderer);t.ClubPlayerListHeadPanel=e,__reflect(e.prototype,"club.ClubPlayerListHeadPanel")}(club||(club={}));var Cmd;!function(t){function e(t,e,i){void 0===i&&(i=!0),uniLib.Global.dispatchEvent(t,e,i)}function i(i){if(i.list)club.ClubModuleMgr.getInstance().showActiveDetailRoomtPanel(function(){e(club.ClubConst.ActiveDetailRoom,i)});else{club.ClubModuleMgr.getInstance().removeActiveDetailRoomtPanel();var n=new t.RequestMatchGroupCmd_C;NetMgr.tcpSend(n)}}function n(t){t.isClub?Array.isArray(t.list)?club.ClubModuleMgr.getInstance().showAllClubListPanel(function(){e(club.ClubConst.HistoryClubList,t)}):club.ClubModuleMgr.getInstance().showClubListPanel():e(club.ClubConst.HistoryMatchIdList,t)}function s(t){if(t.resultCode||(t.resultCode=club.ClubConst.SUCCESS),t.resultCode==club.ClubConst.SUCCESS)switch(t.typ){case club.ClubConst1.MATCH_HISTORY_FOR_MANAGE:e(club.ClubConst.MATCH_HISTORY_FOR_MANAGE,t);break;case club.ClubConst1.MATCH_HISTORY_FOR_DESK:e(club.ClubConst.MATCH_HISTORY_FOR_DESK,t);break;case club.ClubConst1.MATCH_HISTORY_FOR_MYSELF:e(club.ClubConst.MATCH_HISTORY_FOR_MYSELF,t);break;case club.ClubConst1.MATCH_HISTORY_FOR_UID:e(club.ClubConst.MATCH_HISTORY_FOR_UID,t);break;case club.ClubConst1.MATCH_HISTORY_FOR_PARTNER:e(club.ClubConst.MATCH_HISTORY_FOR_PARTNER,t)}}function r(t){0==uniLib.Global.isInGame&&(1==t.isClub?t.curMath?club.ClubModuleMgr.getInstance().showClubDeskPanel(function(){e(club.ClubConst.ReturnMatchGroup,t)}):(club.ClubModuleMgr.getInstance().removeClubDeskPanel(),club.ClubSendMgr.requestClubMatchList()):e(club.ClubConst.ReturnMatchGroupManage,t),club.ClubData.getInstance().isShowScratch=t.isShowScratch)}function o(t){t&&e(club.ClubConst.LatestMatchRoom,t)}function a(t){e(club.ClubConst.JoinMemberListMatch,t)}function h(t){club.ClubModuleMgr.getInstance().shoClubEnterRemarks(function(){e(club.ClubConst.NotifyImportNoteCmd,t)})}function l(t){e(club.ClubConst.CLUB_NOTICE,t)}function c(t){t.resultCode||(t.resultCode=club.ClubConst.SUCCESS),t.resultCode==club.ClubConst.SUCCESS&&e(club.ClubConst.RemarkPointMatchGroup,t)}function u(t){t.resultCode||(t.resultCode=club.ClubConst.SUCCESS),t.resultCode==club.ClubConst.SUCCESS&&e(club.ClubConst.RemarkNickNameMatchGroup,t)}function d(t){t.resultCode||(t.resultCode=club.ClubConst.SUCCESS),t.resultCode==club.ClubConst.SUCCESS&&club.ClubModuleMgr.getInstance().showClubImportPanel(function(){e(club.ClubConst.GetCanImportMemberListMatchGroup,t)})}function p(t){t.resultCode||(t.resultCode=club.ClubConst.SUCCESS),t.resultCode==club.ClubConst.SUCCESS&&(e(club.ClubConst.ImportMemberListMatchGroup,t),uniLib.TipsUtils.showConfirm("导入数据成功！","","确定",null))}function b(t){1==t.typ?club.ClubData.getInstance().ClubMemberMiniList=t.whitelist:club.ClubData.getInstance().ClubMemberList=t.whitelist,e(club.ClubConst.MemberInfoMatchGroup,t)}function m(t){t.resultCode||(t.resultCode=club.ClubConst.SUCCESS),t.resultCode==club.ClubConst.SUCCESS&&club.ClubModuleMgr.getInstance().showClubInvitePlayerPanel(function(){e(club.ClubConst.GetCanInviteMemberList,t)})}function C(t){club.ClubModuleMgr.getInstance().showClubInviteBrdPanel(function(){e(club.ClubConst.InviteMemberMatchGroupBrd,t)})}function _(t){t.resultCode&&2==t.resultCode?uniLib.TipsUtils.showTipsDownToUp("操作太频繁，请稍后重试！"):t.resultCode||e(club.ClubConst.UserInfoSearchLobby,t)}function y(t){e(club.ClubConst.InviteMemberMatchGroup,t)}function v(t){t&&t.list&&e(club.ClubConst.ReturnYellowList,t)}function g(t){club.ClubModuleMgr.getInstance().showCreateMatchSetPanel(t)}function f(t){e(club.ClubConst.LEAVE_MATCHGROUP2,t)}function T(e){function i(){var i=new t.ReplyJoinMemberListMatchGroupCmd_C;i.matchId=e.matchId,i.reply=1,i.uid=e.uid,NetMgr.tcpSend(i)}var n=e.wechat,s="玩家"+e.nickname+(n?"微信:"+n:"")+"申请加入老友圈"+e.matchId+",是否同意进入？";MJLobbyData.getInstance().lobbyId<5e3?ComponentUtil.getInstance().showConfirm(s,"","确定",i,"取消",null):ComponentUtil.getInstance().showConfirm(s,"温馨提示","确定",i,"取消",null)}function I(t){t.resultCode||(t.resultCode=club.ClubConst.SUCCESS),t.resultCode==club.ClubConst.SUCCESS&&e(club.ClubConst.GetPartnerRecordsMatchGroup,t)}function L(i){if(i.resultCode||(i.resultCode=club.ClubConst.SUCCESS),i.resultCode==club.ClubConst.SUCCESS&&(e(club.ClubConst.OperatePartnerMatchGroup,i),1==i.typ)){var n=new t.GetPartnerRecordsMatchGroupCmd_CS;n.matchId=club.ClubData.getInstance().clubmatchid,NetMgr.tcpSend(n)}}function M(i){e(club.ClubConst.RemovePartnerMatchGroup,i);var n=function(){var e=new t.ReplyRemovePartnerMatchGroupCmd_CS;e.typ=1,e.matchId=i.matchId,NetMgr.tcpSend(e)},s=function(){var e=new t.ReplyRemovePartnerMatchGroupCmd_CS;e.typ=2,e.matchId=i.matchId,NetMgr.tcpSend(e)};ComponentUtil.getInstance().showConfirm(i.matchId+"圈主请求解除合伙关系，同意后您的合伙人资格被取消，您的群成员也将脱离此老友圈！","解除合伙关系","确定",n,"拒绝",s)}function P(t){t.resultCode||(t.resultCode=club.ClubConst.SUCCESS),t.resultCode==club.ClubConst.SUCCESS&&e(club.ClubConst.ReplyRemovePartnerMatchGroup,t)}function E(t){t.resultCode||(t.resultCode=club.ClubConst.SUCCESS),t.resultCode==club.ClubConst.SUCCESS&&e(club.ClubConst.GetMemberRecordsMatchGroup,t)}function A(t){t.resultCode||(t.resultCode=club.ClubConst.SUCCESS),t.resultCode==club.ClubConst.SUCCESS&&(e(club.ClubConst.GetCanImportMemberList2MatchGroup,t),club.ClubData.getInstance().PartnerImportList=t.memberList,club.ClubData.getInstance().PartnerMatchId=t.matchId)}function x(t){t.resultCode||(t.resultCode=club.ClubConst.SUCCESS),t.resultCode==club.ClubConst.SUCCESS&&(uniLib.TipsUtils.showTipsDownToUp("已提交申请，等待审核！"),e(club.ClubConst.ImportMember2MatchGroup,t))}function S(t){t.resultCode||(t.resultCode=club.ClubConst.SUCCESS),t.resultCode==club.ClubConst.SUCCESS&&(e(club.ClubConst.RemoveMemberMatchGroup,t),uniLib.TipsUtils.showTipsDownToUp("此成员已踢出，记录保留24小时！"))}function k(t){t.resultCode||(t.resultCode=club.ClubConst.SUCCESS),t.resultCode==club.ClubConst.SUCCESS&&(club.ClubData.getInstance().suspendTimer=t.pauseTimer?t.pauseTimer:null,club.ClubData.getInstance().renewTimer=t.restoreTimer?t.restoreTimer:null)}function R(t){t.resultCode||(t.resultCode=club.ClubConst.SUCCESS),t.resultCode==club.ClubConst.SUCCESS&&e(club.ClubConst.CleanMemberWinPointMatchGroup,t)}function U(t){t.resultCode||(t.resultCode=club.ClubConst.SUCCESS),t.resultCode==club.ClubConst.SUCCESS&&club.ClubModuleMgr.getInstance().showClubCleanRecordPanel(function(){e(club.ClubConst.GetCleanRecordMatchGroup,t)})}t.clubDispatch=e,t.OnActiveDetailRoomCmd_S=i,t.OnHistoryMatchIdListMatchGroupCmd_S=n,t.OnGetGameDataHistoryForMatchCmd_S=s,t.OnReturnMatchGroupCmd_S=r,t.OnLatestMatchRoomInfoGroupCmd_Brd=o,t.OnJoinMemberListMatchGroupCmd_S=a,t.OnNotifyImportNoteCmd_S=h,t.OnClubNoticeMatchGroupCmd_CS=l,t.OnRemarkPointMatchGroupCmd_CS=c,t.OnRemarkNickNameMatchGroupCmd_CS=u,t.OnGetCanImportMemberListMatchGroupCmd_CS=d,t.OnImportMemberListMatchGroupCmd_CS=p,t.OnReturnMemberInfoMatchGroupCmd_S=b,t.OnGetCanInviteMemberListMatchGroupCmd_CS=m,t.OnInviteMemberMatchGroupCmd_Brd=C,t.OnUserInfoSearchLobbyCmd_S=_,t.OnInviteMemberMatchGroupCmd_CS=y,t.OnReturnYellowMemberInfoMatchGroupCmd_S=v,t.OnChangeMatchGroupCmd_S=g,t.OnLeaveMatchGroup2Cmd_S=f,t.OnRequestJoinMemberMatchGroupCmd_S=T,t.OnGetPartnerRecordsMatchGroupCmd_CS=I,t.OnOperatePartnerMatchGroupCmd_CS=L,t.OnRemovePartnerMatchGroupCmd_Brd=M,t.OnReplyRemovePartnerMatchGroupCmd_CS=P,t.OnGetMemberRecordsMatchGroupCmd_CS=E,t.OnGetCanImportMemberList2MatchGroupCmd_CS=A,t.OnImportMember2MatchGroupCmd_CS=x,t.OnRemoveMemberMatchGroupCmd_CS=S,t.OnSetPauseTimerMatchGroupCmd_CS=k,t.OnCleanMemberWinPointMatchGroupCmd_CS=R,t.OnGetCleanRecordMatchGroupCmd_CS=U}(Cmd||(Cmd={}));var club;!function(t){var e=function(){function e(){this._isShowClub=0}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.removeAllClubListPanel=function(){this._clubAllBoxPanel&&(uniLib.PopUpMgr.removePopUp(this._clubAllBoxPanel),this._clubAllBoxPanel=null)},e.prototype.showAllClubListPanel=function(e){var i=this;this._clubAllBoxPanel?e():(this._clubAllBoxPanel=new t.ClubAllBoxPanel,LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUB,function(){uniLib.PopUpMgr.addPopUp(i._clubAllBoxPanel,null,!0,!0,0),e()}))},e.prototype.showClubCleanRecordPanel=function(e){LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUB,function(){uniLib.PopUpMgr.addPopUp(t.ClubCleanRecordPanel,null,!0,!0),e()})},e.prototype.showClubListPanel=function(){LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUB,function(){uniLib.PopUpMgr.addPopUp(t.ClubBoxPanel,null,!0,!0,0,uniLib.PopUpEffect.CENTER)})},e.prototype.showActiveDetailRoomtPanel=function(e){var i=this;LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUB,function(){i._activeRoomInformationPanel||(i._activeRoomInformationPanel=new t.ActiveRoomInformationPanel),uniLib.PopUpMgr.addPopUp(i._activeRoomInformationPanel,null,!0,!0,0,uniLib.PopUpEffect.CENTER),e()})},e.prototype.showClubDetailsPanel=function(e){LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUB,function(){uniLib.PopUpMgr.addPopUp(t.ClubDetailsPanel,null,!0,!0,0,uniLib.PopUpEffect.CENTER,0,0,e)})},e.prototype.showClubInvitePanel=function(e){LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUB,function(){var i;e&&e instanceof uniLib.ZqEvent&&(i=e.param),uniLib.PopUpMgr.addPopUp(t.ClubInvitePanel,uniLib.SceneMgr.instance.currentScene.tipsLayer,!0,!0,0,uniLib.PopUpEffect.CENTER,0,0,i)})},e.prototype.removeActiveDetailRoomtPanel=function(){this._activeRoomInformationPanel&&(uniLib.PopUpMgr.removePopUp(this._activeRoomInformationPanel),this._activeRoomInformationPanel=null)},e.prototype.showClubGuidePanel=function(){LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUB,function(){uniLib.PopUpMgr.addPopUp(t.ClubGuidePanel,null,!0,!0,0,uniLib.PopUpEffect.CENTER)})},e.prototype.showClubRemarksScorePanel=function(e){LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUB,function(){uniLib.PopUpMgr.addPopUp(t.ClubRemarksScorePanel,null,!0,!0,0,uniLib.PopUpEffect.CENTER,0,0,e)})},e.prototype.showClubMemberInfoPanel=function(e){LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUB,function(){uniLib.PopUpMgr.addPopUp(t.ClubMemberInfoPanel,null,!0,!0,0,uniLib.PopUpEffect.CENTER,0,0,e)})},e.prototype.showClubImportPanel=function(e){LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUB,function(){uniLib.PopUpMgr.addPopUp(t.ClubImportPanel,null,!0,!0,0,uniLib.PopUpEffect.CENTER),e()})},e.prototype.showClubDeskPanel=function(e){var i=this;1==this._isShowClub&&e(),this._clubDeskPanel||(this._clubDeskPanel=new t.ClubDeskPanel,LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUB,function(){uniLib.PopUpMgr.addPopUp(i._clubDeskPanel,null,!0,!0,0,uniLib.PopUpEffect.CENTER),i._isShowClub=1,e()}))},e.prototype.removeClubDeskPanel=function(){if(this._clubDeskPanel&&(uniLib.PopUpMgr.removePopUp(this._clubDeskPanel),this._clubDeskPanel=null,this._isShowClub=0,0==t.ClubData.getInstance().clubRefresh)){var e=new Cmd.ExitMatchGroupCmd_C;NetMgr.tcpSend(e)}},e.prototype.showClubManagePanel=function(){LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUB,function(){uniLib.PopUpMgr.addPopUp(t.MatchManagePanel,null,!0,!0,0,uniLib.PopUpEffect.CENTER)})},e.prototype.showClubPlayerListPanel=function(e){LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUB,function(){uniLib.PopUpMgr.addPopUp(t.ClubPlayerListPanel,null,!0,!0,0,0,0,0,e)})},e.prototype.showClubAllRecordPanel=function(e){LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUB,function(){uniLib.PopUpMgr.addPopUp(t.ClubAllRecordPanel,null,!0,!0,0,uniLib.PopUpEffect.CENTER),e()})},e.prototype.showClubMemberRecordPanel=function(e){LoadPanelTipMgr.getInstance().loadRes(ResGroupConsts.MJL_RECORD,function(){uniLib.PopUpMgr.addPopUp(t.ClubMemberRecordPanel,null,!0,!0,0,uniLib.PopUpEffect.CENTER),e()})},e.prototype.showClubNoticePanel=function(){LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUB,function(){uniLib.PopUpMgr.addPopUp(t.ClubNoticePanel,null,!0,!0,0,uniLib.PopUpEffect.CENTER)})},e.prototype.shoClubEnterRemarks=function(e){LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUB,function(){uniLib.PopUpMgr.addPopUp(t.ClubEnterRemarks,null,!0,!1,0),e()})},e.prototype.showCreateClubPanel=function(t){LoadPanelTipMgr.getInstance().loadRes(ResGroupConsts.MJL_CREATEPANEL,function(){var e=new CreatePanelParam(1);t?e.data=t:MsgSendMgr.getNormalGameList(1),uniLib.PopUpMgr.addPopUp(CreateGamePanel,null,!0,!0,0,uniLib.PopUpEffect.CENTER,1240,640,e)})},e.prototype.showClubUserInfoPanel=function(e){LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUB,function(){uniLib.PopUpMgr.addPopUp(t.ClubUserInfoPanel,null,!0,!0,0,uniLib.PopUpEffect.CENTER,0,0,e)})},e.prototype.showClubSearchMemberPanel=function(){LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUB,function(){uniLib.PopUpMgr.addPopUp(t.ClubSearchMemberPanel,null,!0,!0,0,uniLib.PopUpEffect.CENTER)})},e.prototype.showClubAddMemberPanel=function(){LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUB,function(){uniLib.PopUpMgr.addPopUp(t.ClubAddMemberPanel,null,!0,!0,0,uniLib.PopUpEffect.CENTER)})},e.prototype.showCreateMatchSetPanel=function(e){LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUB,function(){uniLib.PopUpMgr.removePopUp(CreateGamePanel),uniLib.PopUpMgr.addPopUp(t.CreateMatchSetPanel,null,!0,!0,0,uniLib.PopUpEffect.CENTER,0,0,e)})},e.prototype.showClubUserApplyPanel=function(){LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUB,function(){uniLib.PopUpMgr.addPopUp(t.ClubApplyListPanel,null,!0,!0,0,uniLib.PopUpEffect.CENTER)})},e.prototype.showClubInviteBrdPanel=function(e){LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUB,function(){uniLib.PopUpMgr.addPopUp(t.ClubInviteBrdPanel,null,!0,!0,0,uniLib.PopUpEffect.CENTER),e()})},e.prototype.showClubInvitePlayerPanel=function(e){LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUB,function(){uniLib.PopUpMgr.addPopUp(t.ClubInvitePlayerPanel,null,!0,!0,0,uniLib.PopUpEffect.CENTER),e()})},e.prototype.showClubPartnerRecordPanel=function(e){LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUB,function(){uniLib.PopUpMgr.addPopUp(t.ClubPartnerRecordPanel,null,!0,!0,0),e()})},e.prototype.showClubPartnerAddPanel=function(){LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUB,function(){uniLib.PopUpMgr.addPopUp(t.ClubPartnerAddPanel,null,!0,!0,0,uniLib.PopUpEffect.CENTER)})},e.prototype.showClubPartnerMemberDetailPanel=function(e){LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUB,function(){uniLib.PopUpMgr.addPopUp(t.ClubPartnerMemberDetailPanel,null,!0,!0,0,uniLib.PopUpEffect.CENTER),e()})},e.prototype.showClubPartnerRemovePanterPanel=function(e){LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUB,function(){uniLib.PopUpMgr.addPopUp(t.ClubPartnerRemovePanterPanel,null,!0,!0,0,uniLib.PopUpEffect.CENTER,0,0,e)})},e.prototype.showClubPartnerMemberRecordPanel=function(e){LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUB,function(){uniLib.PopUpMgr.addPopUp(t.ClubPartnerMemberRecordPanel,null,!0,!0,0),e()})},e.prototype.showClubPartnerImportPanel=function(e){LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUB,function(){uniLib.PopUpMgr.addPopUp(t.ClubPartnerImportPanel,null,!0,!0,0),e()})},e.prototype.showClubPartnerImportAddPanel=function(){LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUB,function(){uniLib.PopUpMgr.addPopUp(t.ClubPartnerImportAddPanel,null,!0,!0,0,uniLib.PopUpEffect.CENTER)})},e.prototype.showClubPartnerRecordDetailPanel=function(e){LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUB,function(){uniLib.PopUpMgr.addPopUp(t.ClubPartnerRecordDetailPanel,null,!0,!0,0,uniLib.PopUpEffect.CENTER,0,0,e)})},e.prototype.showClubPartnerRemoveMemberPanel=function(e){LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUB,function(){uniLib.PopUpMgr.addPopUp(t.ClubPartnerRemoveMemberPanel,null,!0,!0,0,uniLib.PopUpEffect.CENTER,0,0,e)})},e.prototype.showClubMemberTimerPanel=function(){LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUB,function(){uniLib.PopUpMgr.addPopUp(t.ClubMemberTimerPanel,null,!0,!0,0,uniLib.PopUpEffect.CENTER,0,0)})},e}();t.ClubModuleMgr=e,__reflect(e.prototype,"club.ClubModuleMgr")}(club||(club={}));var club;!function(t){var e=function(){function e(){}return e.requestMatchData=function(t){void 0===t&&(t=0);var e=new Cmd.RequestMatchGroupCmd_C;t&&(e.isClub=t),NetMgr.tcpSend(e)},e.requestClubMatchList=function(){var t=new Cmd.HistoryMatchIdListMatchGroupCmd_C;t.isClub=1,NetMgr.tcpSend(t)},e.requestRequestMatchGroupCmd=function(t){var e=new Cmd.RequestMatchGroupCmd_C;e.matchId=t,NetMgr.tcpSend(e)},e.InviteMemberMatchGroupCmd=function(e,i){var n=new Cmd.InviteMemberMatchGroupCmd_CS;n.matchId=e,n.uids=i,(0!=t.ClubData.getInstance().InviteRoomId?t.ClubData.getInstance().InviteRoomId:!1)&&(n.roomId=t.ClubData.getInstance().InviteRoomId),NetMgr.tcpSend(n)},e.getGameDetailHistory=function(t){var e=new Cmd.GetGameDetailHistoryCmd_C;e.globalRoomId=t,NetMgr.tcpSend(e)},e.getGameDataHistoryForMatch=function(t,e,i,n){var s=new Cmd.GetGameDataHistoryForMatchCmd_C;s.matchId=t,s.curPage=e,s.typ=n,s.which=i,NetMgr.tcpSend(s)},e.getGameDataHistoryToUId=function(t,e,i,n,s){var r=new Cmd.GetGameDataHistoryForMatchCmd_C;r.matchId=t,r.uid=e,r.curPage=i,r.which=s,r.typ=n,NetMgr.tcpSend(r)},e.getGameDataHistoryToUIdgForPartner=function(t,e,i,n){var s=new Cmd.GetGameDataHistoryForMatchCmd_C;s.matchId=t,s.uid=e,s.curPage=i,s.typ=n,NetMgr.tcpSend(s)},e.getGameDataHistorytoMatchMyself=function(t,e){var i=new Cmd.GetGameDataHistoryCmd_C;i.matchId=t,i.curPage=e,NetMgr.tcpSend(i)},e.RemarkPointMatchGroupCmd=function(t,e,i,n,s){var r=new Cmd.RemarkPointMatchGroupCmd_CS;r.matchId=t,r.targetUid=e,r.opType=i,r.point=n,r.which=s,NetMgr.tcpSend(r)},e.ReplyJoinMemberListMatchGroupCmdBatch=function(e,i,n){var s=new Cmd.ReplyJoinMemberListMatchGroupCmd_C;s.matchId=t.ClubData.getInstance().clubmatchid,s.uids=n,s.reply=i,s.matchId=e,NetMgr.tcpSend(s)},e.ReplyJoinMemberListMatchGroupCmd=function(e,i,n){var s=new Cmd.ReplyJoinMemberListMatchGroupCmd_C;s.matchId=t.ClubData.getInstance().clubmatchid,s.uid=n,s.reply=i,s.matchId=e,NetMgr.tcpSend(s)},e}();t.ClubSendMgr=e,__reflect(e.prototype,"club.ClubSendMgr")}(club||(club={}));var ClubUIEventConst=function(){function t(){}return t.JOIN_CLUBROOM="JOIN_CLUBROOM",t}();__reflect(ClubUIEventConst.prototype,"ClubUIEventConst");var club;!function(t){var e=function(e){function i(){var t=e.call(this,"",720,400)||this;return t.skinName="ActiveRoom",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.addEvent=function(){this.cancelBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this),this.dissolveBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this),uniLib.Global.addEventListener(t.ClubConst.ActiveDetailRoom,this.initData,this)},i.prototype.removeEvent=function(){this.cancelBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this),this.dissolveBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this),uniLib.Global.removeEventListener(t.ClubConst.ActiveDetailRoom,this.initData,this)},i.prototype.destory=function(){e.prototype.destroy.call(this),uniLib.PopUpMgr.removePopUp(this),this._activeRoomListOb=null,this.playerGroup&&(this.playerGroup.removeChildren(),this.playerGroup=null)},i.prototype.initData=function(e){var i=e.param;i.matchId&&(this.dissolveBtn.visible=!0,this.cancelBtn.visible=!0);for(var n=this.itemList.numChildren-1;n>=0;n--){var s=this.itemList.getChildAt(n);s.destory(),s=null}if(uniLib.DisplayUtils.removeAllChildren(this.itemList),this._activeRoomListOb=i,this.topTableNumber.text="房号："+this._activeRoomListOb.roomId,Array.isArray(i.list)&&0!=i.list.length)for(var n=0;n<i.list.length;n++){var s=new t.ActiveRoomListItem;s.setData(i.list[n],i.roomId),i.matchId&&(s.name=i.matchId+""),1==this._activeRoomListOb.state||this._activeRoomListOb.list[n].score?(s.setEliminateVisible(!1),this.cancelBtn.visible=!0,this.dissolveBtn.visible=!0):s.setEliminateVisible(!0),s.y=n*s.height+10,this.itemList.addChild(s)}},i.prototype.btnClick=function(t){var e=this;t.currentTarget==this.cancelBtn?this.removePop():t.currentTarget==this.dissolveBtn&&uniLib.TipsUtils.showConfirm("是否确认解散该房间?","","确定",function(){var t=new Cmd.ActiveDissolveRoomCmd_C;t.roomId=e._activeRoomListOb.roomId,t.matchId=e._activeRoomListOb.matchId,NetMgr.tcpSend(t),e.removePop()},"取消",null)},i}(commonpanel.LobbyBaseEuiPanel);t.ActiveRoomInformationPanel=e,__reflect(e.prototype,"club.ActiveRoomInformationPanel")}(club||(club={}));var club;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="ActiveRoomListItemSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.setData=function(t,e){this._data=t,this._roomId=e,void 0!=t.score&&(this.playerScore.text=t.score.toString()),this.playerName.text=t.nickname,this.eliminate.addEventListener(egret.TouchEvent.TOUCH_TAP,this.eliminatePlayer,this)},e.prototype.eliminatePlayer=function(t){var e=new Cmd.KickLeaveRoomCmd_C;e.uid=this._data.uid,""!=this.name&&(e.matchId=Number(this.name)),e.roomId=this._roomId,NetMgr.tcpSend(e)},e.prototype.setEliminateVisible=function(t){this.eliminate.visible=t},e.prototype.destory=function(){this.eliminate&&this.eliminate.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.eliminatePlayer,this),uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this)},e}(eui.Component);t.ActiveRoomListItem=e,__reflect(e.prototype,"club.ActiveRoomListItem")}(club||(club={}));var club;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._list=[],t.skinName="ClubAddmemberSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._searchEditableText.addEventListener(egret.FocusEvent.FOCUS_OUT,this.onTextFieldFocusOut,this),uniLib.Global.addEventListener(t.ClubConst.UserInfoSearchLobby,this.setdata,this)},i.prototype.removeEvent=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),uniLib.Global.removeEventListener(t.ClubConst.UserInfoSearchLobby,this.setdata,this),this._searchEditableText.removeEventListener(egret.FocusEvent.FOCUS_OUT,this.onTextFieldFocusOut,this)},i.prototype.initUI=function(){this._menberList.itemRenderer=t.ClubAddMemberItemPanel},i.prototype.setdata=function(t){var e=t.param;this._list=[],this._list.push(e),0==this._list.length?this._tishiText.visible=!0:this._tishiText.visible=!1,this._menberListArray?(Array.isArray(this._menberListArray.source)&&this._menberListArray.removeAll(),this._menberListArray.replaceAll(this._list)):(this._menberListArray=new eui.ArrayCollection(this._list),this._menberList.dataProvider=this._menberListArray)},i.prototype.onClick=function(t){switch(t.target){case this._closeBtn:e.prototype.removePop.call(this);break;case this._searchBtn:if(this._searchEditableText.text.length<8)uniLib.TipsUtils.showTipsDownToUp("请输入正确的玩家ID!"),this._searchEditableText.text="";else{var i=new Cmd.UserInfoSearchLobbyCmd_C;i.uid=Number(this._searchEditableText.text),NetMgr.tcpSend(i)}}},i.prototype.onTextFieldFocusOut=function(t){(""==t.target.text||0==Number(t.target.text))&&(t.target.text="")},i}(commonpanel.LobbyBaseEuiPanel);t.ClubAddMemberPanel=e,__reflect(e.prototype,"club.ClubAddMemberPanel")}(club||(club={}));var club;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ClubAllBoxSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.destroy=function(){t.ClubModuleMgr.getInstance().removeAllClubListPanel(),e.prototype.destroy.call(this)},i.prototype.initUI=function(){this.OnOpen()},i.prototype.addEvent=function(){uniLib.Global.addEventListener(t.ClubConst.HistoryClubList,this.setData,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.removeEvent=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),uniLib.Global.removeEventListener(t.ClubConst.HistoryClubList,this.setData,this)},i.prototype.OnOpen=function(){this._leftGroup.x=-1143,this._closeBtn.x=0,egret.Tween.get(this._leftGroup).to({x:0},300),egret.Tween.get(this._closeBtn).to({x:1137},300)},i.prototype.OnClose=function(){var t=this;egret.Tween.get(this._closeBtn).to({x:0},300),egret.Tween.get(this._leftGroup).to({x:-1143},300).call(function(){return e.prototype.removePop.call(t)})},i.prototype.setData=function(e){var i=e.param;if(i){this._clubList=i.list;for(var n=0;n<this._clubList.length;n++)this._clubList[n].index=n+1;this.boxList.itemRenderer=t.ClubBoxItem,this.boxList.dataProvider=new eui.ArrayCollection(this._clubList)}},i.prototype.onClickTap=function(e){switch(e.target){case this._closeBtn:case this._bgRect:this.OnClose();break;case this._createBtn:this.OnClose(),t.ClubModuleMgr.getInstance().removeClubDeskPanel(),t.ClubModuleMgr.getInstance().showCreateClubPanel();break;case this._joinBtn:this.OnClose(),t.ClubModuleMgr.getInstance().removeClubDeskPanel(),LobbyModuleMgr.getInstance().showJoinRoomPanel(function(){var t=new Cmd.HistoryMatchIdListMatchGroupCmd_C;NetMgr.tcpSend(t)})}},i}(commonpanel.LobbyBaseEuiPanel);t.ClubAllBoxPanel=e,__reflect(e.prototype,"club.ClubAllBoxPanel")}(club||(club={}));var club;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ClubAllRecordItemSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addListener()},i.prototype.addListener=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.removeListener=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.destory=function(){this.removeListener()},i.prototype.onClickTap=function(e){var i=this;switch(e.target){case this._detailBtn:LobbyModuleMgr.getInstance().showRecordDetail(function(){t.ClubSendMgr.getGameDetailHistory(i.info.globalRoomId)}),MJLobbyData.getInstance().globalRoomId=this.info.globalRoomId}},i.prototype.dataChanged=function(){this.info=this.data,this._indextText.text=this.itemIndex+1+"",this._timeText.text=LobbyUtils.changeTimeToStrTwoLine(this.info.timeStamp),this._roomIdText.text=this.info.roomId+"",this._headImg.source=this.info.userGameHistorys[0].headUrl;var t,e,i=this.info.userGameHistorys[0].nickName;for(e=this.getStrRealLength(i)>10?"...":"";this.getStrRealLength(i)>10;)t=i.length,i=i.substr(0,t-1);this._nameText.text=i+e,this._uidText.text=this.info.userGameHistorys[0].uid+"",this._recordText.text=this.info.userGameHistorys[0].integral+"",this._gameNameText.text=this.info.gameName,this._gameNumText.text=this.info.gameNbr+""},i.prototype.getStrRealLength=function(t){var e={GetLength:null};return e.GetLength=function(t){return Number(t.replace(/[\u0391-\uFFE5]/g,"aa").length)},e.GetLength(t)},i}(eui.ItemRenderer);t.ClubAllRecordItemPanel=e,__reflect(e.prototype,"club.ClubAllRecordItemPanel")}(club||(club={}));var club;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._curPage=0,t._dayChose=0,t.skinName="ClubAllRecordSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.initUI=function(){this._clubDayChose=1,this._AllRecordArr=[],this._recordList.itemRenderer=t.ClubAllRecordItemPanel},i.prototype.addEvent=function(){uniLib.Global.addEventListener(t.ClubConst.MATCH_HISTORY_FOR_DESK,this.showData,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.removeEvent=function(){uniLib.Global.removeEventListener(t.ClubConst.MATCH_HISTORY_FOR_DESK,this.showData,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.onClickTap=function(i){var n=this;switch(i.target){case this._closeBtn:e.prototype.removePop.call(this);break;case this._myRecordBtn:t.ClubModuleMgr.getInstance().showClubMemberRecordPanel(function(){t.ClubSendMgr.getGameDataHistoryForMatch(n._matchId,1,1,t.ClubConst1.MATCH_HISTORY_FOR_MYSELF)});break;case this._choseDayBtn:this._choseDayBtn.currentState="down",this._dayTypeGroup.visible=!0;break;case this._todayBtn:this._clubDayChose=1,this._choseDayBtn.skin._dayTypeText.text="今日战绩",this._choseDayBtn.currentState="up",this._dayTypeGroup.visible=!1,this.updateView();break;case this._yesterdayBtn:this._clubDayChose=2,this._choseDayBtn.skin._dayTypeText.text="昨日战绩",this._choseDayBtn.currentState="up",this._dayTypeGroup.visible=!1,this.updateView();break;case this._qianBtn:this._clubDayChose=3,this._choseDayBtn.skin._dayTypeText.text="前日战绩",this._choseDayBtn.currentState="up",this._dayTypeGroup.visible=!1,this.updateView();break;case this._choseRect:this._choseDayBtn.currentState="up",this._dayTypeGroup.visible=!1}},i.prototype.showData=function(t){var e=t.param;e.typ&&(this.addListen(),this._matchId=e.matchId,this._totalPage=e.maxPage,this._curPage=e.curPage,this._matchStatisticInfo=e.matchStatisticInfo,this.updatePoint(),1!=e.curPage||e.gameHistroys[0]?(this._tipsText.visible=!1,this.addData(e.gameHistroys)):(this._tipsText.visible=!0,this._dayChose!=this._clubDayChose&&(this._dayChose=this._clubDayChose,this._AllRecordArr=[],this._AllRecordListArr&&(Array.isArray(this._AllRecordListArr.source)&&this._AllRecordListArr.removeAll(),this._AllRecordListArr.replaceAll(this._AllRecordArr)))))},i.prototype.addListen=function(){this._scroll.addEventListener(egret.Event.CHANGE,this.checkTop,this)},i.prototype.addData=function(t){t&&t[0]&&(this._dayChose==this._clubDayChose?this._AllRecordArr=this._AllRecordArr.concat(t):(this._dayChose=this._clubDayChose,this._AllRecordArr=[],this._AllRecordArr=this._AllRecordArr.concat(t)),this._AllRecordListArr?(Array.isArray(this._AllRecordListArr.source)&&this._AllRecordListArr.removeAll(),this._AllRecordListArr.replaceAll(this._AllRecordArr),1==this._curPage&&this._AllRecordListArr.refresh()):(this._AllRecordListArr=new eui.ArrayCollection(this._AllRecordArr),this._recordList.dataProvider=this._AllRecordListArr))
},i.prototype.updateView=function(){this._dayChose!=this._clubDayChose&&this.getData(),this.updatePoint()},i.prototype.updatePoint=function(){this._matchStatisticInfo?this._roomText.text=""+this._matchStatisticInfo.openNbrs[this._clubDayChose-1]:this._roomText.text="0"},i.prototype.getData=function(){this._clubDayChose==this._dayChose?(t.ClubSendMgr.getGameDataHistoryForMatch(this._matchId,this._curPage,this._clubDayChose,t.ClubConst1.MATCH_HISTORY_FOR_DESK),uniLib.TipsUtils.showTipsDownToUp("正在加载数据~")):t.ClubSendMgr.getGameDataHistoryForMatch(this._matchId,1,this._clubDayChose,t.ClubConst1.MATCH_HISTORY_FOR_DESK)},i.prototype.checkTop=function(t){this._scroll.viewport.scrollV+this._scroll.viewport.height>=this._scroll.viewport.measuredHeight+10&&this._curPage<this._totalPage&&(this._scroll.removeEventListener(egret.Event.CHANGE,this.checkTop,this),this._curPage++,this.getData(),egret.Tween.get(this).wait(2e3).call(this.addListen,this))},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(commonpanel.LobbyBaseEuiPanel);t.ClubAllRecordPanel=e,__reflect(e.prototype,"club.ClubAllRecordPanel")}(club||(club={}));var club;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ClubApplyListSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.initUI=function(){this.messageList.itemRenderer=t.MatchMessageItem,t.ClubData.getInstance().JoinMemberList&&this.updateApplyList(t.ClubData.getInstance().JoinMemberList.list)},i.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),uniLib.Global.addEventListener(t.ClubConst.JoinMemberListMatch,this.updateList,this)},i.prototype.removeEvent=function(){uniLib.Global.removeEventListener(t.ClubConst.JoinMemberListMatch,this.updateList,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i.prototype.onClick=function(i){switch(i.target){case this._closeBtn:e.prototype.removePop.call(this);break;case this._yesBtn:this._allUidList.length>0&&t.ClubSendMgr.ReplyJoinMemberListMatchGroupCmdBatch(t.ClubData.getInstance().clubmatchid,1,this._allUidList);break;case this._noBtn:this._allUidList.length>0&&t.ClubSendMgr.ReplyJoinMemberListMatchGroupCmdBatch(t.ClubData.getInstance().clubmatchid,0,this._allUidList)}},i.prototype.updateList=function(e){t.ClubData.getInstance().JoinMemberList=e.param,this.updateApplyList(t.ClubData.getInstance().JoinMemberList.list)},i.prototype.updateApplyList=function(t){var e=this;this._allUidList=[],t.length>0?(this._tipsText.visible=!1,t.forEach(function(t){e._allUidList.push(t.uid)})):this._tipsText.visible=!0,this.messageListArr?(Array.isArray(this.messageListArr.source)&&this.messageListArr.removeAll(),this.messageListArr.replaceAll(t)):(this.messageListArr=new eui.ArrayCollection(t),this.messageList.dataProvider=this.messageListArr)},i}(commonpanel.LobbyBaseEuiPanel);t.ClubApplyListPanel=e,__reflect(e.prototype,"club.ClubApplyListPanel")}(club||(club={}));var club;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ClubBoxItemSkin",t.removeRedPoint(),t.addListener(),t}return __extends(i,e),i.prototype.addListener=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.removeListener=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.destory=function(){this.removeListener()},i.prototype.dataChanged=function(){this.info=this.data;for(var t,e=this.info.ownerName;this.getStrRealLength(e)>12;)t=e.length,e=e.substr(0,t-1);this.idText.text=this.info.matchId.toString(),this.nameText.text=e,this.roomNameText.text=this.info.gameName+"  "+this.info.gameNbr+"局",this.info.gameNbr>=49&&(this.roomNameText.text=this.info.gameName+"  "+Math.round(this.info.gameNbr)+"课"),this.boxNameText.text=this.info.matchName?this.info.matchName:this.info.matchId.toString(),this.waitRoomText.text=this.info.waitRoomNbr+"桌等待中",this.startRoomText.text=this.info.startRoomNbr+"桌开始",this.head.source=this.info.ownerHeadUrl,this.numberText.text=this.info.index+"",this.info.isNew&&1==this.info.isNew&&(this.bg.source="club_new_menage_json.mjl_club_my"),this.info.noHandle&&1==this.info.noHandle&&this.addRedPoint()},i.prototype.onClickTap=function(e){if(e.target==this.inBtn){t.ClubModuleMgr.getInstance().removeClubDeskPanel();var i=new Cmd.RequestMatchGroupCmd_C;i.matchId=this.info.matchId,i.isClub=1,NetMgr.tcpSend(i),uniLib.PopUpMgr.removePopUp(t.ClubAllBoxPanel)}else if(e.target==this.outBtn){var n=this,s=function(){var e=new Cmd.LeaveMatchGroup2Cmd_C;e.matchId=n.info.matchId,t.ClubData.getInstance().clubmatchid==n.info.matchId&&t.ClubModuleMgr.getInstance().removeClubDeskPanel(),NetMgr.tcpSend(e);var i=new Cmd.HistoryMatchIdListMatchGroupCmd_C;i.isClub=1,NetMgr.tcpSend(i)};ComponentUtil.getInstance().showConfirm("是否确定退出老友圈?","","确定",s," 取消",null)}else if(e.target==this.bg){t.ClubModuleMgr.getInstance().removeClubDeskPanel();var i=new Cmd.RequestMatchGroupCmd_C;i.matchId=this.info.matchId,i.isClub=1,NetMgr.tcpSend(i),uniLib.PopUpMgr.removePopUp(t.ClubAllBoxPanel)}},i.prototype.addRedPoint=function(){var t=this.skin.redPoint;t.visible=!0,egret.Tween.get(t,{loop:!0}).to({alpha:1},500).to({alpha:0},500)},i.prototype.removeRedPoint=function(){var t=this.skin.redPoint;t.visible=!1,egret.Tween.removeTweens(t)},i.prototype.getStrRealLength=function(t){var e={GetLength:null};return e.GetLength=function(t){return Number(t.replace(/[\u0391-\uFFE5]/g,"aa").length)},e.GetLength(t)},i}(eui.ItemRenderer);t.ClubBoxItem=e,__reflect(e.prototype,"club.ClubBoxItem")}(club||(club={}));var club;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ClubBoxSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i.prototype.initUI=function(){},i.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.removeEvent=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.onClickTap=function(i){switch(i.target){case this._closeBtn:e.prototype.removePop.call(this);break;case this._createBtn:e.prototype.removePop.call(this),t.ClubModuleMgr.getInstance().removeClubDeskPanel(),t.ClubModuleMgr.getInstance().showCreateClubPanel();break;case this._joinBtn:e.prototype.removePop.call(this),t.ClubModuleMgr.getInstance().removeClubDeskPanel(),LobbyModuleMgr.getInstance().showJoinRoomPanel(function(){var t=new Cmd.HistoryMatchIdListMatchGroupCmd_C;NetMgr.tcpSend(t)})}},i}(commonpanel.LobbyBaseEuiPanel);t.ClubBoxPanel=e,__reflect(e.prototype,"club.ClubBoxPanel")}(club||(club={}));var club;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="ClubCleanRecordItemSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.dataChanged=function(){var t=["今日输赢","昨日输赢","前日输赢"];this._info=this.data,this._timeText.text=LobbyUtils.changeTimeToStrTwoLine(this._info.timestamp),this._dayText.text=t[this._info.which-1]+" "+this._info.nbr,this._nameText.text=this._info.opUser},e}(eui.ItemRenderer);t.ClubCleanRecordItemPanel=e,__reflect(e.prototype,"club.ClubCleanRecordItemPanel")}(club||(club={}));var club;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ClubCleanRecordSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.initUI=function(){this._list.itemRenderer=t.ClubCleanRecordItemPanel},i.prototype.addEvent=function(){uniLib.Global.addEventListener(t.ClubConst.GetCleanRecordMatchGroup,this.showDate,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.removeEvent=function(){uniLib.Global.removeEventListener(t.ClubConst.GetCleanRecordMatchGroup,this.showDate,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.showDate=function(t){var e=t.param;Array.isArray(e.records)?(this._tishiText.visible=!1,this._listArr?(Array.isArray(this._listArr.source)&&this._listArr.removeAll(),this._listArr.replaceAll(e.records)):(this._listArr=new eui.ArrayCollection(e.records),this._list.dataProvider=this._listArr)):this._tishiText.visible=!0},i.prototype.onClickTap=function(t){switch(t.target){case this._closeBtn:e.prototype.removePop.call(this)}},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(commonpanel.LobbyBaseEuiPanel);t.ClubCleanRecordPanel=e,__reflect(e.prototype,"club.ClubCleanRecordPanel")}(club||(club={}));var club;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ClubDeskSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i.prototype.initUI=function(){this._scratchBtn.visible=Boolean(t.ClubData.getInstance().isShowScratch),this.deskList.itemRenderer=t.ClubItemDesk,this._clubMsgMcPanel.touchEnabled=!0},i.prototype.addEvent=function(){uniLib.Global.addEventListener(t.ClubConst.ReturnMatchGroup,this.setDate,this),uniLib.Global.addEventListener(t.ClubConst.ReturnMatchGroupManage,this.updateplayTypeDesc,this),uniLib.Global.addEventListener(t.ClubConst.LatestMatchRoom,this.updatedesklist,this),uniLib.Global.addEventListener(t.ClubConst.JoinMemberListMatch,this.showRedPoint,this),uniLib.Global.addEventListener(uniLib.ZqEvent.ON_RECONNEC,this.onSendmsg,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.deskList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.itemTap,this),uniLib.Global.addEventListener(t.ClubConst.CLUB_NOTICE,this.updateNotice,this),this._clubMsgMcPanel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showNotice,this)},i.prototype.removeEvent=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),uniLib.Global.removeEventListener(t.ClubConst.ReturnMatchGroup,this.setDate,this),uniLib.Global.removeEventListener(t.ClubConst.ReturnMatchGroupManage,this.updateplayTypeDesc,this),uniLib.Global.removeEventListener(t.ClubConst.LatestMatchRoom,this.updatedesklist,this),uniLib.Global.removeEventListener(t.ClubConst.JoinMemberListMatch,this.showRedPoint,this),uniLib.Global.removeEventListener(uniLib.ZqEvent.ON_RECONNEC,this.onSendmsg,this),this.deskList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.itemTap,this),uniLib.Global.removeEventListener(t.ClubConst.CLUB_NOTICE,this.updateNotice,this),this._clubMsgMcPanel.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showNotice,this)},i.prototype.updateplayTypeDesc=function(e){var i=e.param;i&&i.curMath&&i.curMath.matchId==t.ClubData.getInstance().clubmatchid&&(this._clubPlayText.text="【"+i.curMath.gameName+"】"+i.curMath.playTypeDesc,this._curMath.playTypeDesc=i.curMath.playTypeDesc,this._curMath.gameNbr=i.curMath.gameNbr,this._curMath.userNbr=i.curMath.userNbr,i.curMath.winnerConditions&&(this._curMath.winnerConditions=i.curMath.winnerConditions),this.getDeskList(this._deskList),this.updateDesk(this._showList))},i.prototype.updateDesk=function(t){this.deskListArray?(Array.isArray(this.deskListArray.source)&&this.deskListArray.removeAll(),this.deskListArray.replaceAll(t)):(this.deskListArray=new eui.ArrayCollection(t),this.deskList.dataProvider=this.deskListArray)},i.prototype.getDeskList=function(e){this._showList=[],Array.isArray(e)&&(this._showList=e.concat());var i=new Cmd.MathGroupRoomInfo;if(i.state=t.ClubConst.CLUB_CREATEDESK,i.userNbr=this._curMath.userNbr,this._showList.unshift(i),this._showList.length<8)for(var n=this._showList.length,s=0;8-n>s;s++){var r=new Cmd.MathGroupRoomInfo;r.state=t.ClubConst.CLUB_DESKSHOW,r.userNbr=this._curMath.userNbr,this._showList.push(r)}else{var r=new Cmd.MathGroupRoomInfo;r.state=t.ClubConst.CLUB_DESKSHOW,r.userNbr=this._curMath.userNbr,this._showList.push(r)}},i.prototype.showNotice=function(){var e=new Cmd.ClubNoticeMatchGroupCmd_CS;e.matchId=t.ClubData.getInstance().clubmatchid,NetMgr.tcpSend(e),t.ClubModuleMgr.getInstance().showClubNoticePanel()},i.prototype.setDate=function(e){var i=e.param;i&&(this._curMath=i.curMath,uniLib.UserInfo.uid==this._curMath.ownerid||uniLib.UserInfo.uid.toString()==this._curMath.masterid?t.ClubData.getInstance().isClubManage=!0:t.ClubData.getInstance().isClubManage=!1,t.ClubData.getInstance().clubShareInfo=this._curMath?this._curMath.shareInfo:null,this._curMath?(t.ClubData.getInstance().isClubManage?(this._boxManageBtn.visible=!0,this._applyListBtn.visible=!0,this._queryAllFightingBtn.visible=!0,this._queryFightingBtn.visible=!1,this._partnerBtn.visible=!0,this._partnerMemberBtn.visible=!1,this.isOwner=!0):(this._boxManageBtn.visible=!1,this._applyListBtn.visible=!1,this._queryAllFightingBtn.visible=!1,this._queryFightingBtn.visible=!0,this._partnerBtn.visible=!1,this._partnerMemberBtn.visible=!1,this.isOwner=!1,this._curMath.isPartner&&1==this._curMath.isPartner&&(this._partnerMemberBtn.visible=!0)),this._clubMsgMcPanel.getclubmsg(this._curMath.clubNotice),t.ClubData.getInstance().clubmatchid=this._curMath.matchId,this._titleText.text=this._curMath.matchName?this._curMath.matchName:this._curMath.matchId.toString(),this._clubPlayText.text="【"+this._curMath.gameName+"】"+this._curMath.playTypeDesc,this._clubIdText.text=""+this._curMath.matchId,this._clubIdText.touchEnabled=!0,this._clubIdText.addEventListener(egret.TouchEvent.TOUCH_TAP,this.copyid,this),this._userIdText.text=uniLib.UserInfo.uid+"",this._userNameText.text=uniLib.UserInfo.nickName,this._userHeadImg.source=uniLib.UserInfo.headUrl,this._memberListBtn.skin.menberNum.text=this._curMath.onlineUserNum,this.setPlayerIconMask(this._userHeadImg),this._clubOwnerText.text=this._curMath.ownerid+"",this._deskList=i.curMath.roomList,this.getDeskList(this._deskList),this.updateDesk(this._showList),i.isFirst&&t.ClubData.getInstance().isClubManage&&t.ClubModuleMgr.getInstance().showClubGuidePanel()):(uniLib.TipsUtils.showTipsDownToUp("不存在此老友圈 !"),this.removePop()))},i.prototype.updatedesklist=function(t){var e=t.param;e&&(this._curMathlist=e.curMath,this._curMathlist?(this._deskList=this._curMathlist.roomList,this._memberListBtn.skin.menberNum.text=this._curMathlist.onlineUserNum,this.getDeskList(this._deskList),this.updateDesk(this._showList)):(uniLib.TipsUtils.showTipsDownToUp("不存在此老友圈 !"),this.removePop()))},i.prototype.updateNotice=function(t){var e=t.param;e&&this._clubMsgMcPanel.getclubmsg(e.content)},i.prototype.onSendmsg=function(){t.ClubSendMgr.requestMatchData(1)},i.prototype.setPlayerIconMask=function(t){var e=RES.getRes("club_new_menage_json.club_head_bg"),i=new egret.Bitmap;this.addChild(i),i.texture=e,i.width=77,i.height=77,i.x=(t.width-i.width)/2+t.x,i.y=(t.height-i.height)/2+t.y,t.mask=i},i.prototype.showRedPoint=function(e){t.ClubData.getInstance().JoinMemberList=e.param,this.joinMember=[],t.ClubData.getInstance().JoinMemberList&&t.ClubData.getInstance().JoinMemberList.list&&t.ClubData.getInstance().JoinMemberList.list instanceof Array&&(this.joinMember=t.ClubData.getInstance().JoinMemberList.list),this.joinMember&&this.joinMember.length>0?t.ClubData.getInstance().isClubManage&&this.addRedPoint():this.removeRedPoint()},i.prototype.addRedPoint=function(){var t=this.skin._redPointImg;t.visible=!0,egret.Tween.get(t,{loop:!0}).to({alpha:1},500).to({alpha:0},500)},i.prototype.removeRedPoint=function(){var t=this.skin._redPointImg;t.visible=!1,egret.Tween.removeTweens(t)},i.prototype.copyid=function(t){uniLib.ZQGameSdk.nativeCopyStr(this._clubIdText.text),uniLib.TipsUtils.showTipsDownToUp("复制成功"+this._clubIdText.text)},i.prototype.onClickTap=function(e){var i,n=this;switch(e.target){case this._closeBtn:t.ClubModuleMgr.getInstance().removeClubDeskPanel();break;case this.createBtn:t.ClubModuleMgr.getInstance().removeClubDeskPanel(),t.ClubModuleMgr.getInstance().showCreateClubPanel();break;case this._swtichBtn:t.ClubSendMgr.requestClubMatchList();break;case this._shareBtn:this.onShareTap();break;case this._memberListBtn:t.ClubModuleMgr.getInstance().showClubPlayerListPanel(this.isOwner),i=new Cmd.RequestMemberInfoMatchGroupCmd_C,i.matchId=this._curMath.matchId,i.typ=1,NetMgr.tcpSend(i);break;case this._queryFightingBtn:t.ClubModuleMgr.getInstance().showClubMemberRecordPanel(function(){t.ClubSendMgr.getGameDataHistoryForMatch(n._curMath.matchId,1,1,t.ClubConst1.MATCH_HISTORY_FOR_MYSELF)});break;case this._queryAllFightingBtn:t.ClubModuleMgr.getInstance().showClubAllRecordPanel(function(){t.ClubSendMgr.getGameDataHistoryForMatch(n._curMath.matchId,1,1,t.ClubConst1.MATCH_HISTORY_FOR_DESK)});break;case this._boxManageBtn:t.ClubData.getInstance().clubChoice=1,t.ClubModuleMgr.getInstance().showClubManagePanel(),t.ClubSendMgr.requestRequestMatchGroupCmd(this._curMath.matchId);break;case this._noticeBtn:i=new Cmd.ClubNoticeMatchGroupCmd_CS,i.matchId=this._curMath.matchId,NetMgr.tcpSend(i),t.ClubModuleMgr.getInstance().showClubNoticePanel();break;case this._scratchBtn:i=new Cmd.IntoScratchTicketLobbyCmd_C,NetMgr.tcpSend(i);break;case this._fastPlayBtn:t.ClubModuleMgr.getInstance().removeClubDeskPanel();var s=new Cmd.EnterRoomCmd_C;s.floorId=this._curMath.floorId,s.roomId=this._curMath.matchId,NetMgr.tcpSend(s);break;case this._applyListBtn:t.ClubModuleMgr.getInstance().showClubUserApplyPanel();break;case this._clubDetailBtn:t.ClubModuleMgr.getInstance().showClubDetailsPanel(this._curMath);break;case this._partnerBtn:t.ClubModuleMgr.getInstance().showClubPartnerRecordPanel(function(){i=new Cmd.GetPartnerRecordsMatchGroupCmd_CS,i.matchId=t.ClubData.getInstance().clubmatchid,NetMgr.tcpSend(i)});break;case this._partnerMemberBtn:t.ClubModuleMgr.getInstance().showClubPartnerMemberRecordPanel(function(){i=new Cmd.GetMemberRecordsMatchGroupCmd_CS,i.matchId=t.ClubData.getInstance().clubmatchid,i.targetUid=uniLib.UserInfo.uid,i.typ=1,NetMgr.tcpSend(i)})}},i.prototype.onShareTap=function(){var e=this._curMath.matchId;t.ClubData.getInstance().clubShareInfo=this.shareInfo=this._curMath?this._curMath.shareInfo:null;var i=new uniLib.WXShareVo;if(i.shareWay=0,""==uniLib.ZQGameSdk.defaultWXShareVo.webpageUrl&&LobbyDataCache.bundleInfo&&LobbyDataCache.bundleInfo.weixin&&LobbyDataCache.bundleInfo.weixin.wbappid){var n=uniLib.UserInfo.nickName;n.length>8&&(n=n.slice(0,8)),MJLobbyData.getInstance().lobbyConfig.hasOwnProperty("newLink")&&""!=MJLobbyData.getInstance().lobbyConfig.newLink?i.webpageUrl="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+LobbyDataCache.bundleInfo.weixin.wbappid+"&redirect_uri=http://"+MJLobbyData.getInstance().lobbyConfig.newLink+"/addons/zqgame/gameshare.php?appid="+LobbyDataCache.bundleInfo.weixin.wbappid+"&response_type=code&scope=snsapi_base&state="+uniLib.CompressUtil.base64encode(uniLib.UserInfo.uid+"|"+e+"|"+n)+"&connect_redirect=1#wechat_redirect":i.webpageUrl="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+LobbyDataCache.bundleInfo.weixin.wbappid+"&redirect_uri=http://wq.laoyouwan.com/addons/zqgame/gameshare.php?appid="+LobbyDataCache.bundleInfo.weixin.wbappid+"&response_type=code&scope=snsapi_base&state="+uniLib.CompressUtil.base64encode(uniLib.UserInfo.uid+"|"+e+"|"+n)+"&connect_redirect=1#wechat_redirect"}else i.webpageUrl=uniLib.ZQGameSdk.defaultWXShareVo.webpageUrl+"?uid="+uniLib.UserInfo.uid+"&nickName="+uniLib.UserInfo.nickName;i.shareType=Cmd.ShareType.enterRoom,i.wgShareData=JSON.stringify({roomId:e}),i.title=this.shareInfo&&this.shareInfo.title?this.shareInfo.title.replace("房号","老友圈"):"",uniLib.Global.dispatchEvent(uniLib.ZqEvent.SHARE,i,!0)},i.prototype.itemTap=function(e){var i=this.deskList.selectedItem;if(i.state==t.ClubConst.CLUB_CREATEDESK){t.ClubModuleMgr.getInstance().removeClubDeskPanel();var n=new Cmd.EnterRoomCmd_C;n.floorId=this._curMath.floorId,n.roomId=this._curMath.matchId,NetMgr.tcpSend(n)}else if(this.showClubRoomdetails(),this.clubRoomdetails){this.clubRoomdetails.setDate(this._curMath);var s=this.deskList.selectedItem;this.clubRoomdetails.setUserDate(s)}},i.prototype.showClubRoomdetails=function(){this.clubRoomdetails=new t.ClubRoomdetails,this.clubRoomdetails.addEventListener(ClubUIEventConst.JOIN_CLUBROOM,this.removeDesk,this),uniLib.PopUpMgr.addPopUp(this.clubRoomdetails,null,!0,!0,0,uniLib.PopUpEffect.CENTER)},i.prototype.removeClubRoomdetails=function(){this.clubRoomdetails&&(this.clubRoomdetails.removeEventListener(ClubUIEventConst.JOIN_CLUBROOM,this.removeDesk,this),uniLib.PopUpMgr.removePopUp(this.clubRoomdetails),this.clubRoomdetails=null)},i.prototype.removeDesk=function(){t.ClubModuleMgr.getInstance().removeClubDeskPanel(),this.removeClubRoomdetails()},i}(commonpanel.LobbyBaseEuiPanel);t.ClubDeskPanel=e,__reflect(e.prototype,"club.ClubDeskPanel")}(club||(club={}));var club;!function(t){var e=function(t){function e(e){var i=t.call(this)||this;return i.skinName="ClubDetailsSkin",i.info=e,i}return __extends(e,t),e.prototype.initUI=function(){this.setDetailDate()},e.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},e.prototype.removeEvent=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},e.prototype.setDetailDate=function(){this.gameText.text=this.info.gameName,this.gnumberText.text=this.info.gameNbr.toString()+"局",this.info.gameNbr>=49&&(this.gnumberText.text=Math.round(this.info.gameNbr)+"课"),this.playText.text=this.info.playTypeDesc,this.pnumberText.text=+this.info.userNbr+"人房",(4124==this.info.gameId||4207==this.info.gameId||4149==this.info.gameId||4275==this.info.gameId)&&this.info.winnerConditions?(this.bigWinText.text="大赢家最低分数设置："+this.info.winnerConditions,this.bigWinText.visible=!0):this.bigWinText.visible=!1},e.prototype.onClickTap=function(e){e.target==this.closeBtn&&t.prototype.removePop.call(this)},e}(commonpanel.LobbyBaseEuiPanel);t.ClubDetailsPanel=e,__reflect(e.prototype,"club.ClubDetailsPanel")}(club||(club={}));var club;!function(t){var e=function(e){function i(){var t=e.call(this,"",700,400)||this;return t.skinName="ClubEnterRemarksSkin",t}return __extends(i,e),i.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),uniLib.Global.addEventListener(t.ClubConst.NotifyImportNoteCmd,this.setDate,this),this.remarksText.addEventListener(egret.TextEvent.FOCUS_OUT,uniLib.ZQGameSdk.hideVk,this)},i.prototype.removeEvent=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),uniLib.Global.removeEventListener(t.ClubConst.NotifyImportNoteCmd,this.setDate,this),this.remarksText.removeEventListener(egret.TextEvent.FOCUS_OUT,uniLib.ZQGameSdk.hideVk,this)},i.prototype.setDate=function(t){var e=t.param;this.roomId=e.roomId,this.lobbyId=e.lobbyId,this.preBestRoomId=e.preBestRoomId,this.clubText.text="您正在申请进入老友圈“"+this.roomId+"”"},i.prototype.onClickTap=function(t){if(t.target==this.yesBtn){var e=new Cmd.EnterRoomCmd_C;e.lobbyId=this.lobbyId,e.roomId=this.roomId,e.preBestRoomId=this.preBestRoomId;var i=this.remarksText.text;this.remarksText?e.note=i:e.note="",NetMgr.tcpSend(e),this.removePop()}},i}(commonpanel.LobbyBaseEuiPanel);t.ClubEnterRemarks=e,__reflect(e.prototype,"club.ClubEnterRemarks")}(club||(club={}));var club;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="ClubGuideSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.width=uniLib.Global.screenWidth,this.height=uniLib.Global.screenHeight},e.prototype.initUI=function(){this._counter=0,this.onClick()},e.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},e.prototype.removeEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},e.prototype.guangtween=function(t){uniLib.DisplayUtils.stopTweenGroup(this.group1),t&&uniLib.DisplayUtils.playTweenGroup(this.group1,!0)},e.prototype.onClick=function(){this._counter++,this._guideGroup1.visible=this._guideGroup2.visible=this._guideGroup3.visible=this._guideGroup4.visible=!1,this._counter>4?t.prototype.removePop.call(this):this["_guideGroup"+this._counter].visible=!0},e}(commonpanel.LobbyBaseEuiPanel);t.ClubGuidePanel=e,__reflect(e.prototype,"club.ClubGuidePanel")}(club||(club={}));var club;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.skinName="ClubImportSkin",t}return __extends(n,e),n.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},n.prototype.addEvent=function(){uniLib.Global.addEventListener(t.ClubConst.GetCanImportMemberListMatchGroup,this.showdate,this),this._clubList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.itemTap,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},n.prototype.removeEvent=function(){uniLib.Global.removeEventListener(t.ClubConst.GetCanImportMemberListMatchGroup,this.showdate,this),this._clubList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.itemTap,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},n.prototype.initUI=function(){this._clubList.itemRenderer=i},n.prototype.showdate=function(t){var e=t.param;this._matchArr=e.matchLists,this.updateList()},n.prototype.onClick=function(i){var n=this;switch(i.target){case this._closeBtn:t.ClubData.getInstance().ClubImportMatchId=0,e.prototype.removePop.call(this);break;case this._importBtn:0==t.ClubData.getInstance().ClubImportMatchId?uniLib.TipsUtils.showConfirm("请选择需要导入的老友圈！","","确定",null):uniLib.TipsUtils.showConfirm("确认导入"+this._matchName+"老友圈！","","确定",function(){var i=new Cmd.ImportMemberListMatchGroupCmd_CS;i.fromMatchId=t.ClubData.getInstance().ClubImportMatchId,i.toMatchId=t.ClubData.getInstance().matchid,NetMgr.tcpSend(i),t.ClubData.getInstance().ClubImportMatchId=0,e.prototype.removePop.call(n)},"取消",null)}},n.prototype.itemTap=function(e){if(this._clubList.selectedItem){var i=this._clubList.selectedItem;i.matchId==t.ClubData.getInstance().ClubImportMatchId?(t.ClubData.getInstance().ClubImportMatchId=0,this._matchName=""):(t.ClubData.getInstance().ClubImportMatchId=i.matchId,this._matchName=i.matchName)}this.updateList()},n.prototype.updateList=function(){this._clubListArr?(Array.isArray(this._clubListArr.source)&&this._clubListArr.removeAll(),this._clubListArr.replaceAll(this._matchArr)):(this._clubListArr=new eui.ArrayCollection(this._matchArr),this._clubList.dataProvider=this._clubListArr)},n}(commonpanel.LobbyBaseEuiPanel);t.ClubImportPanel=e,__reflect(e.prototype,"club.ClubImportPanel");var i=function(e){function i(){var t=e.call(this)||this;return t.skinName="ClubImportItemSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.dataChanged=function(){this._info=this.data,this._clubNameText.text=this._info.matchName,this._clubIdText.text=this._info.matchId+"",this._numText.text=this._info.memberNum+"",this._info.matchId==t.ClubData.getInstance().ClubImportMatchId&&(this._selectImg.visible=!0)},i}(eui.ItemRenderer);t.ClubImportItemPanel=i,__reflect(i.prototype,"club.ClubImportItemPanel")}(club||(club={}));var club;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ClubInviteBrdSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.addEvent=function(){uniLib.Global.addEventListener(t.ClubConst.InviteMemberMatchGroupBrd,this.showDate,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},i.prototype.removeEvent=function(){uniLib.Global.removeEventListener(t.ClubConst.InviteMemberMatchGroupBrd,this.showDate,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},i.prototype.initUI=function(){},i.prototype.showDate=function(t){this.inviteData=t.param,this._headImg.source=this.inviteData.inviter.headUrl,this._nameText.textFlow=(new egret.HtmlTextParser).parser("玩家：<bold>"+this.inviteData.inviter.nickname+"</bold>邀请您进入<bold>"+this.inviteData.curMatch.gameName+"</bold>房间"),this._uidText.text="ID："+this.inviteData.inviter.uid,this._clubNameText.text="群名："+this.inviteData.curMatch.matchName,this._clubIdText.text="群ID："+this.inviteData.curMatch.matchId,this._playText.text="玩法："+this.inviteData.curMatch.playTypeDesc},i.prototype.onClick=function(t){switch(t.target){case this._closeBtn:case this._noBtn:e.prototype.removePop.call(this);break;case this._yesBtn:var i=new Cmd.EnterRoomCmd_C;this.inviteData.roomId?i.preBestRoomId=this.inviteData.roomId:i.preBestRoomId=0,i.roomId=this.inviteData.curMatch.matchId,NetMgr.tcpSend(i),e.prototype.removePop.call(this)}},i}(commonpanel.LobbyBaseEuiPanel);t.ClubInviteBrdPanel=e,__reflect(e.prototype,"club.ClubInviteBrdPanel")}(club||(club={}));var club;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.skinName="ClubInviteSkin",i._data=t,i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this)},i.prototype.removeEvent=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this)},i.prototype.initUI=function(){this._data&&this._data instanceof Number&&(this._roomId=this._data)},i.prototype.btnClick=function(i){switch(i.target){case this._wXinIcon:this.share();break;case this._clubIcon:var n=new Cmd.GetCanInviteMemberListMatchGroupCmd_CS;uniLib.Global.isInGame?(n.matchId=t.ClubData.getInstance().EnterClubId,n.roomId=t.ClubData.getInstance().EnterRoomId):(n.matchId=t.ClubData.getInstance().clubmatchid,this._roomId&&(n.roomId=this._roomId)),NetMgr.tcpSend(n),e.prototype.removePop.call(this);break;case this._closeBtn:e.prototype.removePop.call(this)}},i.prototype.share=function(e){if(void 0===e&&(e=uniLib.SHARE_PLAT.WX),this._data&&this._data instanceof uniLib.WXShareVo)uniLib.Global.dispatchEvent("clubshare",this._data,!0);else{this.shareInfo=t.ClubData.getInstance().clubShareInfo?t.ClubData.getInstance().clubShareInfo:null;var i=void 0;i=uniLib.Global.isInGame?t.ClubData.getInstance().EnterRoomId:this._roomId?this._roomId:t.ClubData.getInstance().clubmatchid;var n=new uniLib.WXShareVo;if(n.shareWay=0,""==uniLib.ZQGameSdk.defaultWXShareVo.webpageUrl&&LobbyDataCache.bundleInfo&&LobbyDataCache.bundleInfo.weixin&&LobbyDataCache.bundleInfo.weixin.wbappid){var s=uniLib.UserInfo.nickName;s.length>8&&(s=s.slice(0,8)),MJLobbyData.getInstance().lobbyConfig.hasOwnProperty("newLink")&&""!=MJLobbyData.getInstance().lobbyConfig.newLink&&(n.webpageUrl="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+LobbyDataCache.bundleInfo.weixin.wbappid+"&redirect_uri=http://"+MJLobbyData.getInstance().lobbyConfig.newLink+"/addons/zqgame/gameshare.php?appid="+LobbyDataCache.bundleInfo.weixin.wbappid+"&response_type=code&scope=snsapi_base&state="+uniLib.CompressUtil.base64encode(uniLib.UserInfo.uid+"|"+t.ClubData.getInstance().clubmatchid+"|"+s)+"&connect_redirect=1#wechat_redirect")}else n.webpageUrl=uniLib.ZQGameSdk.defaultWXShareVo.webpageUrl+"?uid="+uniLib.UserInfo.uid+"&nickName="+uniLib.UserInfo.nickName;n.shareType=Cmd.ShareType.enterRoom,n.title=this.shareInfo&&this.shareInfo.title?this.shareInfo.title.replace("房号","老友圈"):"",uniLib.Global.isInGame?n.roomId=JSON.stringify({roomId:t.ClubData.getInstance().EnterRoomId}):this._roomId?n.roomId=JSON.stringify({roomId:this._roomId}):n.roomId=JSON.stringify({matchId:t.ClubData.getInstance().clubmatchid}),uniLib.Global.dispatchEvent("clubshare",n,!0)}},i.prototype.shareBack=function(t){egret.Tween.get(this).wait(100).call(this.delayShareBack,this,[t.code]),this.removePop()},i.prototype.delayShareBack=function(t){0==t?uniLib.TipsUtils.showTipsDownToUp("分享成功!"):1==t?uniLib.TipsUtils.showTipsDownToUp("分享已取消"):2==t&&uniLib.TipsUtils.showTipsDownToUp("分享被拒绝")
},i}(commonpanel.LobbyBaseEuiPanel);t.ClubInvitePanel=e,__reflect(e.prototype,"club.ClubInvitePanel")}(club||(club={}));var club;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ClubInvitePlayerItemSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addListener()},i.prototype.addListener=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.removeListener=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.dataChanged=function(){this.searchInfo=this.data,this._headImg.source=this.searchInfo.headUrl,this._nameText.text=this.searchInfo.nickname,this._idText.text="ID:"+this.searchInfo.uid,this.searchInfo.state==t.ClubConst.OnlineState_Online?this._typeText.text="空闲":this.searchInfo.state==t.ClubConst.OnlineState_Invited?(this._typeText.text="已邀请",this._inviteBtn.currentState="disabled",this._inviteBtn.touchEnabled=!1,this._inviteBtn.skin._typeText.text="已邀请",this._inviteBtn.skin._typeText.strokeColor="0x434343"):this.searchInfo.state==t.ClubConst.OnlineState_Offline?(this._typeText.text="离线",this._typeText.textColor=7631217,this._inviteBtn.currentState="disabled",this._inviteBtn.touchEnabled=!1,this._inviteBtn.skin._typeText.text="邀请",this._inviteBtn.skin._typeText.strokeColor="0x434343"):this.searchInfo.state==t.ClubConst.OnlineState_Gameing&&(this._typeText.text="游戏中",this._typeText.textColor=7631217,this._inviteBtn.currentState="disabled",this._inviteBtn.touchEnabled=!1,this._inviteBtn.skin._typeText.text="邀请",this._inviteBtn.skin._typeText.strokeColor="0x434343")},i.prototype.onClickTap=function(e){switch(e.target){case this._inviteBtn:uniLib.Global.isInGame?t.ClubSendMgr.InviteMemberMatchGroupCmd(t.ClubData.getInstance().EnterClubId,[this.searchInfo.uid]):t.ClubSendMgr.InviteMemberMatchGroupCmd(t.ClubData.getInstance().clubmatchid,[this.searchInfo.uid])}},i}(eui.ItemRenderer);t.ClubInvitePlayerItemPanel=e,__reflect(e.prototype,"club.ClubInvitePlayerItemPanel")}(club||(club={}));var club;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ClubInvitePlayerSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i.prototype.initUI=function(){this._playerList.itemRenderer=t.ClubInvitePlayerItemPanel},i.prototype.addEvent=function(){uniLib.Global.addEventListener(t.ClubConst.GetCanInviteMemberList,this.showData,this),uniLib.Global.addEventListener(t.ClubConst.InviteMemberMatchGroup,this.updateList,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},i.prototype.removeEvent=function(){uniLib.Global.removeEventListener(t.ClubConst.InviteMemberMatchGroup,this.updateList,this),uniLib.Global.removeEventListener(t.ClubConst.GetCanInviteMemberList,this.showData,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},i.prototype.showData=function(e){var i=this,n=e.param;n&&(this._clubNameText.text="群名："+n.curMatch.matchName,this._clubIdText.text="ID："+n.curMatch.matchId,this._onlineText.text="在线："+n.curMatch.onlineUserNum,this._memberList=n.memberList,n.roomId?t.ClubData.getInstance().InviteRoomId=n.roomId:t.ClubData.getInstance().InviteRoomId=0,this._canInviteList=[],Array.isArray(this._memberList)&&this._memberList.forEach(function(e){e.state==t.ClubConst.OnlineState_Online&&i._canInviteList.push(e.uid)}),this.updateplayerListArray(this._memberList))},i.prototype.updateList=function(e){var i=this,n=e.param;n&&(Array.isArray(this._memberList)&&this._memberList.forEach(function(e){Array.isArray(n.uids)&&-1!=n.uids.indexOf(e.uid)&&(e.state=t.ClubConst.OnlineState_Invited)}),this._canInviteList=[],Array.isArray(this._memberList)&&this._memberList.forEach(function(e){e.state==t.ClubConst.OnlineState_Online&&i._canInviteList.push(e.uid)}),this.updateplayerListArray(this._memberList))},i.prototype.updateplayerListArray=function(t){0==t.length?this._tishiText.visible=!0:this._tishiText.visible=!1,Array.isArray(t)||(this._tishiText.visible=!0),this._playerListArray?(Array.isArray(this._playerListArray.source)&&this._playerListArray.removeAll(),this._playerListArray.replaceAll(t)):(this._playerListArray=new eui.ArrayCollection(t),this._playerList.dataProvider=this._playerListArray)},i.prototype.searchMember=function(t){var e=this._memberList;this.searchArray=[],Array.isArray(e)&&""!=t&&(this.searchArray=e.filter(function(e){return-1!=e.nickname.toString().indexOf(t)||-1!=e.uid.toString().indexOf(t)})),this.updateplayerListArray(this.searchArray)},i.prototype.onClick=function(i){switch(i.target){case this._closeBtn:e.prototype.removePop.call(this);break;case this._allInviteBtn:this._canInviteList.length>0&&(uniLib.Global.isInGame?t.ClubSendMgr.InviteMemberMatchGroupCmd(t.ClubData.getInstance().EnterClubId,this._canInviteList):t.ClubSendMgr.InviteMemberMatchGroupCmd(t.ClubData.getInstance().clubmatchid,this._canInviteList));break;case this._searchBtn:this._searchEditableText.text&&this.searchMember(this._searchEditableText.text)}},i}(commonpanel.LobbyBaseEuiPanel);t.ClubInvitePlayerPanel=e,__reflect(e.prototype,"club.ClubInvitePlayerPanel")}(club||(club={}));var club;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ClubItemDeskSkin",t}return __extends(i,e),i.prototype.dataChanged=function(){if(this.info=this.data,this.info.state&&this.info.state==t.ClubConst.CLUB_DESKSHOW||this.info.state==t.ClubConst.CLUB_CREATEDESK)this.deskGroup.visible=!0,this.personTxet.visible=!1,this.state.visible=!1,this.head.visible=!1,this.gamesNumberText.visible=!1;else{this.deskGroup.visible=!0,this.gamesNumberText.visible=!1;var e=null!=this.info.list&&Array.isArray(this.info.list)?this.info.list.length:0;if(this.personTxet.text=e+"/"+this.info.userNbr,this.info.list&&Array.isArray(this.info.list))for(var i=0;i<this.info.list.length&&4!=i;i++)this["headbg"+(i+1)].source=this.info.list[i].headUrl,this["headbg"+(i+1)].visible=this.info.list[i].headUrl?!0:!1,this["kuang"+(i+1)].visible=this.info.list[i].headUrl?!0:!1,0==this.info.list[i].state?this["leave"+(i+1)].visible=!0:this["leave"+(i+1)].visible=!1;this.info.state?1==this.info.state&&(this.state.source="club_new_menage_json.club_ingame",this.gamesNumberText.visible=!0,this.gamesNumberText.text="第"+this.info.curGameNbr+"/"+this.info.gameNbr+"局",this.info.gameNbr>=49&&(this.gamesNumberText.text="第"+this.info.curGameNbr+"课")):this.state.source="club_new_menage_json.club_waiting"}},i}(eui.ItemRenderer);t.ClubItemDesk=e,__reflect(e.prototype,"club.ClubItemDesk")}(club||(club={}));var club;!function(t){var e=function(e){function n(t){var i=e.call(this)||this;return i._curPage=0,i._dayChose=0,i.day=["今日","昨日","前日"],i.skinName="ClubMemberInfoSkin",i._info=t,i}return __extends(n,e),n.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},n.prototype.addEvent=function(){uniLib.Global.addEventListener(t.ClubConst.MATCH_HISTORY_FOR_UID,this.showData,this),uniLib.Global.addEventListener(t.ClubConst.CleanMemberWinPointMatchGroup,this.updateWinPoint,this),this._remarksText.addEventListener(egret.FocusEvent.FOCUS_OUT,this.onTextFieldFocusOut,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},n.prototype.removeEvent=function(){this._remarksText.removeEventListener(egret.FocusEvent.FOCUS_OUT,this.onTextFieldFocusOut,this),uniLib.Global.removeEventListener(t.ClubConst.MATCH_HISTORY_FOR_UID,this.showData,this),uniLib.Global.removeEventListener(t.ClubConst.CleanMemberWinPointMatchGroup,this.updateWinPoint,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},n.prototype.initUI=function(){this._AllRecordArr=[],this._list.itemRenderer=i,t.ClubSendMgr.getGameDataHistoryToUId(t.ClubData.getInstance().matchid,this._info.uid,1,t.ClubConst1.MATCH_HISTORY_FOR_UID,1),this._choseDayBtn.skin._dayTypeText.text="今日输赢",this._clubDayChose=1,this._choseDayBtn.currentState="up"},n.prototype.onTextFieldFocusOut=function(e){var i=new Cmd.RemarkNickNameMatchGroupCmd_CS;i.matchId=t.ClubData.getInstance().matchid,i.targetUid=this._info.uid,i.remark=e.target.text,NetMgr.tcpSend(i)},n.prototype.onClickTap=function(i){switch(i.target){case this._closeBtn:e.prototype.removePop.call(this);break;case this._cleanBtn:this.cleanWinPoint(this._clubDayChose);break;case this._recordBtn:var n=new Cmd.GetCleanRecordMatchGroupCmd_CS;n.matchId=t.ClubData.getInstance().matchid,n.targetUid=this._info.uid,NetMgr.tcpSend(n);break;case this._choseDayBtn:this._choseDayBtn.currentState="down",this._dayTypeGroup.visible=!0;break;case this._todayBtn:this._clubDayChose=1,this._choseDayBtn.skin._dayTypeText.text="今日输赢",this._choseDayBtn.currentState="up",this._dayTypeGroup.visible=!1,this.updateView();break;case this._yesterdayBtn:this._clubDayChose=2,this._choseDayBtn.skin._dayTypeText.text="昨日输赢",this._choseDayBtn.currentState="up",this._dayTypeGroup.visible=!1,this.updateView();break;case this._qianBtn:this._clubDayChose=3,this._choseDayBtn.skin._dayTypeText.text="前日输赢",this._choseDayBtn.currentState="up",this._dayTypeGroup.visible=!1,this.updateView();break;case this._choseRect:this._choseDayBtn.currentState="up",this._dayTypeGroup.visible=!1}},n.prototype.cleanWinPoint=function(e){var i=this,n=function(){var n=new Cmd.CleanMemberWinPointMatchGroupCmd_CS;n.matchId=t.ClubData.getInstance().matchid,n.targetUid=i._info.uid,n.which=e,NetMgr.tcpSend(n)};ComponentUtil.getInstance().showConfirm("确认要将"+this.day[e-1]+"分数清零吗？\n清零后成员列表的"+this.day[e-1]+"分数和大赢家次数也将清零！","温馨提示","确定",n,"取消")},n.prototype.updateWinPoint=function(t){var e=t.param;this._memberinfo.scores[e.which-1]=0,this._memberinfo.roomNbrs[e.which-1]=0,this._memberinfo.winNums[e.which-1]=0,this.updatePoint()},n.prototype.updateView=function(){this._dayChose!=this._clubDayChose&&this.getData(),this.updatePoint()},n.prototype.updatePoint=function(){this._scoreText.text="战绩:"+this._memberinfo.scores[this._clubDayChose-1],this._roomText.text="房间数:"+this._memberinfo.roomNbrs[this._clubDayChose-1],this._bigWinText.text="大赢家次数:"+this._memberinfo.winNums[this._clubDayChose-1]},n.prototype.showData=function(t){var e=t.param;this._headImg.source=e.userInfo.headurl,this._nameText.text=e.userInfo.nickname,this._uidText.text=e.userInfo.uid+"",this._remarksText.text=e.userInfo.remark?e.userInfo.remark:"",e.userInfo.partner?(this._belongText.text="归属人："+e.userInfo.partner.nickname,this._belongText.visible=!0):this._belongText.visible=!1,e.userStatisticInfo&&(this._memberinfo=e.userStatisticInfo,this.updatePoint()),e.typ&&(this.addListen(),this._totalPage=e.maxPage,this._curPage=e.curPage,this._totalPage=e.maxPage,1!=e.curPage||e.gameHistroys[0]?(this._tishiText.visible=!1,this.addData(e.gameHistroys)):(this._tishiText.visible=!0,this._dayChose!=this._clubDayChose&&(this._dayChose=this._clubDayChose,this._AllRecordArr=[],this._listArr&&(Array.isArray(this._listArr.source)&&this._listArr.removeAll(),this._listArr.replaceAll(this._AllRecordArr)))))},n.prototype.addData=function(t){t&&t[0]&&(this._dayChose==this._clubDayChose?this._AllRecordArr=this._AllRecordArr.concat(t):(this._dayChose=this._clubDayChose,this._AllRecordArr=[],this._AllRecordArr=this._AllRecordArr.concat(t)),this._listArr?(Array.isArray(this._listArr.source)&&this._listArr.removeAll(),this._listArr.replaceAll(this._AllRecordArr),1==this._curPage&&this._listArr.refresh()):(this._listArr=new eui.ArrayCollection(this._AllRecordArr),this._list.dataProvider=this._listArr))},n.prototype.addListen=function(){this._scroller.addEventListener(egret.Event.CHANGE,this.checkTop,this)},n.prototype.getData=function(){this._clubDayChose==this._dayChose?(t.ClubSendMgr.getGameDataHistoryToUId(t.ClubData.getInstance().matchid,this._info.uid,this._curPage,t.ClubConst1.MATCH_HISTORY_FOR_UID,this._clubDayChose),uniLib.TipsUtils.showTipsDownToUp("正在加载数据~")):t.ClubSendMgr.getGameDataHistoryToUId(t.ClubData.getInstance().matchid,this._info.uid,1,t.ClubConst1.MATCH_HISTORY_FOR_UID,this._clubDayChose)},n.prototype.checkTop=function(t){this._scroller.viewport.scrollV+this._scroller.viewport.height>=this._scroller.viewport.measuredHeight+10&&this._curPage<this._totalPage&&(this._scroller.removeEventListener(egret.Event.CHANGE,this.checkTop,this),this._curPage++,this.getData(),egret.Tween.get(this).wait(2e3).call(this.addListen,this))},n}(commonpanel.LobbyBaseEuiPanel);t.ClubMemberInfoPanel=e,__reflect(e.prototype,"club.ClubMemberInfoPanel");var i=function(e){function i(){var t=e.call(this)||this;return t.skinName="ClubMemberInfoItemSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this._detailBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showDetail,this)},i.prototype.dataChanged=function(){this._info=this.data,this._timeText.text=LobbyUtils.changeTimeToStrTwoLine(this._info.timeStamp),this._roomTxt.text="房间号："+this._info.roomId+"\n"+this._info.gameName+" "+this._info.gameNbr+"局 "+this._info.userNbr+"人参与",this._gradeText.text=""+this._info.userGameHistorys[0].integral},i.prototype.showDetail=function(){var e=this;LobbyModuleMgr.getInstance().showRecordDetail(function(){t.ClubSendMgr.getGameDetailHistory(e._info.globalRoomId)}),MJLobbyData.getInstance().globalRoomId=this._info.globalRoomId},i}(eui.ItemRenderer);t.ClubMemberInfoItemPanel=i,__reflect(i.prototype,"club.ClubMemberInfoItemPanel")}(club||(club={}));var club;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ClubMemberItemSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addListener()},i.prototype.addListener=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.removeListener=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.dataChanged=function(){this._searchBtn.visible=!0,this._addBtn.visible=!1,this.searchInfo=this.data,this._idText.text=this.searchInfo.uid+"",this._nameText.text=this.searchInfo.nickname,this._headImg.source=this.searchInfo.headUrl,1==this.searchInfo.membertype?(this._searchBtn.currentState="disabled",this._searchBtn.touchEnabled=!1,this._searchBtn.skin._typeText.text="圈主",this._searchBtn.skin._typeText.strokeColor="0x434343"):2==this.searchInfo.membertype&&(this._searchBtn.currentState="disabled",this._searchBtn.touchEnabled=!1,this._searchBtn.skin._typeText.text="管理员",this._searchBtn.skin._typeText.strokeColor="0x434343")},i.prototype.onClickTap=function(e){switch(e.target){case this._searchBtn:1!=this.searchInfo.membertype&&2!=this.searchInfo.membertype&&t.ClubModuleMgr.getInstance().showClubUserInfoPanel(this.searchInfo)}},i}(eui.ItemRenderer);t.ClubSearchMemberItemPanel=e,__reflect(e.prototype,"club.ClubSearchMemberItemPanel");var i=function(e){function i(){var t=e.call(this)||this;return t.search=!1,t.skinName="ClubMemberItemSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addListener()},i.prototype.addListener=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.removeListener=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.dataChanged=function(){var e=this;this._searchBtn.visible=!1,this._addBtn.visible=!0,this.addInfo=this.data,this._idText.text=this.addInfo.userInfo.uid+"",this._nameText.text=this.addInfo.userInfo.nickName;var i=t.ClubData.getInstance().ClubMemberMiniList;Array.isArray(i)&&(i.forEach(function(t){t.uid==e.addInfo.userInfo.uid&&(e.search=!0)}),this.search&&(this._tishiText.visible=!0,this._addBtn.visible=!1))},i.prototype.onClickTap=function(e){switch(e.target){case this._addBtn:var i=new Cmd.OperateMemberListMatchGroupCmd_C;i.reply=2,i.uid=this.addInfo.userInfo.uid,i.matchId=t.ClubData.getInstance().clubmatchid,NetMgr.tcpSend(i),this._tishiText.visible=!0,this._addBtn.visible=!1}},i}(eui.ItemRenderer);t.ClubAddMemberItemPanel=i,__reflect(i.prototype,"club.ClubAddMemberItemPanel")}(club||(club={}));var club;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.skinName="ClubMemberRecordItemSkin",t}return __extends(n,e),n.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addListener()},n.prototype.addListener=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},n.prototype.removeListener=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},n.prototype.destory=function(){this.removeListener()},n.prototype.onClickTap=function(e){var i=this;switch(e.target){case this._detailBtn:LobbyModuleMgr.getInstance().showRecordDetail(function(){t.ClubSendMgr.getGameDetailHistory(i.info.globalRoomId)}),MJLobbyData.getInstance().globalRoomId=this.info.globalRoomId;break;case this._copyBtn:MsgSendMgr.getGetNewShareInfo(this.info.globalRoomId)}},n.prototype.dataChanged=function(){this.info=this.data,this._indexText.text=this.itemIndex+1+"",this._timeText.text=LobbyUtils.changeTimeToStr(this.info.timeStamp),this._roomText.text=this.info.roomId+"号房间",this.info.gameId&&(MJLobbyData.getInstance().getGameCreateConfig(this.info.gameId)?this._gameNameText.text=MJLobbyData.getInstance().getGameCreateConfig(this.info.gameId).gameName:this._gameNameText.text="");var t,e,n=this.info.userGameHistorys[0].nickName;for(e=this.getStrRealLength(n)>10?"...":"";this.getStrRealLength(n)>10;)t=n.length,n=n.substr(0,t-1);var s=this.info.userGameHistorys;this.nameandscore.itemRenderer=i,this.nameandscore.dataProvider=new eui.ArrayCollection(s)},n.prototype.getStrRealLength=function(t){var e={GetLength:null};return e.GetLength=function(t){return Number(t.replace(/[\u0391-\uFFE5]/g,"aa").length)},e.GetLength(t)},n}(eui.ItemRenderer);t.ClubMemberRecordItemPanel=e,__reflect(e.prototype,"club.ClubMemberRecordItemPanel");var i=function(t){function e(){var e=t.call(this)||this;return e.skinName="MatchFightingNSSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){this.info=this.data,this.names.text=this.info.nickName,null!=this.info.integral&&(this.score.text=this.info.integral+"",this.info.integral<0&&(this.score.textColor=815379))},e}(eui.ItemRenderer);t.MemberRecordItemNSPanel=i,__reflect(i.prototype,"club.MemberRecordItemNSPanel")}(club||(club={}));var club;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._curPage=0,t._dayChose=0,t.skinName="ClubMemberRecordSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.addEvent=function(){uniLib.Global.addEventListener(t.ClubConst.MATCH_HISTORY_FOR_MYSELF,this.setDate,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.removeEvent=function(){uniLib.Global.removeEventListener(t.ClubConst.MATCH_HISTORY_FOR_MYSELF,this.setDate,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.initUI=function(){this._choseDayBtn.skin._dayTypeText.text="今日输赢",this._clubDayChose=1,this._AllRecordArr=[],this._recordsList.itemRenderer=t.ClubMemberRecordItemPanel,this.addListen(),this._choseDayBtn.currentState="up"},i.prototype.setDate=function(t){this._data=t.param,this._matchId=this._data.matchId,this._totalPage=this._data.maxPage,this._curPage=this._data.curPage,1!=this._data.curPage||this._data.gameHistroys[0]?(this._tipsText.visible=!1,this.addData(this._data.gameHistroys)):(this._tipsText.visible=!0,this._dayChose!=this._clubDayChose&&(this._dayChose=this._clubDayChose,this._AllRecordArr=[],this._recordslistArr&&(Array.isArray(this._recordslistArr.source)&&this._recordslistArr.removeAll(),this._recordslistArr.replaceAll(this._AllRecordArr)))),this.updatePoint()},i.prototype.addData=function(t){t&&t[0]&&(this._dayChose==this._clubDayChose?this._AllRecordArr=this._AllRecordArr.concat(t):(this._dayChose=this._clubDayChose,this._AllRecordArr=[],this._AllRecordArr=this._AllRecordArr.concat(t)),this._recordslistArr?(Array.isArray(this._recordslistArr.source)&&this._recordslistArr.removeAll(),this._recordslistArr.replaceAll(this._AllRecordArr),1==this._curPage&&this._recordslistArr.refresh()):(this._recordslistArr=new eui.ArrayCollection(this._AllRecordArr),this._recordsList.dataProvider=this._recordslistArr))},i.prototype.getData=function(){this._clubDayChose==this._dayChose?(t.ClubSendMgr.getGameDataHistoryForMatch(this._matchId,this._curPage,this._clubDayChose,t.ClubConst1.MATCH_HISTORY_FOR_MYSELF),uniLib.TipsUtils.showTipsDownToUp("正在加载数据~")):t.ClubSendMgr.getGameDataHistoryForMatch(this._matchId,1,this._clubDayChose,t.ClubConst1.MATCH_HISTORY_FOR_MYSELF)},i.prototype.addListen=function(){this._scroller.addEventListener(egret.Event.CHANGE,this.checkTop,this)},i.prototype.checkTop=function(t){this._scroller.viewport.scrollV+this._scroller.viewport.height>=this._scroller.viewport.measuredHeight+10&&this._curPage<this._totalPage&&(this._scroller.removeEventListener(egret.Event.CHANGE,this.checkTop,this),this._curPage++,this.getData(),egret.Tween.get(this).wait(2e3).call(this.addListen,this))},i.prototype.updateView=function(){this._dayChose!=this._clubDayChose&&this.getData(),this.updatePoint()},i.prototype.updatePoint=function(){this._data.userStatisticInfo?(this._roomText.text=""+this._data.userStatisticInfo.roomNbrs[this._clubDayChose-1],this._bigWinText.text=""+this._data.userStatisticInfo.winNums[this._clubDayChose-1],this._sorceText.text=""+this._data.userStatisticInfo.scores[this._clubDayChose-1]):(this._roomText.text="0",this._bigWinText.text="0",this._sorceText.text="0")},i.prototype.onClickTap=function(t){switch(t.target){case this._choseDayBtn:this._choseDayBtn.currentState="down",this._dayTypeGroup.visible=!0;break;case this._todayBtn:this._clubDayChose=1,this._choseDayBtn.skin._dayTypeText.text="今日输赢",this._choseDayBtn.currentState="up",this._dayTypeGroup.visible=!1,this.updateView();break;case this._yesterdayBtn:this._clubDayChose=2,this._choseDayBtn.skin._dayTypeText.text="昨日输赢",this._choseDayBtn.currentState="up",this._dayTypeGroup.visible=!1,this.updateView();break;case this._qianBtn:this._clubDayChose=3,this._choseDayBtn.skin._dayTypeText.text="前日输赢",this._choseDayBtn.currentState="up",this._dayTypeGroup.visible=!1,this.updateView();break;case this._closeBtn:e.prototype.removePop.call(this);break;case this._choseRect:this._choseDayBtn.currentState="up",this._dayTypeGroup.visible=!1;break;case this._lookRecordBtn:LobbyModuleMgr.getInstance().showLookVideoPanel()}},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(commonpanel.LobbyBaseEuiPanel);t.ClubMemberRecordPanel=e,__reflect(e.prototype,"club.ClubMemberRecordPanel")}(club||(club={}));var club;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._noticeArr=[],e.skinName="ClubMsgMcSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.addEvent=function(){},e.prototype.removeEvent=function(){},e.prototype.initUI=function(){this._buffer=30,this.touchEnabled=!1,this._msgContain=new egret.DisplayObjectContainer,this._msgContain.x=140,this._msgContain.y=7,this.addChild(this._msgContain),this._msgContain.scrollRect=new egret.Rectangle(0,0,400,30),this._noticePanel=new egret.DisplayObjectContainer,this._msgContain.addChild(this._noticePanel),this._msgTxt=this.createTextFeild(),this._noticePanel.addChild(this._msgTxt),this._noticeArr=[],this.visible=!1;var t=this;setTimeout(function(){t.noticeTest()},200)},e.prototype.setLoop=function(t){this._loop=t},e.prototype.noticeTest=function(){this._msgTxt&&this.startScroll()},e.prototype.startScroll=function(){this.visible=!0,egret.Tween.removeTweens(this._noticePanel),this._noticePanel.x=500+this._buffer;var t=this._noticePanel.width<500?500:this._noticePanel.width;egret.Tween.get(this._noticePanel).to({x:-(this._noticePanel.width+this._buffer)},10*(t+this._buffer)).call(this.noticeTest,this)},e.prototype.scrollEnd=function(){egret.Tween.removeTweens(this._noticePanel),this.visible=!1},e.prototype.getclubmsg=function(t){this._msgTxt.text=t},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.scrollEnd()},e.prototype.createTextFeild=function(){var t=new egret.TextField;return t.fontFamily="Microsoft YaHei",t.textColor=16312e3,t.textAlign=egret.HorizontalAlign.LEFT,t.size=25,t.multiline=!1,t.verticalAlign=egret.VerticalAlign.MIDDLE,t},e}(commonpanel.LobbyBaseEuiPanel);t.ClubMsgMcPanel=e,__reflect(e.prototype,"club.ClubMsgMcPanel")}(club||(club={}));var club;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ClubNoticeSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.addEvent=function(){uniLib.Global.addEventListener(t.ClubConst.CLUB_NOTICE,this.showNotice,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.noticeTxt.addEventListener(egret.TextEvent.FOCUS_OUT,uniLib.ZQGameSdk.hideVk,this)},i.prototype.removeEvent=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),uniLib.Global.removeEventListener(t.ClubConst.CLUB_NOTICE,this.showNotice,this),this.noticeTxt.removeEventListener(egret.TextEvent.FOCUS_OUT,uniLib.ZQGameSdk.hideVk,this)},i.prototype.destroy=function(){this.removeEvent(),uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this)},i.prototype.showNotice=function(t){var e=t.param;e.content?(this.noticeTxt.text=e.content,this.notice.text=e.content):(this.noticeTxt.text="",this.notice.text="暂无公告"),1==e.bUpdate?(this.noticeTxt.visible=!0,this.notice.visible=!1):(this.noticeTxt.visible=!1,this.notice.visible=!0),this._bUpdate=e.bUpdate,this._matchid=e.matchId},i.prototype.onClick=function(t){if(t.target==this.closeBtn)e.prototype.removePop.call(this);else if(t.target==this.modifyBtn){if(1==this._bUpdate){var i=new Cmd.ClubNoticeMatchGroupCmd_CS;i.matchId=this._matchid,i.content=this.noticeTxt.text,NetMgr.tcpSend(i)}e.prototype.removePop.call(this)}},i}(commonpanel.LobbyBaseEuiPanel);t.ClubNoticePanel=e,__reflect(e.prototype,"club.ClubNoticePanel")}(club||(club={}));var club;!function(t){var e=function(){function t(){}return t.RES_JSON="resource/club/club.res_c6ded9d8.json",t.RES_JSON_GUANGDONG="resource/club_guangdong.res.json",t.THM_JSON="resource/club/gameEui_5effdaec.json",t.PUB_CLUB="pub_club",t.SUCCESS=0,t.ActiveDetailRoom="ActiveDetailRoom",t.HistoryMatchIdList="HistoryMatchIdList",t.HistoryClubList="HistoryClubList",t.ReturnMatchGroup="ReturnMatchGroup",t.ReturnMatchGroupManage="ReturnMatchGroupManage",t.LatestMatchRoom="LatestMatchRoom",t.JoinMemberListMatch="JoinMemberListMatch",t.NotifyImportNoteCmd="NotifyImportNoteCmd",t.GetCleanRecordMatchGroup="GetCleanRecordMatchGroup",t.CLUB_NOTICE="CLUB_NOTICE",t.MemberInfoMatchGroup="MemberInfoMatchGroup",t.UserInfoSearchLobby="UserInfoSearchLobby",t.ReturnYellowList="ReturnYellowList",t.LEAVE_MATCHGROUP2="LEAVEMATCHGROUP2",t.HISTORY_DATA="HISTORY_DATA",t.GetCanInviteMemberList="GetCanInviteMemberList",t.InviteMemberMatchGroup="InviteMemberMatchGroup",t.InviteMemberMatchGroupBrd="InviteMemberMatchGroupBrd",t.RemarkPointMatchGroup="RemarkPointMatchGroup",t.RemarkNickNameMatchGroup="RemarkNickNameMatchGroup",t.CleanMemberWinPointMatchGroup="CleanMemberWinPointMatchGroup",t.GetCanImportMemberListMatchGroup="GetCanImportMemberListMatchGroup",t.ImportMemberListMatchGroup="ImportMemberListMatchGroup",t.GetPartnerRecordsMatchGroup="GetPartnerRecordsMatchGroup",t.OperatePartnerMatchGroup="OperatePartnerMatchGroup",t.RemovePartnerMatchGroup="RemovePartnerMatchGroup",t.ReplyRemovePartnerMatchGroup="ReplyRemovePartnerMatchGroup",t.GetMemberRecordsMatchGroup="GetMemberRecordsMatchGroup",t.GetCanImportMemberList2MatchGroup="GetCanImportMemberList2MatchGroup",t.ImportMember2MatchGroup="ImportMember2MatchGroup",t.RemoveMemberMatchGroup="RemoveMemberMatchGroup",t.MATCH_HISTORY_FOR_MANAGE="MATCH_HISTORY_FOR_MANAGE",t.MATCH_HISTORY_FOR_DESK="MATCH_HISTORY_FOR_DESK",t.MATCH_HISTORY_FOR_MYSELF="MATCH_HISTORY_FOR_MYSELF",t.MATCH_HISTORY_FOR_UID="MATCH_HISTORY_FOR_UID",t.MATCH_HISTORY_FOR_PARTNER="MATCH_HISTORY_FOR_PARTNER",t.CLUB_CREATEDESK=9,t.CLUB_DESKSHOW=8,t.DESK_NOUSER=8,t.OnlineState_Offline=0,t.OnlineState_Online=1,t.OnlineState_Slow=2,t.OnlineState_Leave=3,t.OnlineState_Calling=4,t.OnlineState_Hosting=5,t.OnlineState_Waiting=6,t.OnlineState_Gameing=7,t.OnlineState_Watching=8,t.OnlineState_Invited=9,t.CLUB_TOURIST=0,t.CLUB_WHITE=1,t.CLUB_BLACK=2,t.CLUB_YELLOW=3,t}();t.ClubConst=e,__reflect(e.prototype,"club.ClubConst");var i=function(){function t(){}return t.MATCH_HISTORY_FOR_MANAGE=1,t.MATCH_HISTORY_FOR_DESK=2,t.MATCH_HISTORY_FOR_MYSELF=3,t.MATCH_HISTORY_FOR_UID=4,t.MATCH_HISTORY_FOR_PARTNER=5,t}();t.ClubConst1=i,__reflect(i.prototype,"club.ClubConst1")}(club||(club={}));var club;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i._list=[],i._onlinelist=[],i.skinName="ClubPlayerListSkin",i.isOwner=t,i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.initUI=function(){this.isOwner?this._managerGroup.visible=!0:this._managerGroup.visible=!1,t.ClubData.getInstance().clubDeleteUser=!1,this.allList.itemRenderer=t.ClubPlayerListHeadPanel,this.onlineList.itemRenderer=t.ClubPlayerListHeadPanel,this._kickBtn.currentState="up",this.OnOpen(),this.allUserButton.selected=!0,this.onlineScroller.visible=!1},i.prototype.addEvent=function(){uniLib.Global.addEventListener(t.ClubConst.MemberInfoMatchGroup,this.showList,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.allList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.itemTap,this),this.onlineList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.itemTap,this)},i.prototype.removeEvent=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),uniLib.Global.removeEventListener(t.ClubConst.MemberInfoMatchGroup,this.showList,this),this.allList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.itemTap,this),this.onlineList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.itemTap,this)},i.prototype.destroy=function(){this.removeEvent(),uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this)},i.prototype.OnOpen=function(){this._UserGroup.x=-622,this._managerGroup.x=1280,egret.Tween.get(this._managerGroup).to({x:984},300),egret.Tween.get(this._UserGroup).to({x:0},300)},i.prototype.OnClose=function(){var t=this;egret.Tween.get(this._managerGroup).to({x:1280},300),egret.Tween.get(this._UserGroup).to({x:-622},300).call(function(){return e.prototype.removePop.call(t)})},i.prototype.showList=function(t){var e=this,i=t.param;this._list=i.whitelist,this.allUserButton.skin.alluserText.text="全部("+this._list.length+")";var n=0;this._onlinelist=[],this._list.forEach(function(t){1==t.state&&(n++,e._onlinelist.push(t))}),this.onlineUserButton.skin.onlineText.text="在线("+n+")",Array.isArray(this._list)&&this.updateAllList(),Array.isArray(this._onlinelist)&&this.updateOnlineList(),1==this.onlineScroller.visible&&(this.onlineUserButton.selected=!0)},i.prototype.itemTap=function(e){if(t.ClubData.getInstance().clubDeleteUser)if(this.allList.selectedItem){var i=this.allList.selectedItem;1!=i.membertype&&2!=i.membertype&&t.ClubModuleMgr.getInstance().showClubUserInfoPanel(i)}else if(this.onlineList.selectedItem){var i=this.onlineList.selectedItem;1!=i.membertype&&2!=i.membertype&&t.ClubModuleMgr.getInstance().showClubUserInfoPanel(i)}},i.prototype.updateAllList=function(){this._allListArr?(Array.isArray(this._allListArr.source)&&this._allListArr.removeAll(),this._allListArr.replaceAll(this._list)):(this._allListArr=new eui.ArrayCollection(this._list),this.allList.dataProvider=this._allListArr)
},i.prototype.updateOnlineList=function(){this._onlineListArr?(Array.isArray(this._onlineListArr.source)&&this._onlineListArr.removeAll(),this._onlineListArr.replaceAll(this._onlinelist)):(this._onlineListArr=new eui.ArrayCollection(this._onlinelist),this.onlineList.dataProvider=this._onlineListArr)},i.prototype.onClick=function(e){switch(e.target){case this._rect:case this.closeBtn:this.OnClose();break;case this.allUserButton:this.onlineScroller.visible=!1,this.allScroller.visible=!0;break;case this.onlineUserButton:this.onlineScroller.visible=!0,this.allScroller.visible=!1;break;case this._addBtn:t.ClubModuleMgr.getInstance().showClubAddMemberPanel();break;case this._applyBtn:t.ClubModuleMgr.getInstance().showClubUserApplyPanel();break;case this._kickBtn:"up"==this._kickBtn.currentState?(this._kickBtn.currentState="down",t.ClubData.getInstance().clubDeleteUser=!0):(this._kickBtn.currentState="up",t.ClubData.getInstance().clubDeleteUser=!1),this.updateAllList(),this.updateOnlineList();break;case this._searchBtn:t.ClubModuleMgr.getInstance().showClubSearchMemberPanel()}},i}(commonpanel.LobbyBaseEuiPanel);t.ClubPlayerListPanel=e,__reflect(e.prototype,"club.ClubPlayerListPanel")}(club||(club={}));var club;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.skinName="ClubRemarksScoreSkin",i._uid=t,i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this)},i.prototype.removeEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this)},i.prototype.initUI=function(){this._curNumStr="",this._symbol=""},i.prototype.btnClick=function(t){switch(RES.hasRes("buttonClick_mp3")&&uniLib.SoundMgr.instance.playSound("buttonClick_mp3"),t.target){case this._closeBtn:e.prototype.removePop.call(this);break;case this._deleteBtn:this._curNumStr=this._curNumStr.trim(),this._curNumStr=this._curNumStr.slice(0,this._curNumStr.length-1),0==this._curNumStr.length&&(this._symbol=""),this._inputText.text=this._symbol+this._curNumStr;break;case this._sureBtn:this.changeRemarks(),e.prototype.removePop.call(this);break;case this._num0:this.changeTxt("0");break;case this._num1:this.changeTxt("1");break;case this._num2:this.changeTxt("2");break;case this._num3:this.changeTxt("3");break;case this._num4:this.changeTxt("4");break;case this._num5:this.changeTxt("5");break;case this._num6:this.changeTxt("6");break;case this._num7:this.changeTxt("7");break;case this._num8:this.changeTxt("8");break;case this._num9:this.changeTxt("9");break;case this._addBtn:this.changeTxt("+");break;case this._reduceBtn:this.changeTxt("-")}},i.prototype.changeTxt=function(t){this._curNumStr=this._curNumStr.trim(),"-"==t||"+"==t?this._symbol=t:("0"!=t||0!=this._curNumStr.length)&&(this._curNumStr+=t),this._curNumStr.trim().length>=4&&(this._curNumStr=this._curNumStr.slice(0,this._curNumStr.length-1)),this._inputText.text=this._symbol+this._curNumStr},i.prototype.changeRemarks=function(){t.ClubSendMgr.RemarkPointMatchGroupCmd(t.ClubData.getInstance().matchid,this._uid,1,Number(this._inputText.text),t.ClubData.getInstance().clubDayChose-1)},i}(commonpanel.LobbyBaseEuiPanel);t.ClubRemarksScorePanel=e,__reflect(e.prototype,"club.ClubRemarksScorePanel")}(club||(club={}));var club;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ClubRoomdetailsSkin",t}return __extends(i,e),i.prototype.initUI=function(){},i.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.removeEvent=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.setDate=function(t){t&&(this.info=t,this._timeText.text="",this._deskIdText.text="")},i.prototype.setUserDate=function(e){if(e){this.roomInfo=e,this._inviteBtn.visible=!1,this._enterRoomBtn.x=430;var i=(new Date).getTime();this.roomInfo.roomId&&(this._deskIdText.text="桌号:"+this.roomInfo.roomId,this._timeText.text="当前时间:"+LobbyUtils.changeTimeToStr(i));var n=[];if(t.ClubData.getInstance().isClubManage&&(this._inviteBtn.visible=!0,this._enterRoomBtn.x=600),Array.isArray(e.list)&&(n=this.roomInfo.list.concat()),1==this.roomInfo.state)this._enterRoomBtn.visible=!1,this._inviteBtn.visible=!1;else for(var s=n.length,r=0;r<this.roomInfo.userNbr-s;r++){var o=new Cmd.MatchGroupMemberInfo;o.state=t.ClubConst.DESK_NOUSER,n.push(o)}this._userList.itemRenderer=t.ClubRoomdetailshead,this._userList.dataProvider=new eui.ArrayCollection(n),this.roomInfo.beginTime}},i.prototype.onClickTap=function(i){switch(i.target){case this._closeBtn:e.prototype.removePop.call(this);break;case this._enterRoomBtn:this.dispatchEventWith(ClubUIEventConst.JOIN_CLUBROOM);var n=new Cmd.EnterRoomCmd_C;this.roomInfo.roomId?n.preBestRoomId=this.roomInfo.roomId:n.preBestRoomId=0,n.roomId=this.info.matchId,NetMgr.tcpSend(n),e.prototype.removePop.call(this);break;case this._inviteBtn:this.roomInfo.roomId?t.ClubModuleMgr.getInstance().showClubInvitePanel(this.roomInfo.roomId):t.ClubModuleMgr.getInstance().showClubInvitePanel(),e.prototype.removePop.call(this)}},i}(commonpanel.LobbyBaseEuiPanel);t.ClubRoomdetails=e,__reflect(e.prototype,"club.ClubRoomdetails")}(club||(club={}));var club;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ClubRoomdetailsheadSkin",t}return __extends(i,e),i.prototype.dataChanged=function(){this.info=this.data,this.info.state==t.ClubConst.DESK_NOUSER?(this._idText.text="",this._nameText.text="",this._typeImg.source="club_new_menage_json.club_deskitem_free",this._timeText.text=""):(this._headImg.source=this.info.headUrl,this._idText.text="ID:"+this.info.uid,this._nameText.text=this.info.nickname,0==this.info.state?this._typeImg.source="club_new_menage_json.club_deskitem_leave2":this._typeImg.source="club_new_menage_json.club_deskitem_online",this._timeText.text="进入时间:"+LobbyUtils.changeTimeToStrDay(this.info.time))},i}(eui.ItemRenderer);t.ClubRoomdetailshead=e,__reflect(e.prototype,"club.ClubRoomdetailshead")}(club||(club={}));var club;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ClubSearchMemberSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),uniLib.Global.addEventListener(t.ClubConst.MemberInfoMatchGroup,this.showList,this)},i.prototype.removeEvent=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),uniLib.Global.removeEventListener(t.ClubConst.MemberInfoMatchGroup,this.showList,this)},i.prototype.initUI=function(){this._menberList.itemRenderer=t.ClubSearchMemberItemPanel},i.prototype.showList=function(t){this.searchMember(this._searchEditableText.text)},i.prototype.onClick=function(t){switch(t.target){case this._closeBtn:e.prototype.removePop.call(this);break;case this._searchBtn:this.searchMember(this._searchEditableText.text)}},i.prototype.searchMember=function(e){var i=t.ClubData.getInstance().ClubMemberMiniList;Array.isArray(i)&&(this.searchArray=[],""!=e&&(this.searchArray=i.filter(function(t){return-1!=t.nickname.toString().indexOf(e)||-1!=t.uid.toString().indexOf(e)})),this.setdata(this.searchArray))},i.prototype.setdata=function(t){0==t.length?this._tishiText.visible=!0:this._tishiText.visible=!1,this._menberListArray?(Array.isArray(this._menberListArray.source)&&this._menberListArray.removeAll(),this._menberListArray.replaceAll(t)):(this._menberListArray=new eui.ArrayCollection(t),this._menberList.dataProvider=this._menberListArray)},i}(commonpanel.LobbyBaseEuiPanel);t.ClubSearchMemberPanel=e,__reflect(e.prototype,"club.ClubSearchMemberPanel")}(club||(club={}));var club;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.skinName="ClubUserInfoSkin",i.info=t,i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},i.prototype.removeEvent=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},i.prototype.initUI=function(){this.headImg.source=this.info.headUrl,this.nameTxt.text=this.info.nickname,this.idTxt.text="ID："+this.info.uid},i.prototype.onClick=function(i){switch(i.target){case this._closeBtn:e.prototype.removePop.call(this);break;case this._kickBtn:var n=new Cmd.OperateMemberListMatchGroupCmd_C;n.reply=0,n.uid=this.info.uid,n.matchId=t.ClubData.getInstance().clubmatchid,NetMgr.tcpSend(n),e.prototype.removePop.call(this)}},i}(commonpanel.LobbyBaseEuiPanel);t.ClubUserInfoPanel=e,__reflect(e.prototype,"club.ClubUserInfoPanel")}(club||(club={}));var club;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.skinName="CreateMatchSetSkin",i._data=t,i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.initUI=function(){this._data instanceof Cmd.CreateRoomCmd_C?(this._req=this._data,this._state=1):(this._clubmss=this._data,this._req=this._data.createRoom,this._changeMatchId=this._data.matchId,this._state=2),this.setCreatReq(this._req),1==MJLobbyData.getInstance().lobbyConfig.clubPower&&(this._permissionCheck.selected=!0,this._checkType=!0),2==this._state?(this._sureSetBtn.visible=!0,this._creatBtn.visible=!1,this.showMatchData(this._clubmss)):(this._sureSetBtn.visible=!1,this._creatBtn.visible=!0)},i.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.removeEvent=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.showMatchData=function(t){null!=t&&(this._userIdInput.text=null!=t.otherManagerId?t.otherManagerId+"":"",this._user2IdInput.text=null!=t.otherManagerId2?t.otherManagerId2+"":"",(4124==this._gameId||4207==this._gameId||4149==this._gameId||4275==this._gameId||4035==this._gameId)&&(this._bigWinInput.text=null!=t.winnerConditions?t.winnerConditions+"":""),this._clubNameInput.text=null!=t.matchName?t.matchName:"",this._permissionCheck.selected=null!=t.needAgree&&1==t.needAgree?!0:!1,this._checkType=this._permissionCheck.selected,this._cleanRcordCheck.selected=null!=t.masterClearRecord&&1==t.masterClearRecord?!0:!1,this._cleancheckType=this._cleanRcordCheck.selected)},i.prototype.onClickTap=function(t){t.target==this._modifyBtn?this.modifyPlay():t.target==this._creatBtn?this.createMatchReq():t.target==this._sureSetBtn?this.settingHandel():t.target==this._permissionCheck||t.target==this._permissionLabel?this._checkType=this._permissionCheck.selected=!this._checkType:t.target==this._cleanRcordCheck||t.target==this._cleanRcordLabel?this._cleancheckType=this._cleanRcordCheck.selected=!this._cleancheckType:t.target==this._tipsBtn&&uniLib.TipsUtils.showConfirm("大赢家最低分数设置为0时，只要最高的分数就是大赢家，设置非0时，最高分大于等于设置的分数才算大赢家。","大赢家分数说明","确定",null)},i.prototype.modifyPlay=function(){1==this._state?(uniLib.PopUpMgr.removePopUp(this),t.ClubModuleMgr.getInstance().showCreateClubPanel()):(uniLib.PopUpMgr.removePopUp(this),t.ClubModuleMgr.getInstance().showCreateClubPanel(this._clubmss))},i.prototype.createMatchReq=function(){var t=new Cmd.CreateMatchGroupCmd_C;this._req&&(t.createRoom=this._req,t.isClub=1),t.needAgree=this._permissionCheck.selected?1:0,t.masterClearRecord=this._cleanRcordCheck.selected?1:0,this._clubNameInput&&(t.matchName=this._clubNameInput.text),this._userIdInput&&(t.otherManagerId=Number(this._userIdInput.text)),this._user2IdInput&&(t.otherManagerId2=Number(this._user2IdInput.text)),this._bigWinInput&&(4124==this._gameId||4207==this._gameId||4149==this._gameId||4035==this._gameId)&&(t.winnerConditions=Number(this._bigWinInput.text)),NetMgr.tcpSend(t),uniLib.PopUpMgr.removePopUp(this)},i.prototype.settingHandel=function(){var t=new Cmd.ChangeMatchGroupCmd_C;t.needAgree=this._permissionCheck.selected?1:0,t.masterClearRecord=this._cleanRcordCheck.selected?1:0,t.matchId=null!=this._changeMatchId?this._changeMatchId:0,this._clubNameInput&&(t.matchName=this._clubNameInput.text),this._userIdInput&&(t.otherManagerId=Number(this._userIdInput.text)),this._user2IdInput&&(t.otherManagerId2=Number(this._user2IdInput.text)),this._bigWinInput&&(4124==this._gameId||4207==this._gameId||4149==this._gameId||4035==this._gameId)&&(t.winnerConditions=Number(this._bigWinInput.text)),this._req&&(t.createRoom=this._req),NetMgr.tcpSend(t),uniLib.PopUpMgr.removePopUp(this)},i.prototype.setCreatReq=function(t){if(t&&(this._req=t,t.gameId)){var e=MJLobbyData.getInstance().getGameCreateConfig(t.gameId);e&&(this._gameNameLabel.text=e.gameName),this._gameId=t.gameId}4124==this._gameId||4207==this._gameId||4149==this._gameId||4035==this._gameId?this._bigWinGroup.visible=!0:this._bigWinGroup.visible=!1},i}(commonpanel.LobbyBaseEuiPanel);t.CreateMatchSetPanel=e,__reflect(e.prototype,"club.CreateMatchSetPanel")}(club||(club={}));var club;!function(t){var e=function(){function t(){}return t.MatchMemberTypeToString=function(t){return t?1==t?"白名单":2==t?"黑名单":3==t?"同桌限制":4==t?"VIP":void 0:"游  客"},t.MatchMemberTypeToColor=function(t){return t?1==t?4783872:2==t?13313060:3==t?12216577:4==t?16041845:void 0:4746562},t}();t.DataManage=e,__reflect(e.prototype,"club.DataManage")}(club||(club={}));var club;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.search=!1,t.skinName="ClubMemberItemSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addListener()},i.prototype.addListener=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.removeListener=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.dataChanged=function(){this._searchBtn.visible=!1,this._addBtn.visible=!0,this._tishiText.visible=!1,this.searchInfo=this.data,this._idText.text=this.searchInfo.uid+"",this._nameText.text=this.searchInfo.nickname,this._headImg.source=this.searchInfo.headUrl,1==this.searchInfo.membertype?(this._addBtn.visible=!1,this._tishiText.visible=!0,this._tishiText.text="圈主"):2==this.searchInfo.membertype&&(this._addBtn.visible=!1,this._tishiText.visible=!0,this._tishiText.text="管理员")},i.prototype.onClickTap=function(e){switch(e.target){case this._addBtn:var i=new Cmd.OperatePartnerMatchGroupCmd_CS;i.typ=1,i.partnerUid=this.searchInfo.uid,i.matchId=t.ClubData.getInstance().clubmatchid,NetMgr.tcpSend(i),this._tishiText.visible=!0,this._addBtn.visible=!1}},i}(eui.ItemRenderer);t.ClubPartnerAddItemPanel=e,__reflect(e.prototype,"club.ClubPartnerAddItemPanel")}(club||(club={}));var club;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._list=[],t.skinName="ClubAddPartnerSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._searchEditableText.addEventListener(egret.FocusEvent.FOCUS_OUT,this.onTextFieldFocusOut,this)},i.prototype.removeEvent=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._searchEditableText.removeEventListener(egret.FocusEvent.FOCUS_OUT,this.onTextFieldFocusOut,this)},i.prototype.initUI=function(){this._menberList.itemRenderer=t.ClubPartnerAddItemPanel},i.prototype.onClick=function(t){switch(t.target){case this._closeBtn:e.prototype.removePop.call(this);break;case this._searchBtn:this._searchEditableText.text.length<8?(uniLib.TipsUtils.showTipsDownToUp("请输入正确的玩家ID!"),this._searchEditableText.text=""):this.searchMember(this._searchEditableText.text)}},i.prototype.searchMember=function(e){var i=t.ClubData.getInstance().ClubMemberMiniList;Array.isArray(i)&&(this.searchArray=[],""!=e&&(this.searchArray=i.filter(function(t){return-1!=t.nickname.toString().indexOf(e)||-1!=t.uid.toString().indexOf(e)})),this.setdata(this.searchArray))},i.prototype.setdata=function(t){0==t.length?this._tishiText.visible=!0:this._tishiText.visible=!1,this._menberListArray?(Array.isArray(this._menberListArray.source)&&this._menberListArray.removeAll(),this._menberListArray.replaceAll(t)):(this._menberListArray=new eui.ArrayCollection(t),this._menberList.dataProvider=this._menberListArray)},i.prototype.onTextFieldFocusOut=function(t){(""==t.target.text||0==Number(t.target.text))&&(t.target.text="")},i}(commonpanel.LobbyBaseEuiPanel);t.ClubPartnerAddPanel=e,__reflect(e.prototype,"club.ClubPartnerAddPanel")}(club||(club={}));var club;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.search=!1,t.skinName="ClubMemberItemSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addListener()},i.prototype.addListener=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.removeListener=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.dataChanged=function(){this._searchBtn.visible=!1,this._addBtn.visible=!0,this._tishiText.visible=!1,this.searchInfo=this.data,this._idText.text=this.searchInfo.uid+"",this._nameText.text=this.searchInfo.nickname,this._headImg.source=this.searchInfo.headUrl},i.prototype.onClickTap=function(e){switch(e.target){case this._addBtn:var i=new Cmd.ImportMember2MatchGroupCmd_CS;i.matchId=t.ClubData.getInstance().clubmatchid,i.fromMatchId=t.ClubData.getInstance().PartnerMatchId,i.uids=[this.searchInfo.uid],NetMgr.tcpSend(i),this._tishiText.visible=!0,this._addBtn.visible=!1}},i}(eui.ItemRenderer);t.ClubPartnerImportAddItemPanel=e,__reflect(e.prototype,"club.ClubPartnerImportAddItemPanel")}(club||(club={}));var club;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._list=[],t.skinName="ClubAddmemberSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._searchEditableText.addEventListener(egret.FocusEvent.FOCUS_OUT,this.onTextFieldFocusOut,this)},i.prototype.removeEvent=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._searchEditableText.removeEventListener(egret.FocusEvent.FOCUS_OUT,this.onTextFieldFocusOut,this)},i.prototype.initUI=function(){this._menberList.itemRenderer=t.ClubPartnerImportAddItemPanel},i.prototype.onClick=function(t){switch(t.target){case this._closeBtn:e.prototype.removePop.call(this);break;case this._searchBtn:this._searchEditableText.text.length<8?(uniLib.TipsUtils.showTipsDownToUp("请输入正确的玩家ID!"),this._searchEditableText.text=""):this.searchMember(this._searchEditableText.text)}},i.prototype.searchMember=function(e){var i=t.ClubData.getInstance().PartnerImportList;Array.isArray(i)&&(this.searchArray=[],""!=e&&(this.searchArray=i.filter(function(t){return-1!=t.nickname.toString().indexOf(e)||-1!=t.uid.toString().indexOf(e)})),this.setdata(this.searchArray))},i.prototype.setdata=function(t){0==t.length?this._tishiText.visible=!0:this._tishiText.visible=!1,this._menberListArray?(Array.isArray(this._menberListArray.source)&&this._menberListArray.removeAll(),this._menberListArray.replaceAll(t)):(this._menberListArray=new eui.ArrayCollection(t),this._menberList.dataProvider=this._menberListArray)},i.prototype.onTextFieldFocusOut=function(t){(""==t.target.text||0==Number(t.target.text))&&(t.target.text="")},i}(commonpanel.LobbyBaseEuiPanel);t.ClubPartnerImportAddPanel=e,__reflect(e.prototype,"club.ClubPartnerImportAddPanel")}(club||(club={}));var club;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ClubPartnerImportItemSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.dataChanged=function(){this._info=this.data,this._headImg.source=this._info.headUrl,this._nameText.text=this._info.nickname,this._idText.text=""+this._info.uid,-1!=t.ClubData.getInstance().PartnerImportUidList.indexOf(this._info.uid)?this._selectImg.visible=!0:this._selectImg.visible=!1},i}(eui.ItemRenderer);t.ClubPartnerImportItemPanel=e,__reflect(e.prototype,"club.ClubPartnerImportItemPanel")}(club||(club={}));var club;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.matchIdList=[],t.skinName="ClubPartnerImportSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.initUI=function(){this.matchIdList=[],this._memberList=[],this._list.itemRenderer=t.ClubPartnerImportItemPanel,this.matchList.itemRenderer=t.MatchRadioButton,this._choseClubBtn.currentState="up",this._allBtn.currentState="up",this._choseClubBtn.skin._matchIdText.text=""},i.prototype.addEvent=function(){uniLib.Global.addEventListener(t.ClubConst.GetCanImportMemberList2MatchGroup,this.setDate,this),this.matchList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onMatchListTap,this),this._list.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.itemTap,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.removeEvent=function(){uniLib.Global.removeEventListener(t.ClubConst.GetCanImportMemberList2MatchGroup,this.setDate,this),this.matchList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onMatchListTap,this),this._list.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.itemTap,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.setDate=function(t){this._data=t.param,this._choseClubBtn.skin._matchIdText.text=""+this._data.matchId,this.matchIdList=this._data.matchIdList,this._data.matchIdList.length<10?(this._choseClubBg.height=2+49*this._data.matchIdList.length,this._matchScroller.height=49*this._data.matchIdList.length):(this._choseClubBg.height=456,this._matchScroller.height=454),this._memberList=this._data.memberList,this.updateList(this._data.memberList),this.updateMatchIdList()},i.prototype.onMatchListTap=function(e){var i=new Cmd.GetCanImportMemberList2MatchGroupCmd_CS;i.curMatchId=t.ClubData.getInstance().clubmatchid,i.matchId=this.matchIdList[this.matchList.selectedIndex],NetMgr.tcpSend(i),"up"==this._choseClubBtn.currentState?(this._choseClubBtn.currentState="down",this._matchGroup.visible=!0):(this._choseClubBtn.currentState="up",this._matchGroup.visible=!1)},i.prototype.itemTap=function(e){if(this._list.selectedItem){var i=this._list.selectedItem;-1!=t.ClubData.getInstance().PartnerImportUidList.indexOf(i.uid)?t.ClubData.getInstance().PartnerImportUidList.splice(t.ClubData.getInstance().PartnerImportUidList.indexOf(i.uid),1):t.ClubData.getInstance().PartnerImportUidList.push(i.uid)}this.updateList(this._memberList)},i.prototype.allChose=function(){t.ClubData.getInstance().PartnerImportUidList=[],"up"==this._allBtn.currentState?(Array.isArray(this._memberList)&&this._memberList.forEach(function(e){t.ClubData.getInstance().PartnerImportUidList.push(e.uid)}),this._allBtn.currentState="down"):this._allBtn.currentState="up",this._memberList.length>0&&this.updateList(this._memberList)},i.prototype.updateList=function(e){t.ClubData.getInstance().PartnerImportUidList.length==this._memberList.length?this._allBtn.currentState="down":this._allBtn.currentState="up",this._listArr?(Array.isArray(this._listArr.source)&&this._listArr.removeAll(),this._listArr.replaceAll(e)):(this._listArr=new eui.ArrayCollection(e),this._list.dataProvider=this._listArr)},i.prototype.updateMatchIdList=function(){this._matchListArr?(Array.isArray(this._matchListArr.source)&&this._matchListArr.removeAll(),this._matchListArr.replaceAll(this.matchIdList)):(this._matchListArr=new eui.ArrayCollection(this.matchIdList),this.matchList.dataProvider=this._matchListArr)},i.prototype.onClickTap=function(i){var n=this;switch(i.target){case this._choseClubBtn:"up"==this._choseClubBtn.currentState?(this._choseClubBtn.currentState="down",this._matchGroup.visible=!0):(this._choseClubBtn.currentState="up",this._matchGroup.visible=!1);break;case this._closeBtn:e.prototype.removePop.call(this);break;case this._choseRect:"up"==this._choseClubBtn.currentState?(this._choseClubBtn.currentState="down",this._matchGroup.visible=!0):(this._choseClubBtn.currentState="up",this._matchGroup.visible=!1);break;case this._allBtn:this.allChose();break;case this._sureBtn:0==t.ClubData.getInstance().PartnerImportUidList.length?uniLib.TipsUtils.showConfirm("请选择需要导入的成员！","","确定",null):uniLib.TipsUtils.showConfirm("确认将成员导入"+t.ClubData.getInstance().clubmatchid+"老友圈！","","确定",function(){var i=new Cmd.ImportMember2MatchGroupCmd_CS;i.matchId=t.ClubData.getInstance().clubmatchid,i.fromMatchId=t.ClubData.getInstance().PartnerMatchId,i.uids=t.ClubData.getInstance().PartnerImportUidList,NetMgr.tcpSend(i),t.ClubData.getInstance().PartnerImportUidList=[],e.prototype.removePop.call(n)},"取消",null)}},i}(commonpanel.LobbyBaseEuiPanel);t.ClubPartnerImportPanel=e,__reflect(e.prototype,"club.ClubPartnerImportPanel")}(club||(club={}));var club;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ClubPartnerMemberDetailItemSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addListener()},i.prototype.addListener=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.removeListener=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this._removeImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.dataChanged=function(){this._info=this.data,this._headImg.source=this._info.member.headUrl,this._nameText.text=this._info.member.nickname,this._uidText.text=""+this._info.member.uid,this._roomNumText.text=""+this._info.roomNbrs[t.ClubData.getInstance().clubDayChose-1],this._winNumText.text=""+this._info.winNbrs[t.ClubData.getInstance().clubDayChose-1],this._info.member.partnerState&&1==this._info.member.partnerState?(this._removeImg.visible=!0,this._removeImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this._deleteBtn.visible=!1):(this._removeImg.visible=!1,this._deleteBtn.visible=!0),0==this.itemIndex&&(this._deleteBtn.visible=!1)},i.prototype.onClickTap=function(e){switch(e.target){case this._deleteBtn:t.ClubModuleMgr.getInstance().showClubPartnerRemoveMemberPanel(this._info.member);break;case this._detailBtn:t.ClubModuleMgr.getInstance().showClubPartnerRecordDetailPanel(this._info.member);break;case this._removeImg:uniLib.TipsUtils.showTipsDownToUp("此成员已踢出，记录保留24小时！")}},i}(eui.ItemRenderer);t.ClubPartnerMemberDetailItemPanel=e,__reflect(e.prototype,"club.ClubPartnerMemberDetailItemPanel")}(club||(club={}));var club;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ClubPartnerMemberDetailSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.initUI=function(){this._list.itemRenderer=t.ClubPartnerMemberDetailItemPanel},i.prototype.addEvent=function(){uniLib.Global.addEventListener(t.ClubConst.GetMemberRecordsMatchGroup,this.setDate,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.removeEvent=function(){uniLib.Global.removeEventListener(t.ClubConst.GetMemberRecordsMatchGroup,this.setDate,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.updateList=function(){this._listArr?(Array.isArray(this._listArr.source)&&this._listArr.removeAll(),this._listArr.replaceAll(this._partnerMemberRecordInfo)):(this._listArr=new eui.ArrayCollection(this._partnerMemberRecordInfo),this._list.dataProvider=this._listArr)},i.prototype.setDate=function(t){this._data=t.param,this._partnerMemberRecordInfo=this._data.records,this.updateList()},i.prototype.onClickTap=function(t){switch(t.target){case this._closeBtn:e.prototype.removePop.call(this)}},i}(commonpanel.LobbyBaseEuiPanel);t.ClubPartnerMemberDetailPanel=e,__reflect(e.prototype,"club.ClubPartnerMemberDetailPanel")}(club||(club={}));var club;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ClubPartnerMemberRecordItemSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addListener()},i.prototype.addListener=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.removeListener=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this._removeImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.dataChanged=function(){this._info=this.data,this._headImg.source=this._info.member.headUrl,this._nameText.text=this._info.member.nickname,this._uidText.text="ID:"+this._info.member.uid,this._roomNumText.text=""+this._info.roomNbrs[t.ClubData.getInstance().clubDayChose-1],this._bigWinText.text=""+this._info.winNbrs[t.ClubData.getInstance().clubDayChose-1],this._recordText.text=""+this._info.scores[t.ClubData.getInstance().clubDayChose-1],this._info.member.partnerState&&1==this._info.member.partnerState?(this._removeImg.visible=!0,this._removeImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this._deleteBtn.visible=!1):(this._removeImg.visible=!1,this._deleteBtn.visible=!0),this._info.member.uid==uniLib.UserInfo.uid&&(this._deleteBtn.visible=!1)},i.prototype.onClickTap=function(e){switch(e.target){case this._deleteBtn:t.ClubModuleMgr.getInstance().showClubPartnerRemoveMemberPanel(this._info.member);break;case this._detailBtn:t.ClubModuleMgr.getInstance().showClubPartnerRecordDetailPanel(this._info.member);break;case this._removeImg:uniLib.TipsUtils.showTipsDownToUp("此成员已踢出，记录保留24小时！")}},i}(eui.ItemRenderer);t.ClubPartnerMemberRecordItemPanel=e,__reflect(e.prototype,"club.ClubPartnerMemberRecordItemPanel")}(club||(club={}));var club;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ClubPartnerMemberRecordSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.addEvent=function(){uniLib.Global.addEventListener(t.ClubConst.GetMemberRecordsMatchGroup,this.setDate,this),uniLib.Global.addEventListener(t.ClubConst.RemoveMemberMatchGroup,this.updateDate,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.removeEvent=function(){uniLib.Global.removeEventListener(t.ClubConst.GetMemberRecordsMatchGroup,this.setDate,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.initUI=function(){this._choseDayBtn.skin._dayTypeText.text="今日输赢",t.ClubData.getInstance().clubDayChose=1,this._list.itemRenderer=t.ClubPartnerMemberRecordItemPanel,this._choseDayBtn.currentState="up"},i.prototype.setDate=function(t){this._data=t.param,this._partnerMemberRecordInfo=this._data.records,this._allMemberText.text=""+this._data.statistics.memberNbr,this.update(),this.updateList()},i.prototype.updateDate=function(t){var e=t.param;this._partnerMemberRecordInfo.forEach(function(t){t.member.uid==e.uid&&(t.member.partnerState=1)}),this._partnerMemberRecordInfo=this._data.records,this._allMemberText.text=""+this._data.statistics.memberNbr,this.update(),this.updateList()},i.prototype.update=function(){this._palyRoomText.text=""+this._data.statistics.roomNbrs[t.ClubData.getInstance().clubDayChose-1],this._bigWinText.text=""+this._data.statistics.winNbrs[t.ClubData.getInstance().clubDayChose-1],this._playMemberText.text=""+this._data.statistics.playUserNbrs[t.ClubData.getInstance().clubDayChose-1]},i.prototype.updateList=function(){Array.isArray(this._partnerMemberRecordInfo)&&(this._listArr?(Array.isArray(this._listArr.source)&&this._listArr.removeAll(),this._listArr.replaceAll(this._partnerMemberRecordInfo)):(this._listArr=new eui.ArrayCollection(this._partnerMemberRecordInfo),this._list.dataProvider=this._listArr))
},i.prototype.onClickTap=function(i){switch(i.target){case this._choseDayBtn:this._choseDayBtn.currentState="down",this._dayTypeGroup.visible=!0;break;case this._todayBtn:t.ClubData.getInstance().clubDayChose=1,this._choseDayBtn.skin._dayTypeText.text="今日输赢",this._choseDayBtn.currentState="up",this._dayTypeGroup.visible=!1,this.update(),this.updateList();break;case this._yesterdayBtn:t.ClubData.getInstance().clubDayChose=2,this._choseDayBtn.skin._dayTypeText.text="昨日输赢",this._choseDayBtn.currentState="up",this._dayTypeGroup.visible=!1,this.update(),this.updateList();break;case this._qianBtn:t.ClubData.getInstance().clubDayChose=3,this._choseDayBtn.skin._dayTypeText.text="前日输赢",this._choseDayBtn.currentState="up",this._dayTypeGroup.visible=!1,this.update(),this.updateList();break;case this._closeBtn:e.prototype.removePop.call(this);break;case this._choseRect:this._choseDayBtn.currentState="up",this._dayTypeGroup.visible=!1;break;case this._addBtn:t.ClubModuleMgr.getInstance().showClubPartnerImportAddPanel();var n=new Cmd.GetCanImportMemberList2MatchGroupCmd_CS;n.curMatchId=t.ClubData.getInstance().clubmatchid,NetMgr.tcpSend(n);break;case this._importBtn:t.ClubModuleMgr.getInstance().showClubPartnerImportPanel(function(){var e=new Cmd.GetCanImportMemberList2MatchGroupCmd_CS;e.curMatchId=t.ClubData.getInstance().clubmatchid,NetMgr.tcpSend(e)})}},i}(commonpanel.LobbyBaseEuiPanel);t.ClubPartnerMemberRecordPanel=e,__reflect(e.prototype,"club.ClubPartnerMemberRecordPanel")}(club||(club={}));var club;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i._curPage=0,i.skinName="ClubPartnerRecordDetailSkin",i._info=t,i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.addEvent=function(){uniLib.Global.addEventListener(t.ClubConst.MATCH_HISTORY_FOR_PARTNER,this.showData,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.removeEvent=function(){uniLib.Global.removeEventListener(t.ClubConst.MATCH_HISTORY_FOR_PARTNER,this.showData,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.initUI=function(){this.addListen(),this._AllRecordArr=[],this._list.itemRenderer=t.ClubMemberInfoItemPanel,this._remarksText.touchEnabled=!1,t.ClubSendMgr.getGameDataHistoryToUIdgForPartner(t.ClubData.getInstance().clubmatchid,this._info.uid,1,t.ClubConst1.MATCH_HISTORY_FOR_PARTNER)},i.prototype.onClickTap=function(t){switch(t.target){case this._closeBtn:e.prototype.removePop.call(this)}},i.prototype.showData=function(t){var e=t.param;this._headImg.source=e.userInfo.headurl,this._nameText.text=e.userInfo.nickname,this._uidText.text=e.userInfo.uid+"",this._remarksText.text=e.userInfo.remark?e.userInfo.remark:"",e.userInfo.partner?(this._belongText.text="归属人："+e.userInfo.partner.nickname,this._belongText.visible=!0):this._belongText.visible=!1,e.typ&&(this._totalPage=e.maxPage,this._curPage=e.curPage,this._totalPage=e.maxPage,1!=e.curPage||e.gameHistroys[0]?(this._tishiText.visible=!1,this.addData(e.gameHistroys)):this._tishiText.visible=!0)},i.prototype.addData=function(t){t&&t[0]&&(this._AllRecordArr=this._AllRecordArr.concat(t),this._listArr?(Array.isArray(this._listArr.source)&&this._listArr.removeAll(),this._listArr.replaceAll(this._AllRecordArr)):(this._listArr=new eui.ArrayCollection(this._AllRecordArr),this._list.dataProvider=this._listArr))},i.prototype.addListen=function(){this._scroller.addEventListener(egret.Event.CHANGE,this.checkTop,this)},i.prototype.getData=function(){uniLib.TipsUtils.showTipsDownToUp("正在加载数据~"),t.ClubSendMgr.getGameDataHistoryToUIdgForPartner(t.ClubData.getInstance().clubmatchid,this._info.uid,this._curPage,t.ClubConst1.MATCH_HISTORY_FOR_PARTNER)},i.prototype.checkTop=function(t){this._scroller.viewport.scrollV+this._scroller.viewport.height>=this._scroller.viewport.measuredHeight+10&&this._curPage<this._totalPage&&(this._scroller.removeEventListener(egret.Event.CHANGE,this.checkTop,this),this._curPage++,this.getData(),egret.Tween.get(this).wait(2e3).call(this.addListen,this))},i}(commonpanel.LobbyBaseEuiPanel);t.ClubPartnerRecordDetailPanel=e,__reflect(e.prototype,"club.ClubPartnerRecordDetailPanel")}(club||(club={}));var club;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ClubPartnerRecordItemSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addListener()},i.prototype.addListener=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.removeListener=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this._removeImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.dataChanged=function(){this._info=this.data,this._headImg.source=this._info.partner.headUrl,this._nameText.text=this._info.partner.nickname,this._uidText.text="ID:"+this._info.partner.uid,this._roomNumText.text=""+this._info.roomNbrs[t.ClubData.getInstance().clubDayChose-1],this._palyerText.text=""+this._info.playUserNbrs[t.ClubData.getInstance().clubDayChose-1],this._bigWinText.text=""+this._info.winNbrs[t.ClubData.getInstance().clubDayChose-1],this._numText.text=""+this._info.memberNbr,this._info.partner.partnerState&&1==this._info.partner.partnerState?(this._removeImg.visible=!0,this._removeImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this._deleteBtn.visible=!1):(this._removeImg.visible=!1,this._deleteBtn.visible=!0)},i.prototype.onClickTap=function(e){var i=this;switch(e.target){case this._deleteBtn:t.ClubModuleMgr.getInstance().showClubPartnerRemovePanterPanel(this._info.partner);break;case this._detailBtn:t.ClubModuleMgr.getInstance().showClubPartnerMemberDetailPanel(function(){var e=new Cmd.GetMemberRecordsMatchGroupCmd_CS;e.matchId=t.ClubData.getInstance().clubmatchid,e.targetUid=i._info.partner.uid,e.typ=2,NetMgr.tcpSend(e)});break;case this._removeImg:uniLib.TipsUtils.showTipsDownToUp("此玩家已经解除合伙关系，记录保留24小时！")}},i}(eui.ItemRenderer);t.ClubPartnerRecordItemPanel=e,__reflect(e.prototype,"club.ClubPartnerRecordItemPanel")}(club||(club={}));var club;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ClubPartnerRecordSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.initUI=function(){this._choseDayBtn.skin._dayTypeText.text="今日输赢",t.ClubData.getInstance().clubDayChose=1,this._list.itemRenderer=t.ClubPartnerRecordItemPanel,this._choseDayBtn.currentState="up"},i.prototype.addEvent=function(){uniLib.Global.addEventListener(t.ClubConst.GetPartnerRecordsMatchGroup,this.setDate,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.removeEvent=function(){uniLib.Global.removeEventListener(t.ClubConst.GetPartnerRecordsMatchGroup,this.setDate,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.setDate=function(t){this._data=t.param,this._recordsdata=this._data.records,Array.isArray(this._recordsdata)?this._partnerNumText.text="合伙人人数："+this._recordsdata.length:this._partnerNumText.text="合伙人人数：0",this.updateList()},i.prototype.updateList=function(){Array.isArray(this._recordsdata)&&(this._listArr?(Array.isArray(this._listArr.source)&&this._listArr.removeAll(),this._listArr.replaceAll(this._recordsdata)):(this._listArr=new eui.ArrayCollection(this._recordsdata),this._list.dataProvider=this._listArr))},i.prototype.onClickTap=function(i){switch(i.target){case this._choseDayBtn:this._choseDayBtn.currentState="down",this._dayTypeGroup.visible=!0;break;case this._todayBtn:t.ClubData.getInstance().clubDayChose=1,this._choseDayBtn.skin._dayTypeText.text="今日输赢",this._choseDayBtn.currentState="up",this._dayTypeGroup.visible=!1,this.updateList();break;case this._yesterdayBtn:t.ClubData.getInstance().clubDayChose=2,this._choseDayBtn.skin._dayTypeText.text="昨日输赢",this._choseDayBtn.currentState="up",this._dayTypeGroup.visible=!1,this.updateList();break;case this._qianBtn:t.ClubData.getInstance().clubDayChose=3,this._choseDayBtn.skin._dayTypeText.text="前日输赢",this._choseDayBtn.currentState="up",this._dayTypeGroup.visible=!1,this.updateList();break;case this._closeBtn:e.prototype.removePop.call(this);break;case this._choseRect:this._choseDayBtn.currentState="up",this._dayTypeGroup.visible=!1;break;case this._addPartnerBtn:var n=new Cmd.RequestMemberInfoMatchGroupCmd_C;n.matchId=t.ClubData.getInstance().clubmatchid,n.typ=1,NetMgr.tcpSend(n),t.ClubModuleMgr.getInstance().showClubPartnerAddPanel()}},i}(commonpanel.LobbyBaseEuiPanel);t.ClubPartnerRecordPanel=e,__reflect(e.prototype,"club.ClubPartnerRecordPanel")}(club||(club={}));var club;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.skinName="ClubPartnerRemoveSkin",i._info=t,i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.initUI=function(){this._idText.text=""+this._info.uid,this._nameText.text=this._info.nickname,this._headImg.source=this._info.headUrl},i.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.removeEvent=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.onClickTap=function(i){switch(i.target){case this._closeBtn:e.prototype.removePop.call(this);break;case this._sureBtn:var n=new Cmd.RemoveMemberMatchGroupCmd_CS;n.matchId=t.ClubData.getInstance().clubmatchid,n.uid=this._info.uid,NetMgr.tcpSend(n),e.prototype.removePop.call(this)}},i}(commonpanel.LobbyBaseEuiPanel);t.ClubPartnerRemoveMemberPanel=e,__reflect(e.prototype,"club.ClubPartnerRemoveMemberPanel")}(club||(club={}));var club;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.skinName="ClubPartnerRemoveSkin",i._info=t,i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.initUI=function(){this._idText.text=""+this._info.uid,this._nameText.text=this._info.nickname,this._headImg.source=this._info.headUrl,this._tipsText.text="解除合伙人需要合伙人同意才能解除！",this._sureBtn.skin._text.text="确认解除"},i.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.removeEvent=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.onClickTap=function(i){switch(i.target){case this._closeBtn:e.prototype.removePop.call(this);break;case this._sureBtn:var n=new Cmd.OperatePartnerMatchGroupCmd_CS;n.matchId=t.ClubData.getInstance().clubmatchid,n.partnerUid=this._info.uid,n.typ=2,NetMgr.tcpSend(n),e.prototype.removePop.call(this)}},i}(commonpanel.LobbyBaseEuiPanel);t.ClubPartnerRemovePanterPanel=e,__reflect(e.prototype,"club.ClubPartnerRemovePanterPanel")}(club||(club={}));var club;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ClubMemberTimerSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.initUI=function(){t.ClubData.getInstance().suspendTimer&&(this._suspendHour.text=Math.floor(t.ClubData.getInstance().suspendTimer/3600)<10?"0"+Math.floor(t.ClubData.getInstance().suspendTimer/3600):Math.floor(t.ClubData.getInstance().suspendTimer/3600)+"",this._suspendMinute.text=t.ClubData.getInstance().suspendTimer%3600/60<10?"0"+t.ClubData.getInstance().suspendTimer%3600/60:t.ClubData.getInstance().suspendTimer%3600/60+""),t.ClubData.getInstance().renewTimer&&(this._renewHour.text=Math.floor(t.ClubData.getInstance().renewTimer/3600)<10?"0"+Math.floor(t.ClubData.getInstance().renewTimer/3600):Math.floor(t.ClubData.getInstance().renewTimer/3600)+"",this._renewMinute.text=t.ClubData.getInstance().renewTimer%3600/60<10?"0"+t.ClubData.getInstance().renewTimer%3600/60:t.ClubData.getInstance().renewTimer%3600/60+""),t.ClubData.getInstance().isClubOwner?(this._resetRenewBtn.visible=!0,this._resetSuspendBtn.visible=!0,this._sureBtn.visible=!0):(this._resetRenewBtn.visible=!1,this._resetSuspendBtn.visible=!1,this._sureBtn.visible=!1)},i.prototype.addEvent=function(){this._suspendHour.addEventListener(egret.TouchEvent.FOCUS_OUT,this.onHourTextFocusOut,this),this._suspendMinute.addEventListener(egret.TouchEvent.FOCUS_OUT,this.onMinuteTextFocusOut,this),this._renewHour.addEventListener(egret.TouchEvent.FOCUS_OUT,this.onHourTextFocusOut,this),this._renewMinute.addEventListener(egret.TouchEvent.FOCUS_OUT,this.onMinuteTextFocusOut,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},i.prototype.removeEvent=function(){this._suspendHour.removeEventListener(egret.TouchEvent.FOCUS_OUT,this.onHourTextFocusOut,this),this._suspendMinute.removeEventListener(egret.TouchEvent.FOCUS_OUT,this.onMinuteTextFocusOut,this),this._renewHour.removeEventListener(egret.TouchEvent.FOCUS_OUT,this.onHourTextFocusOut,this),this._renewMinute.removeEventListener(egret.TouchEvent.FOCUS_OUT,this.onMinuteTextFocusOut,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i.prototype.onClick=function(t){switch(t.target){case this._closeBtn:e.prototype.removePop.call(this);break;case this._sureBtn:this.sendTimer(),e.prototype.removePop.call(this);break;case this._resetSuspendBtn:this._suspendHour.text="",this._suspendMinute.text="";break;case this._resetRenewBtn:this._renewHour.text="",this._renewMinute.text=""}},i.prototype.onHourTextFocusOut=function(t){""!=t.target.text&&Number(t.target.text)<24?Number(t.target.text)<10&&(t.target.text="0"+Number(t.target.text)):t.target.text=""},i.prototype.onMinuteTextFocusOut=function(t){""!=t.target.text&&Number(t.target.text)<60?Number(t.target.text)<10&&(t.target.text="0"+Number(t.target.text)):t.target.text=""},i.prototype.sendTimer=function(){var e=new Cmd.SetPauseTimerMatchGroupCmd_CS;e.matchId=t.ClubData.getInstance().matchid,(""!=this._suspendHour.text||""!=this._suspendMinute.text)&&(e.pauseTimer=3600*Number(this._suspendHour.text)+60*Number(this._suspendMinute.text)),(""!=this._renewHour.text||""!=this._renewMinute.text)&&(e.restoreTimer=3600*Number(this._renewHour.text)+60*Number(this._renewMinute.text));(e.pauseTimer/3600).toFixed(0)+"小时"+e.pauseTimer%3600/60+"分钟";NetMgr.tcpSend(e)},i}(commonpanel.LobbyBaseEuiPanel);t.ClubMemberTimerPanel=e,__reflect(e.prototype,"club.ClubMemberTimerPanel")}(club||(club={}));var club;!function(t){var e=function(t){function e(e,i){var n=t.call(this,"",635,391)||this;return n.skinName="MatchAddYelloPanelSkin",n.matchId=e,n.uid=i,n}return __extends(e,t),e.prototype.initUI=function(){this.uidEditableText.restrict="0-9",this.uidEditableText.inputType=egret.TextFieldInputType.TEL},e.prototype.addEvent=function(){this.yesBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.cancleBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.uidEditableText.addEventListener(egret.TextEvent.FOCUS_OUT,uniLib.ZQGameSdk.hideVk,this)},e.prototype.removeEvent=function(){this.yesBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.cancleBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.uidEditableText.removeEventListener(egret.TextEvent.FOCUS_OUT,uniLib.ZQGameSdk.hideVk,this)},e.prototype.onClick=function(t){if(t.target==this.yesBtn){var e=this.uidEditableText.text,i=Number(e);if(0/0==i||!i)return void uniLib.TipsUtils.showTipsDownToUp("请输入正确的玩家ID");var n=new Cmd.OperateYellowMemberListMatchGroupCmd_C;n.uid=this.uid,n.uid2=i,n.matchId=this.matchId,n.reply=1,this.removePop(),NetMgr.tcpSend(n)}else this.removePop()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.uidEditableText=null},e}(commonpanel.LobbyBaseEuiPanel);t.MatchAddYelloPanel=e,__reflect(e.prototype,"club.MatchAddYelloPanel")}(club||(club={}));var club;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="MatchFightingItemSkin",t.addListener(),t}return __extends(i,e),i.prototype.addListener=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.removeListener=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.dataChanged=function(){this._info=this.data,this._tableNoText.text=this.itemIndex+1+"",this._tableIdText.text="桌号"+this._info.roomId,this._timeText.text=LobbyUtils.changeTimeToStr(this._info.timeStamp);var e=this._info.userGameHistorys;this.nameandscore.itemRenderer=t.MatchFightingNSPanel,this.nameandscore.dataProvider=new eui.ArrayCollection(e),this._detailBtn.visible=!0},i.prototype.onClickTap=function(e){var i=this;switch(e.target){case this._detailBtn:LobbyModuleMgr.getInstance().showRecordDetail(function(){t.ClubSendMgr.getGameDetailHistory(i._info.roomId)}),MJLobbyData.getInstance().globalRoomId=this._info.roomId}},i}(eui.ItemRenderer);t.MatchFightingItem=e,__reflect(e.prototype,"club.MatchFightingItem")}(club||(club={}));var club;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="MatchFightingNSSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){this.info=this.data,this.names.text=this.info.nickName,null!=this.info.integral&&(this.score.text=this.info.integral+"",this.info.integral<0&&(this.score.textColor=815379))},e}(eui.ItemRenderer);t.MatchFightingNSPanel=e,__reflect(e.prototype,"club.MatchFightingNSPanel")}(club||(club={}));var club;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._curPage=0,t._dayChose=0,t.key=new Cmd.MatchGroupMemberInfo,t.zeroArr=[],t.zeroIndex=[],t.matchIdList=[],t.waitList=new Array,t.skinName="MatchManageSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.matchList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onMatchListTap,this),this.matchTableList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onTableListTap,this),uniLib.Global.addEventListener(t.ClubConst.ReturnMatchGroupManage,this.initReturnMatchGroup,this),uniLib.Global.addEventListener(t.ClubConst.MemberInfoMatchGroup,this.initMemberList,this),uniLib.Global.addEventListener(t.ClubConst.MATCH_HISTORY_FOR_MANAGE,this.showFightData,this),uniLib.Global.addEventListener(t.ClubConst.ReturnYellowList,this.initYelloList,this),uniLib.Global.addEventListener(t.ClubConst.RemarkPointMatchGroup,this.updateRemarkPoint,this),uniLib.Global.addEventListener(t.ClubConst.RemarkNickNameMatchGroup,this.updateRemarkNickName,this),uniLib.Global.addEventListener(t.ClubConst.CleanMemberWinPointMatchGroup,this.updateWinPoint,this)},i.prototype.removeEvent=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.matchList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onMatchListTap,this),this.matchTableList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onTableListTap,this),uniLib.Global.removeEventListener(t.ClubConst.ReturnMatchGroupManage,this.initReturnMatchGroup,this),uniLib.Global.removeEventListener(t.ClubConst.MATCH_HISTORY_FOR_MANAGE,this.showFightData,this),uniLib.Global.removeEventListener(t.ClubConst.MemberInfoMatchGroup,this.initMemberList,this),uniLib.Global.removeEventListener(t.ClubConst.ReturnYellowList,this.initYelloList,this),uniLib.Global.removeEventListener(t.ClubConst.RemarkPointMatchGroup,this.updateRemarkPoint,this),uniLib.Global.removeEventListener(t.ClubConst.RemarkNickNameMatchGroup,this.updateRemarkNickName,this),uniLib.Global.removeEventListener(t.ClubConst.CleanMemberWinPointMatchGroup,this.updateWinPoint,this)},i.prototype.initUI=function(){t.ClubData.getInstance().clubDayChose=1,i.Instanc=this,this.detailsGroup.visible=!1,this.memberGroup.visible=!1,this.fightingGroup.visible=!1,this.yelloListGroup.visible=!1,this.uidEditableText.restrict="0-9",this.uidEditableText.inputType=egret.TextFieldInputType.TEL,this.matchList.itemRenderer=t.MatchRadioButton,this.fightingList.itemRenderer=t.MatchFightingItem,this.memeberList.itemRenderer=t.MatchMemberItem,this.yelloList.itemRenderer=t.MatchYelloItem,this.matchTableList.itemRenderer=t.MatchTableItem},i.prototype.updataMatchList=function(){this.matchListArray?(Array.isArray(this.matchListArray.source)&&this.matchListArray.removeAll(),this.matchListArray.replaceAll(this.matchIdList)):(this.matchListArray=new eui.ArrayCollection(this.matchIdList),this.matchList.dataProvider=this.matchListArray)},i.prototype.updataMemeberList=function(){this.memeberListArray?(this.memeberListArray.source&&this.memeberListArray.removeAll(),this.memeberListArray.replaceAll(this.member)):(this.memeberListArray=new eui.ArrayCollection(this.member),this.memeberList.dataProvider=this.memeberListArray)},i.prototype.sortMemberList=function(){var e=this.member.concat();e.sort(function(e,i){return e.scores[t.ClubData.getInstance().clubDayChose-1]-i.scores[t.ClubData.getInstance().clubDayChose-1]}),this.zeroArr=[],this.zeroIndex=[];for(var i=0;i<e.length;i++)0==e[i].scores[t.ClubData.getInstance().clubDayChose-1]&&(this.zeroArr.push(e[i]),this.zeroIndex.push(i));this.zeroIndex.sort(function(t,e){return e-t}),this.zeroIndex.forEach(function(t){e.splice(t,1)}),e=e.concat(this.zeroArr),this.zeroArr=[],this.zeroIndex=[];for(var i=0;i<e.length;i++)e[i].type==t.ClubConst.CLUB_BLACK&&(this.zeroArr.push(e[i]),this.zeroIndex.push(i));for(var i=0;i<e.length;i++)e[i].type==t.ClubConst.CLUB_TOURIST&&(this.zeroArr.push(e[i]),this.zeroIndex.push(i));this.zeroIndex.sort(function(t,e){return e-t}),this.zeroIndex.forEach(function(t){e.splice(t,1)}),e=e.concat(this.zeroArr);for(var i=0;i<e.length;i++)2==e[i].membertype&&(this.key=null,this.key=e[i],e.splice(i,1),e.unshift(this.key));for(var i=0;i<e.length;i++)1==e[i].membertype&&(this.key=null,this.key=e[i],e.splice(i,1),e.unshift(this.key));this.member=e},i.prototype.updateYelloList=function(){this.yelloListArray?(Array.isArray(this.yelloListArray.source)&&this.yelloListArray.removeAll(),this.yelloListArray.replaceAll(this.yelloIndoList)):(this.yelloListArray=new eui.ArrayCollection(this.yelloIndoList),this.yelloList.dataProvider=this.yelloListArray)},i.prototype.updataTableList=function(){this.roomList.forEach(function(t){Array.isArray(t.list)||(t.list=[])}),this.matchTableListArray?(Array.isArray(this.matchTableListArray.source)&&this.matchTableListArray.removeAll(),this.matchTableListArray.replaceAll(this.roomList)):(this.matchTableListArray=new eui.ArrayCollection(this.roomList),this.matchTableList.dataProvider=this.matchTableListArray)},i.prototype.updataDetails=function(t){if(t){var e=t&&1==t.state?1:0;this.terminationButton.currentState=1==e?"down":"up",this.ownerLabel.text="房主名:"+(t?t.ownername:""),this.gameMemberLabel.text="当前游戏人数："+(t?t.gameingUserNum:""),this.matchIdLabel.text="老友圈:"+(t?t.matchId:""),t.matchName?(this.matchName.visible=!0,this.matchName.text="老友圈名:"+t.matchName):this.matchName.visible=!1,this.waitMemberLabel.text="已开房间数："+(t?t.curRoomNbr:""),this.delTimeLabel.text="不限时",this.roomList=t&&t.roomList instanceof Array?t.roomList:[],this.updataTableList();for(var i=t?t.matchId:null,n=0;n<this.matchIdList.length;n++)if(this.matchIdList[n]==i){this.matchList.selectedIndex=n;break}this.shareInfo=t?t.shareInfo:null}},i.prototype.initReturnMatchGroup=function(e){var i=e.param;if(Array.isArray(i.matchIdList)||uniLib.PopUpMgr.removePopUp(this),t.ClubData.getInstance().isClubOwner=i.curMath.ownerid==uniLib.UserInfo.uid?!0:!1,t.ClubData.getInstance().matchid=i.curMath.matchId,t.ClubData.getInstance().suspendTimer=i.curMath.pauseTimer?i.curMath.pauseTimer:null,t.ClubData.getInstance().renewTimer=i.curMath.restoreTimer?i.curMath.restoreTimer:null,this.waitList=[],this.matchIdList=i&&i.matchIdList&&i.matchIdList instanceof Array?i.matchIdList:[],this.waitList=null!=i&&null!=i.curMath&&null!=i.curMath.waitUserList&&i.curMath.waitUserList instanceof Array&&i.curMath.waitUserList.length>0?i.curMath.waitUserList:[],this._choseClubBtn.skin._matchIdText.text=i.curMath.matchId,this._choseClubBtn.currentState="up",i.matchIdList.length<10?(this._choseClubBg.height=2+49*i.matchIdList.length,this._matchScroller.height=49*i.matchIdList.length):(this._choseClubBg.height=456,this._matchScroller.height=454),this._matchGroup.visible=!1,this.updataMatchList(),this.updataDetails(i?i.curMath:null),i&&i.matchIdList&&i.matchIdList.length>0){switch(t.ClubData.getInstance().clubChoice){case 1:this.detailsButton.selected=!0;break;case 2:this.memberButton.selected=!0;var n=new Cmd.RequestMemberInfoMatchGroupCmd_C;n.matchId=this.selectMatchId,NetMgr.tcpSend(n);break;case 4:this.fightingButton.selected=!0}this.switchWindow()}this.updataButtonEnabled()},i.prototype.updataButtonEnabled=function(){var t=this.matchIdList&&this.matchIdList.length>0?!0:!1;this.detailsButton.enabled=this.memberButton.enabled=this.fightingButton.enabled=this.joinMatchButton.enabled=this.yelloListButton.enabled=t,0==t&&(this.detailsGroup.visible=this.memberGroup.visible=this.fightingGroup.visible=this.yelloListGroup.visible=t)},i.prototype.initMemberList=function(t){var e=t.param;e.whitelist=e.whitelist&&e.whitelist instanceof Array?e.whitelist:[],e.blacklist=e.blacklist&&e.blacklist instanceof Array?e.blacklist:[],e.guestlist=e.guestlist&&e.guestlist instanceof Array?e.guestlist:[];for(var i=0,n=e.whitelist;i<n.length;i++){var s=n[i];s.type=1}for(var r=0,o=e.blacklist;r<o.length;r++){var s=o[r];s.type=2}for(var a=0,h=e.guestlist;a<h.length;a++){var s=h[a];s.type=0}this.member=e.whitelist.concat(e.blacklist),this.member=this.member.concat(e.guestlist),this.sortMemberList(),this.updataMemeberList()},i.prototype.updateRemarkPoint=function(t){var e=t.param;this.member.forEach(function(t){t.uid==e.targetUid&&(t.remarkPoints[e.which]=e.point)}),this.updataMemeberList()},i.prototype.updateRemarkNickName=function(t){var e=t.param;this.member.forEach(function(t){t.uid==e.targetUid&&(t.remark=e.remark)}),this.updataMemeberList()},i.prototype.updateWinPoint=function(t){var e=t.param;this.member.forEach(function(t){t.uid==e.targetUid&&(t.scores[e.which-1]=0,t.winNums[e.which-1]=0)}),this.updataMemeberList()},i.prototype.initYelloList=function(t){var e=t.param;e.list=e.list&&e.list instanceof Array?e.list:[],this.yelloIndoList=e.list,this.updateYelloList()},i.prototype.initHistory=function(t){!t||t.matchId!=this.selectMatchId},i.prototype.switchWindow=function(){this.detailsGroup.visible=this.memberGroup.visible=this.fightingGroup.visible=this.yelloListGroup.visible=!1,this.setting.visible=!0,this.detailsButton.selected?this.detailsGroup.visible=!0:this.memberButton.selected?this.memberGroup.visible=!0:this.fightingButton.selected?this.fightingGroup.visible=!0:this.yelloListButton.selected&&(this.yelloListGroup.visible=!0,this.setting.visible=!1)},i.prototype.switchDayType=function(){this._dayTypeImg.source="club_winlose"+t.ClubData.getInstance().clubDayChose,this._morewinloseGroup.visible=!1},i.prototype.onClickTap=function(e){if(e.target==this.detailsButton||e.target==this.memberButton||e.target==this.fightingButton||e.target==this.yelloListButton)if(e.target.selected=!0,this.switchWindow(),e.target==this.memberButton){var n=new Cmd.RequestMemberInfoMatchGroupCmd_C;n.matchId=this.selectMatchId,NetMgr.tcpSend(n)}else if(e.target==this.yelloListButton){var s=new Cmd.RequestYellowMemberInfoMatchGroupCmd_C;s.matchId=this.selectMatchId,NetMgr.tcpSend(s)}else e.target==this.fightingButton&&(t.ClubSendMgr.getGameDataHistoryForMatch(t.ClubData.getInstance().matchid,1,1,t.ClubConst1.MATCH_HISTORY_FOR_MANAGE),this._dayChose=0,this._clubDayChose=1,this._choseDayBtn.skin._dayTypeText.text="今日战绩");else if(e.target==this.closeButton)uniLib.PopUpMgr.removePopUp(this);else{if(e.target==this.terminationButton){var r=this,o=function(){var t=new Cmd.OperateMatchGroupCmd_C;"up"==r.terminationButton.currentState?t.state=1:t.state=0,t.matchId=r.selectMatchId,NetMgr.tcpSend(t)},a="";return a="up"==this.terminationButton.currentState?"您确定要暂停该老友圈吗？":"您确定要恢复该老友圈吗？",void ComponentUtil.getInstance().showConfirm(a,"温馨提示","确定",o,"取消")}if(e.target==this.dissolutionButton){var h=this,o=function(){var e=h.selectMatchId;e==t.ClubData.getInstance().clubmatchid&&t.ClubModuleMgr.getInstance().removeClubDeskPanel();var i=new Cmd.RequestDeleteMatchGroupCmd_C;i.matchId=h.selectMatchId,NetMgr.tcpSend(i),uniLib.Global.removeEventListener(t.ClubConst.ReturnMatchGroupManage,this.initReturnMatchGroup,this)};ComponentUtil.getInstance().showConfirm("您确定要解散该老友圈吗？","温馨提示","确定",o,"取消")}else if(e.target==this.shareButton)this.onShareTap();else if(e.target==this.addWhiteButton||e.target==this.addBlackButton){var l=this.uidEditableText.text,c=Number(l);if(0/0==c||!c)return void uniLib.TipsUtils.showTipsDownToUp("请输入正确的玩家账号");var n=new Cmd.OperateMemberListMatchGroupCmd_C;Number(e.target.name);n.reply=e.target==this.addWhiteButton?2:3,n.uid=c,n.matchId=i.Instanc.selectMatchId,NetMgr.tcpSend(n)}else if(e.target==this.joinMatchButton){var u=new Cmd.EnterRoomCmd_C;u.roomId=this.matchIdList[this.matchList.selectedIndex],NetMgr.tcpSend(u),t.ClubModuleMgr.getInstance().removeClubDeskPanel()}else if(e.target==this.setting){var d=new Cmd.RequestChangeMatchGroupCmd_C;d.matchId=i.Instanc.selectMatchId,NetMgr.tcpSend(d)}else if(e.target==this.refrshBtn)this.onMatchListTap(null);else if(e.target==this._dayTypeBg||e.target==this._dayTypeDownImg||e.target==this._dayTypeImg)this._morewinloseGroup.visible=!0;else if(e.target==this._todaywin||e.target==this._yesterdaywin||e.target==this._qianwin||e.target==this._winloseRect)e.target==this._todaywin?t.ClubData.getInstance().clubDayChose=1:e.target==this._yesterdaywin?t.ClubData.getInstance().clubDayChose=2:e.target==this._qianwin&&(t.ClubData.getInstance().clubDayChose=3),this.switchDayType(),this.sortMemberList(),this.updataMemeberList();else if(e.target==this._choseClubBtn||e.target==this._choseRect)"up"==this._choseClubBtn.currentState?(this._choseClubBtn.currentState="down",this._matchGroup.visible=!0):(this._choseClubBtn.currentState="up",this._matchGroup.visible=!1);else if(e.target==this._importBtn){var p=new Cmd.GetCanImportMemberListMatchGroupCmd_CS;p.matchId=t.ClubData.getInstance().matchid,NetMgr.tcpSend(p)}else if(e.target==this._searchBtn){if(this._searchIdText.text.length<8)return void uniLib.TipsUtils.showTipsDownToUp("请输入正确的玩家账号");var b=this._searchIdText.text,m=t.ClubData.getInstance().ClubMemberList;if(!Array.isArray(m))return;this.searchArray=[],this.searchArray=m.filter(function(t){return-1!=t.uid.toString().indexOf(b)}),0!=this.searchArray.length?t.ClubModuleMgr.getInstance().showClubMemberInfoPanel(this.searchArray[0]):uniLib.TipsUtils.showTipsDownToUp("本老友圈不存在该玩家")}else e.target==this.timerButton?t.ClubModuleMgr.getInstance().showClubMemberTimerPanel():e.target==this._choseDayBtn?(this._choseDayBtn.currentState="down",this._dayTypeGroup.visible=!0):e.target==this._todayBtn?(this._clubDayChose=1,this._choseDayBtn.skin._dayTypeText.text="今日战绩",this._choseDayBtn.currentState="up",this._dayTypeGroup.visible=!1,this.updateView()):e.target==this._yesterdayBtn?(this._clubDayChose=2,this._choseDayBtn.skin._dayTypeText.text="昨日战绩",this._choseDayBtn.currentState="up",this._dayTypeGroup.visible=!1,this.updateView()):e.target==this._qianBtn?(this._clubDayChose=3,this._choseDayBtn.skin._dayTypeText.text="前日战绩",this._choseDayBtn.currentState="up",this._dayTypeGroup.visible=!1,this.updateView()):e.target==this._choseRect1&&(this._choseDayBtn.currentState="up",this._dayTypeGroup.visible=!1)}},i.prototype.showFightData=function(t){var e=t.param;e.typ&&(this._matchId=e.matchId,this._totalPage=e.maxPage,this._curPage=e.curPage,e.matchStatisticInfo&&e.matchStatisticInfo.openNbrs&&(this.todaynum.text="今日："+e.matchStatisticInfo.openNbrs[0],this.yesterdaynum.text="昨日："+e.matchStatisticInfo.openNbrs[1],this.sevendaynum.text="七日："+e.matchStatisticInfo.openNbrs[2],this.thirtydaynum.text="30日："+e.matchStatisticInfo.openNbrs[3]),1!=e.curPage||e.gameHistroys[0]?(this._tipsText.visible=!1,this.addData(e.gameHistroys)):(this._tipsText.visible=!0,this._dayChose!=this._clubDayChose&&(this._dayChose=this._clubDayChose,this._fightRecordArr=[],this.fightingListArray&&(Array.isArray(this.fightingListArray.source)&&this.fightingListArray.removeAll(),this.fightingListArray.replaceAll(this._fightRecordArr)))))
},i.prototype.addData=function(t){t&&t[0]&&(this._dayChose==this._clubDayChose?this._fightRecordArr=this._fightRecordArr.concat(t):(this._dayChose=this._clubDayChose,this._fightRecordArr=[],this._fightRecordArr=this._fightRecordArr.concat(t)),this.fightingListArray?(Array.isArray(this.fightingListArray.source)&&this.fightingListArray.removeAll(),this.fightingListArray.replaceAll(this._fightRecordArr),1==this._curPage&&this.fightingListArray.refresh()):(this.fightingListArray=new eui.ArrayCollection(this._fightRecordArr),this.fightingList.dataProvider=this.fightingListArray))},i.prototype.updateView=function(){this._dayChose!=this._clubDayChose&&this.getData()},i.prototype.getData=function(){this._clubDayChose==this._dayChose?(t.ClubSendMgr.getGameDataHistoryForMatch(t.ClubData.getInstance().matchid,this._curPage,this._clubDayChose,t.ClubConst1.MATCH_HISTORY_FOR_MANAGE),uniLib.TipsUtils.showTipsDownToUp("正在加载数据~")):t.ClubSendMgr.getGameDataHistoryForMatch(t.ClubData.getInstance().matchid,1,this._clubDayChose,t.ClubConst1.MATCH_HISTORY_FOR_MANAGE)},i.prototype.addListen=function(){this._scroll.addEventListener(egret.Event.CHANGE,this.checkTop,this)},i.prototype.checkTop=function(t){this._scroll.viewport.scrollV+this._scroll.viewport.height>=this._scroll.viewport.measuredHeight+10&&this._curPage<this._totalPage&&(this._scroll.removeEventListener(egret.Event.CHANGE,this.checkTop,this),this._curPage++,this.getData(),egret.Tween.get(this).wait(2e3).call(this.addListen,this))},Object.defineProperty(i.prototype,"selectMatchId",{get:function(){return this.matchIdList[this.matchList.selectedIndex]},enumerable:!0,configurable:!0}),i.prototype.onMatchListTap=function(t){var e=new Cmd.RequestMatchGroupCmd_C;e.matchId=this.selectMatchId,NetMgr.tcpSend(e)},i.prototype.onTableListTap=function(e){t.ClubModuleMgr.getInstance().removeActiveDetailRoomtPanel();var i=this.matchTableList.selectedItem,n=new Cmd.ActiveDetailRoomCmd_C;n.roomId=i.roomId,n.matchId=this.selectMatchId,NetMgr.tcpSend(n)},i.prototype.onShare=function(){var t=new uniLib.WXShareVo;t.shareWay=0;var e=new egret.Bitmap(uniLib.DisplayUtils.catchScreenToTex(this,new egret.Rectangle(this.memberGroup.x,this.memberGroup.y,this.memberGroup.width,this.memberGroup.height),.6));t.shareImageData=uniLib.DisplayUtils.catchScreen(e,new egret.Rectangle(this.memberGroup.x,this.memberGroup.y,this.memberGroup.width,this.memberGroup.height)),uniLib.Global.dispatchEvent(uniLib.ZqEvent.SHARE,t,!0)},i.prototype.onShareTap=function(){var t=this.selectMatchId,e=new uniLib.WXShareVo;if(e.shareWay=0,""==uniLib.ZQGameSdk.defaultWXShareVo.webpageUrl&&LobbyDataCache.bundleInfo&&LobbyDataCache.bundleInfo.weixin&&LobbyDataCache.bundleInfo.weixin.wbappid){var i=uniLib.UserInfo.nickName;i.length>8&&(i=i.slice(0,8)),e.webpageUrl="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+LobbyDataCache.bundleInfo.weixin.wbappid+"&redirect_uri=http://wq.laoyouwan.com/addons/zqgame/gameshare.php?appid="+LobbyDataCache.bundleInfo.weixin.wbappid+"&response_type=code&scope=snsapi_base&state="+uniLib.CompressUtil.base64encode(uniLib.UserInfo.uid+"|"+t+"|"+i)+"&connect_redirect=1#wechat_redirect"}else e.webpageUrl=uniLib.ZQGameSdk.defaultWXShareVo.webpageUrl+"?uid="+uniLib.UserInfo.uid+"&nickName="+uniLib.UserInfo.nickName;e.title=this.shareInfo&&this.shareInfo.title?this.shareInfo.title.replace("房号","老友圈"):"",e.description=this.shareInfo&&this.shareInfo.content?this.shareInfo.content.replace("房号","老友圈"):"",uniLib.Global.isWxGame()?(e.shareType=Cmd.ShareType.enterRoom,e.wgShareData=JSON.stringify({roomId:t})):e.roomId=JSON.stringify({matchId:t}),uniLib.Global.dispatchEvent(uniLib.ZqEvent.SHARE,e,!0)},i}(commonpanel.LobbyBaseEuiPanel);t.MatchManagePanel=e,__reflect(e.prototype,"club.MatchManagePanel")}(club||(club={}));var club;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.MatchMemberTypeToString=["游客","白名单","黑名单","同桌限制","VIP"],t.MatchMemberTypeToColor=[4746562,4783872,13313060,12216577,16041845],t.skinName="MatchMemberItemSkin",t.addListener(),t}return __extends(i,e),i.prototype.addListener=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.removeListener=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.dataChanged=function(){if(this.info=this.data,this.info){var e=t.ClubData.getInstance().clubDayChose-1;this._winNumText.text=this.info.winNums[e].toString(),this._nametext.text=this.info.nickname,this._uidText.text=this.info.uid.toString(),this._remarksText.text=this.info.remark?this.info.remark:"暂无备注",this._winloseText.text=this.info.scores[e]+"("+this.info.remarkPoints[e]+")",0!=this.info.remarkPoints[e]?(this._cleanRemarksBtn.visible=!0,this._writeRemarksbtn.visible=!1):(this._cleanRemarksBtn.visible=!1,this._writeRemarksbtn.visible=!0),this.operationGroup.removeChildren();for(var i=0;4>i;i++)if(i!=this.info.type){var n=new eui.Label,s=this.MatchMemberTypeToColor[i];n.textFlow=[{text:this.MatchMemberTypeToString[i],style:{textColor:s,underline:!0}}],n.size=22,n.name=i+"",this.operationGroup.addChild(n),n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLabelTap,this)}}},i.prototype.onClickTap=function(e){var i=this;switch(e.target){case this._detailBtn:t.ClubModuleMgr.getInstance().showClubMemberInfoPanel(this.info);break;case this._cleanRemarksBtn:uniLib.TipsUtils.showConfirm("是否清除备注分数？","","是",function(){t.ClubSendMgr.RemarkPointMatchGroupCmd(t.ClubData.getInstance().matchid,i.info.uid,2,0,t.ClubData.getInstance().clubDayChose-1)},"否",null);break;case this._writeRemarksbtn:t.ClubModuleMgr.getInstance().showClubRemarksScorePanel(this.info.uid)}},i.prototype.onLabelTap=function(e){var i=this.data,n=Number(e.target.name);if(3==n){var s=new t.MatchAddYelloPanel(t.MatchManagePanel.Instanc.selectMatchId,i.uid);return void uniLib.PopUpMgr.addPopUp(s,null,!0,!0)}var r=new Cmd.OperateMemberListMatchGroupCmd_C;r.reply=1==n||2==n?n+1:0,r.uid=i.uid,r.matchId=t.MatchManagePanel.Instanc.selectMatchId,NetMgr.tcpSend(r)},i}(eui.ItemRenderer);t.MatchMemberItem=e,__reflect(e.prototype,"club.MatchMemberItem")}(club||(club={}));var club;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="MatchMessageItemSkin",t.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onClickTap,t),t}return __extends(i,e),i.prototype.dataChanged=function(){var t=this.data;this._timeText.text=LobbyUtils.changeTimeToStrTwoLine(t.time),this._headImg.source=t.headUrl,this._nameText.text=t.nickname,this._idText.text=t.uid+"",t.partner?(this._partnerGroup.visible=!0,this._nopartnerTips.visible=!1,this._partnerHeadImg.source=t.partner.headUrl,this._partnerIdText.text=""+t.partner.uid,this._partnerNameText.text=t.partner.nickname):(this._nopartnerTips.visible=!0,this._partnerGroup.visible=!1),t.note?this._contenRemarksText.text="备注："+t.note:this._contenRemarksText.text="备注：无"},i.prototype.onClickTap=function(e){var i=this.data;switch(e.target){case this._disAgreeButton:t.ClubSendMgr.ReplyJoinMemberListMatchGroupCmd(t.ClubData.getInstance().clubmatchid,0,i.uid);break;case this._agreeButton:t.ClubSendMgr.ReplyJoinMemberListMatchGroupCmd(t.ClubData.getInstance().clubmatchid,1,i.uid)}},i}(eui.ItemRenderer);t.MatchMessageItem=e,__reflect(e.prototype,"club.MatchMessageItem")}(club||(club={}));var club;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="MatchRadioButtonSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this._clubId.text=t+"",this.itemIndex%2==0?this._itemBg.source="club_new_menage_json.club_matchlist_item2":this._itemBg.source="club_new_menage_json.club_matchlist_item1"},e}(eui.ItemRenderer);t.MatchRadioButton=e,__reflect(e.prototype,"club.MatchRadioButton")}(club||(club={}));var club;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="MatchTableItemSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){this.info=this.data;var t=null!=this.info.list&&Array.isArray(this.info.list)?this.info.list.length:0,e="桌"+this.info.roomId+"\n";void 0!=this.info.endTime?e+="(牌局结束)":this.info.state?1==this.info.state&&(e+="(游戏"+this.info.curGameNbr+"/"+this.info.gameNbr+")"):e+="(准备中)",e+="\n人数"+t+"/"+this.info.userNbr,this.contentLabel.text=e},e}(eui.ItemRenderer);t.MatchTableItem=e,__reflect(e.prototype,"club.MatchTableItem")}(club||(club={}));var club;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="MatchYelloItemSkin",t._removeButton.addEventListener(egret.TouchEvent.TOUCH_TAP,t.removeHandel,t),t}return __extends(i,e),i.prototype.dataChanged=function(){var t=this.data;t&&(this._nameText.text=t.nickName?t.nickName.toString():"",this._uidText.text=t.uid?t.uid.toString():"",this._nameText1.text=t.nickName2?t.nickName2.toString():"",this._uidText1.text=t.uid2?t.uid2.toString():"")},i.prototype.removeHandel=function(e){var i=new Cmd.OperateYellowMemberListMatchGroupCmd_C;i.reply=0,i.uid=Number(this._uidText.text),i.uid2=Number(this._uidText1.text),i.matchId=t.MatchManagePanel.Instanc.selectMatchId,NetMgr.tcpSend(i)},i}(eui.ItemRenderer);t.MatchYelloItem=e,__reflect(e.prototype,"club.MatchYelloItem")}(club||(club={}));