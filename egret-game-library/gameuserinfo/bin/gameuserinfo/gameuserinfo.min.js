var __reflect=this&&this.__reflect||function(i,t,e){i.__class__=t,e?e.push(t):e=[t],i.__types__=i.__types__?e.concat(i.__types__):e},__extends=this&&this.__extends||function(i,t){function e(){this.constructor=i}for(var n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);e.prototype=t.prototype,i.prototype=new e},gameuserinfo;!function(i){var t=function(){function i(){}return i.RES_JSON="resource/gameuserinfo/gameuserinfo.res_f7a47959.json",i.THM_JSON="resource/gameuserinfo/gameEui_3e635315.json",i.GAME_USERINFO="game_userinfo",i}();i.UserInfoConst=t,__reflect(t.prototype,"gameuserinfo.UserInfoConst")}(gameuserinfo||(gameuserinfo={}));var gameuserinfo;!function(i){var t=function(){function i(){this.pingbiPlayer=[]}return i.getInstance=function(){return this._instance||(this._instance=new i),this._instance},i}();i.UserInfoData=t,__reflect(t.prototype,"gameuserinfo.UserInfoData")}(gameuserinfo||(gameuserinfo={}));var gameuserinfo;!function(i){var t=function(t){function n(){var i=t.call(this,"zhangzhou_userinfo_json.userinfo_title",800,500)||this;return i.skinName="UserInfoSKin",i}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},n.prototype.addEvent=function(){this._pinbigift.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onPinbiGift,this),this._cancelPingbi.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCancelPingbi,this)},n.prototype.initUI=function(){this._gift_group=new eui.Group,this._gift_group.x=39,this._gift_group.y=281,this._gift_group.width=712,this._gift_group.height=169,this.addChild(this._gift_group);for(var i,t=this.loadTable(),n=0;n<t.length;n++)i=new e,i.data=t[n],i.x=6+120*n,i.y=0,this._gift_group.addChild(i),i.name=t[n].giftId+"",i.touchEnabled=!0,i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sendGiftHandle,this)},n.prototype.loadTable=function(){return RES.getRes("TableGift_json")},n.prototype.showUserInfo=function(t){t&&(this._data=t),this._id=this._data.uid,this._id!=uniLib.UserInfo.uid?-1==i.UserInfoData.getInstance().pingbiPlayer.indexOf(this._id)?(this._cancelPingbi.visible=!1,this._pinbigift.visible=!0):(this._cancelPingbi.visible=!0,this._pinbigift.visible=!1):(this._cancelPingbi.visible=!1,this._pinbigift.visible=!1),this._data.nickname&&(this._name_lbl.text=this._data.nickname),this._data.uid&&(this._id_lbl.text="帐号："+this._data.uid),"nv"==this._data.gender?this._gender_img.source="userinfo_famale":this._gender_img.source="userinfo_male",this._data.ip?this._ip_lbl.text="地址："+this._data.ip:this._ip_lbl.text="未获取IP信息",this._data.headurl&&(this._head_img.source=this._data.headurl),this._data.diamond?this._data.chips>=1e5?this._diamond_lbl.text=this.numberFormat(this._data.diamond):this._diamond_lbl.text=this._data.diamond+"":this._diamond_lbl.text="0",this._data.chips?this._data.chips>=1e5?this._bean_lbl.text=this.numberFormat(this._data.chips):this._bean_lbl.text=this._data.chips+"":this._bean_lbl.text="0"},n.prototype.sendGiftHandle=function(i){var t=i.currentTarget.name;if(null!=this._data){if(this._data.uid==uniLib.UserInfo.uid){var e=new Cmd.GiftsInfo;e.giftsId=Number(t),e.toUid=0,e.fromUid=this._data.uid,e.giftsNum=1}else{var e=new Cmd.GiftsInfo;e.giftsId=Number(t),e.toUid=this._data.uid,e.fromUid=uniLib.UserInfo.uid,e.giftsNum=1}var n=new Cmd.SendGiftMahjongCmd_C;n.gift=e,uniLib.NetMgr.tcpSend(n),this.destory()}},n.prototype.onPinbiGift=function(){this._id!=uniLib.UserInfo.uid&&-1==i.UserInfoData.getInstance().pingbiPlayer.indexOf(this._id)&&(i.UserInfoData.getInstance().pingbiPlayer.push(this._id),this._cancelPingbi.visible=!0,this._pinbigift.visible=!1)},n.prototype.onCancelPingbi=function(){-1!=i.UserInfoData.getInstance().pingbiPlayer.indexOf(this._id)&&(i.UserInfoData.getInstance().pingbiPlayer.splice(i.UserInfoData.getInstance().pingbiPlayer.indexOf(this._id),1),this._cancelPingbi.visible=!1,this._pinbigift.visible=!0)},n.prototype.destory=function(){uniLib.PopUpMgr.removePopUp(this),this.removeEvent(),this._head_img=null,uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this),this._data=null,this._id_lbl=null,this._ip_lbl=null,this._name_lbl=null,this._gender_img=null,this._bean_lbl=null,this._diamond_lbl=null},n.prototype.numberFormat=function(i){var t;return t=1e5>i?""+i:i>=1e5&&1e6>i?(i/1e4).toFixed(0)+"万":i>=1e6&&1e7>i?(i/1e4).toFixed(0)+"万":i>=1e7&&1e8>i?(i/1e4).toFixed(0)+"万":i>=1e8&&1e10>i?(i/1e8).toFixed(2)+"亿":(i/1e8).toFixed(2)+"亿"},n}(commonpanel.LobbyBaseEuiPanel);i.UserInfoPanel=t,__reflect(t.prototype,"gameuserinfo.UserInfoPanel");var e=function(i){function t(){var t=i.call(this)||this;return t.skinName="GiftItemSkin",t}return __extends(t,i),t.prototype.dataChanged=function(){var i=this.data;this.name=i.giftId.toString(),this._gift_img.texture=RES.getRes("userinfo_gift"+i.giftId),this._gift_name.text=null!=i.giftName?i.giftName:""},t.prototype.destory=function(){uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this)},t}(eui.ItemRenderer);i.GiftItem=e,__reflect(e.prototype,"gameuserinfo.GiftItem")}(gameuserinfo||(gameuserinfo={}));