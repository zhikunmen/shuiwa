var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},pokerchat;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.skinName="poker_fangka_ChatItemSkin",t}return __extends(n,e),n.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.chatid=this.data;var t=["又断线了，网络怎么这么差啊！","各位，真不好意思，我要离开一会","你的牌打得也忒好了！","下次咱们再玩吧！","不要走，决战到天亮！","快点吧，都等得我花都谢了！"];this.chatItem.text=t[this.data],this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},n.prototype.onClick=function(e){var n="2"+this.chatid;t.ChatEventDispatcher.instance.dispatchEventWith(t.pokerchatConst.SEND_COMMON_CHAT,!1,n)},n}(eui.ItemRenderer);t.ChatItem_fangka=e,__reflect(e.prototype,"pokerchat.ChatItem_fangka")}(pokerchat||(pokerchat={}));var pokerchat;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.skinName="poker_jinbi_ChatItemSkin",t}return __extends(n,e),n.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.chatid=this.data;var t=["又断线了，网络怎么这么差啊！","各位，真不好意思，我要离开一会","你的牌打得也忒好了！","下次咱们再玩吧！","不要走，决战到天亮！","快点吧，都等得我花都谢了！"];this.chatItem.text=t[this.data],this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},n.prototype.onClick=function(e){var n="2"+this.chatid;t.ChatEventDispatcher.instance.dispatchEventWith(t.pokerchatConst.SEND_COMMON_CHAT,!1,n)},n}(eui.ItemRenderer);t.ChatItem_jinbi=e,__reflect(e.prototype,"pokerchat.ChatItem_jinbi")}(pokerchat||(pokerchat={}));var pokerchat;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._isClick=!0,t._type=0,t.skinName="poker_ChatSkin",t}return __extends(i,e),i.prototype.createChildren=function(){e.prototype.createChildren.call(this)},i.prototype.init=function(){for(var e=["又断线了，网络怎么这么差啊！","各位，真不好意思，我要离开一会","你的牌打得也忒好了！","下次咱们再玩吧！","不要走，决战到天亮！","快点吧，都等得我花都谢了！"],i=[],o=[],a=1;15>=a;a++)i.push(a);for(var a=0;a<e.length;a++)o.push(a);this.face_list.itemRenderer=t.FaceItem,this.arrCol1=new eui.ArrayCollection(i),this.face_list.dataProvider=this.arrCol1,1==this.room_type?(this.fangka_chat_list.itemRenderer=t.ChatItem_fangka,this.arrCol2=new eui.ArrayCollection(o),this.fangka_chat_list.dataProvider=this.arrCol2):(this.jinbi_chat_list.itemRenderer=t.ChatItem_jinbi,this.arrCol2=new eui.ArrayCollection(o),this.jinbi_chat_list.dataProvider=this.arrCol2),this.close_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),this.chat_send.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSend,this),this.chat_input.addEventListener(egret.TextEvent.FOCUS_IN,this.onFocusIn,this),this.chat_input.addEventListener(egret.FocusEvent.FOCUS_OUT,this.onFocusOut,this),n.instance.addEventListener(t.pokerchatConst.SEND_COMMON_CHAT,this.commonChatHandler,this),n.instance.addEventListener(t.pokerchatConst.SEND_COMMON_TALK,this.commonTalkHandler,this)},i.prototype.setRoomType=function(t){this.room_type=t,1==this.room_type?(this.fangka_group.visible=!0,this.jinbi_group.visible=!1):(this.fangka_group.visible=!1,this.jinbi_group.visible=!0),this.init()},i.prototype.onFocusIn=function(){var t=this.chat_input.text;-1!=t.indexOf("请输入聊天内容")&&(this.chat_input.text="")},i.prototype.setType=function(t){this._type=t},i.prototype.onFocusOut=function(){""==this.chat_input.text&&(this.chat_input.text="请输入聊天内容")},i.prototype.onSend=function(){var e=this.chat_input.text;return""==e||"请输入聊天内容"==e?void uniLib.TipsUtils.showTipsDownToUp("不能发送空消息！"):(n.instance.dispatchEventWith(t.pokerchatConst.SEND_COMMON_TALK,!1,e),void(this.chat_input.text=""))},i.prototype.commonChatHandler=function(t){this.sendMsg(1,t.data)},i.prototype.commonTalkHandler=function(t){this.sendMsg(2,t.data)},i.prototype.sendMsg=function(t,e){var n=this;if(!this._isClick)return void uniLib.TipsUtils.showTipsDownToUp("您的操作太频繁了！请休息一下吧");var i,o=e;i=1==this._type?new Cmd.ddz_CommonChat_C:new Cmd.CommonChat_C,1==t?i.voiceId=Number(o):i.words=o,uniLib.NetMgr.tcpSend(i),this._isClick=!1,setTimeout(function(){n._isClick=!0},3e3),this.onClose()},i.prototype.onClose=function(){uniLib.PopUpMgr.removePopUp(this)},i.prototype.destory=function(){this.close_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),this.chat_send.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onSend,this),this.chat_input.removeEventListener(egret.TextEvent.FOCUS_IN,this.onFocusIn,this),this.chat_input.removeEventListener(egret.FocusEvent.FOCUS_OUT,this.onFocusOut,this),n.instance.removeEventListener(t.pokerchatConst.SEND_COMMON_CHAT,this.commonChatHandler,this),n.instance.removeEventListener(t.pokerchatConst.SEND_COMMON_TALK,this.commonTalkHandler,this),uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this),this.arrCol1=null,this.arrCol2=null},i}(eui.Component);t.ChatPanel=e,__reflect(e.prototype,"pokerchat.ChatPanel");var n=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e}(egret.EventDispatcher);t.ChatEventDispatcher=n,__reflect(n.prototype,"pokerchat.ChatEventDispatcher")}(pokerchat||(pokerchat={}));var pokerchat;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.skinName="poker_FaceItemSkin",t}return __extends(n,e),n.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.faceItem.source="face"+this.data,this.faceid=this.data,this.faceItem.scaleX=this.faceItem.scaleY=.8,this.faceItem.x=13,this.faceItem.y=10},n.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.faceItem.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},n.prototype.onClick=function(e){var n="1"+this.faceid;t.ChatEventDispatcher.instance.dispatchEventWith(t.pokerchatConst.SEND_COMMON_CHAT,!1,n)},n}(eui.ItemRenderer);t.FaceItem=e,__reflect(e.prototype,"pokerchat.FaceItem")}(pokerchat||(pokerchat={}));var pokerchat;!function(t){var e=function(){function t(){}return t.RES_JSON="resource/pokerchat/pokerchat.res_375cb11e.json",t.THM_JSON="resource/pokerchat/gameEui_9ecd161a.json",t.POKER_CHAT="poker_chat",t.POKER_FACE="poker_face",t.SEND_COMMON_CHAT="send_common_chat",t.SEND_COMMON_TALK="send_common_talk",t.NOTIFY_COMMON_CHAT="notify_common_chat",t}();t.pokerchatConst=e,__reflect(e.prototype,"pokerchat.pokerchatConst")}(pokerchat||(pokerchat={}));var Cmd;!function(t){function e(t){uniLib.Global.dispatchEvent(pokerchat.pokerchatConst.NOTIFY_COMMON_CHAT,t)}t.Onddz_CommonChat_Brd=e}(Cmd||(Cmd={}));