var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},match;!function(t){function e(t){return 10>t?"0"+t:t}function n(t,n){var i=new Date(t),o=i.getFullYear(),a=i.getMonth()+1,s=i.getDate(),r=i.getHours(),h=i.getMinutes();return o+n+e(a)+n+e(s)+" "+e(r)+":"+e(h)}function i(t){var n=Math.floor(t/60/60),i=Math.floor(n/24),o=n%24;return e(i)+"天"+e(o)+"小时"}function o(t){var n=Math.floor(t/3600),i=Math.floor(t/3600/60),o=t%60;return e(n)+"点"+(i>0?e(i)+"分":"")+(o>0?e(o)+"秒":"")}t.add0=e,t.formatTime=n,t.formatTime2=i,t.formatTime3=o}(match||(match={}));var match;!function(t){var e=function(e){function n(t){var n=e.call(this)||this;return n._beginSceneId=7001,n._param=t,n.width=uniLib.Global.screenWidth,n.height=uniLib.Global.screenHeight,n.skinName="WxGameListSkin",n}return __extends(n,e),n.prototype.childrenCreated=function(){var n=this;e.prototype.childrenCreated.call(this),egret.MainContext.instance.stage.addEventListener(egret.Event.RESIZE,this.onResize,this),this.begin_ac.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.ret_btn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchHandler,this),uniLib.Global.addEventListener(t.EVENT_GAMELIST,this.onGameListHandler,this),this.ticketGame_lst.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTapHandler,this),this.ticketGame_lst.itemRenderer=t.WxGameListItem,this.ticketGame_lst.dataProvider=new eui.ArrayCollection(this._param.matchList),this.top_skin.ticket_btn.touchEnabled=!1;var i=uniLib.Global.screenWidth-this.ticketGame_scr.width>>1;this.ticketGame_scr.x=uniLib.Global.screenWidth,egret.Tween.get(this.ticketGame_scr).to({x:i},400,egret.Ease.quintOut),this.begin_btn.y=uniLib.Global.screenHeight+this.begin_btn.height,egret.Tween.get(this.begin_btn).to({y:uniLib.Global.screenHeight-.5*this.begin_btn.height},400,egret.Ease.quintOut).call(function(){n.begin_btn.bottom=0,n.begin_btn.visible=!1,n.begin_ac.visible=!0},this)},n.prototype.onGameListHandler=function(t){var e=t.param;this.ticketGame_lst.dataProvider=new eui.ArrayCollection(e.matchList)},n.prototype.onTouchHandler=function(e){if(e.target==this.ret_btn)uniLib.PopUpMgr.removePopUp(this);else if(e.target==this.begin_btn||e.target==this.begin_ac){var n=table.getMatchConfigBySceneId(this._beginSceneId);Array.isArray(n.HaoPaiMatchCost)&&6==n.HaoPaiMatchCost[0].goodId?uniLib.UserInfo.chips>=n.HaoPaiMatchCost[0].goodNbr?(wxgame.Global.instance.aldSendEvent("淘汰赛","点击快速开始"),t.OnRequestJoinHpMatchCmd_C(this._beginSceneId)):LobbyModuleMgr.getInstance().showDiamondsPanel():t.OnRequestJoinHpMatchCmd_C(this._beginSceneId)}},n.prototype.onResize=function(){this.width=uniLib.Global.screenWidth,this.height=uniLib.Global.screenHeight},n.prototype.onItemTapHandler=function(e){var n=this.ticketGame_lst.selectedItem;if(0==n.unLocked)uniLib.PopUpMgr.addPopUp(t.WxUnlockGame,null,!0,!0,0,uniLib.PopUpEffect.CENTER,0,0,n);else{var i=table.getMatchConfigBySceneId(n.sceneId);if(i.HaoPaiMatchCost[0].goodId==t.GoodType.TYPE_DIAMOND)i.HaoPaiMatchCost[0].goodNbr>uniLib.UserInfo.chips?(uniLib.PopUpMgr.removePopUp(this),LobbyModuleMgr.getInstance().showDiamondsPanel()):(wxgame.Global.instance.aldSendEvent("淘汰赛","点击"),t.OnRequestJoinHpMatchCmd_C(n.sceneId));else if(i.HaoPaiMatchCost[0].goodId==t.GoodType.TYPE_GOLD)if(i.HaoPaiMatchCost[0].goodNbr>uniLib.UserInfo.goldChips){var o=new commonConfirm.ConfirmPanel("金币不足啦，快去兑换更多金币吧!",null,null,function(){LobbyModuleMgr.getInstance().showMarketPanel(1)},function(){},this);uniLib.PopUpMgr.addPopUp(o,null,!0,!0,0,uniLib.PopUpEffect.CENTER)}else wxgame.Global.instance.aldSendEvent("免费钻石赛","钻石淘汰赛点击"),t.OnRequestJoinHpMatchCmd_C(n.sceneId);else i.HaoPaiMatchType==t.GameType.TYPE_CARD&&(wxgame.Global.instance.aldSendEvent("免费钻石赛","免费钻石赛点击"),t.OnRequestJoinHpMatchCmd_C(n.sceneId))}},n.prototype.destroy=function(){this._param=null,egret.Tween.removeTweens(this.ticketGame_scr),egret.Tween.removeTweens(this.begin_btn),uniLib.Global.dispatchEvent(commonConfirm.EVENT_PANEL_CLOSE),egret.MainContext.instance.stage.removeEventListener(egret.Event.RESIZE,this.onResize,this),this.begin_ac.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.ret_btn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchHandler,this),uniLib.Global.removeEventListener(t.EVENT_GAMELIST,this.onGameListHandler,this),this.ticketGame_lst.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTapHandler,this)},n}(eui.Component);t.WxGameList=e,__reflect(e.prototype,"match.WxGameList")}(match||(match={}));var match;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchEnd,this),this.addEventListener(egret.Event.REMOVED,this.dispose,this)},e.prototype.onTouchBegin=function(){this.currentState="down",RES.hasRes("buttonClick_mp3")&&uniLib.SoundMgr.instance.playSound("buttonClick_mp3")},e.prototype.onTouchEnd=function(){this.currentState="up",this.scaleX=1,this.scaleY=1},e.prototype.onTouchCancel=function(){this.scaleX=1,this.scaleY=1},e.prototype.onTouchMove=function(){this.scaleX=1,this.scaleY=1},e.prototype.dispose=function(){this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchEnd,this),this.removeEventListener(egret.Event.REMOVED,this.dispose,this)},e}(eui.Button);t.BaseButton=e,__reflect(e.prototype,"match.BaseButton")}(match||(match={}));var match;!function(t){var e=function(e){function n(t){var n=e.call(this)||this;return n._sceneInfo=t,n.width=uniLib.Global.screenWidth,n.height=uniLib.Global.screenHeight,n.skinName="WxGoldSelectSceneSkin",n}return __extends(n,e),n.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.select_lst.itemRenderer=t.WxGoldSelectSceneItem,egret.MainContext.instance.stage.addEventListener(egret.Event.RESIZE,this.onResize,this),this.select_lst.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTapHandler,this),this.begin_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchanHandler,this),this.ret_btn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchanHandler,this),uniLib.Global.addEventListener(t.EVENT_CLOSE_PANEL,this.animationShow,this),this.onDataUpdate(),!this._sceneInfo.defType&&this.animationShow()},n.prototype.animationShow=function(){var t=this,e=uniLib.Global.screenWidth-this.scene_scr.width>>1;this.scene_scr.x=uniLib.Global.screenWidth,this.begin_btn.y=uniLib.Global.screenHeight+this.begin_btn.height,egret.Tween.get(this.scene_scr).to({x:e},400,egret.Ease.quintOut),egret.Tween.get(this.begin_btn).to({y:uniLib.Global.screenHeight-.5*this.begin_btn.height},400,egret.Ease.quintOut).call(function(){t.begin_btn.bottom=0},this)},n.prototype.onDataUpdate=function(){if(this.select_lst.dataProvider=new eui.ArrayCollection(this._sceneInfo.infos),this.select_lst.dataProviderRefreshed(),this._sceneInfo.defType)for(var e=0;e<this._sceneInfo.infos.length;e++)if(this._sceneInfo.infos[e].type==this._sceneInfo.defType){uniLib.PopUpMgr.addPopUp(t.WxGoldSelectType,null,!0,!1,0,uniLib.PopUpEffect.NOMAL,0,0,this._sceneInfo.infos[e]);break}},n.prototype.onItemTapHandler=function(e){var n=this.select_lst.selectedItem;uniLib.PopUpMgr.addPopUp(t.WxGoldSelectType,null,!0,!1,0,uniLib.PopUpEffect.NOMAL,0,0,n)},n.prototype.onResize=function(){this.width=uniLib.Global.screenWidth,this.height=uniLib.Global.screenHeight},n.prototype.onTouchanHandler=function(e){if(e.target==this.begin_btn){if(this._sceneInfo){for(var n=this._sceneInfo[0].items,i=n.length-1;i>=0;i--)if(uniLib.UserInfo.goldChips>=n[i].lowestCarry)return void t.OnEnterMatchRoomCmd_C(n[i].gameId,n[i].sceneId);var o=new commonConfirm.ConfirmPanel("金币不足啦，快去兑换更多金币吧!",null,null,function(){LobbyModuleMgr.getInstance().showMarketPanel(1)},function(){},this);uniLib.PopUpMgr.addPopUp(o,null,!0,!0,0,uniLib.PopUpEffect.CENTER)}}else e.target==this.ret_btn&&uniLib.PopUpMgr.removePopUp(this)},n.prototype.destroy=function(){egret.Tween.removeTweens(this.scene_scr),egret.Tween.removeTweens(this.begin_btn),uniLib.Global.dispatchEvent(commonConfirm.EVENT_PANEL_CLOSE),egret.MainContext.instance.stage.removeEventListener(egret.Event.RESIZE,this.onResize,this),this.select_lst.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTapHandler,this),this.begin_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchanHandler,this),this.ret_btn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchanHandler,this),uniLib.Global.removeEventListener(t.EVENT_CLOSE_PANEL,this.animationShow,this),this._sceneInfo=null},n}(eui.Component);t.WxGoldSelectScene=e,__reflect(e.prototype,"match.WxGoldSelectScene")}(match||(match={}));var match;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="WxGoldSelectSceneItemSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this.data;this.touch_btn.bg_img.source="lb_jinbi_wanfa"+e.type+"_png",this.touch_btn.red_lbl.text="玩"+e.curUserNbr+"局拿免费红包";var n=this.touch_btn.desc_lbl;1==e.type?(n.textColor=95020,n.text="经典休闲玩法"):2==e.type?(n.textColor=485024,n.text="去掉3、4、5更刺激"):3==e.type&&(n.textColor=12535313,n.text="狂欢炸炸炸")},e}(eui.ItemRenderer);t.WxGoldSelectSceneItem=e,__reflect(e.prototype,"match.WxGoldSelectSceneItem")}(match||(match={}));var match;!function(t){var e=function(e){function n(t){var n=e.call(this)||this;return n.width=uniLib.Global.screenWidth,n.height=uniLib.Global.screenHeight,n._data=t,n.skinName="WxGoldSelectTypeSkin",n}return __extends(n,e),n.prototype.childrenCreated=function(){var n=this;e.prototype.childrenCreated.call(this),egret.MainContext.instance.stage.addEventListener(egret.Event.RESIZE,this.onResize,this),this.select_lst.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTapHandler,this),this.begin_ac.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.ret_btn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchHandler,this),uniLib.Global.addEventListener(uniLib.ZqEvent.USER_INFO,this.onUserInfo,this),this.ret_btn.ret_img.source="lb_jinbi_title"+this._data.type+"_png",this.select_lst.itemRenderer=t.WxGoldSelectTypeItem,this.select_lst.dataProvider=new eui.ArrayCollection(this._data.items),this.select_lst.dataProviderRefreshed(),this.select_lst.validateNow(),this.checkEnterRoom();var i=uniLib.Global.screenWidth-this.type_scr.width>>1;this.type_scr.x=uniLib.Global.screenWidth,this.begin_btn.y=uniLib.Global.screenHeight+this.begin_btn.height,egret.Tween.get(this.type_scr).to({x:i},400,egret.Ease.quintOut),egret.Tween.get(this.begin_btn).to({y:uniLib.Global.screenHeight-.5*this.begin_btn.height},400,egret.Ease.quintOut).call(function(){n.begin_btn.bottom=0,n.begin_btn.visible=!1,n.begin_ac.visible=!0},this)},n.prototype.onItemTapHandler=function(e){var n=this,i=this.select_lst.selectedItem;if(uniLib.UserInfo.goldChips>=i.lowestCarry)wxgame.Global.instance.aldSendEvent("金币场","点击"+this._data.type+"_"+i.type+"场"),t.OnEnterMatchRoomCmd_C(i.gameId,i.sceneId);else{for(var o={1:"初级场",2:"中级场",3:"高级场"},a=function(e){if(uniLib.UserInfo.goldChips>=s._data.items[e].lowestCarry){var i=new commonConfirm.ConfirmPanel("金币不足，请前往"+o[s._data.items[e].type]+"进行游戏!",null,null,function(){wxgame.Global.instance.aldSendEvent("金币场","点击"+n._data.type+"_"+n._data.items[e].type+"场"),t.OnEnterMatchRoomCmd_C(n._data.items[e].gameId,n._data.items[e].sceneId)},function(){},s);return uniLib.PopUpMgr.addPopUp(i,null,!0,!0,0,uniLib.PopUpEffect.CENTER),{value:void 0}}},s=this,r=this._data.items.length-1;r>=0;r--){var h=a(r);if("object"==typeof h)return h.value}t.OnEnterMatchRoomCmd_C(i.gameId,i.sceneId)}},n.prototype.onUserInfo=function(t){t.param==uniLib.UserInfoEnum.GOLDCHIPS&&this.checkEnterRoom()},n.prototype.checkEnterRoom=function(){for(var t=!1,e=this._data.items.length-1;e>=0;e--){var n=this.select_lst.getChildByName(this._data.items[e].type.toString());n&&(!t&&uniLib.UserInfo.goldChips>=this._data.items[e].lowestCarry?(n.touch_btn.skin.type_ac.visible=!0,t=!0):n.touch_btn.skin.type_ac.visible=!1)}if(!t){var n=this.select_lst.getChildByName(this._data.items[0].type.toString());n&&(n.touch_btn.skin.type_ac.visible=!0)}},n.prototype.onResize=function(){this.width=uniLib.Global.screenWidth,this.height=uniLib.Global.screenHeight},n.prototype.onTouchHandler=function(e){if(e.target==this.begin_btn||e.target==this.begin_ac){for(var n=this._data.items,i=n.length-1;i>=0;i--)if(uniLib.UserInfo.goldChips>=n[i].lowestCarry)return wxgame.Global.instance.aldSendEvent("金币场","点击快速开始"+this._data.type+"_"+n[i].type+"场"),void t.OnEnterMatchRoomCmd_C(n[i].gameId,n[i].sceneId);var o=new commonConfirm.ConfirmPanel("金币不足啦，快去兑换更多金币吧!",null,null,function(){LobbyModuleMgr.getInstance().showMarketPanel(1)},function(){},this);uniLib.PopUpMgr.addPopUp(o,null,!0,!0,0,uniLib.PopUpEffect.CENTER)}else e.target==this.ret_btn&&(uniLib.PopUpMgr.removePopUp(this),uniLib.Global.dispatchEvent(t.EVENT_CLOSE_PANEL))},n.prototype.destroy=function(){egret.Tween.removeTweens(this.type_scr),egret.Tween.removeTweens(this.begin_btn),egret.MainContext.instance.stage.removeEventListener(egret.Event.RESIZE,this.onResize,this),this.select_lst.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTapHandler,this),this.begin_ac.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.ret_btn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchHandler,this),uniLib.Global.removeEventListener(uniLib.ZqEvent.USER_INFO,this.onUserInfo,this),this._data=null},n}(eui.Component);t.WxGoldSelectType=e,__reflect(e.prototype,"match.WxGoldSelectType")}(match||(match={}));var match;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="WxGoldSelectTypeItemSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this.data;this.name=e.type.toString(),this.touch_btn.bg_img.source="lb_jinbi_grade"+e.type+"_png",1==e.type?this.touch_btn.desc_lbl.text=e.gameNbr+"局送"+e.money+"元":this.touch_btn.desc_lbl.text="赢"+e.gameNbr+"局送"+e.money+"元",this.touch_btn.num_lbl.text=e.curUserNbr.toString(),this.touch_btn.lowestCarry_lbl.text=e.lowestCarry+" 准入",e.bottomPoint<1e4?this.touch_btn.point_lbl.text=e.bottomPoint.toString():this.touch_btn.point_lbl.text=e.bottomPoint/1e4+"万"},e}(eui.ItemRenderer);t.WxGoldSelectTypeItem=e,__reflect(e.prototype,"match.WxGoldSelectTypeItem")}(match||(match={}));var Cmd;!function(t){function e(t){t.resultCode||uniLib.Global.dispatchEvent(match.EVENT_RANKINFO,t)}function n(t){t.resultCode||(uniLib.PopUpMgr.hasPopup(match.WxGameList)?uniLib.Global.dispatchEvent(match.EVENT_GAMELIST,t):uniLib.PopUpMgr.addPopUp(match.WxGameList,null,!0,!1,0,uniLib.PopUpEffect.NOMAL,0,0,t))}function i(t){uniLib.Global.dispatchEvent(match.EVENT_FLUSH,t)}function o(t){t.resultCode?egret.error("报名失败"):(uniLib.PopUpMgr.removePopUp(match.WxGameDetail),egret.log("报名成功"))}function a(t){uniLib.PopUpMgr.removePopUp(match.WxGameDetail);var e=table.getMatchConfigBySceneId(t.sceneId);match.matchWaitPanel?match.matchWaitPanel.update(t):(e.HaoPaiMatchType==match.GameType.TYPE_OUT||e.HaoPaiMatchType==match.GameType.TYPE_DIAMOND?match.matchWaitPanel=new match.WxEliminateWait(t):match.matchWaitPanel=new match.WxMatchWait(t),egret.MainContext.instance.stage.addChild(match.matchWaitPanel))}function s(t){t.resultCode||match.matchWaitPanel&&(match.matchWaitPanel.destroy(),match.matchWaitPanel=null)}function r(t){t.resultCode||uniLib.Global.dispatchEvent(match.EVENT_REWARDRECORD,t)}function h(t){t.resultCode||uniLib.Global.dispatchEvent(match.EVENT_HISTORY,t)}function c(t){t.resultCode||uniLib.Global.dispatchEvent(match.EVENT_PACKAGEREWARD,t)}function l(t){t.resultCode||(uniLib.PopUpMgr.removePopUp(match.WxUnlockGame),uniLib.TipsUtils.showTipsDownToUp("解锁成功"))}function d(t){t.resultCode||uniLib.Global.dispatchEvent(match.EVENT_REPORT_NUM,t.nbr)}function u(t){uniLib.PopUpMgr.addPopUp(match.WxGoldSelectScene,null,!0,!1,0,uniLib.PopUpEffect.NOMAL,0,0,t)}function _(t){if(6==t.resultCode){var e=new commonConfirm.ConfirmPanel("金币不足啦，快去兑换更多金币吧!",null,null,function(){LobbyModuleMgr.getInstance().showMarketPanel(1)},function(){},this);uniLib.PopUpMgr.addPopUp(e,null,!0,!0,0,uniLib.PopUpEffect.CENTER)}}t.OnRequestRankInfoHpMatchCmd_S=e,t.OnRequestRankListHpMatchCmd_S=n,t.OnFlushUserHpMatchInfoHpMatchCmd_Brd=i,t.OnRequestJoinHpMatchCmd_S=o,t.OnWaitListHpMatchCmd_Brd=a,t.OnRequestExitHpMatchCmd_S=s,t.OnRequestRewardRecordHpMatchCmd_S=r,t.OnRequestHistoryHpMatchCmd_S=h,t.OnGetRedPackRewardInfoLobbyCmd_S=c,t.OnRequestUnLockHpMatchCmd_S=l,t.OnGetTimerMatchUserHpMatchCmd_S=d,t.OnGetGoldCoinSceneInfoHpMatchCmd_S=u,t.OnEnterMatchRoomCmd_S=_}(Cmd||(Cmd={}));var match;!function(t){function e(t,e){void 0===e&&(e=4231);var n=new Cmd.RequestRankInfoHpMatchCmd_C;n.curPage=t,n.gameId=e,NetMgr.tcpSend(n)}function n(t){void 0===t&&(t=4231);var e=new Cmd.RequestRankListHpMatchCmd_C;e.gameId=t,NetMgr.tcpSend(e)}function i(t,e){void 0===e&&(e=4231);var n=new Cmd.RequestJoinHpMatchCmd_C;n.gameId=e,n.sceneId=t,NetMgr.tcpSend(n)}function o(t){var e=new Cmd.RequestExitHpMatchCmd_C;e.opType=t,NetMgr.tcpSend(e)}function a(t,e){var n=new Cmd.RequestRewardRecordHpMatchCmd_C;n.curPage=t,n.sceneId=e,NetMgr.tcpSend(n)}function s(t,e,n){void 0===e&&(e=0),void 0===n&&(n=4231);var i=new Cmd.RequestHistoryHpMatchCmd_C;i.gameId=n,i.typ=0,i.curPage=t,NetMgr.tcpSend(i)}function r(t){void 0===t&&(t=41);var e=new Cmd.GetRedPackRewardInfoLobbyCmd_C;e.lobbyId=t,NetMgr.tcpSend(e)}function h(t){var e=new Cmd.RequestUnLockHpMatchCmd_C;e.sceneId=t,NetMgr.tcpSend(e)}function c(t){var e=new Cmd.GetTimerMatchUserHpMatchCmd_C;e.sceneId=t,NetMgr.tcpSend(e)}function l(t,e){var n=new Cmd.EnterMatchRoomCmd_C;n.lobbyId=MJLobbyData.getInstance().lobbyId,n.gameId=t,n.scene=e,n.gambleType=1,NetMgr.tcpSend(n)}function d(){var t=new Cmd.GetGoldCoinSceneInfoHpMatchCmd_C;NetMgr.tcpSend(t)}t.OnRequestRankInfoHpMatchCmd_C=e,t.OnRequestRankListHpMatchCmd_C=n,t.OnRequestJoinHpMatchCmd_C=i,t.OnRequestExitHpMatchCmd_C=o,t.OnRequestRewardRecordHpMatchCmd_C=a,t.OnRequestHistoryHpMatchCmd_C=s,t.OnGetRedPackRewardInfoLobbyCmd_C=r,t.OnRequestUnLockHpMatchCmd_C=h,t.OnGetTimerMatchUserHpMatchCmd_C=c,t.OnEnterMatchRoomCmd_C=l,t.OnGetGoldCoinSceneInfoHpMatchCmd_C=d}(match||(match={}));var table;!function(t){function e(t){var e=RES.getRes("TableMatchReward_json");if(e){for(var n=0;n<e.length;n++)if(e[n].HaoPaiSceneId==t)return e[n]}else egret.error("TableMatchReward.json获取失败")}t.getMatchConfigBySceneId=e}(table||(table={}));var match;!function(t){var e=function(e){function n(t){var n=e.call(this)||this;return n._indexArr=[],n._curNum=0,n._data=t,n.width=uniLib.Global.screenWidth,n.height=uniLib.Global.screenHeight,n.skinName="WxEliminateWaitSkin",n}return __extends(n,e),n.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),egret.MainContext.instance.stage.addEventListener(egret.Event.RESIZE,this.onResize,this),uniLib.Global.addEventListener(uniLib.ZqEvent.ON_RECONNEC,this.onEventHandler,this),uniLib.Global.addEventListener(uniLib.ZqEvent.WX_ONSHOW,this.onEventHandler,this),this.close_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onExitHandler,this);var t=table.getMatchConfigBySceneId(this._data.sceneId);this.num_lbl.text=t.MatchPlayerNumber.toString(),this.title_lbl.text="满"+t.MatchPlayerNumber+"人开赛";for(var n=0;n<t.riseRank.length;n++)this["num"+n]&&(this["num"+n].text=t.riseRank[n]);this.timer_lbl.text="正在防作弊匹配中..."+this._data.timestamp,this._timer=new egret.Timer(1e3,this._data.timestamp),this._timer.addEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this._timer.start(),this._mask=new egret.Shape,this.eliminate_grp.addChild(this._mask),this.update(this._data)},n.prototype.onTimer=function(t){this.timer_lbl.text="正在防作弊匹配中..."+(this._timer.repeatCount-this._timer.currentCount),this._timer.currentCount==this._timer.repeatCount&&this._timer.stop()},n.prototype.update=function(t){this._data=t,this.num_blbl.text=t.curUserNbr.toString();var e=table.getMatchConfigBySceneId(t.sceneId);if(t.curUserNbr>=e.MatchPlayerNumber)this._indexArr.forEach(function(t){egret.clearTimeout(t)}),this._indexArr=[],this._mask.graphics.clear(),this._mask.visible=!1,this.pro_img.mask=null;else for(var n=t.curUserNbr/e.MatchPlayerNumber*Math.PI*2-Math.PI/2,i=this._curNum;i<t.curUserNbr;i++)n=i/e.MatchPlayerNumber*Math.PI*2-Math.PI/2,this._indexArr.push(egret.setTimeout(this.drawMask,this,40*i,[n]));this._curNum=t.curUserNbr},n.prototype.drawMask=function(t){var e=(table.getMatchConfigBySceneId(this._data.sceneId),this.pro_img.width/2),n=this._mask.graphics;n.clear(),n.beginFill(16711680),n.moveTo(this.eliminate_grp.width/2,this.pro_img.y+e),n.lineTo(this.eliminate_grp.width/2,this.pro_img.y),n.drawArc(this.eliminate_grp.width/2,this.pro_img.y+e,e,-Math.PI/2,t,!1),n.lineTo(this.eliminate_grp.width/2,this.pro_img.y+e),n.endFill(),this.pro_img.mask=this._mask},n.prototype.onExitHandler=function(e){var n=new t.WxMsgBox("返回大厅将会取消报名，是否要返回？",t.OnRequestExitHpMatchCmd_C,function(){});uniLib.PopUpMgr.addPopUp(n,egret.MainContext.instance.stage,!0,!0,0,uniLib.PopUpEffect.CENTER)},n.prototype.onEventHandler=function(e){e.type==uniLib.ZqEvent.ON_RECONNEC?t.OnRequestExitHpMatchCmd_C(1):e.type==uniLib.ZqEvent.WX_ONSHOW&&t.OnRequestExitHpMatchCmd_C(2)},n.prototype.onResize=function(){this.width=uniLib.Global.screenWidth,this.height=uniLib.Global.screenHeight},n.prototype.destroy=function(){this._indexArr.forEach(function(t){egret.clearTimeout(t)}),this._indexArr=[],this._timer&&(this._timer.stop(),this._timer.removeEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this._timer=null),egret.MainContext.instance.stage.removeEventListener(egret.Event.RESIZE,this.onResize,this),uniLib.Global.removeEventListener(uniLib.ZqEvent.ON_RECONNEC,this.onEventHandler,this),uniLib.Global.removeEventListener(uniLib.ZqEvent.WX_ONSHOW,this.onEventHandler,this),this._data=null,this.close_btn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onExitHandler,this),uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this)},n}(eui.Component);t.WxEliminateWait=e,__reflect(e.prototype,"match.WxEliminateWait")}(match||(match={}));var match;!function(t){var e=function(e){function n(t){var n=e.call(this)||this;return n._data=t,n.skinName="WxGameDetailSkin",n}return __extends(n,e),n.prototype.childrenCreated=function(){if(e.prototype.childrenCreated.call(this),uniLib.Global.addEventListener(t.EVENT_REPORT_NUM,this.onUpdateNum,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this._data){var n=table.getMatchConfigBySceneId(this._data.sceneId);this.rule_pal.setType(n.HaoPaiMatchType),n.HaoPaiMatchType==t.GameType.TYPE_CARD&&(this.record_btn.visible=!1,this.signUp_btn.horizontalCenter=0,this.share_btn.horizontalCenter=0),this.signUp_btn.visible=!0,this.share_btn.visible=!1;for(var i=0;i<this._data.rewards.length;i++)for(var o=this._data.rewards[i].rewards,a=0;a<o.length;a++){var s=ConfigMgr.getInstance().getGoodCfgById(o[a].goodId);this["reward"+i+a+"_lbl"].text=o[a].goodNbr+s.goodName}if(n){this.title_lbl.text=n.HaoPaiMatchName;var s=ConfigMgr.getInstance().getGoodCfgById(n.HaoPaiMatchCost[0].goodId);s?this.signUpCost_lbl.text=n.HaoPaiMatchCost[0].goodNbr+s.goodName:this.signUpCost_lbl.text="免费",6==n.MatchPlayerNumber?this.beginCondition_lbl.text="满6人开赛":this.beginCondition_lbl.text="限时赛";var r=t.add0(Math.floor(this._data.beginTime/3600))+":"+t.add0(Math.floor(this._data.beginTime%3600/60)),h=this._data.beginTime,c=t.add0(Math.floor(h/3600))+":"+t.add0(Math.floor(h%3600/60));this.signUpCondition_lbl.text=r+"--"+c}2001==this._data.sceneId&&[3,4].indexOf(uniLib.UserInfo.progress)>-1&&(null==this.stage?this.once(egret.Event.ADDED_TO_STAGE,this.addStageHandle,this):this.addStageHandle())}},n.prototype.addStageHandle=function(){var t=this;setTimeout(function(){if(t.signUp_btn&&t.signUp_btn.stage)if(3==uniLib.UserInfo.progress)guide.GuideUtils.addGuide(3,t.localToGlobal(t.signUp_btn.x,t.signUp_btn.y),t.parent);else if(4==uniLib.UserInfo.progress){var e=table.getMatchConfigBySceneId(2001),n=ConfigMgr.getInstance().getGoodCfgById(e.HaoPaiMatchCost[0].goodId);n&&e.HaoPaiMatchCost[0].goodNbr>uniLib.UserInfo.chips&&guide.GuideUtils.addGuide(4,t.localToGlobal(t.signUp_btn.x,t.signUp_btn.y),t.parent)}},420)},n.prototype.onTouchHandler=function(e){if(e.target==this.share_btn)if(1==uniLib.Global.is_sandbox){var n=new Cmd.UploadShareInfoLittleGameLobbyCmd_CS;n.shareType=Cmd.ShareType.match,n.opType=1,n.extData=JSON.stringify({sceneId:this._data.sceneId}),NetMgr.tcpSend(n)}else if(uniLib.Global.isWxGame()){var i=new uniLib.WXShareVo;i.shareType=Cmd.ShareType.match,i.wgKvData='{"sceneId": '+this._data.sceneId+"}",uniLib.ZQGameSdk.share(i)}else share.shareNativeMessage(Cmd.ShareType.match,0,Cmd.ShareType.match.toString(),JSON.stringify('{"sceneId": '+this._data.sceneId+"}"));else if(e.target==this.record_btn)t.OnRequestRewardRecordHpMatchCmd_C(1,this._data.sceneId),uniLib.PopUpMgr.addPopUp(t.WxGameRecord,null,!0,!0,0,uniLib.PopUpEffect.CENTER,0,0,this._data.sceneId);else if(e.target==this.close_btn)uniLib.PopUpMgr.removePopUp(this);else if(e.target==this.rule_btn)this.rule_pal.visible=!this.rule_pal.visible;else if(e.target==this.signUp_btn){var o=table.getMatchConfigBySceneId(this._data.sceneId),a=ConfigMgr.getInstance().getGoodCfgById(o.HaoPaiMatchCost[0].goodId);a&&o.HaoPaiMatchCost[0].goodNbr>uniLib.UserInfo.chips?1==uniLib.Global.is_sandbox?uniLib.TipsUtils.showTipsDownToUp("钻石不足"):(uniLib.PopUpMgr.removePopUp(this),LobbyModuleMgr.getInstance().showDiamondsPanel()):t.OnRequestJoinHpMatchCmd_C(this._data.sceneId)}},n.prototype.onUpdateNum=function(t){this.beginCondition_lbl.text=t.param},n.prototype.destroy=function(){2001==this._data.sceneId&&[3,4].indexOf(uniLib.UserInfo.progress)>-1&&guide.GuideUtils.remove(),uniLib.Global.removeEventListener(t.EVENT_REPORT_NUM,this.onUpdateNum,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this._data=null},n}(eui.Component);t.WxGameDetail=e,__reflect(e.prototype,"match.WxGameDetail")}(match||(match={}));var match;!function(t){var e=function(){function t(){}return t.RES_JSON="resource/match/wxmatch.res_3162535b.json",t.THM_JSON="resource/match/gameEui_c973cb17.json",t.PUB_LOGIN="bs_login",t.HPW_MATCH="wxmatch",t.HPW_JPYL="bs_jpyl",t.HPW_GOLD="bs_gold",t}();t.MatchConst=e,__reflect(e.prototype,"match.MatchConst");var n;!function(t){t[t.TYPE_CARD=1]="TYPE_CARD",t[t.TYPE_OUT=7]="TYPE_OUT",t[t.TYPE_DIAMOND=8]="TYPE_DIAMOND"}(n=t.GameType||(t.GameType={}));var i;!function(t){t[t.TYPE_DIAMOND=6]="TYPE_DIAMOND",t[t.TYPE_GOLD=32]="TYPE_GOLD"}(i=t.GoodType||(t.GoodType={}));var o;!function(t){t[t.TYPE_CALSSIC=1]="TYPE_CALSSIC",t[t.TYPE_EIGHT_CARD=2]="TYPE_EIGHT_CARD",t[t.TYPE_CRAZY=3]="TYPE_CRAZY",t[t.TYPE_CLASSIC2=4]="TYPE_CLASSIC2"}(o=t.SceneType||(t.SceneType={})),t.EVENT_RANKINFO="event_rankinfo",t.EVENT_GAMELIST="event_gamelist",t.EVENT_REWARDRECORD="event_rewardrecord",t.EVENT_HISTORY="event_history",t.EVENT_PACKAGEREWARD="event_packagereward",t.EVENT_FLUSH="event_flash",t.EVENT_REPORT_NUM="event_report_num",t.EVENT_MATCH_NUM="event_match_num",t.EVENT_CLOSE_PANEL="event_close_panel"}(match||(match={}));var match;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.skinName="WxGameListItemSkin",t}return __extends(n,e),n.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},n.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var n=this.data,i=this.tick_btn.skin,o=table.getMatchConfigBySceneId(n.sceneId);o&&(o.HaoPaiMatchType==t.GameType.TYPE_OUT?(i.desc_lbl.textFlow=[{text:"前"},{text:o.mainrewardRank,style:{textColor:16404290}},{text:"名可获得红包奖励"}],i.desc_lbl.visible=!0):o.HaoPaiMatchType==t.GameType.TYPE_DIAMOND?(i.desc_lbl.textFlow=[{text:"前"},{text:o.mainrewardRank,style:{textColor:16404290}},{text:"名可获得钻石奖励"}],i.desc_lbl.visible=!0):i.desc_lbl.visible=!1,0==n.unLocked?(i.black_img.visible=!0,i.lock_img.visible=!0,i.lockDesc_lbl.visible=!0,i.lockDesc_lbl.text="邀请"+o.unlockNumber+"个好友解锁"):(i.black_img.visible=!1,i.lock_img.visible=!1,i.lockDesc_lbl.visible=!1),o.HaoPaiMatchType==t.GameType.TYPE_CARD||o.HaoPaiMatchType==t.GameType.TYPE_DIAMOND?i.icon_img.source="lb_bisai_type"+t.GameType.TYPE_CARD+"_png":i.icon_img.source="lb_bisai_type"+o.HaoPaiMatchType+"_png",o.HaoPaiMatchCost[0].goodNbr?(i.mf_img.visible=!1,i.diamond_blbl.text=o.HaoPaiMatchCost[0].goodNbr,o.HaoPaiMatchType==t.GameType.TYPE_OUT?i.diamond_img.source="bs_diamond_png":o.HaoPaiMatchType==t.GameType.TYPE_DIAMOND&&(i.diamond_img.source="bs_jibi_png")):(i.diamond_img.visible=!1,i.diamond_blbl.text="",i.mf_img.visible=!0),o.matchName?(i.money_lbl.text=o.matchName.toString(),o.matchName<10?i.money_lbl.size=80:o.matchName<100?i.money_lbl.size=60:i.money_lbl.size=46):i.money_lbl.text="")},n}(eui.ItemRenderer);t.WxGameListItem=e,__reflect(e.prototype,"match.WxGameListItem")}(match||(match={}));var match;!function(t){var e=function(e){function n(t){var n=e.call(this)||this;return n._sub1Index=0,n._sceneId=t,n.skinName="WxGameRecordSkin",n}return __extends(n,e),n.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.record_lst.itemRenderer=t.WxGameRecordItem,this._recordColl=new eui.ArrayCollection([]),this.record_lst.dataProvider=this._recordColl,uniLib.Global.addEventListener(t.EVENT_REWARDRECORD,this.onDataHandler,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchHandler,this)},n.prototype.onDataHandler=function(t){var e=t.param;Array.isArray(e.records)||(e.records=[]);var n=[];this._data&&(n=this._data.records),this._data=e,this._data.records=n.concat(this._data.records),this.nextPage()},n.prototype.nextPage=function(){var e=this._data.records;e.length>5*(this._sub1Index+1)?(this._recordColl.replaceAll(e.slice(5*this._sub1Index,5*this._sub1Index+5)),this._recordColl.refresh(),this._sub1Index++):this._data.isLastPage?e.length>5*this._sub1Index?(this._recordColl.replaceAll(e.slice(5*this._sub1Index)),this._recordColl.refresh()):uniLib.TipsUtils.showTipsDownToUp("已到尾页"):t.OnRequestRewardRecordHpMatchCmd_C(this._data.curPage+1,this._sceneId)},n.prototype.prePage=function(){this._sub1Index>=1?(this._sub1Index--,this._recordColl.replaceAll(this._data.records.slice(5*this._sub1Index,5*this._sub1Index+5)),this._recordColl.refresh()):uniLib.TipsUtils.showTipsDownToUp("已到首页")},n.prototype.onTouchHandler=function(t){t.target==this.close_btn?uniLib.PopUpMgr.removePopUp(this):t.target==this.nextPage_btn?this.nextPage():t.target==this.prePage_btn&&this.prePage()},n.prototype.destroy=function(){uniLib.Global.removeEventListener(t.EVENT_REWARDRECORD,this.onDataHandler,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchHandler,this),this._data=null,this._recordColl=null,this._sceneId=null,this._sub1Index=null},n}(eui.Component);t.WxGameRecord=e,__reflect(e.prototype,"match.WxGameRecord")}(match||(match={}));var match;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.skinName="WxGameRecordItemSkin",t}return __extends(n,e),n.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var n=this.data;this.one_lbl.text=n.rankList[0],this.two_lbl.text=n.rankList[1],this.third_lbl.text=n.rankList[2],-1==n.myRank?this.rank_lbl.text="未参加":0==n.myRank?this.rank_lbl.text="未上榜":this.rank_lbl.text=n.myRank.toString();
var i=t.formatTime(1e3*n.beginTime,"/").split(" ");this.min_lbl.text=i[0],this.sec_lbl.text=i[1]},n}(eui.ItemRenderer);t.WxGameRecordItem=e,__reflect(e.prototype,"match.WxGameRecordItem")}(match||(match={}));var match;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="WxGameRewardSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchHandler,this)},e.prototype.onTouchHandler=function(t){if(t.target==this.close_btn)uniLib.PopUpMgr.removePopUp(this);else if(t.target==this.share_btn&&uniLib.Global.isWxGame()){var e=new uniLib.WXShareVo;e.opType=Cmd.ShareOpType.share,uniLib.ZQGameSdk.share(e)}},e.prototype.destroy=function(){this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchHandler,this)},e}(eui.Component);t.WxGameReward=e,__reflect(e.prototype,"match.WxGameReward")}(match||(match={}));var match;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="WxGameRuleSkin",e}return __extends(e,t),e.prototype.setType=function(t){this.rule_lbl.text="每人打三局，三局之后根据得分进行排名。每局赢家积2分，剩余牌数较少者积1分，剩余牌数最多者积0分。剩余牌数相同，比较玩家的出牌时间"},e}(eui.Component);t.WxGameRule=e,__reflect(e.prototype,"match.WxGameRule")}(match||(match={}));var match;!function(t){var e=function(e){function n(t){var n=e.call(this)||this;return n._data=t,n._matchType=table.getMatchConfigBySceneId(n._data.sceneId).HaoPaiMatchType,n.width=uniLib.Global.screenWidth,n.height=uniLib.Global.screenHeight,n.skinName="WxMatchWaitSkin",n}return __extends(n,e),n.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),egret.MainContext.instance.stage.addEventListener(egret.Event.RESIZE,this.onResize,this),uniLib.Global.addEventListener(uniLib.ZqEvent.ON_RECONNEC,this.onEventHandler,this),uniLib.Global.addEventListener(uniLib.ZqEvent.WX_ONSHOW,this.onEventHandler,this),this.close_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onExitHandler,this),wxgame.Global.instance.createBannerAd("",{left:0}),this.update(this._data)},n.prototype.update=function(t){if(this._data=t,t){var e=table.getMatchConfigBySceneId(t.sceneId);this.title_lbl.text=e.HaoPaiMatchName;for(var n=0;n<this.num_grp.numChildren;n++){var i=this.num_grp.getChildAt(n);n<t.curUserNbr?0==n?(i.skin.head_img.source=uniLib.UserInfo.headUrl,i.skin.mask_img.source="bs_pipei_kuang1_png",i.label=uniLib.UserInfo.nickName,i.skin.labelDisplay.textColor=16777215):(i.skin.head_img.source="bs_pipei_touxiang1_png",i.skin.mask_img.source="bs_pipei_kuang1_png",i.label="玩家"+(n+1),i.skin.labelDisplay.textColor=16777215):(i.skin.head_img.source="bs_pipei_touxiang_png",i.skin.mask_img.source="bs_pipei_kuang_png",i.label="匹配中...",i.skin.labelDisplay.textColor=16763904)}6==e.MatchPlayerNumber?this.condition_lbl.text="满6人开赛":this.condition_lbl.text="限时赛",this._timer||(this._timer=new egret.Timer(1e3,120),this._timer.addEventListener(egret.TimerEvent.TIMER,this.onTimerHandler,this),this._timer.start())}},n.prototype.onTimerHandler=function(t){this.time_lbl.text=this._timer.currentCount+"s",this._timer.currentCount==this._timer.repeatCount&&(this._timer.stop(),this._timer.removeEventListener(egret.TimerEvent.TIMER,this.onTimerHandler,this))},n.prototype.onExitHandler=function(e){var n=new t.WxMsgBox("返回大厅将会取消报名，是否要返回？",t.OnRequestExitHpMatchCmd_C,function(){});uniLib.PopUpMgr.addPopUp(n,egret.MainContext.instance.stage,!0,!0,0,uniLib.PopUpEffect.CENTER)},n.prototype.onEventHandler=function(e){e.type==uniLib.ZqEvent.ON_RECONNEC?t.OnRequestExitHpMatchCmd_C(1):e.type==uniLib.ZqEvent.WX_ONSHOW&&t.OnRequestExitHpMatchCmd_C(2)},n.prototype.onResize=function(){this.width=uniLib.Global.screenWidth,this.height=uniLib.Global.screenHeight},n.prototype.destroy=function(){wxgame.Global.instance.destroyBannerAd(),egret.MainContext.instance.stage.removeEventListener(egret.Event.RESIZE,this.onResize,this),uniLib.Global.removeEventListener(uniLib.ZqEvent.ON_RECONNEC,this.onEventHandler,this),uniLib.Global.removeEventListener(uniLib.ZqEvent.WX_ONSHOW,this.onEventHandler,this),this._timer&&(this._timer.stop(),this._timer.removeEventListener(egret.TimerEvent.TIMER,this.onTimerHandler,this)),this._timer=null,this._data=null,this.close_btn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onExitHandler,this),uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this)},n}(eui.Component);t.WxMatchWait=e,__reflect(e.prototype,"match.WxMatchWait")}(match||(match={}));var match;!function(t){var e=function(t){function e(e,n,i,o,a){void 0===a&&(a="left");var s=t.call(this)||this;return s._content=e,s._textAlign=a,s._confirmCall=n,s._cancelCall=i,s._callObj=o,s.skinName="WxMsgBoxSkin",s}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchHandler,this),this.confirm_text.textAlign=this._textAlign,this._content.length&&"[object array]"==Object.prototype.toString.call(this._content).toLowerCase()?this.confirm_text.textFlow=this._content:this.confirm_text.text=this._content+"",this._cancelCall||(this.confirm_cancel_btn.visible=!1,this.confirm_confirm_btn.horizontalCenter=0)},e.prototype.onTouchHandler=function(t){t.target==this.confirm_cancel_btn?(this._cancelCall&&this._cancelCall.call(this._callObj),uniLib.PopUpMgr.removePopUp(this)):t.target==this.confirm_confirm_btn&&(this._confirmCall&&this._confirmCall.call(this._callObj),uniLib.PopUpMgr.removePopUp(this))},e.prototype.destroy=function(){this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchHandler,this),this._content=null,this._textAlign=null,this._confirmCall=null,this._cancelCall=null,this._callObj=null},e}(eui.Component);t.WxMsgBox=e,__reflect(e.prototype,"match.WxMsgBox")}(match||(match={}));var match;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.skinName="WxTopOpBtnSkin",t}return __extends(n,e),n.prototype.gold2str=function(t){return t>1e8?(t/1e8).toFixed(1)+"亿":t>1e7?(t/1e4).toFixed(1)+"万":t>1e5?(t/1e4).toFixed(2)+"万":t.toString()},n.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.x=248,this.diamond_btn.label=uniLib.UserInfo.chips.toString(),this.ticket_btn.label=uniLib.UserInfo.giftCoupon.toString(),this.gold_btn.label=this.gold2str(uniLib.UserInfo.goldChips),1==uniLib.Global.is_sandbox&&(this.diamond_btn.touchEnabled=!1,this.gold_btn.touchEnabled=!1,this.ticket_btn.visible=!1),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),uniLib.Global.addEventListener(uniLib.ZqEvent.USER_INFO,this.onUserInfoChanged,this)},n.prototype.onUserInfoChanged=function(t){this.diamond_btn&&(this.diamond_btn.label=uniLib.UserInfo.chips.toString()),this.ticket_btn&&(this.ticket_btn.label=uniLib.UserInfo.giftCoupon.toString()),this.gold_btn&&(this.gold_btn.label=this.gold2str(uniLib.UserInfo.goldChips))},n.prototype.onTouchHandler=function(e){e.target==this.diamond_btn?LobbyModuleMgr.getInstance().showMarketPanel(0):e.target==this.ticket_btn?RES.loadGroup(t.MatchConst.HPW_MATCH).then(function(){t.OnRequestRankListHpMatchCmd_C(),uniLib.PopUpMgr.addPopUp(t.WxGameList,null,!0,!1)},function(){var t=new commonConfirm.ConfirmPanel("资源加载失败，请检查网络后重试");uniLib.PopUpMgr.addPopUp(t,null,!0,!0,0,uniLib.PopUpEffect.CENTER)}):e.target==this.gold_btn&&LobbyModuleMgr.getInstance().showMarketPanel(1)},n.prototype.destroy=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),uniLib.Global.removeEventListener(uniLib.ZqEvent.USER_INFO,this.onUserInfoChanged,this)},n}(eui.Component);t.WxTopOpBtn=e,__reflect(e.prototype,"match.WxTopOpBtn")}(match||(match={}));var match;!function(t){var e=function(e){function n(t){var n=e.call(this)||this;return n._data=t,n.skinName="WxUnlockGameSkin",n}return __extends(n,e),n.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchHandler,this),this.head_grp.removeChildren();var t=table.getMatchConfigBySceneId(this._data.sceneId);this.unlock_btn.label="x"+t.unlockdiamond;for(var n=0;n<t.unlockNumber;n++){var i=new eui.Image("bs_unlock_jia_png");i.width=i.height=100,this.head_grp.addChild(i)}for(var n=0;n<this._data.unLockList.length;n++){var i=this.head_grp.getChildAt(n);i.source=this._data.unLockList[n]}},n.prototype.onTouchHandler=function(e){if(e.target==this.close_btn)uniLib.PopUpMgr.removePopUp(this);else if(e.target==this.share_btn)if(uniLib.Global.isWxGame()){var n=new uniLib.WXShareVo;n.shareType=Cmd.ShareType.unlock;var i={sceneId:this._data.sceneId};n.wgShareData=JSON.stringify(i),uniLib.ZQGameSdk.share(n)}else share.shareNativeMessage(Cmd.ShareType.unlock,0,Cmd.ShareType.unlock+"_"+this._data.sceneId,JSON.stringify({sceneId:this._data.sceneId}));else if(e.target==this.unlock_btn){var o=table.getMatchConfigBySceneId(this._data.sceneId);uniLib.UserInfo.chips>=o.unlockdiamond?t.OnRequestUnLockHpMatchCmd_C(this._data.sceneId):uniLib.TipsUtils.showTipsDownToUp("钻石不足")}},n.prototype.destroy=function(){this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchHandler,this),this._data=null},n}(eui.Component);t.WxUnlockGame=e,__reflect(e.prototype,"match.WxUnlockGame")}(match||(match={}));