var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},clubnew;!function(t){var e=function(){function t(){this.clubDayChose=1,this.isnewfloor=0,this.newfloor=0,this.isclubmanagor=0,this.isclubchangefloor=0}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.getGameIcon=function(t){var e=ConfigMgr.getInstance().getGameCfgById(t);return uniLib.Global.CdnDomains[0]+uniLib.GameModuleUtils.gameRemotePaths[0]+e.gameTag+"/clubIcon.png"},t}();t.ClubData=e,__reflect(e.prototype,"clubnew.ClubData")}(clubnew||(clubnew={}));var clubnew;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._noticeArr=[],e.skinName="ClubMsgMcSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.initUI=function(){this._buffer=30,this.touchEnabled=!1,this._msgContain=new egret.DisplayObjectContainer,this._msgContain.x=40,this._msgContain.y=7,this.addChild(this._msgContain),this._msgContain.scrollRect=new egret.Rectangle(0,0,270,25),this._noticePanel=new egret.DisplayObjectContainer,this._msgContain.addChild(this._noticePanel),this._msgTxt=this.createTextFeild(),this._noticePanel.addChild(this._msgTxt),this._noticeArr=[],this.visible=!1;var t=this;setTimeout(function(){t.noticeTest()},200)},e.prototype.setLoop=function(t){this._loop=t},e.prototype.noticeTest=function(){this._msgTxt&&this.startScroll()},e.prototype.startScroll=function(){this.visible=!0,egret.Tween.removeTweens(this._noticePanel),this._noticePanel.x=320+this._buffer;var t=this._noticePanel.width<320?320:this._noticePanel.width;egret.Tween.get(this._noticePanel).to({x:-(this._noticePanel.width+this._buffer)},10*(t+this._buffer)).call(this.noticeTest,this)},e.prototype.scrollEnd=function(){egret.Tween.removeTweens(this._noticePanel),this.visible=!1},e.prototype.getclubmsg=function(t){this._msgTxt.text=t},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.scrollEnd()},e.prototype.createTextFeild=function(){var t=new egret.TextField;return t.fontFamily="Microsoft YaHei",t.textColor=16777215,t.textAlign=egret.HorizontalAlign.LEFT,t.size=24,t.multiline=!1,t.verticalAlign=egret.VerticalAlign.MIDDLE,t},e}(commonpanel.LobbyBaseEuiPanel);t.ClubMsgMcPanel=e,__reflect(e.prototype,"clubnew.ClubMsgMcPanel")}(clubnew||(clubnew={}));var Cmd;!function(t){function e(t,e,i){void 0===i&&(i=!0),uniLib.Global.dispatchEvent(t,e,i)}function i(i){if(i.list)clubnew.ClubModuleMgr.getInstance().showActiveDetailRoomtPanel(function(){e(clubnew.ClubConst.ActiveDetailRoom,i)});else{clubnew.ClubModuleMgr.getInstance().removeActiveDetailRoomtPanel();var n=new t.RequestMatchGroupCmd_C;n.matchId=this.selectMatchId,NetMgr.tcpSend(n)}}function n(t){e(clubnew.ClubConst.HistoryMatchIdList,t)}function o(i){0==uniLib.Global.isInGame&&(1==i.isClub?i.curMath?clubnew.ClubModuleMgr.getInstance().showClubDeskPanel(function(){e(clubnew.ClubConst.ReturnMatchGroup,i)}):(clubnew.ClubModuleMgr.getInstance().removeClubDeskPanel(),clubnew.ClubModuleMgr.getInstance().showAllClubListPanel(function(){var e=new t.HistoryMatchIdListMatchGroupCmd_C;e.isClub=1,NetMgr.tcpSend(e)})):clubnew.ClubModuleMgr.getInstance().showClubManagePanel(function(){e(clubnew.ClubConst.ReturnMatchGroupManage,i)}))}function s(t){t&&e(clubnew.ClubConst.LatestMatchRoom,t)}function r(t){1==t.isClub?e(clubnew.ClubConst.JoinMemberListMatch,t):e(clubnew.ClubConst.JoinMemberListManage,t)}function a(t){2==t.opType&&clubnew.ClubModuleMgr.getInstance().showCreateClubPanel(t)}function h(t){clubnew.ClubModuleMgr.getInstance().shoClubEnterRemarks(function(){e(clubnew.ClubConst.NotifyImportNoteCmd,t)})}function l(t){e(clubnew.ClubConst.CLUB_NOTICE,t)}function c(t){e(clubnew.ClubConst.MemberInfoMatchGroup,t)}function u(t){clubnew.ClubModuleMgr.getInstance().showClubUserInfoPanel(function(){e(clubnew.ClubConst.UserInfoSearchLobby,t)})}function d(t){t&&t.list&&e(clubnew.ClubConst.ReturnYellowList,t)}function p(t){clubnew.ClubModuleMgr.getInstance().showCreateMatchSetPanel(t)}function b(t){e(clubnew.ClubConst.LEAVE_MATCHGROUP2,t)}function m(e){function i(){var i=new t.ReplyJoinMemberListMatchGroupCmd_C;i.matchId=e.matchId,i.reply=1,i.uid=e.uid,NetMgr.tcpSend(i)}var n=e.wechat,o="玩家"+e.nickname+(n?"微信:"+n:"")+"申请加入老友圈"+e.matchId+",是否同意进入？";MJLobbyData.getInstance().lobbyId<5e3?ComponentUtil.getInstance().showConfirm(o,"","确定",i,"取消",null):ComponentUtil.getInstance().showConfirm(o,"温馨提示","确定",i,"取消",null)}t.clubDispatch=e,t.OnActiveDetailRoomCmd_S=i,t.OnHistoryMatchIdListMatchGroupCmd_S=n,t.OnReturnMatchGroupCmd_S=o,t.OnLatestMatchRoomInfoGroupCmd_Brd=s,t.OnJoinMemberListMatchGroupCmd_S=r,t.OnOperateFloorMatchGroupCmd_CS=a,t.OnNotifyImportNoteCmd_S=h,t.OnClubNoticeMatchGroupCmd_CS=l,t.OnReturnMemberInfoMatchGroupCmd_S=c,t.OnUserInfoSearchLobbyCmd_S=u,t.OnReturnYellowMemberInfoMatchGroupCmd_S=d,t.OnChangeMatchGroupCmd_S=p,t.OnLeaveMatchGroup2Cmd_S=b,t.OnRequestJoinMemberMatchGroupCmd_S=m}(Cmd||(Cmd={}));var clubnew;!function(t){var e=function(){function e(){this._isShowClub=0}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.showAllClubListPanel=function(e){LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUBNEW,function(){uniLib.PopUpMgr.addPopUp(t.ClubAllBoxPanel,null,!0,!0,0,uniLib.PopUpEffect.CENTER),e()})},e.prototype.showActiveDetailRoomtPanel=function(e){LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUBNEW,function(){uniLib.PopUpMgr.addPopUp(t.ActiveRoomInformationPanel,null,!0,!0,0,uniLib.PopUpEffect.CENTER),e()})},e.prototype.removeActiveDetailRoomtPanel=function(){uniLib.PopUpMgr.removePopUp(t.ActiveRoomInformationPanel)},e.prototype.showClubDeskPanel=function(e){var i=this;1==this._isShowClub&&e(),this._clubDeskPanel||(this._clubDeskPanel=new t.ClubDeskPanel,LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUBNEW,function(){uniLib.PopUpMgr.addPopUp(i._clubDeskPanel,null,!0,!0,0,uniLib.PopUpEffect.CENTER),i._isShowClub=1,e()}))},e.prototype.removeClubDeskPanel=function(){if(this._clubDeskPanel){uniLib.PopUpMgr.removePopUp(this._clubDeskPanel),this._clubDeskPanel=null,this._isShowClub=0;var t=new Cmd.ExitMatchGroupCmd_C;NetMgr.tcpSend(t)}},e.prototype.showClubManagePanel=function(e){var i=this;LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUBNEW,function(){i._clubManagePanel||(i._clubManagePanel=new t.ClubManagePanel,uniLib.PopUpMgr.addPopUp(i._clubManagePanel,null,!0,!1,0),i._clubManagePanel.OnOpen()),e()})},e.prototype.closeClubManagePanel=function(){this._clubManagePanel&&this._clubManagePanel.OnClose()},e.prototype.removeClubManagePanel=function(){this._clubManagePanel&&(uniLib.PopUpMgr.removePopUp(this._clubManagePanel),this._clubManagePanel=null)},e.prototype.showClubPlayerListPanel=function(e){var i=this;this._clubPlayerListPanel=new t.ClubPlayerListPanel,LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUBNEW,function(){uniLib.PopUpMgr.addPopUp(i._clubPlayerListPanel,null,!0,!1,0),i._clubPlayerListPanel.OnOpen(),e()})},e.prototype.removeClubPlayerListPanel=function(){this._clubPlayerListPanel&&(uniLib.PopUpMgr.removePopUp(this._clubPlayerListPanel),this._clubPlayerListPanel=null)},e.prototype.showClubNoticePanel=function(){LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUBNEW,function(){uniLib.PopUpMgr.addPopUp(t.ClubNoticePanel,null,!0,!0,0,uniLib.PopUpEffect.CENTER)})},e.prototype.shoClubEnterRemarks=function(e){LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUBNEW,function(){uniLib.PopUpMgr.addPopUp(t.ClubEnterRemarks,null,!0,!1,0),e()})},e.prototype.showCreateClubPanel=function(t){LoadPanelTipMgr.getInstance().loadRes(ResGroupConsts.MJL_CREATEPANEL,function(){var e=new CreatePanelParam(2);t?e.data=t:MsgSendMgr.getNormalGameList(1),uniLib.PopUpMgr.addPopUp(CreateGamePanel,null,!0,!0,0,uniLib.PopUpEffect.CENTER,1240,640,e)})},e.prototype.showClubUserInfoPanel=function(e){LoadPanelTipMgr.getInstance().loadRes(ResGroupConsts.MJL_USERINFO,function(){uniLib.PopUpMgr.addPopUp(t.ClubUserInfoPanel,null,!0,!0,0,uniLib.PopUpEffect.CENTER),e()})},e.prototype.showCreateMatchSetPanel=function(e){LoadPanelTipMgr.getInstance().loadRes(t.ClubConst.PUB_CLUBNEW,function(){uniLib.PopUpMgr.removePopUp(CreateGamePanel),uniLib.PopUpMgr.addPopUp(t.CreateMatchSetPanel,null,!0,!0,0,uniLib.PopUpEffect.CENTER,0,0,e)})},e.prototype.ClubNewBoxPanel=function(e){this._clubNewBoxPanel=new t.ClubNewBoxPanel(e),uniLib.PopUpMgr.addPopUp(this._clubNewBoxPanel,null,!0,!1,0),this._clubNewBoxPanel.OnOpen()},e.prototype.closeClubNewBoxPanel=function(){this._clubNewBoxPanel&&this._clubNewBoxPanel.OnClose()},e.prototype.removeClubNewBoxPanel=function(){this._clubNewBoxPanel&&(uniLib.PopUpMgr.removePopUp(this._clubNewBoxPanel),this._clubNewBoxPanel=null)},e}();t.ClubModuleMgr=e,__reflect(e.prototype,"clubnew.ClubModuleMgr")}(clubnew||(clubnew={}));var clubnew;!function(t){var e=function(){function t(){}return t.requestMatchData=function(t){void 0===t&&(t=0);var e=new Cmd.RequestMatchGroupCmd_C;t&&(e.isClub=t),NetMgr.tcpSend(e)},t.requestRequestMatchGroupCmd=function(t){var e=new Cmd.RequestMatchGroupCmd_C;e.matchId=t,NetMgr.tcpSend(e)},t.sendOFMGCmd_CS=function(t,e,i,n){var o=new Cmd.OperateFloorMatchGroupCmd_CS;o.matchId=t,o.floorId=e,o.opType=i,n?o.createRoom=n:null,NetMgr.tcpSend(o)},t}();t.ClubSendMgr=e,__reflect(e.prototype,"clubnew.ClubSendMgr")}(clubnew||(clubnew={}));var ClubUIEventConst=function(){function t(){}return t.JOIN_CLUBROOM="JOIN_CLUBROOM",t}();__reflect(ClubUIEventConst.prototype,"ClubUIEventConst");var clubnew;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ActiveRoom",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.initUI=function(){this.closeButton.setColorMatrix()},i.prototype.addEvent=function(){this.closeButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this),this.cancelBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this),this.dissolveBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this),uniLib.Global.addEventListener(t.ClubConst.ActiveDetailRoom,this.initData,this)},i.prototype.removeEvent=function(){this.closeButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this),this.cancelBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this),this.dissolveBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this),uniLib.Global.addEventListener(t.ClubConst.ActiveDetailRoom,this.initData,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),uniLib.PopUpMgr.removePopUp(this),this._activeRoomListOb=null,this.playerGroup&&(this.playerGroup.removeChildren(),this.playerGroup=null)},i.prototype.initData=function(e){var i=e.param;if(i.matchId&&(this.dissolveBtn.visible=!0,this.cancelBtn.visible=!0),this.itemList)for(var n=this.itemList.numChildren-1;n>=0;n--){var o=this.itemList.getChildAt(n);o.destroy(),o=null}if(uniLib.DisplayUtils.removeAllChildren(this.itemList),this._activeRoomListOb=i,this.topTableNumber.text="房号："+this._activeRoomListOb.roomId,Array.isArray(i.list)&&0!=i.list.length)for(var n=0;n<i.list.length;n++){var o=new t.ActiveRoomListItem;o.setData(i.list[n],i.roomId),i.matchId&&(o.name=i.matchId+""),1==this._activeRoomListOb.state||this._activeRoomListOb.list[n].score?(o.setEliminateVisible(!1),this.cancelBtn.visible=!1,this.dissolveBtn.visible=!1):o.setEliminateVisible(!0),o.y=n*o.height+10,this.itemList.addChild(o)}},i.prototype.btnClick=function(t){if(t.currentTarget==this.closeButton||t.currentTarget==this.cancelBtn)this.destroy();else if(t.currentTarget==this.dissolveBtn){var e=new Cmd.ActiveDissolveRoomCmd_C;e.roomId=this._activeRoomListOb.roomId,e.matchId=this._activeRoomListOb.matchId,NetMgr.tcpSend(e),this.destroy()}},i}(commonpanel.LobbyBaseEuiPanel);t.ActiveRoomInformationPanel=e,__reflect(e.prototype,"clubnew.ActiveRoomInformationPanel")}(clubnew||(clubnew={}));var clubnew;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ActiveRoomListItemSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.setData=function(t,e){this._data=t,this._roomId=e,void 0!=t.score&&(this.playerScore.text=t.score.toString()),this.playerName.text=t.nickname,this.eliminate.addEventListener(egret.TouchEvent.TOUCH_TAP,this.eliminatePlayer,this)},i.prototype.eliminatePlayer=function(e){var i=new Cmd.KickLeaveRoomCmd_C;i.uid=this._data.uid,""!=this.name&&(i.matchId=Number(this.name)),i.roomId=this._roomId,NetMgr.tcpSend(i),uniLib.PopUpMgr.removePopUp(t.ActiveRoomInformationPanel)},i.prototype.setEliminateVisible=function(t){this.eliminate.visible=t},i.prototype.destroy=function(){this.eliminate&&this.eliminate.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.eliminatePlayer,this),uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this)},i}(eui.Component);t.ActiveRoomListItem=e,__reflect(e.prototype,"clubnew.ActiveRoomListItem")}(clubnew||(clubnew={}));var clubnew;!function(t){var e=function(){function t(){}return t.MatchMemberTypeToString=function(t){return t?1==t?"白名单":2==t?"黑名单":3==t?"黄名单":4==t?"VIP":void 0:"游  客"},t.MatchMemberTypeToColor=function(t){return t?1==t?4783872:2==t?13313060:3==t?12216577:4==t?16041845:void 0:4746562},t}();t.DataManage=e,__reflect(e.prototype,"clubnew.DataManage")}(clubnew||(clubnew={}));var clubnew;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ClubAllBoxSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.destroy=function(){if(e.prototype.destroy.call(this),this.boxList&&this.boxList.numChildren)for(var t=this.boxList.numChildren-1;t>=0;t--){var i=this.boxList.getChildAt(t);i.destroy(),i=null}},i.prototype.initUI=function(){this.msgText.visible=!0,this.boxList.useVirtualLayout=!1,uniLib.Global.addEventListener(t.ClubConst.HistoryMatchIdList,this.setData,this)},i.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.removeEvent=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),uniLib.Global.removeEventListener(t.ClubConst.HistoryMatchIdList,this.setData,this)},i.prototype.setData=function(e){var i=e.param;if(i){i.list.length>=1?this.msgText.visible=!1:this.msgText.visible=!0,this._clubList=i.list;for(var n=0;n<this._clubList.length;n++)this._clubList[n].index=n+1;this.boxList.itemRenderer=t.ClubBoxItem,this.boxList.dataProvider=new eui.ArrayCollection(this._clubList)}},i.prototype.onClickTap=function(i){i.target==this.closeBtn?e.prototype.removePop.call(this):i.target==this.createBtn?(e.prototype.removePop.call(this),t.ClubModuleMgr.getInstance().removeClubDeskPanel(),t.ClubModuleMgr.getInstance().showCreateClubPanel()):i.target==this.joinBtn&&(e.prototype.removePop.call(this),t.ClubModuleMgr.getInstance().removeClubDeskPanel(),LobbyModuleMgr.getInstance().showJoinRoomPanel(function(){var t=new Cmd.HistoryMatchIdListMatchGroupCmd_C;NetMgr.tcpSend(t)}))},i}(commonpanel.LobbyBaseEuiPanel);t.ClubAllBoxPanel=e,__reflect(e.prototype,"clubnew.ClubAllBoxPanel")}(clubnew||(clubnew={}));var clubnew;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ClubBoxItemSkin",t.removeRedPoint(),t.addListener(),t}return __extends(i,e),i.prototype.addListener=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.removeListener=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.destroy=function(){this.removeListener()},i.prototype.dataChanged=function(){this.info=this.data;for(var t,e=this.info.ownerName;this.getStrRealLength(e)>12;)t=e.length,e=e.substr(0,t-1);this.idText.text=this.info.matchId.toString(),this.nameText.text=this.info.ownerName,this.roomNameText.text=this.info.gameName+"  "+this.info.gameNbr+"局",this.boxNameText.text=this.info.matchName?this.info.matchName:this.info.matchId.toString(),this.waitRoomText.text=this.info.waitRoomNbr+"桌等待中",this.startRoomText.text=this.info.startRoomNbr+"桌开始",this.head.source=this.info.ownerHeadUrl,this.numberText.text=this.info.index+"",this.info.isNew&&1==this.info.isNew&&(this.bg.source="mjl_club_txt1"),this.info.noHandle&&1==this.info.noHandle&&this.addRedPoint()},i.prototype.onClickTap=function(e){if(e.target==this.inBtn){t.ClubModuleMgr.getInstance().removeClubDeskPanel();var i=new Cmd.RequestMatchGroupCmd_C;i.matchId=this.info.matchId,i.isClub=1,NetMgr.tcpSend(i),uniLib.PopUpMgr.removePopUp(t.ClubAllBoxPanel)}else if(e.target==this.outBtn){var n=this,o=function(){var e=new Cmd.LeaveMatchGroup2Cmd_C;e.matchId=n.info.matchId,t.ClubData.getInstance().clubmatchid==n.info.matchId&&t.ClubModuleMgr.getInstance().removeClubDeskPanel(),NetMgr.tcpSend(e);var i=new Cmd.HistoryMatchIdListMatchGroupCmd_C;i.isClub=1,NetMgr.tcpSend(i)};ComponentUtil.getInstance().showConfirm("是否确定退出老友圈?","","确定",o," 取消",null)}else if(e.target==this.bg){t.ClubModuleMgr.getInstance().removeClubDeskPanel();var i=new Cmd.RequestMatchGroupCmd_C;i.matchId=this.info.matchId,i.isClub=1,NetMgr.tcpSend(i),uniLib.PopUpMgr.removePopUp(t.ClubAllBoxPanel)}},i.prototype.addRedPoint=function(){this.redPoint.visible=!0,egret.Tween.get(this.redPoint,{loop:!0}).to({alpha:1},500).to({alpha:0},500)},i.prototype.removeRedPoint=function(){this.redPoint.visible=!1,egret.Tween.removeTweens(this.redPoint)},i.prototype.getStrRealLength=function(t){var e={GetLength:null};return e.GetLength=function(t){return Number(t.replace(/[\u0391-\uFFE5]/g,"aa").length)},e.GetLength(t)},i}(eui.ItemRenderer);t.ClubBoxItem=e,__reflect(e.prototype,"clubnew.ClubBoxItem")}(clubnew||(clubnew={}));var clubnew;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ClubDeskSkin",t.width=uniLib.Global.screenWidth,t.height=uniLib.Global.screenHeight,t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.destroy=function(){this._clubMsgMcPanel.destroy(),e.prototype.destroy.call(this),this.destroyTimer(),this._dataArr=null},i.prototype.initUI=function(){this._ztimer=new egret.Timer(5e3,0),this._ztimer.start(),uniLib.Utils.isPad()&&(this.bg.height=200),this.deskList.itemRenderer=t.ClubItemDesk,this._bg1.width=this._bg2.width=uniLib.Global.screenWidth/2},i.prototype.addEvent=function(){uniLib.Global.addEventListener(t.ClubConst.ReturnMatchGroup,this.setDate,this),uniLib.Global.addEventListener(t.ClubConst.JoinMemberListMatch,this.showRedPoint,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.deskList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.itemTap,this),this._ztimer.addEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),this._scroll.addEventListener(eui.UIEvent.CHANGE,this.movelistmove,this)},i.prototype.removeEvent=function(){uniLib.Global.removeEventListener(t.ClubConst.ReturnMatchGroup,this.setDate,this),uniLib.Global.removeEventListener(t.ClubConst.JoinMemberListMatch,this.showRedPoint,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.deskList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.itemTap,this),this._scroll.removeEventListener(eui.UIEvent.CHANGE,this.movelistmove,this)},i.prototype.destroyTimer=function(){this._ztimer&&(this._ztimer.removeEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),this._ztimer.stop(),this._ztimer=null)},i.prototype.movelistmove=function(t){var e;e=-this.deskList.scrollH/this.deskList.contentWidth*(this.bg.width/2),egret.Tween.get(this.bg).to({x:e},1)},i.prototype.setDate=function(e){var i=e.param;if(i)if(this._curMath=i.curMath,this._curMath){this._clubMsgMcPanel.getclubmsg(this._curMath.clubNotice),t.ClubData.getInstance().clubmatchid=this._curMath.matchId,uniLib.UserInfo.uid==this._curMath.ownerid||uniLib.UserInfo.uid.toString()==this._curMath.masterid?t.ClubData.getInstance().isclubmanagor=1:t.ClubData.getInstance().isclubmanagor=0,this.title.text=this._curMath.matchName?this._curMath.matchName:this._curMath.matchId.toString(),this.gameplay.text=this._curMath.gameName,this.play.text="老友圈号:"+this._curMath.matchId,this.floorNumTxt.text=this._curMath.floorId+"楼",this.play.touchEnabled=!0,this.play.addEventListener(egret.TouchEvent.TOUCH_TAP,this.copyid,this),this._deskList=i.curMath.roomList,this.personNum.text=this._curMath.onlineUserNum+"",this.gameTypeTxt.text=this._curMath.userNbr+"人   "+this._curMath.gameNbr+"局",this.gameIconImg.source=t.ClubData.getInstance().getGameIcon(this._curMath.gameId);var n=[];if(Array.isArray(this._deskList)&&(n=this._deskList.concat()),n.length<24)for(var o=n.length,s=0;24-o>s;s++){var r=new Cmd.MathGroupRoomInfo;r.state=8,n.push(r)}this._dataArr?this._dataArr.replaceAll(n):(this._dataArr=new eui.ArrayCollection(n),this.deskList.dataProvider=this._dataArr)}else uniLib.TipsUtils.showTipsDownToUp("不存在此老友圈 !"),this.destroyTimer(),this.removePop()},i.prototype.timerFunc=function(t){var e=new Cmd.RequestMatchGroupCmd_C;e.isClub=1,e.matchId=this._curMath.matchId,e.floorId=this._curMath.floorId,NetMgr.tcpSend(e)},i.prototype.showRedPoint=function(t){var e=t.param;this.joinMember=[],e&&e.list&&e.list instanceof Array&&(this.joinMember=e.list),this.joinMember&&this.joinMember.length>0?(uniLib.UserInfo.uid==this._curMath.ownerid||uniLib.UserInfo.uid.toString()==this._curMath.masterid)&&this.addRedPoint():this.removeRedPoint()},i.prototype.addRedPoint=function(){this.redPoint.visible=!0,egret.Tween.get(this.redPoint,{loop:!0}).to({alpha:1},500).to({alpha:0},500)},i.prototype.removeRedPoint=function(){this.redPoint.visible=!1,egret.Tween.removeTweens(this.redPoint)},i.prototype.copyid=function(t){uniLib.ZQGameSdk.nativeCopyStr(this.play.text),uniLib.TipsUtils.showTipsDownToUp("复制成功"+this.play.text)},i.prototype.onClickTap=function(e){var i=this;if(e.target==this.closeBtn)this.destroyTimer(),t.ClubModuleMgr.getInstance().removeClubDeskPanel();else if(e.target==this.fastEnterBtn){this.destroyTimer(),t.ClubModuleMgr.getInstance().removeClubDeskPanel();var n=new Cmd.EnterRoomCmd_C;n.floorId=this._curMath.floorId,n.roomId=this._curMath.matchId,NetMgr.tcpSend(n)}else if(e.target==this.createBtn)t.ClubModuleMgr.getInstance().removeClubDeskPanel(),t.ClubModuleMgr.getInstance().showCreateClubPanel();else if(e.target==this.swtichBtn)t.ClubModuleMgr.getInstance().showAllClubListPanel(function(){var t=new Cmd.HistoryMatchIdListMatchGroupCmd_C;t.isClub=1,NetMgr.tcpSend(t)});else if(e.target==this.shareBtn)this.onShareTap();else if(e.target==this.applyListBtn)uniLib.UserInfo.uid==this._curMath.ownerid||uniLib.UserInfo.uid.toString()==this._curMath.masterid?(t.ClubData.getInstance().clubChoice=3,t.ClubSendMgr.requestRequestMatchGroupCmd(this._curMath.matchId)):uniLib.TipsUtils.showTipsDownToUp("您不是群主，暂无权限操作!");else if(e.target==this.memberListBtn||e.target==this.personNum||e.target==this.zaixian)t.ClubModuleMgr.getInstance().showClubPlayerListPanel(function(){var t=new Cmd.RequestMemberInfoMatchGroupCmd_C;t.matchId=i._curMath.matchId,NetMgr.tcpSend(t)});else if(e.target==this.queryFightingBtn)LobbyModuleMgr.getInstance().showRecordPanel();else if(e.target==this.boxManageBtn)if(uniLib.UserInfo.uid==this._curMath.ownerid||uniLib.UserInfo.uid.toString()==this._curMath.masterid){t.ClubData.getInstance().clubChoice=1;var o=new Cmd.RequestMatchGroupCmd_C;o.matchId=this._curMath.matchId,NetMgr.tcpSend(o)}else uniLib.TipsUtils.showTipsDownToUp("您不是群主，暂无权限操作!");else if(e.target==this.noticeBtn){var s=new Cmd.ClubNoticeMatchGroupCmd_CS;s.matchId=this._curMath.matchId,NetMgr.tcpSend(s),t.ClubModuleMgr.getInstance().showClubNoticePanel()}else if(e.target==this.switchFloorBtn)t.ClubModuleMgr.getInstance().ClubNewBoxPanel(this._curMath);else if(e.target==this.detailsBtn||e.target==this.detailsBtn0||e.target==this.gameIconImg)this.showClubFloordetails(),this.clubFloordetails&&this.clubFloordetails.setdeskDate(this._curMath);else if(e.target==this.floorUpBtn){if(Array.isArray(this._curMath.floorList))if(this._curMath.floorList.length>1){var s=new Cmd.RequestMatchGroupCmd_C;s.matchId=this._curMath.matchId,s.isClub=1;for(var r=0;r<this._curMath.floorList.length;r++)this._curMath.floorId==this._curMath.floorList[r].floorId&&(r-1>=0?s.floorId=this._curMath.floorList[r-1].floorId:s.floorId=this._curMath.floorList[this._curMath.floorList.length-1].floorId);t.ClubData.getInstance().isclubchangefloor=1,NetMgr.tcpSend(s)}else uniLib.TipsUtils.showTipsDownToUp("暂时只有1层包厢，无法切换!")}else if(e.target==this.floorDownBtn&&Array.isArray(this._curMath.floorList))if(this._curMath.floorList.length>1){var s=new Cmd.RequestMatchGroupCmd_C;s.matchId=this._curMath.matchId,s.isClub=1;for(var r=0;r<this._curMath.floorList.length;r++)this._curMath.floorId==this._curMath.floorList[r].floorId&&(this._curMath.floorList.length>=r+2?s.floorId=this._curMath.floorList[r+1].floorId:s.floorId=this._curMath.floorList[0].floorId);t.ClubData.getInstance().isclubchangefloor=1,NetMgr.tcpSend(s)}else uniLib.TipsUtils.showTipsDownToUp("暂时只有1层包厢，无法切换!")},i.prototype.showClubFloordetails=function(){this.clubFloordetails=new t.ClubFloordetails,uniLib.PopUpMgr.addPopUp(this.clubFloordetails,null,!0,!0,0,uniLib.PopUpEffect.CENTER)},i.prototype.removeClubFloordetails=function(){this.clubFloordetails&&(uniLib.PopUpMgr.removePopUp(this.clubFloordetails),this.clubFloordetails=null)},i.prototype.onShareTap=function(){var t=this._curMath.matchId;this.shareInfo=this._curMath?this._curMath.shareInfo:null;var e=new uniLib.WXShareVo;if(e.shareWay=0,""==uniLib.ZQGameSdk.defaultWXShareVo.webpageUrl&&LobbyDataCache.bundleInfo&&LobbyDataCache.bundleInfo.weixin&&LobbyDataCache.bundleInfo.weixin.wbappid){var i=uniLib.UserInfo.nickName;i.length>8&&(i=i.slice(0,8)),e.webpageUrl="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+LobbyDataCache.bundleInfo.weixin.wbappid+"&redirect_uri=http://wx.zqgame.com/addons/zqgame/gameshare.php?appid="+LobbyDataCache.bundleInfo.weixin.wbappid+"&response_type=code&scope=snsapi_base&state="+uniLib.CompressUtil.base64encode(uniLib.UserInfo.uid+"|"+t+"|"+i)+"&connect_redirect=1#wechat_redirect"}else e.webpageUrl=uniLib.ZQGameSdk.defaultWXShareVo.webpageUrl+"?uid="+uniLib.UserInfo.uid+"&nickName="+uniLib.UserInfo.nickName;e.title=this.shareInfo&&this.shareInfo.title?this.shareInfo.title.replace("房号","老友圈"):"",e.description=this.shareInfo&&this.shareInfo.content?this.shareInfo.content.replace("房号","老友圈"):"",uniLib.Global.isWxGame()?(e.shareType=Cmd.ShareType.enterRoom,e.wgShareData=JSON.stringify({roomId:t})):e.roomId=JSON.stringify({matchId:t}),uniLib.Global.dispatchEvent(uniLib.ZqEvent.SHARE,e,!0)},i.prototype.itemTap=function(t){if(this.showClubRoomdetails(),this.clubRoomdetails){this.clubRoomdetails.setDate(this._curMath);var e=this.deskList.selectedItem;this.clubRoomdetails.setUserDate(e)}},i.prototype.showClubRoomdetails=function(){this.clubRoomdetails=new t.ClubRoomdetails,this.clubRoomdetails.addEventListener(ClubUIEventConst.JOIN_CLUBROOM,this.removeTimer,this),uniLib.PopUpMgr.addPopUp(this.clubRoomdetails,null,!0,!0,0,uniLib.PopUpEffect.CENTER)},i.prototype.removeClubRoomdetails=function(){this.clubRoomdetails&&(this.clubRoomdetails.removeEventListener(ClubUIEventConst.JOIN_CLUBROOM,this.removeTimer,this),uniLib.PopUpMgr.removePopUp(this.clubRoomdetails),this.clubRoomdetails=null)},i.prototype.removeTimer=function(){this._ztimer.stop(),t.ClubModuleMgr.getInstance().removeClubDeskPanel(),this.removeClubRoomdetails()},i}(commonpanel.LobbyBaseEuiPanel);t.ClubDeskPanel=e,__reflect(e.prototype,"clubnew.ClubDeskPanel")}(clubnew||(clubnew={}));var clubnew;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ClubEnterRemarksSkin",t}return __extends(i,e),i.prototype.initUI=function(){this._closebtn.setColorMatrix()},i.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),uniLib.Global.addEventListener(t.ClubConst.NotifyImportNoteCmd,this.setDate,this),this.remarksText.addEventListener(egret.TextEvent.FOCUS_OUT,uniLib.ZQGameSdk.hideVk,this)},i.prototype.removEvent=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),uniLib.Global.removeEventListener(t.ClubConst.NotifyImportNoteCmd,this.setDate,this),this.remarksText.removeEventListener(egret.TextEvent.FOCUS_OUT,uniLib.ZQGameSdk.hideVk,this)},i.prototype.setDate=function(t){var e=t.param;this.roomId=e.roomId,this.lobbyId=e.lobbyId,this.preBestRoomId=e.preBestRoomId,this.clubText.text="您正在申请进入老友圈“"+this.roomId+"”"},i.prototype.onClickTap=function(t){if(t.target==this.yesBtn){var i=new Cmd.EnterRoomCmd_C;i.lobbyId=this.lobbyId,i.roomId=this.roomId,i.preBestRoomId=this.preBestRoomId;var n=this.remarksText.text;this.remarksText?i.note=n:i.note="",NetMgr.tcpSend(i),e.prototype.removePop.call(this)}else t.target==this._closebtn&&e.prototype.removePop.call(this)},i}(commonpanel.LobbyBaseEuiPanel);t.ClubEnterRemarks=e,__reflect(e.prototype,"clubnew.ClubEnterRemarks")}(clubnew||(clubnew={}));var clubnew;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="ClubRoomdetailsSkin",e}return __extends(e,t),e.prototype.initUI=function(){},e.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},e.prototype.removeEvent=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},e.prototype.setDate=function(t){t&&(this.info=t,this.gameText.text=this.info.gameName,this.gnumberText.text=this.info.gameNbr.toString()+"局",this.info.gameNbr>=49&&(this.gnumberText.text=Math.round(this.info.gameNbr)+"课"),4182==this.info.gameId&&(this.gnumberText.text=Math.round(this.info.gameNbr)+"锅底"),this.playText.text=this.info.playTypeDesc,this.pnumberText.text=this.info.userNbr+"人",this.enterRoomBtn.visible=!1)},e.prototype.setdeskDate=function(t){t&&(this.deskInfo=t,this.gameText.text=this.deskInfo.gameName,this.gnumberText.text=this.deskInfo.gameNbr.toString()+"局",this.deskInfo.gameNbr>=49&&(this.gnumberText.text=Math.round(this.deskInfo.gameNbr)+"课"),4182==this.deskInfo.gameId&&(this.gnumberText.text=Math.round(this.deskInfo.gameNbr)+"锅底"),this.playText.text=this.deskInfo.playTypeDesc,this.pnumberText.text=this.deskInfo.userNbr+"人",this.enterRoomBtn.visible=!1)},e.prototype.onClickTap=function(e){e.target==this.closeBtn&&t.prototype.removePop.call(this)},e}(commonpanel.LobbyBaseEuiPanel);t.ClubFloordetails=e,__reflect(e.prototype,"clubnew.ClubFloordetails")}(clubnew||(clubnew={}));var clubnew;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="ClubItemDeskSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){for(var t=0;t<this.deskGroup.numChildren;t++)this.deskGroup.getChildAt(t).visible=!1;if(this.info=this.data,this.info.state&&8==this.info.state)this.personTxet.visible=this.head.visible=!1,this.state.visible=!1,this.gamesNumberText.visible=!1;else{this.gamesNumberText.visible=!1;var e=null!=this.info.list&&Array.isArray(this.info.list)?this.info.list.length:0;if(this.personTxet.text=e+"/"+this.info.userNbr,this.head.visible=this.personTxet.visible=!0,this.info.list&&Array.isArray(this.info.list))for(var t=0;t<this.info.list.length&&4!=t;t++)0==t?(this.headbg1.source=this.info.list[t].headUrl,this.headbg1.width=46,this.headbg1.height=46,this.headbg1.visible=!0,this.kuang1.visible=!0):1==t?(this.headbg2.source=this.info.list[t].headUrl,this.headbg2.width=46,this.headbg2.height=46,this.headbg2.visible=!0,this.kuang2.visible=!0):2==t?(this.headbg3.source=this.info.list[t].headUrl,this.headbg3.width=46,this.headbg3.height=46,this.headbg3.visible=!0,this.kuang3.visible=!0):3==t&&(this.headbg4.source=this.info.list[t].headUrl,this.headbg4.width=46,this.headbg4.height=46,this.headbg4.visible=!0,this.kuang4.visible=!0);
this.info.state?1==this.info.state&&(this.state.source="club_json.club_ingame",this.state.visible=!0,this.gamesNumberText.visible=!0,this.gamesNumberText.text="   第"+this.info.curGameNbr+"/"+this.info.gameNbr+"局",this.info.gameNbr>=49&&(this.gamesNumberText.text="   第"+this.info.curGameNbr+"局")):(this.state.source="club_json.club_waiting",this.state.visible=!0)}},e}(eui.ItemRenderer);t.ClubItemDesk=e,__reflect(e.prototype,"clubnew.ClubItemDesk")}(clubnew||(clubnew={}));var clubnew;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.skinName="ClubManageChangeBWSkin",i.playerinfo=t,i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i.prototype.initUI=function(){this.updateDate(),this.closeBtn.setColorMatrix()},i.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.removeEvent=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.updateDate=function(){switch(this.idTxt.text=this.playerinfo.uid+"",this.nameTxt.text=this.playerinfo.nickname,this.playerinfo.type){case 0:this.youkeBtn.selected=!0;break;case 1:this.whiteBtn.selected=!0;break;case 2:this.blackBtn.selected=!0}this["switch"]()},i.prototype.onClickTap=function(e){if(e.target==this.closeBtn)uniLib.PopUpMgr.removePopUp(this);else if(e.target==this.sureBtn){var i=new Cmd.OperateMemberListMatchGroupCmd_C;i.reply=this.chosenum,i.uid=this.playerinfo.uid,i.matchId=t.ClubManagePanel.Instanc.selectMatchId,NetMgr.tcpSend(i),uniLib.PopUpMgr.removePopUp(this)}else(e.target==this.youkeBtn||e.target==this.whiteBtn||e.target==this.blackBtn)&&(e.target.selected=!0,this["switch"]())},i.prototype["switch"]=function(){1==this.youkeBtn.selected?this.chosenum=0:1==this.whiteBtn.selected?this.chosenum=2:1==this.blackBtn.selected&&(this.chosenum=3)},i}(commonpanel.LobbyBaseEuiPanel);t.ClubManageChangeBWPanel=e,__reflect(e.prototype,"clubnew.ClubManageChangeBWPanel")}(clubnew||(clubnew={}));var clubnew;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.matchIdList=[],t.waitList=new Array,t.skinName="ClubManageSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.width=uniLib.Global.screenWidth,this.height=uniLib.Global.screenHeight},i.prototype.destroy=function(){if(e.prototype.destroy.call(this),this._messageList&&this._messageList.numChildren)for(var t=this._messageList.numChildren-1;t>=0;t--){var i=this._messageList.getChildAt(t);i.destroy()}this._dataArr=null},i.prototype.initUI=function(){i.Instanc=this,this._closeBtn.setColorMatrix(),this._matchList.itemRenderer=t.MatchRadioButton,this.updataMatchList(),this.updataMessageList(),this.updataMemeberList(),this._detailsGroup.visible=this._messageGroup.visible=this._memberGroup.visible=this._fightingGroup.visible=this._blackandwhiteGroup.visible=!1,this.uidEditableText.restrict="0-9",this.uidEditableText.inputType=egret.TextFieldInputType.TEL,this.removeRedPoint(),uniLib.Global.addEventListener(t.ClubConst.ReturnMatchGroupManage,this.initReturnMatchGroup,this),uniLib.Global.addEventListener(t.ClubConst.MemberInfoMatchGroup,this.initMemberList,this),uniLib.Global.addEventListener(t.ClubConst.JoinMemberListManage,this.JoinMemberListMatch,this)},i.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this._matchList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onMatchListTap,this),this._matchTableList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onTableListTap,this)},i.prototype.removeEvent=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this._matchList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onMatchListTap,this),this._matchTableList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onTableListTap,this),this.removeRedPoint(),uniLib.Global.removeEventListener(t.ClubConst.ReturnMatchGroupManage,this.initReturnMatchGroup,this),uniLib.Global.removeEventListener(t.ClubConst.MemberInfoMatchGroup,this.initMemberList,this),uniLib.Global.removeEventListener(t.ClubConst.JoinMemberListManage,this.JoinMemberListMatch,this)},i.prototype.OnOpen=function(){this._leftGroup.x=-735,this._rightGroup.x=this.width,egret.Tween.get(this._leftGroup).to({x:0},300),egret.Tween.get(this._rightGroup).to({x:this.width-372},300)},i.prototype.OnClose=function(){egret.Tween.get(this._leftGroup).to({x:-735},300),egret.Tween.get(this._rightGroup).to({x:this.width},300).call(function(){return t.ClubModuleMgr.getInstance().removeClubManagePanel()})},i.prototype.updataMatchList=function(){this._dataArr?this._dataArr.replaceAll(this.matchIdList):(this._dataArr=new eui.ArrayCollection(this.matchIdList),this._matchList.dataProvider=this._dataArr)},i.prototype.updataMessageList=function(){this._messageList.itemRenderer=t.MatchMessageItem,this.joinNewMember&&this.joinNewMember.length>0?this.msgImg.visible=!1:this.msgImg.visible=!0,this._messageList.dataProvider=new eui.ArrayCollection(this.joinNewMember)},i.prototype.updataFightingList=function(){this.fightingList.itemRenderer=t.MatchFightingItem,this.fightingList.dataProvider=new eui.ArrayCollection(this.roomList)},i.prototype.updataMemeberList=function(){this.memeberList.itemRenderer=t.MatchMemberItem,this.memeberList.dataProvider=new eui.ArrayCollection(this.member)},i.prototype.updataTableList=function(){this._matchTableList.itemRenderer=t.MatchTableItem,this.roomList&&this.roomList.length>0?this.roommsgImg.visible=!1:this.roommsgImg.visible=!0,this.roomList.forEach(function(t){Array.isArray(t.list)||(t.list=[])}),this._matchTableList.dataProvider=new eui.ArrayCollection(this.roomList)},i.prototype.addRedPoint=function(){var t=this.messageButton.skin.redPoint;t.visible=!0,egret.Tween.get(t,{loop:!0}).to({alpha:1},500).to({alpha:0},500)},i.prototype.removeRedPoint=function(){var t=this.messageButton.skin.redPoint;t.visible=!1,egret.Tween.removeTweens(t)},i.prototype.updataDetails=function(t){if(t){this.ownerid=t.ownerid;var e=t&&1==t.state?1:0;this._clubtypebtn.currentState=1==e?"down":"up",this.settypeBtnStatus(),t&&t.openNbrs&&(this.todaynum.text=""+t.openNbrs[0],this.yesterdaynum.text=""+t.openNbrs[1],this.sevendaynum.text=""+t.openNbrs[2],this.thirtydaynum.text=""+t.openNbrs[3]),this.roomList=t&&t.roomList instanceof Array?t.roomList:[],this.updataTableList(),this.updataFightingList();for(var i=t?t.matchId:null,n=0;n<this.matchIdList.length;n++)if(this.matchIdList[n]==i){this._matchList.selectedIndex=n;break}this.shareInfo=t?t.shareInfo:null}},i.prototype.initReturnMatchGroup=function(e){var i=e.param;if(Array.isArray(i.matchIdList)||t.ClubModuleMgr.getInstance().closeClubManagePanel(),this.waitList=[],this.matchIdList=i&&i.matchIdList&&i.matchIdList instanceof Array?i.matchIdList:[],this.waitList=null!=i&&null!=i.curMath&&null!=i.curMath.waitUserList&&i.curMath.waitUserList instanceof Array&&i.curMath.waitUserList.length>0?i.curMath.waitUserList:[],this.updataMatchList(),this.matchIdList.length>4?this.morelistImg.visible=!0:this.morelistImg.visible=!1,this.updataDetails(i?i.curMath:null),i&&i.matchIdList&&i.matchIdList.length>0){switch(t.ClubData.getInstance().clubChoice){case 1:this.detailsButton.selected=!0;break;case 2:this.memberButton.selected=!0;var n=new Cmd.RequestMemberInfoMatchGroupCmd_C;n.matchId=this.selectMatchId,NetMgr.tcpSend(n);break;case 3:this.messageButton.selected=!0;break;case 4:this.fightingButton.selected=!0}this.switchWindow()}this.updataButtonEnabled()},i.prototype.updataButtonEnabled=function(){var t=this.matchIdList&&this.matchIdList.length>0?!0:!1;this.detailsButton.enabled=t,this.memberButton.enabled=t,this.messageButton.enabled=t,this.fightingButton.enabled=t,0==t&&(this._detailsGroup.visible=t,this._messageGroup.visible=t,this._memberGroup.visible=t,this._fightingGroup.visible=t)},i.prototype.initMemberList=function(t){var e=t.param;e.whitelist=e.whitelist&&e.whitelist instanceof Array?e.whitelist:[],e.blacklist=e.blacklist&&e.blacklist instanceof Array?e.blacklist:[];for(var i=0,n=e.whitelist;i<n.length;i++){var o=n[i];o.type=1}for(var s=0,r=e.blacklist;s<r.length;s++){var o=r[s];o.type=2}this.member=e.whitelist.concat(e.blacklist),this.updataMemeberList()},i.prototype.initHistory=function(t){!t||t.matchId!=this.selectMatchId},i.prototype.JoinMemberListMatch=function(e){var i=this,n=e.param;this.joinMember=[],this.joinNewMember=[],t.ClubData.getInstance().matchid=this.selectMatchId,n&&n.list&&n.list instanceof Array&&(this.joinMember=n.list,n.list.forEach(function(e){e.matchId==t.ClubData.getInstance().matchid&&i.joinNewMember.push(e)})),this.updataMessageList(),this.joinNewMember&&this.joinNewMember.length>0?this.addRedPoint():this.removeRedPoint()},i.prototype.switchWindow=function(){this._detailsGroup.visible=this._messageGroup.visible=this._memberGroup.visible=this._fightingGroup.visible=this._blackandwhiteGroup.visible=!1,this.detailsButton.selected?this._detailsGroup.visible=!0:this.memberButton.selected?this._memberGroup.visible=!0:this.messageButton.selected?this._messageGroup.visible=!0:this.fightingButton.selected?this._fightingGroup.visible=!0:this.blackwhiteBtn.selected&&(this._blackandwhiteGroup.visible=!0)},i.prototype.onClickTap=function(e){if(e.target==this.detailsButton||e.target==this.memberButton||e.target==this.messageButton||e.target==this.fightingButton||e.target==this.blackwhiteBtn){if(e.target.selected=!0,this.switchWindow(),e.target==this.memberButton){var n=new Cmd.RequestMemberInfoMatchGroupCmd_C;n.matchId=this.selectMatchId,NetMgr.tcpSend(n)}}else if(e.target==this._closeBtn||e.target==this.rectbg)t.ClubModuleMgr.getInstance().closeClubManagePanel();else{if(e.target==this._clubtypebtn){var o=this;this.settypeBtnStatus();var s=function(){var t=new Cmd.OperateMatchGroupCmd_C;"up"==o._clubtypebtn.currentState?t.state=1:t.state=0,t.matchId=o.selectMatchId,NetMgr.tcpSend(t)},r=new t.MatchMsgBox;return"up"==this._clubtypebtn.currentState?r.setData("温馨提示","您确定要暂停该老友圈吗？",["确定","取消"],[s]):r.setData("温馨提示","恢复老友圈会清除之前战绩,重新开始老友圈统计,继续吗？",["确定","取消"],[s]),void uniLib.PopUpMgr.addPopUp(r,null,!0,!0,0,uniLib.PopUpEffect.CENTER)}if(e.target==this._dissclubbtn){var r=new t.MatchMsgBox,a=this;this.ownerid;var s=function(){var e=a.selectMatchId;uniLib.UserInfo.uid==a.ownerid&&e==t.ClubData.getInstance().clubmatchid&&t.ClubModuleMgr.getInstance().removeClubDeskPanel();var i=new Cmd.RequestDeleteMatchGroupCmd_C;i.matchId=a.selectMatchId,NetMgr.tcpSend(i)};r.setData("温馨提示","您确定要解散该老友圈吗？",["确定","取消"],[s]),uniLib.PopUpMgr.addPopUp(r,null,!0,!0,0,uniLib.PopUpEffect.CENTER)}else if(e.target==this.addWhiteButton||e.target==this.addBlackButton){var h=this.uidEditableText.text,l=Number(h);if(0/0==l||!l)return void uniLib.TipsUtils.showTipsDownToUp("请输入正确的玩家账号");var n=new Cmd.OperateMemberListMatchGroupCmd_C;Number(e.target.name);n.reply=e.target==this.addWhiteButton?2:3,n.uid=l,n.matchId=i.Instanc.selectMatchId,NetMgr.tcpSend(n)}else if(e.target==this._setbtn){var c=new Cmd.RequestChangeMatchGroupCmd_C;c.matchId=i.Instanc.selectMatchId,NetMgr.tcpSend(c)}else e.target==this._refreshbtn&&this.onMatchListTap(null)}},i.prototype.showWaitPlayerList=function(){if(this.waitList.length>0){var e=new t.ActiveRoomInformationPanel;uniLib.PopUpMgr.addPopUp(e,null,!0,!0,0,uniLib.PopUpEffect.CENTER)}else uniLib.TipsUtils.showTipsDownToUp("当前房间没有等待玩家")},i.prototype.onShare=function(){var t=new uniLib.WXShareVo;t.shareWay=0;var e=uniLib.DisplayUtils.catchScreenToTex(this,new egret.Rectangle(this._memberGroup.x,this._memberGroup.y,this._memberGroup.width,this._memberGroup.height),.6),i=new egret.Bitmap(e);t.shareImageData=uniLib.DisplayUtils.catchScreen(i,new egret.Rectangle(this._memberGroup.x,this._memberGroup.y,this._memberGroup.width,this._memberGroup.height)),uniLib.ZQGameSdk.share(t,this.updataMemeberList,this)},i.prototype.onShareTap=function(){var t=this.selectMatchId,e=new uniLib.WXShareVo;if(e.shareWay=0,""==uniLib.ZQGameSdk.defaultWXShareVo.webpageUrl&&LobbyDataCache.bundleInfo&&LobbyDataCache.bundleInfo.weixin&&LobbyDataCache.bundleInfo.weixin.wbappid){var i=uniLib.UserInfo.nickName;i.length>8&&(i=i.slice(0,8)),e.webpageUrl="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+LobbyDataCache.bundleInfo.weixin.wbappid+"&redirect_uri=http://wx.zqgame.com/addons/zqgame/gameshare.php?appid="+LobbyDataCache.bundleInfo.weixin.wbappid+"&response_type=code&scope=snsapi_base&state="+uniLib.CompressUtil.base64encode(uniLib.UserInfo.uid+"|"+t+"|"+i)+"&connect_redirect=1#wechat_redirect"}else e.webpageUrl=uniLib.ZQGameSdk.defaultWXShareVo.webpageUrl+"?uid="+uniLib.UserInfo.uid+"&nickName="+uniLib.UserInfo.nickName;e.title=this.shareInfo&&this.shareInfo.title?this.shareInfo.title.replace("房号","老友圈"):"",e.description=this.shareInfo&&this.shareInfo.content?this.shareInfo.content.replace("房号","老友圈"):"",uniLib.ZQGameSdk.share(e,null,this)},Object.defineProperty(i.prototype,"selectMatchId",{get:function(){return this.matchIdList[this._matchList.selectedIndex]},enumerable:!0,configurable:!0}),i.prototype.onMatchListTap=function(t){var e=new Cmd.RequestMatchGroupCmd_C;e.matchId=this.selectMatchId,NetMgr.tcpSend(e)},i.prototype.onTableListTap=function(t){var e=this._matchTableList.selectedItem,i=new Cmd.ActiveDetailRoomCmd_C;i.roomId=e.roomId,i.matchId=this.selectMatchId,NetMgr.tcpSend(i)},i.prototype.settypeBtnStatus=function(){"up"==this._clubtypebtn.currentState?this._clubtypebtn.label="暂停开房":this._clubtypebtn.label="恢复开房"},i}(commonpanel.LobbyBaseEuiPanel);t.ClubManagePanel=e,__reflect(e.prototype,"clubnew.ClubManagePanel")}(clubnew||(clubnew={}));var clubnew;!function(t){var e=function(){function t(){}return t.RES_JSON="resource/clubnew/clubnew.res_efc694ad.json",t.THM_JSON="resource/clubnew/gameEui_bc9e9b1e.json",t.PUB_CLUBNEW="pub_clubnew",t.ActiveDetailRoom="ActiveDetailRoom",t.HistoryMatchIdList="HistoryMatchIdList",t.ReturnMatchGroup="ReturnMatchGroup",t.ReturnMatchGroupManage="ReturnMatchGroupManage",t.LatestMatchRoom="LatestMatchRoom",t.JoinMemberListMatch="JoinMemberListMatch",t.JoinMemberListManage="JoinMemberListManage",t.NotifyImportNoteCmd="NotifyImportNoteCmd",t.CLUB_NOTICE="CLUB_NOTICE",t.MemberInfoMatchGroup="MemberInfoMatchGroup",t.UserInfoSearchLobby="UserInfoSearchLobby",t.ReturnYellowList="ReturnYellowList",t.LEAVE_MATCHGROUP2="LEAVEMATCHGROUP2",t}();t.ClubConst=e,__reflect(e.prototype,"clubnew.ClubConst")}(clubnew||(clubnew={}));var clubnew;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ClubNewBoxItemSkin",t.addListener(),t}return __extends(i,e),i.prototype.addListener=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.removeListener=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.dataChanged=function(){this.info=this.data,this.info.gameId?(this._gameIconImg.source=t.ClubData.getInstance().getGameIcon(this.info.gameId),this._gameTypeTxt.text=this.info.gameName,this._gameNumTxt.text=this.info.gameNbr+"局",this._personNumTxt.text=this.info.userNbr+"人",this._createBtn.visible=!1,this._switchBtn.visible=!0,this._msgTxt.visible=!1,this._detailsBtn.visible=!0,this._setBtn.visible=!1,this._closeBtn.visible=!1,1==t.ClubData.getInstance().isclubmanagor&&(this._detailsBtn.visible=!1,this._setBtn.visible=!0,this._closeBtn.visible=!0)):(this._gameIconImg.visible=!1,this._gameTypeTxt.visible=!1,this._gameNumTxt.visible=!1,this._personNumTxt.visible=!1,this._createBtn.visible=!0,this._switchBtn.visible=!1,this._msgTxt.visible=!0,this._detailsBtn.visible=!1,this._setBtn.visible=!1,this._closeBtn.visible=!1)},i.prototype.onClickTap=function(e){if(e.target==this._createBtn)t.ClubModuleMgr.getInstance().showCreateClubPanel(),t.ClubData.getInstance().isnewfloor=1,t.ClubData.getInstance().newfloor=this.info.floorId;else if(e.target==this._switchBtn){var i=new Cmd.RequestMatchGroupCmd_C;i.matchId=t.ClubData.getInstance().clubmatchid,i.isClub=1,i.floorId=this.info.floorId,t.ClubData.getInstance().isclubchangefloor=1,NetMgr.tcpSend(i),t.ClubModuleMgr.getInstance().closeClubNewBoxPanel()}else if(e.target==this._detailsBtn)this.showClubFloordetails(),this.clubFloordetails&&this.clubFloordetails.setDate(this.info);else if(e.target==this._setBtn)t.ClubSendMgr.sendOFMGCmd_CS(t.ClubData.getInstance().clubmatchid,this.info.floorId,2);else if(e.target==this._closeBtn){var n=this,o=function(){t.ClubSendMgr.sendOFMGCmd_CS(t.ClubData.getInstance().clubmatchid,n.info.floorId,4),t.ClubModuleMgr.getInstance().closeClubNewBoxPanel()},s=new t.MatchMsgBox;s.setData("温馨提示","是否确认删除该包厢吗？",["确定","取消"],[o]),uniLib.PopUpMgr.addPopUp(s,null,!0)}},i.prototype.showClubFloordetails=function(){this.clubFloordetails=new t.ClubFloordetails,uniLib.PopUpMgr.addPopUp(this.clubFloordetails,null,!0,!0,0,uniLib.PopUpEffect.CENTER)},i.prototype.removeClubFloordetails=function(){this.clubFloordetails&&(uniLib.PopUpMgr.removePopUp(this.clubFloordetails),this.clubFloordetails=null)},i}(eui.ItemRenderer);t.ClubNewBoxItemPanel=e,__reflect(e.prototype,"clubnew.ClubNewBoxItemPanel")}(clubnew||(clubnew={}));var clubnew;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i._curMath=t,i._floorList=t.floorList,i.skinName="ClubNewBoxSkin",i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.width=uniLib.Global.screenWidth,this.height=uniLib.Global.screenHeight},i.prototype.destroy=function(){if(e.prototype.destroy.call(this),this.floorList&&this.floorList.numChildren)for(var t=this.floorList.numChildren-1;t>=0;t--){var i=this.floorList.getChildAt(t);i.removeListener(),i=null}},i.prototype.initUI=function(){this.updateDate(),this.closeBtn.setColorMatrix()},i.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.removeEvent=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.updateDate=function(){switch(this._choice=this._curMath.floorId,this._choice){case 1:this.onefloor.visible=!0;break;case 2:this.twofloor.visible=!0;break;case 3:this.threefloor.visible=!0;break;case 4:this.fourfloor.visible=!0;break;case 5:this.fivefloor.visible=!0}for(var e=[],i=function(t){if(Array.isArray(n._floorList)&&n._floorList.forEach(function(i){i.floorId==t+1&&e.push(i)}),!e[t]){var i=new Cmd.FloorInfo;i.floorId=t+1,e.push(i)}},n=this,o=0;5>o;o++)i(o);this.floorList.itemRenderer=t.ClubNewBoxItemPanel,this.floorList.dataProvider=new eui.ArrayCollection(e)},i.prototype.onClickTap=function(t){(t.target==this.bgRect||t.target==this.closeBtn)&&this.OnClose()},i.prototype.OnOpen=function(){this.floorGroup.x=-600,egret.Tween.get(this.floorGroup).to({x:0},300)},i.prototype.OnClose=function(){egret.Tween.get(this.floorGroup).to({x:-600},300).call(function(){return t.ClubModuleMgr.getInstance().removeClubNewBoxPanel()})},i}(commonpanel.LobbyBaseEuiPanel);t.ClubNewBoxPanel=e,__reflect(e.prototype,"clubnew.ClubNewBoxPanel")}(clubnew||(clubnew={}));var clubnew;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="ClubNoticeSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.addEvent=function(){uniLib.Global.addEventListener(t.ClubConst.CLUB_NOTICE,this.showNotice,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},i.prototype.removeEvent=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),uniLib.Global.removeEventListener(t.ClubConst.MemberInfoMatchGroup,this.showNotice,this)},i.prototype.destroy=function(){this.removeEvent(),uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this)},i.prototype.showNotice=function(t){var e=t.param;e.content?(this.noticeTxt.text=e.content,this.notice.text=e.content):(this.noticeTxt.text="",this.notice.text="暂无公告"),1==e.bUpdate?(this.noticeTxt.visible=!0,this.notice.visible=!1):(this.noticeTxt.visible=!1,this.notice.visible=!0),this._bUpdate=e.bUpdate,this._matchid=e.matchId},i.prototype.onClick=function(t){if(t.target==this.closeBtn)e.prototype.removePop.call(this);else if(t.target==this.modifyBtn){if(1==this._bUpdate){var i=new Cmd.ClubNoticeMatchGroupCmd_CS;i.matchId=this._matchid,i.content=this.noticeTxt.text,NetMgr.tcpSend(i)}e.prototype.removePop.call(this)}},i}(commonpanel.LobbyBaseEuiPanel);t.ClubNoticePanel=e,__reflect(e.prototype,"clubnew.ClubNoticePanel")}(clubnew||(clubnew={}));var clubnew;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="ClubPlayerListHeadSkin",e.ownerGroup.visible=!1,e}return __extends(e,t),e.prototype.dataChanged=function(){this.info=this.data,this.headImg.source=this.info.headUrl,1==this.info.membertype&&(this.ownerGroup.visible=!0,this.ownerTxt.text="圈主"),2==this.info.membertype&&(this.ownerGroup.visible=!0,this.ownerTxt.text="管理员"),1==this.info.state?this.onlinestate.source="club_online":this.onlinestate.source="club_no_online";var t,e,i=this.info.nickname;for(e=this.getStrRealLength(i)>8?"...":"";this.getStrRealLength(i)>8;)t=i.length,i=i.substr(0,t-1);this.nameTxt.text=i+e},e.prototype.getStrRealLength=function(t){var e={GetLength:null};return e.GetLength=function(t){return Number(t.replace(/[\u0391-\uFFE5]/g,"aa").length)},e.GetLength(t)},e}(eui.ItemRenderer);t.ClubPlayerListHeadPanel=e,__reflect(e.prototype,"clubnew.ClubPlayerListHeadPanel")}(clubnew||(clubnew={}));var clubnew;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._list=[],t.skinName="ClubPlayerListSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.width=uniLib.Global.screenWidth,this.height=uniLib.Global.screenHeight,this.closeBtn.setColorMatrix()},i.prototype.addEvent=function(){uniLib.Global.addEventListener(t.ClubConst.MemberInfoMatchGroup,this.showList,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.headList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.itemTap,this)},i.prototype.removeEvent=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),uniLib.Global.removeEventListener(t.ClubConst.MemberInfoMatchGroup,this.showList,this),this.headList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.itemTap,this)},i.prototype.destroy=function(){this.removeEvent(),uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this)},i.prototype.showList=function(e){var i=e.param;this._list=i.whitelist,this._matchId=i.matchId,Array.isArray(this._list)&&(this.headList.itemRenderer=t.ClubPlayerListHeadPanel,this.headList.dataProvider=new eui.ArrayCollection(this._list))},i.prototype.itemTap=function(t){var e=this.headList.selectedItem,i=new Cmd.UserInfoSearchLobbyCmd_C;i.uid=e.uid,NetMgr.tcpSend(i)},i.prototype.onClick=function(t){(t.target==this.bgRect||t.target==this.closeBtn)&&this.OnClose()},i.prototype.OnOpen=function(){this.listGroup.x=-600,egret.Tween.get(this.listGroup).to({x:0},300)},i.prototype.OnClose=function(){egret.Tween.get(this.listGroup).to({x:-600},300).call(function(){return t.ClubModuleMgr.getInstance().removeClubPlayerListPanel()})},i}(commonpanel.LobbyBaseEuiPanel);t.ClubPlayerListPanel=e,__reflect(e.prototype,"clubnew.ClubPlayerListPanel")}(clubnew||(clubnew={}));var clubnew;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._head=[],t.skinName="ClubRoomdetailsSkin",t}return __extends(i,e),i.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.removeEvent=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.setDate=function(t){t&&(this.info=t,this.gameText.text=this.info.gameName,this.gnumberText.text=this.info.gameNbr.toString()+"局",this.info.gameNbr>=49&&(this.gnumberText.text=Math.round(this.info.gameNbr)+"课"),4182==this.info.gameId&&(this.gnumberText.text=Math.round(this.info.gameNbr)+"锅底"),this.playText.text=this.info.playTypeDesc,this.pnumberText.text="0/"+this.info.userNbr)},i.prototype.setUserDate=function(e){e&&(this.userInfo=e,this._head=e.list,Array.isArray(this._head)&&(this.headList.itemRenderer=t.ClubRoomdetailshead,this.headList.dataProvider=new eui.ArrayCollection(this._head),this.gnumberText.text=this.userInfo.gameNbr.toString()+"局",this.info.gameNbr>=49&&(this.gnumberText.text=Math.round(this.info.gameNbr)+"课"),4182==this.info.gameId&&(this.gnumberText.text=Math.round(this.info.gameNbr)+"锅底"),this.pnumberText.text=this._head.length+"/"+this.userInfo.userNbr,this.userInfo.playTypeDesc&&(this.playText.text=this.userInfo.playTypeDesc),this.userInfo.userNbr==this._head.length&&(this.enterRoomBtn.visible=!1)))},i.prototype.onClickTap=function(t){if(t.target==this.closeBtn)e.prototype.removePop.call(this);else if(t.target==this.enterRoomBtn){this.dispatchEventWith(ClubUIEventConst.JOIN_CLUBROOM);var i=new Cmd.EnterRoomCmd_C;this.userInfo.roomId?i.preBestRoomId=this.userInfo.roomId:i.preBestRoomId=0,i.floorId=this.info.floorId,i.roomId=this.info.matchId,NetMgr.tcpSend(i),e.prototype.removePop.call(this)}},i}(commonpanel.LobbyBaseEuiPanel);t.ClubRoomdetails=e,__reflect(e.prototype,"clubnew.ClubRoomdetails")}(clubnew||(clubnew={}));var clubnew;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="ClubRoomdetailsheadSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.head.source=t.headUrl,this._name.text=t.nickname},e}(eui.ItemRenderer);t.ClubRoomdetailshead=e,__reflect(e.prototype,"clubnew.ClubRoomdetailshead")}(clubnew||(clubnew={}));var clubnew;!function(t){var e=function(e){function i(){var t=e.call(this,"mjl_user_title",700,318)||this;return t.skinName="ClubUserInfoSkin",t.womanImg.visible=!1,t.manImg.visible=!1,t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),uniLib.Global.addEventListener(t.ClubConst.UserInfoSearchLobby,this.setdata,this)},i.prototype.removeEvent=function(){uniLib.Global.removeEventListener(t.ClubConst.UserInfoSearchLobby,this.setdata,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},i.prototype.destroy=function(){this.removeEvent(),uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this)},i.prototype.setdata=function(t){var e=t.param;e.userInfo&&(this.info=e.userInfo,this.headImg.source=this.info.headUrl,this.nameTxt.text=this.info.nickName,this.ipTxt.text="地址："+this.info.ip,this.idTxt.text="账号："+this.info.uid,"男"==this.info.gender?this.manImg.visible=!0:this.womanImg.visible=!0)},i.prototype.onClick=function(t){t.target==this.closeBtn&&e.prototype.removePop.call(this)},i}(commonpanel.LobbyBaseEuiPanel);t.ClubUserInfoPanel=e,__reflect(e.prototype,"clubnew.ClubUserInfoPanel")}(clubnew||(clubnew={}));var clubnew;!function(t){var e=function(t){function e(e){var i=t.call(this)||this;return i.skinName="CreateMatchSetSkin",i._data=e,i}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.initUI=function(){this._data instanceof Cmd.CreateRoomCmd_C?(this._req=this._data,this._state=1):(this._clubmss=this._data,this._req=this._data.createRoom,this._changeMatchId=this._data.matchId,this._state=2),this.setCreatReq(this._req),1==MJLobbyData.getInstance().lobbyConfig.clubPower&&(this._permissionCheck.selected=!0,this._checkType=!0),2==this._state?(this._sureSetBtn.visible=!0,this._creatBtn.visible=!1,this.showMatchData(this._clubmss)):(this._sureSetBtn.visible=!1,this._creatBtn.visible=!0)},e.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},e.prototype.removeEvent=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},e.prototype.showMatchData=function(t){null!=t&&(this._userIdInput.text=null!=t.otherManagerId?t.otherManagerId+"":"",this._clubNameInput.text=null!=t.matchName?t.matchName:"",this._permissionCheck.selected=null!=t.needAgree&&1==t.needAgree?!0:!1,this._checkType=this._permissionCheck.selected)},e.prototype.onClickTap=function(e){e.target==this._creatBtn?this.createMatchReq():e.target==this._sureSetBtn?this.settingHandel():e.target==this._permissionCheck||e.target==this._permissionLabel?this._checkType=this._permissionCheck.selected=!this._checkType:e.target==this.closeBtn&&t.prototype.removePop.call(this)},e.prototype.createMatchReq=function(){var t=new Cmd.CreateMatchGroupCmd_C;this._req&&(t.createRoom=this._req,t.isClub=1),t.needAgree=this._permissionCheck.selected?1:0,this._clubNameInput&&(t.matchName=this._clubNameInput.text),this._userIdInput&&(t.otherManagerId=Number(this._userIdInput.text)),NetMgr.tcpSend(t),uniLib.PopUpMgr.removePopUp(this)},e.prototype.settingHandel=function(){var t=new Cmd.ChangeMatchGroupCmd_C;t.needAgree=this._permissionCheck.selected?1:0,t.matchId=null!=this._changeMatchId?this._changeMatchId:0,this._clubNameInput&&(t.matchName=this._clubNameInput.text),this._userIdInput&&(t.otherManagerId=Number(this._userIdInput.text)),this._req&&(t.createRoom=this._req),NetMgr.tcpSend(t),uniLib.PopUpMgr.removePopUp(this)},e.prototype.setCreatReq=function(t){if(t&&(this._req=t,t.gameId)){MJLobbyData.getInstance().getGameCreateConfig(t.gameId)}},e}(commonpanel.LobbyBaseEuiPanel);t.CreateMatchSetPanel=e,__reflect(e.prototype,"clubnew.CreateMatchSetPanel")}(clubnew||(clubnew={}));var clubnew;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="MatchFightingItemSkin",t}return __extends(i,e),i.prototype.dataChanged=function(){var e=this.data;this.tableIdLabel.text="桌号"+e.roomId,this.timeLabel.text=LobbyUtils.changeTimeToStr(e.beginTime)+"~"+LobbyUtils.changeTimeToStr(e.endTime);var i=e.list;this.nameandscore.itemRenderer=t.MatchFightingNSPanel,this.nameandscore.dataProvider=new eui.ArrayCollection(i)},i}(eui.ItemRenderer);t.MatchFightingItem=e,__reflect(e.prototype,"clubnew.MatchFightingItem")}(clubnew||(clubnew={}));var clubnew;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="MatchFightingNSSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){this.info=this.data,this.names.text=this.info.nickname,null!=this.info.score&&(this.score.text=this.info.score+"")},e}(eui.ItemRenderer);t.MatchFightingNSPanel=e,__reflect(e.prototype,"clubnew.MatchFightingNSPanel")}(clubnew||(clubnew={}));var clubnew;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="MatchMemberItemSkin",t}return __extends(i,e),i.prototype.dataChanged=function(){var e=this.data;this.nameLabel.text=e.nickname,this.playerID.text=e.uid.toString(),this.playertype.text=t.DataManage.MatchMemberTypeToString(e.type),this.num.text=this.itemIndex+1+"",this.itemIndex%2==0&&(this.bg.source="club_manage_applyitem1"),e.headUrl&&(this.headImg.source=e.headUrl),this.changeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLabelTap,this)},i.prototype.onLabelTap=function(e){var i=this.data,n=new t.ClubManageChangeBWPanel(i);uniLib.PopUpMgr.addPopUp(n,null,!0,!0,0,uniLib.PopUpEffect.CENTER)},i}(eui.ItemRenderer);t.MatchMemberItem=e,__reflect(e.prototype,"clubnew.MatchMemberItem")}(clubnew||(clubnew={}));var clubnew;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="MatchMessageItemSkin",t.addEvent(),t}return __extends(i,e),i.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.destroy=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.dataChanged=function(){var t=this.data;
this.contenLabel.text=t.nickname+"",t.note?this.contenRemarks.text="备注："+t.note:this.contenRemarks.text="备注：无",t.headUrl&&(this.headImg.source=t.headUrl),this.itemIndex%2==0&&(this.bg.source="club_manage_applyitem2")},i.prototype.onClickTap=function(e){var i=this.data;if(e.target==this.disAgreeButton){var n=new Cmd.ReplyJoinMemberListMatchGroupCmd_C;n.matchId=t.ClubManagePanel.Instanc.selectMatchId,n.reply=0,n.uid=i.uid,NetMgr.tcpSend(n)}else if(e.target==this.agreeButton){var n=new Cmd.ReplyJoinMemberListMatchGroupCmd_C;n.matchId=t.ClubManagePanel.Instanc.selectMatchId,n.reply=1,n.uid=i.uid,NetMgr.tcpSend(n)}},i}(eui.ItemRenderer);t.MatchMessageItem=e,__reflect(e.prototype,"clubnew.MatchMessageItem")}(clubnew||(clubnew={}));var clubnew;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="MatchMsgBoxSkin",e}return __extends(e,t),e.prototype.initUI=function(){this._closebtn.setColorMatrix()},e.prototype.setData=function(t,e,i,n,o){void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=null),this.title.text="温馨提示",this.info.text=e,this._backFn=n,this._backObject=o,1==i.length?(this.confirm.x=220,this.confirm.visible=!0,this.cancel.visible=!1):2==i.length&&(this.confirm.x=66,this.confirm.visible=!0,this.cancel.visible=!0),n&&n[0]&&this.confirm.addEventListener(egret.TouchEvent.TOUCH_TAP,n[0],o),this._backFn&&this._backFn[1]&&this.cancel.addEventListener(egret.TouchEvent.TOUCH_TAP,this._backFn[1],o),this.confirm.addEventListener(egret.TouchEvent.TOUCH_TAP,this.destroy,this),this.cancel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.destroy,this),this._closebtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.destroy,this)},e.prototype.destroy=function(){t.prototype.removePop.call(this),this._backFn&&this._backFn[0]&&this.confirm.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._backFn[0],this._backObject),this._backFn&&this._backFn[1]&&this.cancel.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._backFn[1],this._backObject),this.confirm.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.destroy,this),this.cancel.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.destroy,this),this._closebtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.destroy,this)},e}(commonpanel.LobbyBaseEuiPanel);t.MatchMsgBox=e,__reflect(e.prototype,"clubnew.MatchMsgBox")}(clubnew||(clubnew={}));var clubnew;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="MatchRadioButtonSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.label.text=t+""},e}(eui.ItemRenderer);t.MatchRadioButton=e,__reflect(e.prototype,"clubnew.MatchRadioButton")}(clubnew||(clubnew={}));var clubnew;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="MatchTableItemSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){this.info=this.data;var t=null!=this.info.list&&Array.isArray(this.info.list)?this.info.list.length:0;this.contentLabel.text=this.info.roomId+"",void 0!=this.info.endTime?(this._gametype.text="游戏结束",this._gametype.textColor=10592673):this.info.state?1==this.info.state&&(this._gametype.text="游戏中",this._gametype.textColor=16629381):(this._gametype.text="等待中",this._gametype.textColor=4709236),this._gamename.text="包厢"+this.info.floorId+"("+this.info.gameName+")",this._gamenum.text=t+"/"+this.info.userNbr},e}(eui.ItemRenderer);t.MatchTableItem=e,__reflect(e.prototype,"clubnew.MatchTableItem")}(clubnew||(clubnew={}));