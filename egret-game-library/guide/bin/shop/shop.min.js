var __reflect=this&&this.__reflect||function(t,e,o){t.__class__=e,o?o.push(e):o=[e],t.__types__=t.__types__?o.concat(t.__types__):o},__extends=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);o.prototype=e.prototype,t.prototype=new o},shop;!function(t){var e=function(){function t(){}return t.RES_JSON="resource/shop/shop.res_f57dd3e4.json",t.THM_JSON="resource/shop/gameEui_326981d9.json",t.PUB_SHOP="pub_shop",t}();t.ShopConsts=e,__reflect(e.prototype,"shop.ShopConsts")}(shop||(shop={}));var shop;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="ShopItemSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this.data;this.diamond.text=e.shopName,this.price.text=e.price/100+"",RES.getRes("shop_icon"+e.iconId+"_png")&&(this.good_icon.source="shop_icon"+e.iconId+"_png")},e.prototype.destroy=function(){this.removeChildren()},e}(eui.ItemRenderer);t.ShopItem=e,__reflect(e.prototype,"shop.ShopItem")}(shop||(shop={}));var shop;!function(t){var e=function(e){function o(){var t=e.call(this)||this;return t.btnAry=[],t.skinName="ShopPanelSkin",t}return __extends(o,e),o.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.scroller.horizontalScrollBar=null,this.close_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.desc.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this);for(var o=ConfigMgr.getInstance().getGameListCfgById(NetMgr.getLoginCfg().lobbyId),n=0;n<o.wechatshopList.length;n++){var i=o.wechatshopList[n],s=ConfigMgr.getInstance().getShopCfgById(i),r=new t.ShopItem;s.iconId=n+1,r.data=s,r.x=260*n,this.itemGroup.addChild(r),this.btnAry.push(r),r.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this)}o.wechatshopList},o.prototype.onTouchHandler=function(t){if(t.currentTarget==this.close_btn)uniLib.PopUpMgr.removePopUp(this);else if(t.currentTarget==this.desc)uniLib.ZQGameSdk.nativeCopyStr("haopaokf"),uniLib.Global.isWxGame()||uniLib.TipsUtils.showTipsDownToUp("公众号已复制！");else{var e=this.btnAry.indexOf(t.currentTarget);e>-1&&this.checkSession(this.btnAry[e].data)}},o.prototype.checkSession=function(t){var e=this;return uniLib.Global.isWxGame()?void wx.login({success:function(o){var n=JSON.stringify({code:o.code});e.createOrder(t,n)},fail:function(){console.log("wx.login失败")}}):void this.createOrder(t)},o.prototype.createOrder=function(t,e){var o=new Pmd.CreatePlatOrderRequestSdkPmd_C;o.roleid=Number(NetMgr.UID),o.rolename="",o.originalmoney=t.price/100,o.ordermoney=t.price/100,o.goodid=t.shopId,o.goodnum=1;var n=ConfigMgr.getInstance().getGoodCfgById(t.shopGoods.goodId);o.goodname=n.goodName,o.gooddesc=n.goodName,o.redirecturl=uniLib.BrowersUtils.getLocationUrl(),e?o.extdata=e:o.extdata="",o.payplatid=326,NetMgr.tcpSend(o)},o.prototype.destroy=function(){for(var t=0;t<this.btnAry.length;t++)this.btnAry[t].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.btnAry[t].destroy();this.btnAry=null,this.close_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.desc.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.removeChildren()},o}(eui.Component);t.ShopPanel=e,__reflect(e.prototype,"shop.ShopPanel")}(shop||(shop={}));var ShopReciveMgr=function(){function t(){}return t}();__reflect(ShopReciveMgr.prototype,"ShopReciveMgr");var Cmd;!function(t){function e(t){return uniLib.TipsUtils.showTipsDownToUp("获取订单号成功，等待支付"),0!=t.result?void(2==t.result?uniLib.TipsUtils.showTipsDownToUp("今日已达最大充值限额(3千)",!0):uniLib.TipsUtils.showTipsDownToUp("下订单失败!",!0)):(t.roleid=NetMgr.getThirdPlatId(),uniLib.PayMgr.Instance.payByPmd(t),!0)}function o(t){uniLib.TipsUtils.showTipsDownToUp("充值成功"),uniLib.UserInfo.chips=Number(t.extdata)}t.OnCreatePlatOrderReturnSdkPmd_S=e,t.OnNotifyRechargeRequestSdkPmd_S=o}(Cmd||(Cmd={}));var eui;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.anchorOffsetX=this.width>>1,this.anchorOffsetY=this.height>>1,this.x+=this.width>>1,this.y+=this.height>>1},e.prototype.init=function(){this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancel,this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchReleaseOutside,this),this.addEventListener(egret.Event.REMOVED,this.dispose,this)},e.prototype.onTouchBegin=function(){this.scaleX=.9,this.scaleY=.9,RES.hasRes("buttonClick_mp3")&&uniLib.SoundMgr.instance.playSound("buttonClick_mp3")},e.prototype.onTouchEnd=function(){this.scaleX=1,this.scaleY=1},e.prototype.onTouchCancel=function(){this.scaleX=1,this.scaleY=1},e.prototype.onTouchMove=function(){this.scaleX=1,this.scaleY=1},e.prototype.onTouchReleaseOutside=function(){this.scaleX=1,this.scaleY=1},e.prototype.dispose=function(){this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancel,this),this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.removeEventListener(egret.Event.REMOVED,this.dispose,this),this.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchReleaseOutside,this)},e}(t.Group);t.WxGroup=e,__reflect(e.prototype,"eui.WxGroup")}(eui||(eui={}));