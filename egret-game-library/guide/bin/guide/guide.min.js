var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},guide;!function(t){var e=function(e){function s(t){var i=e.call(this)||this;return i._info=t,i.skinName="FirstGuidePanelSkin",i}return __extends(s,e),s.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.desc_lbl.textFlow=[{text:"2.每日随机领取1元以上奖券，游戏"},{text:"五分钟",style:{textColor:16711680}},{text:"后领取，可获得更高奖励"}],uniLib.Global.addEventListener(t.GuideConsts.REDPACK_DATA,this.onUpdate,this),this.exchange_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.sign_lst.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this),this.sign_lst.itemRenderer=i,this._info?this.setData(this._info):NetMgr.tcpSend(new Cmd.GetNewRedPackdInfoHpMatchCmd_C)},s.prototype.setData=function(t){this.sign_lst.dataProvider=new eui.ArrayCollection(t.infos),this.sign_lst.dataProviderRefreshed(),this.todayReward_lbl.text=t.todayNum+"奖券",this.reward_blbl.text=t.totalNum.toFixed(1)+"元"},s.prototype.onTouchHandler=function(t){var e=this;if(0==this._info.bChange){var i=new commonConfirm.ConfirmPanel("第七日签到完成后才可以兑换红包哦");uniLib.PopUpMgr.addPopUp(i,null,!0,!0,0,uniLib.PopUpEffect.CENTER)}else if(1==this._info.bChange&&this._info.totalNum>0){var i=new commonConfirm.ConfirmPanel("满10元才可提现，是否兑换成等额金币",null,null,function(){NetMgr.tcpSend(new Cmd.ExchangeNewRedPackHpMatchCmd_C),uniLib.PopUpMgr.removePopUp(e)},function(){});uniLib.PopUpMgr.addPopUp(i,null,!0,!0,0,uniLib.PopUpEffect.CENTER)}},s.prototype.onItemTap=function(){var t=this.sign_lst.selectedItem;3==t.status&&NetMgr.tcpSend(new Cmd.GetNewRedPackRewardHpMatch_C)},s.prototype.onUpdate=function(t){this._info=t.param,this.setData(t.param)},s.prototype.destroy=function(){this._info=null,uniLib.Global.removeEventListener(t.GuideConsts.REDPACK_DATA,this.onUpdate,this),this.exchange_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.sign_lst.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this),this.removeChildren()},s}(eui.Component);t.FirstGuidePanel=e,__reflect(e.prototype,"guide.FirstGuidePanel");var i=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuideItemSkin",e.once(egret.Event.REMOVED_FROM_STAGE,e.destroy,e),e}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this.data;this.day_lbl.text="第"+e.day+"天",1==e.status?(this.light_img.visible=!1,this.rev_img.visible=!0,this.rev_img.source="guide_sign_json.lb_xinshou_weilingqu"):2==e.status?(this.light_img.visible=!1,this.rev_img.visible=!0,this.rev_img.source="guide_sign_json.lb_xinshou_yilingqu"):3==e.status?(this.light_img.visible=!0,egret.Tween.get(this.light_img,{loop:!0}).to({rotation:360},1e3),this.rev_img.visible=!1):4==e.status&&(this.light_img.visible=!1,this.rev_img.visible=!1)},e.prototype.destroy=function(){egret.Tween.removeTweens(this.light_img),this.light_img=null},e}(eui.ItemRenderer);__reflect(i.prototype,"GuideItem")}(guide||(guide={}));var guide;!function(t){var e=function(){function t(){}return t.RES_JSON="resource/guide/guide.res_17adde55.json",t.THM_JSON="resource/guide/gameEui_9e9cb79f.json",t.REDPACK_DATA="redpack_data",t.GUIDE_TASK_DATA="guide_task_data",t.CLOSE_GUIDE_TASK="close_guide_task",t.PUB_GUIDE_NEW="pub_guide_new",t.GUIDE_TASK="guide_task",t.GUIDE_GAME="guide_game",t}();t.GuideConsts=e,__reflect(e.prototype,"guide.GuideConsts")}(guide||(guide={}));var Cmd;!function(t){function e(t){uniLib.PopUpMgr.hasPopup(guide.FirstGuidePanel)?uniLib.Global.dispatchEvent(guide.GuideConsts.REDPACK_DATA,t):uniLib.PopUpMgr.addPopUp(guide.FirstGuidePanel,null,!0,!0,0,uniLib.PopUpEffect.CENTER,0,0,t)}function i(t){uniLib.PopUpMgr.hasPopup(guide.GuideTaskPanel)?uniLib.Global.dispatchEvent(guide.GuideConsts.GUIDE_TASK_DATA,t):uniLib.PopUpMgr.addPopUp(guide.GuideTaskPanel,null,!0,!0,0,uniLib.PopUpEffect.CENTER,0,0,t)}t.OnGetNewRedPackdInfoHpMatchCmd_S=e,t.OnGetGrowTaskInfoHpMatchCmd_S=i}(Cmd||(Cmd={}));var guide;!function(t){var e=function(t){function e(e,i){void 0===e&&(e=0),void 0===i&&(i=null);var s=t.call(this)||this;return s.skins=["GuideGuideGameSkin","GuideFishGameSkin"],i&&(s._fun=i),0==e?uniLib.Global.isNative&&0!=uniLib.Global.is_sandbox?s.skinName="GuideGuideCheckSkin":s.skinName="GuideGuideGameSkin":s.skinName=s.skins[e],s}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.click_btn.once(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},e.prototype.onTouch=function(){if(this._fun)this._fun.call(this);else{var t=new Cmd.RequestJoinHpMatchCmd_C;t.gameId=match.GameId.ID_MATCH_PIG,t.sceneId=7004,NetMgr.tcpSend(t)}},e}(eui.Component);t.GuideGuideGame=e,__reflect(e.prototype,"guide.GuideGuideGame")}(guide||(guide={}));var guide;!function(t){var e=function(e){function n(t){var i=e.call(this)||this;return i._info=t,i.skinName="GuideTaskPanelSkin",i}return __extends(n,e),n.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),uniLib.Global.isInGame&&(this.proBg_img.visible=!0,this.pro_img.visible=!0,this.pro_img.width=uniLib.UserInfo.giftCoupon>=500?240:Math.floor(uniLib.UserInfo.giftCoupon/500*240)),uniLib.Global.addEventListener(t.GuideConsts.GUIDE_TASK_DATA,this.onUpdate,this),this.exchange_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.light_img.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.addEventListener(t.GuideConsts.CLOSE_GUIDE_TASK,this.close,this),this.task_lst.itemRenderer=i,this._taskCollArr=new eui.ArrayCollection,this.task_lst.dataProvider=this._taskCollArr,this.day_lst.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this),this.day_lst.itemRenderer=s,this._info?this.setData(this._info):NetMgr.tcpSend(new Cmd.GetGrowTaskInfoHpMatchCmd_C)},n.prototype.setData=function(t){this.giftCount_lbl.text=t.rewards+"福卡",this.day_lst.selectedIndex=t.day-1,this._selectIndex=this.day_lst.selectedIndex,0==t.open?(this.light_img.visible=!1,this.pro_lbl.text="进度:"+t.current+"/"+t.taskInfos.length):1==t.open?(this.light_img.visible=!0,this.pro_lbl.text="可领取",egret.Tween.get(this.light_img,{loop:!0}).to({rotation:360},1e3)):2==t.open&&(this.light_img.visible=!1,this.pro_lbl.text="已领取"),this.reward_lbl.text=t.dayInfos[t.day-1].reward+"福卡",this.day_lst.dataProvider=new eui.ArrayCollection(t.dayInfos),t.taskInfos.forEach(function(t,e){t.index=e}),this._taskCollArr.source=t.taskInfos,this._taskCollArr.refresh()},n.prototype.onItemTap=function(t){var e=this.day_lst.selectedItem;if(!(e.day<this._info.day)){if(e.day==this._info.day)0==this._info.open?this.pro_lbl.text="进度:"+this._info.current+"/"+this._info.taskInfos.length:1==this._info.open?this.pro_lbl.text="可领取":2==this._info.open&&(this.pro_lbl.text="已领取"),this.reward_lbl.text=e.reward+"福卡",this._info.taskInfos.forEach(function(t,e){t.index=e}),this._taskCollArr.source=this._info.taskInfos,this._taskCollArr.refresh();else if(e.day>this._info.day){this.pro_lbl.text="第"+e.day+"天解锁",this.reward_lbl.text=e.reward+"福卡";var i=ConfigMgr.getInstance().getTaskCfgByDay(e.day),s=[];i.forEach(function(t,e){var i=new Cmd.GrowItem;i.taskId=t.id,i.status=4,i.index=e,s.push(i)}),this._taskCollArr.source=s,this._taskCollArr.refresh()}var n=this.day_lst.getChildAt(this._selectIndex);n.setBg(4),this._selectIndex=this.day_lst.selectedIndex,n=this.day_lst.getChildAt(this._selectIndex),n.setBg(3)}},n.prototype.onTouchHandler=function(t){if(t.target==this.exchange_btn)uniLib.PopUpMgr.removePopUp(this),LobbyModuleMgr.getInstance().showLobbyActivePanel(1);else if(t.target==this.light_img){var e=new Cmd.GetGrowTaskRewardHpMatchCmd_C;e.type=2,NetMgr.tcpSend(e)}},n.prototype.onUpdate=function(t){this._info=t.param,this.setData(t.param)},n.prototype.close=function(){uniLib.PopUpMgr.removePopUp(this)},n.prototype.destroy=function(){this._info=null,this._taskCollArr=null,this._selectIndex=null,egret.Tween.removeTweens(this.light_img),this.day_lst.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this),uniLib.Global.removeEventListener(t.GuideConsts.GUIDE_TASK_DATA,this.onUpdate,this),this.exchange_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.light_img.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.light_img=null,this.removeEventListener(t.GuideConsts.CLOSE_GUIDE_TASK,this.close,this),this.removeChildren()},n}(eui.Component);t.GuideTaskPanel=e,__reflect(e.prototype,"guide.GuideTaskPanel");var i=function(e){function i(){var t=e.call(this)||this;return t.skinName="GuideTaskItemSkin",t.once(egret.Event.REMOVED_FROM_STAGE,t.destroy,t),t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.got_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.finish_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},i.prototype.onTouch=function(e){if(e.target==this.got_btn){var i=ConfigMgr.getInstance().getTaskCfgById(this.data.taskId);LobbyModuleMgr.getInstance().openPanelBySkipType(i.skipType),this.dispatchEventWith(t.GuideConsts.CLOSE_GUIDE_TASK,!0)}else if(e.target==this.finish_btn){var s=new Cmd.GetGrowTaskRewardHpMatchCmd_C;s.type=1,s.taskId=this.data.taskId,NetMgr.tcpSend(s)}},i.prototype.getFreeReward=function(){var t=new Cmd.GetFreeDiamondLobbyCmd_C;NetMgr.tcpSend(t)},i.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data,i=ConfigMgr.getInstance().getTaskCfgById(t.taskId),s="";void 0!=t.current&&null!=t.current&&(s="<font>("+t.current+"/"+i.taskCondition+")</font>"),this.desc_lbl.textFlow=(new egret.HtmlTextParser).parser(-1==i.taskDesc.indexOf("%a")?i.taskDesc+s:i.taskDesc.replace("%a",i.taskCondition+"")+s),this.bg_img.source=t.index%2?"guide_task_json.lb_cz_task_bg_2":"guide_task_json.lb_cz_task_bg_1",this.icon_img.source="guide_task_json."+i.taskIcon,this.num_lbl.text=i.taskReward[0].goodNbr+"",1==t.status?(this.got_btn.visible=!uniLib.Global.isInGame,this.finish_btn.visible=!1):2==t.status?(this.got_btn.visible=!1,this.finish_btn.enabled=!0,this.finish_btn.visible=!0):3==t.status?(this.got_btn.visible=!1,this.finish_btn.visible=!0,this.finish_btn.enabled=!1):4==t.status&&(this.got_btn.visible=!1,this.finish_btn.visible=!1)},i.prototype.destroy=function(){this.got_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.finish_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},i}(eui.ItemRenderer);__reflect(i.prototype,"GuideTaskItem");var s=function(t){function e(){var e=t.call(this)||this;return e.skinName="GuideTaskBtnSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this.data;this.reward_lbl.text=e.reward+"福卡",1==e.status?(this.bg_img.source="guide_task_json.lb_cz_day_3",this.day_lbl.text="未完成",this.day_lbl.textColor=9210763,this.day_lbl.bold=!1):2==e.status?(this.bg_img.source="guide_task_json.lb_cz_day_3",this.day_lbl.text="已领取",this.day_lbl.textColor=9210763,this.day_lbl.bold=!1):3==e.status?(this.bg_img.source="guide_task_json.lb_cz_day_1",this.day_lbl.text="第"+e.day+"天",this.day_lbl.textColor=16715535,this.day_lbl.bold=!0):4==e.status&&(this.bg_img.source="guide_task_json.lb_cz_day_2",this.day_lbl.text="第"+e.day+"天",this.day_lbl.textColor=12282151,this.day_lbl.bold=!1)},e.prototype.setBg=function(t){3==t?this.bg_img.source="guide_task_json.lb_cz_day_1":4==t&&(this.bg_img.source="guide_task_json.lb_cz_day_2")},e}(eui.ItemRenderer);__reflect(s.prototype,"GuideTaskBtn")}(guide||(guide={}));