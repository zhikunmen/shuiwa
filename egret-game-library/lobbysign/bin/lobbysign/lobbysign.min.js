var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},lobbysign;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.skinName="LobbySignSkin",t}return __extends(n,e),n.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},n.prototype.destroy=function(){e.prototype.destroy.call(this)},n.prototype.initUI=function(){t.SignSendMgr.getUserSignInfo();var e=RES.getRes("TableSignIn_json"),n=0;e.forEach(function(t){t.lobbyId==MJLobbyData.getInstance().lobbyId&&(MJLobbyData.getInstance().sign[n++]=t)});var i=RES.getRes("TableGoodsConfig_json");i.forEach(function(t){MJLobbyData.getInstance().goods[t.goodId]=t})},n.prototype.addEvent=function(){this._signBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sign,this),uniLib.Global.addEventListener(t.SignConst.SIGN_INFO,this.setData,this),uniLib.Global.addEventListener(t.SignConst.SIGN_TODAY,this.signDayOfWeek,this),uniLib.Global.addEventListener(t.SignConst.SIGN_CONTINUE,this.getReward,this)},n.prototype.removeEvent=function(){uniLib.Global.removeEventListener(t.SignConst.SIGN_INFO,this.setData,this),uniLib.Global.removeEventListener(t.SignConst.SIGN_TODAY,this.signDayOfWeek,this),uniLib.Global.removeEventListener(t.SignConst.SIGN_CONTINUE,this.getReward,this),this._signBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.sign,this)},n.prototype.setData=function(e){var n=e.param;if(n){this._data=n,this._data.bTodayReceived&&(this._signBtn.enabled=!1),this._rewardlist=this._data["continue"],this._signRewardItemList.itemRenderer=t.SignRewardItemPanel,this._signRewardItemList.dataProvider=new eui.ArrayCollection(this._rewardlist),this._dayofweeklsit=[];for(var i=0;7>i;i++)this._dayofweeklsit.push(this._data);this._signDayOfWeekItemList.itemRenderer=t.SignDayOfWeekItemPanel,this._signDayOfWeekItemList.dataProvider=new eui.ArrayCollection(this._dayofweeklsit),this.update()}},n.prototype.update=function(){if(this._data)if(this._totalTxt.text="累计签到"+this._data.continueDay+"天",this._data.continueDay<=3)this._expBr.width=this._data.continueDay/3*130;else if(this._data.continueDay<=5)this._expBr.width=200+(this._data.continueDay-3)/2*100;else if(this._data.continueDay<=7)this._expBr.width=380+(this._data.continueDay-5)/2*105;else{var t=110*(this._data.continueDay-7)/21;t=t>110?110:t,this._expBr.width=560+t}},n.prototype.sign=function(){return this._data.bTodayReceived?void uniLib.TipsUtils.showTipsDownToUp("今日已签到"):void t.SignSendMgr.getSignToday(!0)},n.prototype.getReward=function(e){var n=e.param;LobbyModuleMgr.getInstance().showAwardPanel(n.continueSignId,2),t.SignSendMgr.getUserSignInfo()},n.prototype.signDayOfWeek=function(e){var n=e.param;LobbyModuleMgr.getInstance().showAwardPanel(n.curWeek,1),t.SignSendMgr.getUserSignInfo()},n.rewardId=-1,n}(commonpanel.LobbyBaseEuiPanel);t.LobbySignPanel=e,__reflect(e.prototype,"lobbysign.LobbySignPanel")}(lobbysign||(lobbysign={}));var lobbysign;!function(t){var e=function(){function t(){}return t.RES_JSON="resource/lobbysign/lobbysign.res_aed230a3.json",t.THM_JSON="resource/lobbysign/gameEui_750ce420.json",t.LOBBY_SIGN="lobby_sign",t.SIGN_INFO="SIGNINFO_RETURN",t.SIGN_TODAY="SIGNTODAY_DATA",t.SIGN_CONTINUE="SIGN_CONTINUE",t}();t.SignConst=e,__reflect(e.prototype,"lobbysign.SignConst")}(lobbysign||(lobbysign={}));var lobbysign;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._id=-1,e.skinName="SignDayOfWeekItemSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.dataChanged=function(){if(this.info=this.data,this.data&&(this._id=this.itemIndex,MJLobbyData.getInstance().sign[0]&&MJLobbyData.getInstance().sign[0].signReward[this.itemIndex])){this._sRewardTabledata=MJLobbyData.getInstance().sign[0].signReward[this.itemIndex];var t=["星期一","星期二","星期三","星期四","星期五","星期六","星期日"];this.dayTxt.text=t[this.itemIndex],this.goldTxt.text=this._sRewardTabledata.reward.count+"";var e={1e3:1,2e3:2,5e3:3,6e3:4};this.icon.source="mjl_sign_rewards"+e[this._sRewardTabledata.reward.count],this.tick.visible=!1,this.info.signWeek&&this.info.signWeek.length>0&&-1!=this.info.signWeek.indexOf(this.itemIndex+1)&&(this.tick.visible=!0)}},e}(eui.ItemRenderer);t.SignDayOfWeekItemPanel=e,__reflect(e.prototype,"lobbysign.SignDayOfWeekItemPanel")}(lobbysign||(lobbysign={}));var Cmd;!function(t){function e(t,e,n){void 0===n&&(n=!0),uniLib.Global.dispatchEvent(t,e,n)}function n(t){e(lobbysign.SignConst.SIGN_TODAY,t)}function i(t){e(lobbysign.SignConst.SIGN_CONTINUE,t)}t.signDispatch=e,t.OnUserSignTodayLobbyCmd_S=n,t.OnUserSignContinueLobbyCmd_S=i}(Cmd||(Cmd={}));var lobbysign;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t._id=-1,t.skinName="SignRewardItemSkin",t}return __extends(n,e),n.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},n.prototype.dataChanged=function(){this.data&&(this.info=this.data,this._id=this.data.id,MJLobbyData.getInstance().sign[0]&&MJLobbyData.getInstance().sign[0].cumulativeReward[this.itemIndex]&&(this._cRewardTabledata=MJLobbyData.getInstance().sign[0].cumulativeReward[this.itemIndex],this.info.bCouldReceive&&!this.info.bReceived?this.guangtween(!0):this.guangtween(!1),this.dayTxt.text="累计"+this.info.continueDay+"天",this.goldTxt.text=this._cRewardTabledata.reward.count+MJLobbyData.getInstance().goods[this._cRewardTabledata.reward.goodsId].goodName,this.bg.source="mjl_sign_rewards"+this._id,this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.getReward,this)))},n.prototype.getReward=function(e){return this.data.bCouldReceive?(t.LobbySignPanel.rewardId=this._id,void t.SignSendMgr.getSignToday(!1,this.data.continueDay)):void uniLib.TipsUtils.showTipsDownToUp("当前礼包不可领")},n.prototype.guangtween=function(t){uniLib.DisplayUtils.stopTweenGroup(this.guang),this._guangImg.visible=!1,t&&(this._guangImg.visible=!0,uniLib.DisplayUtils.playTweenGroup(this.guang,!0))},n}(eui.ItemRenderer);t.SignRewardItemPanel=e,__reflect(e.prototype,"lobbysign.SignRewardItemPanel")}(lobbysign||(lobbysign={}));var lobbysign;!function(t){var e=function(){function t(){}return t.getUserSignInfo=function(){var t=new Cmd.UserSignInfoLobbyCmd_C;t.lobbyId=MJLobbyData.getInstance().lobbyId,NetMgr.tcpSend(t)},t.getSignToday=function(t,e){var n;t?n=new Cmd.UserSignTodayLobbyCmd_C:(n=new Cmd.UserSignContinueLobbyCmd_C,n.continueSignId=e),n.lobbyId=MJLobbyData.getInstance().lobbyId,NetMgr.tcpSend(n)},t}();t.SignSendMgr=e,__reflect(e.prototype,"lobbysign.SignSendMgr")}(lobbysign||(lobbysign={}));