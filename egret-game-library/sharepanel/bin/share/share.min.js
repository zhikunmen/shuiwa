var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);n.prototype=t.prototype,e.prototype=new n},sharepanel;!function(e){var t=function(e){function t(t){var n=e.call(this,"mjl_share_title",630,360)||this;return n._isPyq=!1,n.skinName="LobbySharePanelSkin",n._data=t,n}return __extends(t,e),t.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this)},t.prototype.removeEvent=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnClick,this)},t.prototype.btnClick=function(e){var t;if(this._data)t=this._data;else if(t=new uniLib.WXShareVo,""==uniLib.ZQGameSdk.defaultWXShareVo.webpageUrl&&LobbyDataCache.bundleInfo&&LobbyDataCache.bundleInfo.weixin.wbappid){var n=uniLib.UserInfo.nickName;n.length>8&&(n=n.slice(0,8)),this._data.webpageUrl="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+LobbyDataCache.bundleInfo.weixin.wbappid+"&redirect_uri=http://"+MJLobbyData.getInstance().lobbyConfig.newLink+"/addons/zqgame/gameshare.php?appid="+LobbyDataCache.bundleInfo.weixin.wbappid+"&response_type=code&scope=snsapi_base&state="+uniLib.CompressUtil.base64encode(uniLib.UserInfo.uid+"|0|"+n)+"&connect_redirect=1#wechat_redirect"}else this._data.webpageUrl=uniLib.ZQGameSdk.defaultWXShareVo.webpageUrl+"?uid="+uniLib.UserInfo.uid+"&nickName="+uniLib.UserInfo.nickName;switch(e.target){case this._pyqIcon:this._isPyq=!0,t.shareWay=1;break;case this._wXinIcon:this._isPyq=!1,t.shareWay=0}},t.prototype.share=function(e){uniLib.ZQGameSdk.share(e,this.shareBack,this)},t.prototype.shareBack=function(e){if(this._isPyq&&e){if(0==e.code){var t=new Cmd.ShareLobbyCmd_C;t.lobbyId=uniLib.Global.gameConfig.lobbyId,NetMgr.tcpSend(t)}egret.Tween.get(this).wait(100).call(this.delayShareBack,this,[e.code])}},t.prototype.delayShareBack=function(e){0==e?uniLib.TipsUtils.showTipsDownToUp("分享成功!"):1==e?uniLib.TipsUtils.showTipsDownToUp("分享已取消"):2==e&&uniLib.TipsUtils.showTipsDownToUp("分享被拒绝")},t}(commonpanel.LobbyBaseEuiPanel);e.LobbySharePanel=t,__reflect(t.prototype,"sharepanel.LobbySharePanel")}(sharepanel||(sharepanel={}));var sharepanel;!function(e){var t=function(){function e(){}return e.RES_JSON="resource/sharepanel/sharepanel.res_8ad3662e.json",e.THM_JSON="resource/gameEui.json",e.PUB_SHARE="pub_sharepanel",e}();e.ShareConst=t,__reflect(t.prototype,"sharepanel.ShareConst")}(sharepanel||(sharepanel={}));