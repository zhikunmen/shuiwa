var __reflect=this&&this.__reflect||function(t,i,n){t.__class__=i,n?n.push(i):n=[i],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])};return function(i,n){function o(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),login;!function(t){var i=function(){function t(){}return t.RES_JSON="resource/login/login.res_800b5100.json",t.THM_JSON="resource/login/login.thm_2e22d476.json",t.PUB_LOGIN="pub_login",t}();t.ResGroupConsts=i,__reflect(i.prototype,"login.ResGroupConsts")}(login||(login={}));var login;!function(t){var i=function(){function i(){}return i.accountLogin=function(){this._currenPlat=0,uniLib.ZQGameSdk.Login(this.onLogin,this.onLogout,this)},i.qqLogin=function(){var t={};t.platid=263,this._currenPlat=t.platid,uniLib.ZQGameSdk.Login(this.onLogin,this.onLogout,this,t)},i.wxLogin=function(){if(this._currenPlat=0,1e5==uniLib.Global.platId){var t={};t.platid=264,this._currenPlat=t.platid}uniLib.ZQGameSdk.Login(this.onLogin,this.onLogout,this,t)},i.youkeLogin=function(){this._currenPlat=0,uniLib.ZQGameSdk.Login(this.onLogin,this.onLogout,this,-1)},i.onLogin=function(t){console.error("login back"+JSON.stringify(t)),console.error("game config1:"+uniLib.Global.gameConfig.wx_appid);var i={};if(console.error(" Object.isFrozen(a);",Object.isFrozen(i)),0==t.code)var n=new Pmd.PlatInfo;n.platid=t.data.platid,263==this._currenPlat||264==this._currenPlat?uniLib.Global.payPlatId=this._currenPlat:t.data.payplatid&&(uniLib.Global.payPlatId=t.data.payplatid),t.data.uid&&(n.uid=t.data.uid),t.data.session&&(n.sign=t.data.session),t.data.extData&&(n.extdata=t.data.extData),t.data.deviceToken&&(n.imei=t.data.deviceToken+":"+uniLib.Global.bundleId.substring(0,uniLib.Global.bundleId.indexOf("_"))),n.osname=egret.Capabilities.os,uniLib.Global.initPlatInfo(n),NetMgr.platLogin()},i.onLogout=function(){uniLib.NetMgr.logout(),console.log("注销游戏进入"+uniLib.Global.gameId+":"+uniLib.Global.getPlatId()),uniLib.GameModuleUtils.ExitGame(!1),uniLib.SceneMgr.instance.changeScene(t.LoginScene)},i.loginType=1,i._currenPlat=0,i}();t.LogingUtils=i,__reflect(i.prototype,"login.LogingUtils")}(login||(login={}));var login;!function(t){var i=function(i){function n(){var t=i.call(this)||this;return t._password="",t.skinName="LoginPhoneSkin",t}return __extends(n,i),n.prototype.childrenCreated=function(){var t=this;i.prototype.childrenCreated.call(this),this.account_etxt.text="",this.account_etxt.restrict="0-9",this.account_etxt.maxChars=11,this.password_etxt.text="",this.password_etxt.restrict="a-zA-Z0-9!@#%\\^&*()_+",uniLib.Utils.getLocalStorage("yyrem",function(i){if(i){var n=JSON.parse(i);t._phone=n.account,t._password=n.password,t.account_etxt.text=n.account,t.password_etxt.text=n.password}}),this.account_etxt.addEventListener(egret.Event.CHANGE,this.verifyPhone,this),this.password_etxt.addEventListener(egret.Event.CHANGE,this.verifyPassword,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this)},n.prototype.onTouchHandler=function(t){if(t.target==this.ret_btn)this.visible=!1,this.parent&&this.parent._btnContain&&(this.parent._btnContain.visible=!0,NetMgr.logout());else if(t.target==this.resetPassword_btn)uniLib.PopUpMgr.addPopUp(LobbyUserInfoBindPhonePanel,null,!0,!0,0,uniLib.PopUpEffect.NOMAL,0,0);else if(t.target==this.login_btn)if(this._phone)if(this._password.length<6)uniLib.TipsUtils.showTipsDownToUp("请输入正确的密码");else{var i=uniLib.Global.gameConfig?uniLib.Global.gameConfig:NetMgr.getLoginCfg();NetMgr.init(i.login_url,i.gameid,i.zoneid),NetMgr.LoginByTel(this._phone,uniLib.StringUtils.MD5(this._password),this.loginPhoneSuccess,this.loginFaol,this)}else uniLib.TipsUtils.showTipsDownToUp("请输入正确的手机号")},n.prototype.loginFaol=function(t){return egret.warn("param.desc"+t.desc),uniLib.TipsUtils.showTipsDownToUp(t.desc),!0},n.prototype.loginPhoneSuccess=function(i){t.LogingUtils.loginType=3,uniLib.Utils.clearLocalStorage(),this.rem_cbox.selected?uniLib.Utils.setLocalStorage("yyrem",JSON.stringify({account:this._phone,password:this._password})):uniLib.Utils.clearLocalStorage("yyrem"),uniLib.ZQGameSdk.trackPoint("login_back"),NetMgr.platLogin()},n.prototype.verifyPhone=function(){var t=this.account_etxt.text.trim();/^1[3456789]\d{9}$/.test(t)?this._phone=t:this._phone=null},n.prototype.verifyPassword=function(){this.password_etxt.text&&this.password_etxt.text.length>5?this._password=this.password_etxt.text:this._password=""},n}(eui.Component);t.LoginPhone=i,__reflect(i.prototype,"login.LoginPhone")}(login||(login={}));var login;!function(t){var i=function(i){function n(){var t=i.call(this)||this;return t.width=uniLib.Global.screenWidth,t.height=uniLib.Global.screenHeight,t.skinName="LoginSkin",t}return __extends(n,i),n.prototype.addEvents=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandle,this)},n.prototype.removeEvents=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandle,this)},n.prototype.onTouchHandle=function(i){var n=this,o=i.target;switch(o){case this._accountLogin:this.phone_login.visible=!0,this._btnContain.visible=!1;break;case this.wx_btn:t.LogingUtils.wxLogin(),t.LogingUtils.loginType=2;break;case this._youkeLogin:uniLib.Utils.getLocalStorage("yyrem",function(i){if(i){var o=uniLib.Global.gameConfig?uniLib.Global.gameConfig:NetMgr.getLoginCfg();NetMgr.init(o.login_url,o.gameid,o.zoneid);var e=JSON.parse(i);NetMgr.LoginByTel(e.account,uniLib.StringUtils.MD5(e.password),n.loginPhoneSuccess,n.loginFaol,n)}else t.LogingUtils.youkeLogin(),t.LogingUtils.loginType=1})}},n.prototype.loginFaol=function(t){return egret.warn("param.desc"+t.desc),uniLib.TipsUtils.showTipsDownToUp(t.desc),!0},n.prototype.loginPhoneSuccess=function(i){egret.warn("loginPhoneSuccess back"+JSON.stringify(i)),t.LogingUtils.loginType=3,NetMgr.platLogin()},n.prototype.childrenCreated=function(){i.prototype.childrenCreated.call(this),this.bg_img.width=uniLib.Global.screenWidth,this.addEvents(),uniLib.Global.isH5||"iOS-FengChiGame_1.0.2"!=uniLib.Global.bundleId&&""!=uniLib.Global.bundleId?this.operateBtns([this._youkeLogin,this.wx_btn,this._accountLogin]):this.operateBtns([this._youkeLogin,this._accountLogin])},n.prototype.operateBtns=function(t){this.wx_btn.parent.removeChild;for(var i=[this._youkeLogin,this.wx_btn,this._accountLogin],n=0;n<i.length;n++)-1==t.indexOf(i[n])&&i[n].parent.removeChild(i[n]);var o=this._btnContain.layout;o.gap=100-20*t.length,this._btnContain.layout=o},n.prototype.destroy=function(){this.removeEvents(),uniLib.DragonUtils.removeFastDragonbyContainer(this)},n}(eui.Component);t.LoginView=i,__reflect(i.prototype,"login.LoginView")}(login||(login={}));var login;!function(t){var i=function(i){function n(){return i.call(this)||this}return __extends(n,i),n.prototype.awake=function(){this._view=new t.LoginView,this.uiLayer.addChild(this._view)},n.prototype.start=function(){uniLib.ZQGameSdk.getNetStateType()},n.prototype.destroy=function(){this._view.destroy()},n}(uniLib.GameScene);t.LoginScene=i,__reflect(i.prototype,"login.LoginScene")}(login||(login={}));