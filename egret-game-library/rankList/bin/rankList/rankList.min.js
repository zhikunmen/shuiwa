var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},rankList;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="ListItemSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.rankData=t,this._head.source=t.headUrl,t.rank<4?(this._rankImg.source="rank_num_"+t.rank,this._rankTxt.visible=!1):(this._rankImg.source="rank_num_4",this._rankTxt.visible=!0,this._rankTxt.text=t.rank+"")},e.prototype.destroy=function(){uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this)},e}(eui.ItemRenderer);t.ListItem=e,__reflect(e.prototype,"rankList.ListItem")}(rankList||(rankList={}));var rankList;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._rankData=new eui.ArrayCollection,t.skinName="ListVCSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init(),this.addEvent(),this.sendReq()},i.prototype.sendReq=function(){var t=new Cmd.RequestRankInfoHpMatchCmd_C;t.gameId=4231,t.curPage=1,NetMgr.tcpSend(t)},i.prototype.init=function(){this._rankList.itemRenderer=t.ListItem,this._rankList.dataProvider=this._rankData,this._rankScroll.viewport=this._rankList,this._rankScroll.scrollPolicyH="off",this._rankScroll.scrollPolicyV="off",this._rankScroll.horizontalScrollBar=null,this._rankScroll.verticalScrollBar=null},i.prototype.addEvent=function(){uniLib.Global.addEventListener(match.EVENT_RANKINFO,this.setRank,this),this._rankGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showRank,this),this.subscribe_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.subscribeHandle,this)},i.prototype.showRank=function(){this.rankVC=new t.RankVC,uniLib.PopUpMgr.addPopUp(this.rankVC,null,!1,!0,0,uniLib.PopUpEffect.LEFT)},i.prototype.setRank=function(t){var e=t.param;1==e.curPage&&(this._rankData.source=e.rankInfos,this._rankData.refresh()),this.myData=e.myRank,this.rankVC},i.prototype.subscribeHandle=function(){LoadPanelTipMgr.getInstance().loadRes(t.RankConst.LB_SUBSCRIBE,function(){uniLib.PopUpMgr.addPopUp(t.WxSubscribe,null,!0,!0,0,uniLib.PopUpEffect.CENTER)})},i.prototype.removeEvent=function(){uniLib.Global.removeEventListener(match.EVENT_RANKINFO,this.setRank,this),this._rankGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showRank,this),this.subscribe_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.subscribeHandle,this)},i.prototype.destroy=function(){this.removeEvent(),uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this)},i}(eui.Component);t.ListVC=e,__reflect(e.prototype,"rankList.ListVC")}(rankList||(rankList={}));var rankList;!function(t){var e=function(){function t(){}return t.RES_JSON="resource/rankList/rankList.res_3f0a5509.json",t.THM_JSON="resource/rankList/gameEui_f55441e8.json",t.PUB_MESSAGE="pub_rank",t.LB_SUBSCRIBE="lb_subscribe",t.RANK_DATA="rank_data",t.BUYU_SUBSCRIBE="buyu_subscribe",t}();t.RankConst=e,__reflect(e.prototype,"rankList.RankConst")}(rankList||(rankList={}));var Cmd;!function(t){function e(t){uniLib.Global.dispatchEvent(rankList.RankConst.RANK_DATA,t)}t.OnGetRankListLobbyCmd_S=e}(Cmd||(Cmd={}));var rankList;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="RankItemSkin",e.once(egret.Event.REMOVED_FROM_STAGE,e.destroy,e),e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.head_img.source=t.headUrl,t.rank<10?this._rankTxt.font="rank_big_num_fnt":this._rankTxt.font="rank_small_num_fnt",this._rankTxt.text=t.rank+"",t.nickName.length>10?this.nickName_lbl.text=t.nickName.substring(0,10)+"...":this.nickName_lbl.text=t.nickName,3==t.rType?this.type_img.source="rank_game_res_1_json.paihang_jinzhu":4==t.rType?this.type_img.source="rank_game_res_1_json.paihang_yinzhu":5==t.rType&&(this.type_img.source="game_prop_json.bag_daoju_364",commonConfirm.ResUtil.limitImageSize(this.type_img,60)),this.num_lbl.text=t.allChips+""},e.prototype.destroy=function(){this.head_img=null,uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this)},e}(eui.ItemRenderer);t.RankItem=e,__reflect(e.prototype,"rankList.RankItem")}(rankList||(rankList={}));var rankList;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i._type=3,t&&(i._type=t),i.skinName="RankVCSkin",i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent(),this._arrColl=new eui.ArrayCollection,this._rankList.itemRenderer=t.RankItem,this._rankList.dataProvider=this._arrColl,this.nickName_lbl.text=uniLib.UserInfo.nickName,this.head_img.source=uniLib.UserInfo.headUrl,5==this._type&&(this.silverPig_btn.visible=!1,this._friendBtn.source="rank_game_res_1_json.paihang_dantoubang",this.type_img.source="game_prop_json.bag_daoju_364",commonConfirm.ResUtil.limitImageSize(this.type_img,60),this.goldPig_btn.touchEnabled=!1),this.getData(this._type)},i.prototype.addEvent=function(){uniLib.Global.addEventListener(t.RankConst.RANK_DATA,this.getWorld,this),this.goldPig_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.silverPig_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this._closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.removeSelf,this),this._rankList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this)},i.prototype.getData=function(t){var e=new Cmd.GetRankListLobbyCmd_C;e.rType=t,NetMgr.tcpSend(e)},i.prototype.onTouch=function(t){t.target==this.goldPig_btn?(this.goldPig_btn.touchEnabled=!1,this.silverPig_btn.touchEnabled=!0,this._friendBg.source="rank_title_bg_2",this._groupBg.source="rank_title_bg_1",this.type_img.source="rank_game_res_1_json.paihang_jinzhu",this._goldData?this.setView(this._goldData):this.getData(3)):t.target==this.silverPig_btn&&(this.silverPig_btn.touchEnabled=!1,this.goldPig_btn.touchEnabled=!0,this._groupBg.source="rank_title_bg_2",this._friendBg.source="rank_title_bg_1",this.type_img.source="rank_game_res_1_json.paihang_yinzhu",this._silverData?this.setView(this._silverData):this.getData(4))},i.prototype.getWorld=function(t){var e=t.param;3==e.rType?this._goldData=e:4==e.rType&&(this._silverData=e),this.setView(e)},i.prototype.setView=function(t){this._arrColl.removeAll(),this._arrColl.replaceAll(t.rankInfo),this._arrColl.refresh(),t.myRank?(t.myRank<10?this.rank_blbl.font="rank_big_num_fnt":this.rank_blbl.font="rank_small_num_fnt",this.rank_blbl.text=t.myRank+"",this.rank_img.visible=!1):(this.rank_blbl.text="",this.rank_img.visible=!0),this.num_lbl.text=t.myChips+""},i.prototype.removeSelf=function(){uniLib.PopUpMgr.removePopUp(this,uniLib.PopUpEffect.LEFT)},i.prototype.onItemTap=function(){var t=this._rankList.selectedItem,e=new Cmd.UserInfoSearchLobbyCmd_C;e.uid=t.uid,NetMgr.tcpSend(e)},i.prototype.removeEvent=function(){uniLib.Global.removeEventListener(t.RankConst.RANK_DATA,this.getWorld,this),this.goldPig_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.silverPig_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this._closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.removeSelf,this),this._rankList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this)},i.prototype.destroy=function(){this.removeEvent(),this._arrColl=null,this._goldData=null,this._silverData=null,uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this)},i}(eui.Component);t.RankVC=e,__reflect(e.prototype,"rankList.RankVC")}(rankList||(rankList={}));var rankList;!function(t){var e=function(t){function e(e){void 0===e&&(e=0);var i=t.call(this)||this;return i.skins=["WxSubscribeSkin","WxBuyuSubscribeSkin"],i.skinName=i.skins[e],i}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.close_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.destroy,this)},e.prototype.destroy=function(){this.close_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.destroy,this),uniLib.PopUpMgr.removePopUp(this)},e}(eui.Component);t.WxSubscribe=e,__reflect(e.prototype,"rankList.WxSubscribe")}(rankList||(rankList={}));