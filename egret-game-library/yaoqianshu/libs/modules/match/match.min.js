var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},match;!function(t){function e(t){return 10>t?"0"+t:t}function i(t,i){var n=new Date(t),s=n.getFullYear(),o=n.getMonth()+1,a=n.getDate(),r=n.getHours(),h=n.getMinutes();return s+i+e(o)+i+e(a)+" "+e(r)+":"+e(h)}function n(e){return e==t.GoodType.TYPE_DIAMOND?"钻石":e==t.GoodType.TYPE_GOLD?"金币":e==t.GoodType.TYPE_FUKA?"福卡":void 0}function s(e,i){if(e==t.GoodType.TYPE_DIAMOND)return uniLib.UserInfo.chips<i?(LobbyModuleMgr.getInstance().showMarketPanel(0),uniLib.TipsUtils.showTipsDownToUp("钻石不足"),!1):!0;if(e==t.GoodType.TYPE_GOLD){if(uniLib.UserInfo.goldChips<i){var n=new commonConfirm.ConfirmPanel("金币不足啦，快去兑换更多金币吧!",null,null,function(){LobbyModuleMgr.getInstance().showMarketPanel(1)},function(){},this);return uniLib.PopUpMgr.addPopUp(n,null,!0,!0,0,uniLib.PopUpEffect.CENTER),!1}return!0}return e==t.GoodType.TYPE_FUKA?uniLib.UserInfo.giftCoupon<i?(uniLib.TipsUtils.showTipsDownToUp("福卡不足"),!1):!0:void 0}t.add0=e,t.formatTime=i,t.getDescByGoodId=n,t.judgeItemIsEnough=s}(match||(match={}));var match;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i._indexArr=[],i._curNum=0,i._data=t,i.width=uniLib.Global.screenWidth,i.skinName="WxEliminateWaitSkin",i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),uniLib.Global.screenWidth>this.bg_img.width&&(this.bg_img.width=uniLib.Global.screenWidth),egret.MainContext.instance.stage.addEventListener(egret.Event.RESIZE,this.onResize,this),uniLib.Global.addEventListener(uniLib.ZqEvent.ON_RECONNEC,this.onEventHandler,this),uniLib.Global.addEventListener(uniLib.ZqEvent.WX_ONSHOW,this.onEventHandler,this),uniLib.Global.addEventListener(t.EVENT_MATCH_RNTER_ROOM,this.numberFullHandler,this),this.close_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onExitHandler,this);var i=table.getMatchConfigBySceneId(this._data.sceneId);this.num_lbl.text=i.MatchPlayerNumber.toString(),this.title_lbl.text="满"+i.MatchPlayerNumber+"人开赛";for(var n=0;n<i.riseRank.length;n++)this["num"+n]&&(this["num"+n].text=i.riseRank[n]);this.timer_lbl.text="正在防作弊匹配中..."+this._data.timestamp,this._timer=new egret.Timer(1e3,this._data.timestamp),this._timer.addEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this._timer.start(),this._mask=new egret.Shape,this.eliminate_grp.addChild(this._mask),this.update(this._data)},i.prototype.onTimer=function(t){this.timer_lbl.text="正在防作弊匹配中..."+(this._timer.repeatCount-this._timer.currentCount),this._timer.currentCount==this._timer.repeatCount&&this._timer.stop()},i.prototype.update=function(t){this._data=t,this.num_blbl.text=t.curUserNbr.toString();var e=table.getMatchConfigBySceneId(t.sceneId);if(t.curUserNbr>=e.MatchPlayerNumber)this._indexArr.forEach(function(t){egret.clearTimeout(t)}),this._indexArr=[],this._mask.graphics.clear(),this._mask.visible=!1,this.pro_img.mask=null;else if(this._curNum>0){var i=t.curUserNbr/e.MatchPlayerNumber*Math.PI*2-Math.PI/2;this._indexArr.forEach(function(t){egret.clearTimeout(t)}),this._indexArr=[],this.drawMask(i)}else for(var n=this._curNum;n<t.curUserNbr;n++){var i=n/e.MatchPlayerNumber*Math.PI*2-Math.PI/2;this._indexArr.push(egret.setTimeout(this.drawMask,this,40*n,[i]))}this._curNum=t.curUserNbr},i.prototype.drawMask=function(t){var e=(table.getMatchConfigBySceneId(this._data.sceneId),this.pro_img.width/2),i=this._mask.graphics;i.clear(),i.beginFill(16711680),i.moveTo(this.eliminate_grp.width/2,this.pro_img.y+e),i.lineTo(this.eliminate_grp.width/2,this.pro_img.y),i.drawArc(this.eliminate_grp.width/2,this.pro_img.y+e,e,-Math.PI/2,t,!1),i.lineTo(this.eliminate_grp.width/2,this.pro_img.y+e),i.endFill(),this.pro_img.mask=this._mask},i.prototype.onExitHandler=function(e){var i=new commonConfirm.ConfirmPanel("返回大厅将会取消报名，是否要返回？",null,null,t.OnRequestExitHpMatchCmd_C,function(){});uniLib.PopUpMgr.addPopUp(i,egret.MainContext.instance.stage,!0,!0,0,uniLib.PopUpEffect.CENTER)},i.prototype.onEventHandler=function(e){e.type==uniLib.ZqEvent.ON_RECONNEC?t.OnRequestExitHpMatchCmd_C(1):e.type==uniLib.ZqEvent.WX_ONSHOW&&t.OnRequestExitHpMatchCmd_C(2)},i.prototype.numberFullHandler=function(){this._indexArr.forEach(function(t){egret.clearTimeout(t)}),this._indexArr=[],this._mask.graphics.clear(),this._mask.visible=!1,this.pro_img.mask=null;var t=table.getMatchConfigBySceneId(this._data.sceneId);this.num_blbl.text=t.MatchPlayerNumber.toString()},i.prototype.onResize=function(){this.width=uniLib.Global.screenWidth,this.height=uniLib.Global.screenHeight},i.prototype.destroy=function(){this._indexArr.forEach(function(t){egret.clearTimeout(t)}),this._indexArr=null,this._timer&&(this._timer.stop(),this._timer.removeEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this._timer=null),egret.MainContext.instance.stage.removeEventListener(egret.Event.RESIZE,this.onResize,this),uniLib.Global.removeEventListener(uniLib.ZqEvent.ON_RECONNEC,this.onEventHandler,this),uniLib.Global.removeEventListener(uniLib.ZqEvent.WX_ONSHOW,this.onEventHandler,this),uniLib.Global.removeEventListener(t.EVENT_MATCH_RNTER_ROOM,this.numberFullHandler,this),this._data=null,this.close_btn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onExitHandler,this),uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this)},i}(eui.Component);t.WxEliminateWait=e,__reflect(e.prototype,"match.WxEliminateWait")}(match||(match={}));var match;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchEnd,this),this.addEventListener(egret.Event.REMOVED,this.dispose,this)},e.prototype.onTouchBegin=function(){this.currentState="down",RES.hasRes("buttonClick_mp3")&&uniLib.SoundMgr.instance.playSound("buttonClick_mp3")},e.prototype.onTouchEnd=function(){this.currentState="up",this.scaleX=1,this.scaleY=1},e.prototype.onTouchCancel=function(){this.scaleX=1,this.scaleY=1},e.prototype.onTouchMove=function(){this.scaleX=1,this.scaleY=1},e.prototype.dispose=function(){this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchEnd,this),this.removeEventListener(egret.Event.REMOVED,this.dispose,this)},e}(eui.Button);t.BaseButton=e,__reflect(e.prototype,"match.BaseButton")}(match||(match={}));var match;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i._sceneInfo=t,i.width=uniLib.Global.screenWidth,i.skinName="WxGoldSelectSceneSkin",i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),uniLib.Global.screenWidth>this.bg_img.width&&(this.bg_img.width=uniLib.Global.screenWidth),this.select_lst.itemRenderer=t.WxGoldSelectSceneItem,egret.MainContext.instance.stage.addEventListener(egret.Event.RESIZE,this.onResize,this),this.select_lst.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTapHandler,this),this.begin_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchanHandler,this),this.ret_btn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchanHandler,this),uniLib.Global.addEventListener(t.EVENT_CLOSE_PANEL,this.animationShow,this),this.onDataUpdate(),!this._sceneInfo.defType&&this.animationShow()},i.prototype.animationShow=function(){var t=this,e=uniLib.Global.screenWidth-this.scene_scr.width>>1;this.scene_scr.x=uniLib.Global.screenWidth,this.begin_btn.y=uniLib.Global.screenHeight+this.begin_btn.height,egret.Tween.get(this.scene_scr).to({x:e},400,egret.Ease.quintOut),egret.Tween.get(this.begin_btn).to({y:uniLib.Global.screenHeight-.5*this.begin_btn.height},400,egret.Ease.quintOut).call(function(){t.begin_btn.bottom=0},this)},i.prototype.onDataUpdate=function(){if(this.select_lst.dataProvider=new eui.ArrayCollection(this._sceneInfo.infos),this.select_lst.dataProviderRefreshed(),this._sceneInfo.defType)for(var e=0;e<this._sceneInfo.infos.length;e++)if(this._sceneInfo.infos[e].type==this._sceneInfo.defType){uniLib.PopUpMgr.addPopUp(t.WxGoldSelectType,null,!0,!1,0,uniLib.PopUpEffect.NOMAL,0,0,this._sceneInfo.infos[e]);break}},i.prototype.onItemTapHandler=function(e){var i=this.select_lst.selectedItem;uniLib.PopUpMgr.addPopUp(t.WxGoldSelectType,null,!0,!1,0,uniLib.PopUpEffect.NOMAL,0,0,i)},i.prototype.onResize=function(){this.width=uniLib.Global.screenWidth,this.height=uniLib.Global.screenHeight},i.prototype.onTouchanHandler=function(e){if(e.target==this.begin_btn){if(this._sceneInfo){for(var i=this._sceneInfo[0].items,n=i.length-1;n>=0;n--)if(uniLib.UserInfo.goldChips>=i[n].lowestCarry)return void t.OnEnterMatchRoomCmd_C(i[n].gameId,i[n].sceneId);var s=new commonConfirm.ConfirmPanel("金币不足啦，快去兑换更多金币吧!",null,null,function(){LobbyModuleMgr.getInstance().showMarketPanel(1)},function(){},this);uniLib.PopUpMgr.addPopUp(s,null,!0,!0,0,uniLib.PopUpEffect.CENTER)}}else e.target==this.ret_btn&&uniLib.PopUpMgr.removePopUp(this)},i.prototype.destroy=function(){this.top_skin.destroy(),this.top_skin=null,egret.Tween.removeTweens(this.scene_scr),egret.Tween.removeTweens(this.begin_btn),uniLib.Global.dispatchEvent(commonConfirm.EVENT_PANEL_CLOSE),egret.MainContext.instance.stage.removeEventListener(egret.Event.RESIZE,this.onResize,this),this.select_lst.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTapHandler,this),this.begin_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchanHandler,this),this.ret_btn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchanHandler,this),uniLib.Global.removeEventListener(t.EVENT_CLOSE_PANEL,this.animationShow,this),this._sceneInfo=null},i}(eui.Component);t.WxGoldSelectScene=e,__reflect(e.prototype,"match.WxGoldSelectScene")}(match||(match={}));var match;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="WxGoldSelectSceneItemSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this.data;this.touch_btn.bg_img.source="lb_jinbi_wanfa"+e.type+"_png",this.touch_btn.red_lbl.text="玩"+e.curUserNbr+"局拿免费红包";var i=this.touch_btn.desc_lbl;1==e.type?(i.textColor=95020,i.text="经典休闲玩法"):2==e.type?(i.textColor=485024,i.text="去掉3、4、5更刺激"):3==e.type&&(i.textColor=12535313,i.text="狂欢炸炸炸")},e}(eui.ItemRenderer);t.WxGoldSelectSceneItem=e,__reflect(e.prototype,"match.WxGoldSelectSceneItem")}(match||(match={}));var match;!function(t){var e=function(e){function i(t,i){void 0===i&&(i=1);var n=e.call(this)||this;return n._index=1,n.width=uniLib.Global.screenWidth,n._index=i,n._sceneInfo=t,n.skinName="WxGoldSelectTypeSkin",n}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),uniLib.Global.screenWidth>this.bg_img.width&&(this.bg_img.width=uniLib.Global.screenWidth),egret.MainContext.instance.stage.addEventListener(egret.Event.RESIZE,this.onResize,this),this.select_lst.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTapHandler,this),this.ret_btn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchHandler,this),this.rule_btn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchHandler,this),uniLib.Global.addEventListener(uniLib.ZqEvent.USER_INFO,this.onUserInfo,this),this.classic_rbtn.group.selectedValue=this._index,this.classic_rbtn.group.addEventListener(eui.UIEvent.CHANGE,this.onChange,this),this.select_lst.itemRenderer=t.WxGoldSelectTypeItem,this.setView(this._index);var i=uniLib.Global.screenWidth-this.type_scr.width>>1;this.type_scr.x=uniLib.Global.screenWidth,egret.Tween.get(this.type_scr).to({x:i},400,egret.Ease.quintOut)},i.prototype.setView=function(t){for(var e=0;e<this._sceneInfo.length;e++)if(this._sceneInfo[e].type==t){this._data=this._sceneInfo[e],this.select_lst.dataProvider=new eui.ArrayCollection(this._data.items),this.select_lst.dataProviderRefreshed(),this.select_lst.validateNow();break}this.checkEnterRoom()},i.prototype.onItemTapHandler=function(e){var i=this,n=this.select_lst.selectedItem;if(uniLib.UserInfo.goldChips>=n.lowestCarry)if(!n.maxCarry||uniLib.UserInfo.goldChips<=n.maxCarry)wxgame.Global.instance.aldSendEvent("金币场","点击"+this._data.type+"_"+n.type+"场"),t.OnEnterMatchRoomCmd_C(n.gameId,n.sceneId);else{var s=new commonConfirm.ConfirmPanel("金币超最大限制，快去挑战高级场次吧！",null,null,function(){for(var e=i._data.items.length-1;e>=0;e--)if(i._data.items[e].lowestCarry<=uniLib.UserInfo.goldChips){t.OnEnterMatchRoomCmd_C(i._data.items[e].gameId,i._data.items[e].sceneId);break}},function(){});uniLib.PopUpMgr.addPopUp(s,egret.MainContext.instance.stage,!0,!0,0,uniLib.PopUpEffect.CENTER)}else{for(var o={1:"初级场",2:"中级场",3:"高级场"},a=function(e){if(uniLib.UserInfo.goldChips>=r._data.items[e].lowestCarry){var n=new commonConfirm.ConfirmPanel("金币不足，请前往"+o[r._data.items[e].type]+"进行游戏!",null,null,function(){wxgame.Global.instance.aldSendEvent("金币场","点击"+i._data.type+"_"+i._data.items[e].type+"场"),t.OnEnterMatchRoomCmd_C(i._data.items[e].gameId,i._data.items[e].sceneId)},function(){},r);return uniLib.PopUpMgr.addPopUp(n,null,!0,!0,0,uniLib.PopUpEffect.CENTER),{value:void 0}}},r=this,h=this._data.items.length-1;h>=0;h--){var l=a(h);if("object"==typeof l)return l.value}t.OnEnterMatchRoomCmd_C(n.gameId,n.sceneId)}},i.prototype.onUserInfo=function(t){t.param==uniLib.UserInfoEnum.GOLDCHIPS&&this.checkEnterRoom()},i.prototype.checkEnterRoom=function(){for(var t=!1,e=this._data.items.length-1;e>=0;e--){var i=this.select_lst.getChildByName(this._data.items[e].type.toString());i&&(!t&&uniLib.UserInfo.goldChips>=this._data.items[e].lowestCarry?(i.touch_btn.skin.type_ac.visible=!0,t=!0):i.touch_btn.skin.type_ac.visible=!1)}if(!t){var i=this.select_lst.getChildByName(this._data.items[0].type.toString());i&&(i.touch_btn.skin.type_ac.visible=!0)}},i.prototype.onResize=function(){this.width=uniLib.Global.screenWidth,this.height=uniLib.Global.screenHeight},i.prototype.onChange=function(t){var e=t.target;this.setView(parseInt(e.selectedValue))},i.prototype.onTouchHandler=function(e){e.target==this.ret_btn?(uniLib.PopUpMgr.removePopUp(this),uniLib.Global.dispatchEvent(t.EVENT_CLOSE_PANEL)):e.target==this.rule_btn&&uniLib.PopUpMgr.addPopUp(t.WxGameRule,null,!0,!0,0,uniLib.PopUpEffect.CENTER,0,0,this._data.type)},i.prototype.destroy=function(){this.top_skin.destroy(),this.top_skin=null,egret.Tween.removeTweens(this.type_scr),egret.MainContext.instance.stage.removeEventListener(egret.Event.RESIZE,this.onResize,this),this.select_lst.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTapHandler,this),this.ret_btn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchHandler,this),this.rule_btn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchHandler,this),uniLib.Global.removeEventListener(uniLib.ZqEvent.USER_INFO,this.onUserInfo,this),this.classic_rbtn.group.removeEventListener(eui.UIEvent.CHANGE,this.onChange,this),this._data=null},i}(eui.Component);t.WxGoldSelectType=e,__reflect(e.prototype,"match.WxGoldSelectType")}(match||(match={}));var match;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="WxGoldSelectTypeItemSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this.data;this.name=e.type.toString(),this.touch_btn.bg_img.source="lb_jinbi_grade"+e.type+"_png",this.touch_btn.num_lbl.text=e.curUserNbr.toString(),e.maxCarry?this.touch_btn.lowestCarry_lbl.text=(e.lowestCarry>1e4?e.lowestCarry/1e4+"万":e.lowestCarry)+"~"+(e.maxCarry>1e4?e.maxCarry/1e4+"万":e.maxCarry)+"准入":this.touch_btn.lowestCarry_lbl.text=(e.lowestCarry>1e4?e.lowestCarry/1e4+"万":e.lowestCarry)+"准入",e.bottomPoint<1e4?this.touch_btn.point_lbl.text=e.bottomPoint.toString():this.touch_btn.point_lbl.text=e.bottomPoint/1e4+"万"},e}(eui.ItemRenderer);t.WxGoldSelectTypeItem=e,__reflect(e.prototype,"match.WxGoldSelectTypeItem")}(match||(match={}));var match;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.width=uniLib.Global.screenWidth,i._gameId=t,i.skinName="WxMahjongSelectSkin",i}return __extends(i,e),i.prototype.childrenCreated=function(){var i=this;e.prototype.childrenCreated.call(this),uniLib.Global.screenWidth>this.bg_img.width&&(this.bg_img.width=uniLib.Global.screenWidth),egret.MainContext.instance.stage.addEventListener(egret.Event.RESIZE,this.onResize,this),this.select_lst.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTapHandler,this),this.begin_ac.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.ret_btn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchHandler,this),uniLib.Global.addEventListener(uniLib.ZqEvent.USER_INFO,this.onUserInfo,this),this.initInfo(this._gameId),this.select_lst.itemRenderer=t.WxMahjongSelectItem,this.select_lst.dataProvider=new eui.ArrayCollection(this._data),this.select_lst.dataProviderRefreshed(),this.select_lst.validateNow(),this.checkEnterRoom();var n=uniLib.Global.screenWidth-this.type_scr.width>>1;this.type_scr.x=uniLib.Global.screenWidth,this.begin_btn.y=uniLib.Global.screenHeight+this.begin_btn.height,egret.Tween.get(this.type_scr).to({x:n},400,egret.Ease.quintOut),egret.Tween.get(this.begin_btn).to({y:uniLib.Global.screenHeight-.5*this.begin_btn.height},400,egret.Ease.quintOut).call(function(){i.begin_btn.bottom=0,i.begin_btn.visible=!1,i.begin_ac.visible=!0},this)},i.prototype.initInfo=function(t){for(var e,i=ConfigMgr.getInstance().getGameListCfgById(MJLobbyData.getInstance().lobbyId),n=0;n<i.coinList.length;n++)if(i.coinList[n].gameId==t){e=i.coinList[n].sceneId;break}if(null==e)return void uniLib.TipsUtils.showTipsDownToUp("没配表！");for(var s=new Array,n=0;n<e.length;n++){var o=ConfigMgr.getInstance().getCoinHunderedById(e[n]);o.index=n+1,s.push(o)}this._data=s},i.prototype.onItemTapHandler=function(t){var e=this.select_lst.selectedItem;uniLib.UserInfo.goldChips>=e.lowestCarry?this.enterGame(e.id):uniLib.TipsUtils.showTipsDownToUp("金币不足以进该场次！")},i.prototype.onUserInfo=function(t){t.param==uniLib.UserInfoEnum.GOLDCHIPS&&this.checkEnterRoom()},i.prototype.checkEnterRoom=function(){for(var t=!1,e=this._data.length-1;e>=0;e--){var i=this.select_lst.getChildByName("lb_jinbi_grade"+this._data[e].index);i&&(!t&&uniLib.UserInfo.goldChips>=this._data[e].lowestCarry?(i.touch_btn.skin.type_ac.visible=!0,t=!0):i.touch_btn.skin.type_ac.visible=!1)}if(!t){var i=this.select_lst.getChildByName("lb_jinbi_grade"+this._data[0].index);i&&(i.touch_btn.skin.type_ac.visible=!0)}},i.prototype.onResize=function(){this.width=uniLib.Global.screenWidth,this.height=uniLib.Global.screenHeight},i.prototype.onTouchHandler=function(t){if(t.target==this.begin_btn||t.target==this.begin_ac){for(var e=this._data.length-1;e>=0;e--)if(uniLib.UserInfo.goldChips>=this._data[e].lowestCarry)return void this.enterGame(this._data[e].id);var i=new commonConfirm.ConfirmPanel("金币不足啦，快去兑换更多金币吧!",null,null,function(){LobbyModuleMgr.getInstance().showMarketPanel(1)},function(){},this);uniLib.PopUpMgr.addPopUp(i,null,!0,!0,0,uniLib.PopUpEffect.CENTER)}else t.target==this.ret_btn&&uniLib.PopUpMgr.removePopUp(this)},i.prototype.enterGame=function(t){LoadGameTipUtil.loadGame(this._gameId,function(e){MsgSendMgr.enterGame(e.gameId,t)})},i.prototype.destroy=function(){egret.Tween.removeTweens(this.type_scr),egret.Tween.removeTweens(this.begin_btn),egret.MainContext.instance.stage.removeEventListener(egret.Event.RESIZE,this.onResize,this),this.select_lst.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTapHandler,this),this.begin_ac.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.ret_btn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchHandler,this),uniLib.Global.removeEventListener(uniLib.ZqEvent.USER_INFO,this.onUserInfo,this),this._data=null},i}(eui.Component);t.WxMahjongSelect=e,__reflect(e.prototype,"match.WxMahjongSelect")}(match||(match={}));var match;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="WxMahjongSelectItemSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this.data;this.name="lb_jinbi_grade"+e.index,this.touch_btn.bg_img.source="lb_jinbi_grade"+e.index+"_png",this.touch_btn.num_lbl.text=Math.ceil(1e3*Math.random()),this.touch_btn.lowestCarry_lbl.text=e.lowestCarry+" 准入",e.lowestBetChips<1e4?this.touch_btn.point_lbl.text=e.lowestBetChips.toString():this.touch_btn.point_lbl.text=e.lowestBetChips/1e4+"万"},e}(eui.ItemRenderer);t.WxMahjongSelectItem=e,__reflect(e.prototype,"match.WxMahjongSelectItem")}(match||(match={}));var Cmd;!function(t){function e(t){t.resultCode||uniLib.Global.dispatchEvent(match.EVENT_RANKINFO,t)}function i(t){uniLib.Global.dispatchEvent(match.EVENT_FLUSH,t)}function n(t){t.resultCode?egret.error("报名失败"):(uniLib.PopUpMgr.removePopUp(match.WxGameDetail),egret.log("报名成功"))}function s(t){uniLib.PopUpMgr.removePopUp(match.WxGameDetail);var e=table.getMatchConfigBySceneId(t.sceneId);match.matchWaitPanel?match.matchWaitPanel.update(t):(e.HaoPaiMatchType==match.GameType.TYPE_OUT||e.HaoPaiMatchType==match.GameType.TYPE_DIAMOND?match.matchWaitPanel=new match.WxEliminateWait(t):match.matchWaitPanel=new match.WxMatchWait(t),egret.MainContext.instance.stage.addChild(match.matchWaitPanel))}function o(t){t.resultCode||match.matchWaitPanel&&(match.matchWaitPanel.destroy(),match.matchWaitPanel=null)}function a(t){t.resultCode||uniLib.Global.dispatchEvent(match.EVENT_REWARDRECORD,t)}function r(t){t.resultCode||uniLib.Global.dispatchEvent(match.EVENT_HISTORY,t)}function h(t){t.resultCode||uniLib.Global.dispatchEvent(match.EVENT_PACKAGEREWARD,t)}function l(t){t.resultCode||(uniLib.PopUpMgr.removePopUp(match.WxUnlockGame),uniLib.TipsUtils.showTipsDownToUp("解锁成功"))}function c(t){t.resultCode||uniLib.Global.dispatchEvent(match.EVENT_REPORT_NUM,t.nbr)}function d(t){if(6==t.resultCode){var e=new commonConfirm.ConfirmPanel("金币不足啦，快去兑换更多金币吧!",null,null,function(){LobbyModuleMgr.getInstance().showMarketPanel(1)},function(){},this);uniLib.PopUpMgr.addPopUp(e,null,!0,!0,0,uniLib.PopUpEffect.CENTER)}}function _(t){var e=match.sceneInfoMap.get(t.gameId);e?(t.cInfos&&(e.cInfos=t.cInfos),t.rInfos&&(e.rInfos=t.rInfos),t.sInfos&&(e.sInfos=t.sInfos),t.mInfos&&(e.mInfos=t.mInfos)):match.sceneInfoMap.set(t.gameId,t);var i=t.cInfos||t.rInfos;i?uniLib.PopUpMgr.hasPopup(match.WxPigRushThrough)?uniLib.Global.dispatchEvent(match.EVENT_PIG_DATA,i):LoadPanelTipMgr.getInstance().loadRes(match.MatchConst.HPW_PIG,function(){uniLib.PopUpMgr.addPopUp(match.WxPigRushThrough,null,!0,!1,0,uniLib.PopUpEffect.NOMAL,0,0,i)}):t.sInfos?LoadPanelTipMgr.getInstance().loadRes(match.MatchConst.HPW_GOLD,function(){uniLib.PopUpMgr.addPopUp(match.WxGoldSelectType,null,!0,!1,0,uniLib.PopUpEffect.NOMAL,0,0,t.sInfos)}):t.mInfos&&(uniLib.PopUpMgr.hasPopup(match.WxGameList)?uniLib.Global.dispatchEvent(match.EVENT_GAMELIST,t.mInfos):LoadPanelTipMgr.getInstance().loadRes(match.MatchConst.HPW_MATCH,function(){uniLib.PopUpMgr.addPopUp(match.WxGameList,null,!0,!1,0,uniLib.PopUpEffect.NOMAL,0,0,t.mInfos)}))}t.OnRequestRankInfoHpMatchCmd_S=e,t.OnFlushUserHpMatchInfoHpMatchCmd_Brd=i,t.OnRequestJoinHpMatchCmd_S=n,t.OnWaitListHpMatchCmd_Brd=s,t.OnRequestExitHpMatchCmd_S=o,t.OnRequestRewardRecordHpMatchCmd_S=a,t.OnRequestHistoryHpMatchCmd_S=r,t.OnGetRedPackRewardInfoLobbyCmd_S=h,t.OnRequestUnLockHpMatchCmd_S=l,t.OnGetTimerMatchUserHpMatchCmd_S=c,t.OnEnterMatchRoomCmd_S=d,t.OnGetSceneInfoHpMatchCmd_S=_}(Cmd||(Cmd={}));var match;!function(t){function e(e,i,n){void 0===n&&(n=MJLobbyData.getInstance().lobbyId);var s=t.sceneInfoMap.get(i);if(s){if(1==e&&s.sInfos)return void LoadPanelTipMgr.getInstance().loadRes(t.MatchConst.HPW_GOLD,function(){uniLib.PopUpMgr.addPopUp(t.WxGoldSelectType,null,!0,!1,0,uniLib.PopUpEffect.NOMAL,0,0,s.sInfos)});if(2==e&&s.cInfos)return void(uniLib.PopUpMgr.hasPopup(t.WxPigRushThrough)?uniLib.Global.dispatchEvent(t.EVENT_PIG_DATA,s.cInfos):LoadPanelTipMgr.getInstance().loadRes(t.MatchConst.HPW_PIG,function(){uniLib.PopUpMgr.addPopUp(t.WxPigRushThrough,null,!0,!1,0,uniLib.PopUpEffect.NOMAL,0,0,s.cInfos)}));if(3==e&&s.rInfos)return void(uniLib.PopUpMgr.hasPopup(t.WxPigRushThrough)?uniLib.Global.dispatchEvent(t.EVENT_PIG_DATA,s.rInfos):LoadPanelTipMgr.getInstance().loadRes(t.MatchConst.HPW_PIG,function(){uniLib.PopUpMgr.addPopUp(t.WxPigRushThrough,null,!0,!1,0,uniLib.PopUpEffect.NOMAL,0,0,s.rInfos)}));if(4==e&&s.mInfos)return void(uniLib.PopUpMgr.hasPopup(t.WxGameList)?uniLib.Global.dispatchEvent(t.EVENT_GAMELIST,s.mInfos):LoadPanelTipMgr.getInstance().loadRes(t.MatchConst.HPW_MATCH,function(){uniLib.PopUpMgr.addPopUp(t.WxGameList,null,!0,!1,0,uniLib.PopUpEffect.NOMAL,0,0,s.mInfos)}))}var o=new Cmd.GetSceneInfoHpMatchCmd_C;o.typ=e,o.gameId=i,o.lobbyId=n,NetMgr.tcpSend(o)}function i(t,e){void 0===e&&(e=4231);var i=new Cmd.RequestRankInfoHpMatchCmd_C;i.curPage=t,i.gameId=e,NetMgr.tcpSend(i)}function n(t,e){void 0===e&&(e=4231);var i=new Cmd.RequestJoinHpMatchCmd_C;i.gameId=e,i.sceneId=t,NetMgr.tcpSend(i)}function s(t){var e=new Cmd.RequestExitHpMatchCmd_C;e.opType=t,NetMgr.tcpSend(e)}function o(t,e){var i=new Cmd.RequestRewardRecordHpMatchCmd_C;i.curPage=t,i.sceneId=e,NetMgr.tcpSend(i)}function a(t,e,i){void 0===e&&(e=0),void 0===i&&(i=4231);var n=new Cmd.RequestHistoryHpMatchCmd_C;n.gameId=i,n.typ=0,n.curPage=t,NetMgr.tcpSend(n)}function r(t){void 0===t&&(t=41);var e=new Cmd.GetRedPackRewardInfoLobbyCmd_C;e.lobbyId=t,NetMgr.tcpSend(e)}function h(t){var e=new Cmd.RequestUnLockHpMatchCmd_C;e.sceneId=t,NetMgr.tcpSend(e)}function l(t){var e=new Cmd.GetTimerMatchUserHpMatchCmd_C;e.sceneId=t,NetMgr.tcpSend(e)}function c(t,e){var i=new Cmd.EnterMatchRoomCmd_C;i.lobbyId=MJLobbyData.getInstance().lobbyId,i.gameId=t,i.scene=e,i.gambleType=1,NetMgr.tcpSend(i)}function d(t,e){var i=new Cmd.EnterChallengeHpMatchCmd_C;i.type=t,i.round=e,NetMgr.tcpSend(i)}t.OnGetSceneInfoHpMatchCmd_C=e,t.OnRequestRankInfoHpMatchCmd_C=i,t.OnRequestJoinHpMatchCmd_C=n,t.OnRequestExitHpMatchCmd_C=s,t.OnRequestRewardRecordHpMatchCmd_C=o,t.OnRequestHistoryHpMatchCmd_C=a,t.OnGetRedPackRewardInfoLobbyCmd_C=r,t.OnRequestUnLockHpMatchCmd_C=h,t.OnGetTimerMatchUserHpMatchCmd_C=l,t.OnEnterMatchRoomCmd_C=c,t.OnEnterChallengeHpMatchCmd_C=d}(match||(match={}));var table;!function(t){function e(t){var e=RES.getRes("TableMatchReward_json");if(e){for(var i=0;i<e.length;i++)if(e[i].HaoPaiSceneId==t)return e[i]}else egret.error("TableMatchReward.json获取失败")}t.getMatchConfigBySceneId=e}(table||(table={}));var match;!function(t){var e=function(t){function e(e){var i=t.call(this)||this;return i.skinName="WxPigPassItemSkin",i}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this.data;1==e.unlock?(this.lock_img.visible=!1,this.touchEnabled=!0,this.touchChildren=!0,this.pass_lbl.text="第"+e.round+"关"):(this.lock_img.visible=!0,this.touchChildren=!1,this.touchEnabled=!1,this.pass_lbl.text="")},e}(eui.ItemRenderer);t.WxPigPassItem=e,__reflect(e.prototype,"match.WxPigPassItem")}(match||(match={}));var match;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return t&&t[0].items?i._pigData=t:i._rushData=t,i.width=uniLib.Global.screenWidth,i.skinName="WxPigRushThroughSkin",i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),uniLib.Global.screenWidth>this.bg_img.width&&(this.bg_img.width=uniLib.Global.screenWidth),egret.MainContext.instance.stage.addEventListener(egret.Event.RESIZE,this.onResize,this),uniLib.Global.addEventListener(t.EVENT_PIG_DATA,this.onPigData,this),this.ret_btn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchHandler,this),this.rule_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.silverPig_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.goldPig_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.cardRush_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.diamondRush_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.goldRush_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.cardRush_rbtn.group.addEventListener(eui.UIEvent.CHANGE,this.onRbtnChange,this),this.setData(this._rushData?this._rushData:this._pigData),this._rushData?this.cardRush_rbtn.selected=!0:this.goldRush_rbtn.selected=!0,this.rule_btn.visible=t.WxTopOpBtn.HAS_HPW_MATCH},i.prototype.setData=function(t){if(t&&t[0].items)this._pigData=t,this.goldPig_btn.visible=!0,this.silverPig_btn.visible=!0,this.cardRush_btn.visible=!1,this.goldRush_btn.visible=!1,this.diamondRush_btn.visible=!1;else{this._rushData=t;for(var e=0;e<t.length;e++){var i=t[e];1==i.type?this.cardRush_btn.label=i.round?"当前关数："+i.round:"报名：福卡x"+i.signFee[0].goodNbr:2==i.type?this.goldRush_btn.label=i.round?"当前关数："+i.round:"报名：金币x"+i.signFee[0].goodNbr:3==i.type&&(this.diamondRush_btn.label=i.round?"当前关数："+i.round:"报名：钻石x"+i.signFee[0].goodNbr)}this.goldPig_btn.visible=!1,this.silverPig_btn.visible=!1,this.cardRush_btn.visible=!0,this.goldRush_btn.visible=!0,this.diamondRush_btn.visible=!0}},i.prototype.onPigData=function(t){this.setData(t.param)},i.prototype.onRbtnChange=function(e){var i=e.target,n=parseInt(i.selectedValue);1==n?this._rushData?this.setData(this._rushData):t.OnGetSceneInfoHpMatchCmd_C(t.BigSceneType.TYPE_RUSH,t.GameId.ID_COIN_FOUCA):2==n&&(this._pigData?this.setData(this._pigData):t.OnGetSceneInfoHpMatchCmd_C(t.BigSceneType.TYPE_PIG,t.GameId.ID_MATCH_PIG))},i.prototype.onTouchHandler=function(e){if(e.target==this.ret_btn)uniLib.PopUpMgr.removePopUp(this);else if(e.target==this.silverPig_btn){for(var i=0;i<this._pigData.length;i++)if(1==this._pigData[i].type){uniLib.PopUpMgr.addPopUp(t.WxPigSelectPass,null,!0,!1,0,uniLib.PopUpEffect.NOMAL,0,0,this._pigData[i]);break}}else if(e.target==this.goldPig_btn){for(var i=0;i<this._pigData.length;i++)if(2==this._pigData[i].type){uniLib.PopUpMgr.addPopUp(t.WxPigSelectPass,null,!0,!1,0,uniLib.PopUpEffect.NOMAL,0,0,this._pigData[i]);break}}else if(e.target==this.rule_btn)uniLib.PopUpMgr.addPopUp(t.WxGameRule,null,!0,!0,0,uniLib.PopUpEffect.CENTER,0,0,this.cardRush_rbtn.selected?t.SceneType.TYPE_FUKA:t.SceneType.TYPE_PIG);else if(e.target==this.cardRush_btn){for(var i=0;i<this._rushData.length;i++)if(1==this._rushData[i].type){if(this._rushData[i].round){var n=new Cmd.EnterRushHpMatchCmd_C;n.type=this._rushData[i].type,NetMgr.tcpSend(n)}else uniLib.PopUpMgr.addPopUp(t.WxRushGameDetail,null,!0,!0,0,uniLib.PopUpEffect.CENTER,0,0,this._rushData[i]);break}}else if(e.target==this.goldRush_btn){for(var i=0;i<this._rushData.length;i++)if(2==this._rushData[i].type){if(this._rushData[i].round){var n=new Cmd.EnterRushHpMatchCmd_C;n.type=this._rushData[i].type,NetMgr.tcpSend(n)}else uniLib.PopUpMgr.addPopUp(t.WxRushGameDetail,null,!0,!0,0,uniLib.PopUpEffect.CENTER,0,0,this._rushData[i]);break}}else if(e.target==this.diamondRush_btn)for(var i=0;i<this._rushData.length;i++)if(3==this._rushData[i].type){if(this._rushData[i].round){var n=new Cmd.EnterRushHpMatchCmd_C;n.type=this._rushData[i].type,NetMgr.tcpSend(n)}else uniLib.PopUpMgr.addPopUp(t.WxRushGameDetail,null,!0,!0,0,uniLib.PopUpEffect.CENTER,0,0,this._rushData[i]);break}},i.prototype.onResize=function(){this.width=uniLib.Global.screenWidth,this.height=uniLib.Global.screenHeight
},i.prototype.destroy=function(){this._pigData=null,this._rushData=null,this.top_skin.destroy(),this.top_skin=null,egret.MainContext.instance.stage.removeEventListener(egret.Event.RESIZE,this.onResize,this),uniLib.Global.removeEventListener(t.EVENT_PIG_DATA,this.onPigData,this),this.ret_btn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchHandler,this),this.rule_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.silverPig_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.goldPig_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.cardRush_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.diamondRush_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.goldRush_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.cardRush_rbtn.group.removeEventListener(eui.UIEvent.CHANGE,this.onRbtnChange,this)},i}(eui.Component);t.WxPigRushThrough=e,__reflect(e.prototype,"match.WxPigRushThrough")}(match||(match={}));var match;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i._data=t,i.width=uniLib.Global.screenWidth,i.skinName="WxPigSelectPassSkin",i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),egret.MainContext.instance.stage.addEventListener(egret.Event.RESIZE,this.onResize,this),this.ret_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.chall_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.againChall_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.sel_lst.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this);for(var i=0,n=0,s=0,o=this._data.items.length;o>s;s++)this._data.items[s].unlock&&i++,this._data.items[s].pass&&n++;if(this.pro_lbl.text="挑战进度"+i+"/"+this._data.items.length,this.sel_lst.itemRenderer=t.WxPigPassItem,this.sel_lst.dataProvider=new eui.ArrayCollection(this._data.items),n==this._data.items.length){for(var s=this._data.items.length-1;s>=0;s--)if(uniLib.UserInfo.goldChips>=this._data.items[s].rewards[0].goodNbr){this.sel_lst.selectedIndex=s,this.initComp(this._data.items[s]);break}0>s&&(this.sel_lst.selectedIndex=0,this.initComp(this._data.items[0]))}else this.sel_lst.selectedIndex=i-1,this.initComp(this._data.items[i-1])},i.prototype.initComp=function(t){this.title_lbl.text="第"+t.round+"关",t.pass?(this.againChall_btn.visible=!0,this.chall_btn.visible=!1):(this.againChall_btn.visible=!1,this.chall_btn.visible=!0);var e=t.signFee[0].goodNbr;this.gold_lbl.text=e>1e4?Math.floor(e/1e4)+"万":e.toString(),1==this._data.type?this.reward_lbl.text="银猪x"+t.rewards[0].goodNbr:2==this._data.type&&(this.reward_lbl.text="金猪x"+t.rewards[0].goodNbr)},i.prototype.onItemTap=function(t){var e=this.sel_lst.selectedItem;this.initComp(e)},i.prototype.onTouchHandler=function(e){if(e.target==this.ret_btn)uniLib.PopUpMgr.removePopUp(this);else if(e.target==this.chall_btn||e.target==this.againChall_btn){var i=this.sel_lst.selectedItem,n="";2==this._data.type?n="金猪":1==this._data.type&&(n="银猪");var s=i.signFee;Array.isArray(s)&&t.judgeItemIsEnough(s[0].goodId,s[0].goodNbr)?(t.OnEnterChallengeHpMatchCmd_C(this._data.type,i.round),wxgame.Global.instance.aldSendEvent("金币场",n)):uniLib.PopUpMgr.removePopUp(this)}},i.prototype.onResize=function(){this.width=uniLib.Global.screenWidth,this.height=uniLib.Global.screenHeight},i.prototype.destroy=function(){this._data=null,this.top_skin.destroy(),this.top_skin=null,egret.MainContext.instance.stage.removeEventListener(egret.Event.RESIZE,this.onResize,this),this.ret_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.chall_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.againChall_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.sel_lst.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this)},i}(eui.Component);t.WxPigSelectPass=e,__reflect(e.prototype,"match.WxPigSelectPass")}(match||(match={}));var match;!function(t){t.sceneInfoMap=new Map;var e=function(){function t(){}return t.RES_JSON="resource/match/wxmatch.res_5b4a8ec2.json",t.THM_JSON="resource/match/gameEui_be984fb3.json",t.PUB_LOGIN="bs_login",t.HPW_MATCH="wxmatch",t.HPW_GOLD="bs_gold",t.HPW_PIG="bs_pig",t}();t.MatchConst=e,__reflect(e.prototype,"match.MatchConst");var i;!function(t){t[t.ID_MATCH_PIG=4231]="ID_MATCH_PIG",t[t.ID_COIN_FOUCA=4239]="ID_COIN_FOUCA",t[t.ID_CARD=4207]="ID_CARD",t[t.ID_ERMJ=4249]="ID_ERMJ",t[t.ID_BUYU=150]="ID_BUYU"}(i=t.GameId||(t.GameId={}));var n;!function(t){t[t.TYPE_COIN=1]="TYPE_COIN",t[t.TYPE_PIG=2]="TYPE_PIG",t[t.TYPE_RUSH=3]="TYPE_RUSH",t[t.TYPE_MATCH=4]="TYPE_MATCH"}(n=t.BigSceneType||(t.BigSceneType={}));var s;!function(t){t[t.TYPE_CARD=1]="TYPE_CARD",t[t.TYPE_OUT=7]="TYPE_OUT",t[t.TYPE_DIAMOND=8]="TYPE_DIAMOND"}(s=t.GameType||(t.GameType={}));var o;!function(t){t[t.TYPE_DIAMOND=6]="TYPE_DIAMOND",t[t.TYPE_GOLD=32]="TYPE_GOLD",t[t.TYPE_FUKA=336]="TYPE_FUKA",t[t.TYPE_EGG=340]="TYPE_EGG"}(o=t.GoodType||(t.GoodType={}));var a;!function(t){t[t.TYPE_MATCH=0]="TYPE_MATCH",t[t.TYPE_CALSSIC=1]="TYPE_CALSSIC",t[t.TYPE_EIGHT_CARD=2]="TYPE_EIGHT_CARD",t[t.TYPE_CRAZY=3]="TYPE_CRAZY",t[t.TYPE_CLASSIC2=4]="TYPE_CLASSIC2",t[t.TYPE_PIG=5]="TYPE_PIG",t[t.TYPE_EXCHANGE=6]="TYPE_EXCHANGE",t[t.TYPE_FUKA=7]="TYPE_FUKA",t[t.TYPE_NOTICE=8]="TYPE_NOTICE"}(a=t.SceneType||(t.SceneType={})),t.EVENT_RANKINFO="event_rankinfo",t.EVENT_GAMELIST="event_gamelist",t.EVENT_MATCH_RNTER_ROOM="event_match_enter_room",t.EVENT_REWARDRECORD="event_rewardrecord",t.EVENT_HISTORY="event_history",t.EVENT_PACKAGEREWARD="event_packagereward",t.EVENT_FLUSH="event_flash",t.EVENT_REPORT_NUM="event_report_num",t.EVENT_MATCH_NUM="event_match_num",t.EVENT_CLOSE_PANEL="event_close_panel",t.EVENT_CLOSE_PANEL="event_close_panel",t.EVENT_PIG_DATA="event_pig_data"}(match||(match={}));var match;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i._data=t,i.skinName="WxGameDetailSkin",i}return __extends(i,e),i.prototype.childrenCreated=function(){if(e.prototype.childrenCreated.call(this),this.close_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.sign_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this._data){var i=table.getMatchConfigBySceneId(this._data.sceneId);if(i){this.title_lbl.text=i.HaoPaiMatchName,this.num_lbl.text=i.MatchPlayerNumber+"人";var n=ConfigMgr.getInstance().getGoodCfgById(i.HaoPaiMatchCost[0].goodId);n&&(this.cost_lbl.text="x"+i.HaoPaiMatchCost[0].goodNbr),i.HaoPaiMatchCost[0].goodId==t.GoodType.TYPE_DIAMOND?this.costType_img.source="wx_lb_res_json.lb_diamond_png":i.HaoPaiMatchCost[0].goodId==t.GoodType.TYPE_GOLD&&(this.costType_img.source="wx_lb_res_json.lb_jinbi_jinbi_png")}this._data.signLimit?this.sign_lbl.text=this._data.signNum+"/"+this._data.signLimit:this.sign_lbl.text="无限制",this.reward_lst.itemRenderer=t.WxGameDetailItem,i.RankReward.forEach(function(t,e){t.rank=e+1}),this.reward_lst.dataProvider=new eui.ArrayCollection(i.RankReward)}},i.prototype.onTouchHandler=function(e){if(e.target==this.close_btn)uniLib.PopUpMgr.removePopUp(this);else if(e.target==this.sign_btn){var i=table.getMatchConfigBySceneId(this._data.sceneId);Array.isArray(i.HaoPaiMatchCost)&&t.judgeItemIsEnough(i.HaoPaiMatchCost[0].goodId,i.HaoPaiMatchCost[0].goodNbr)?t.OnRequestJoinHpMatchCmd_C(this._data.sceneId):uniLib.PopUpMgr.removePopUp(this)}},i.prototype.destroy=function(){this.close_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.sign_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this._data=null},i}(eui.Component);t.WxGameDetail=e,__reflect(e.prototype,"match.WxGameDetail")}(match||(match={}));var match;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="WxGameDetailItemSkin",t}return __extends(i,e),i.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var i=this.data;i.rank>=1&&i.rank<=3?(this.rank_img.visible=!0,this.rank_lbl.visible=!1,this.rank_img.source="wx_lb_res_json.bs_xiangqing_"+i.rank+"_png"):(this.rank_img.visible=!1,this.rank_lbl.visible=!0,this.rank_lbl.text="第"+i.rank+"名"),this.reward0_lbl.text=i[0].goodNbr+t.getDescByGoodId(i[0].goodId),i[1]?this.reward1_lbl.text=i[1].goodNbr+t.getDescByGoodId(i[1].goodId):this.reward1_lbl.text=""},i}(eui.ItemRenderer);t.WxGameDetailItem=e,__reflect(e.prototype,"match.WxGameDetailItem")}(match||(match={}));var match;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i._beginSceneId=7001,i._param=t,i.width=uniLib.Global.screenWidth,i.skinName="WxGameListSkin",i}return __extends(i,e),i.prototype.childrenCreated=function(){var i=this;e.prototype.childrenCreated.call(this),uniLib.Global.screenWidth>this.bg_img.width&&(this.bg_img.width=uniLib.Global.screenWidth),egret.MainContext.instance.stage.addEventListener(egret.Event.RESIZE,this.onResize,this),this.begin_ac.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.ret_btn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchHandler,this),this.rule_btn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchHandler,this),uniLib.Global.addEventListener(t.EVENT_GAMELIST,this.onGameListHandler,this),this.ticketGame_lst.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTapHandler,this),this.ticketGame_lst.itemRenderer=t.WxGameListItem,this.ticketGame_lst.dataProvider=new eui.ArrayCollection(this._param),this.top_skin.ticket_btn.touchEnabled=!1;var n=uniLib.Global.screenWidth-this.ticketGame_scr.width>>1;this.ticketGame_scr.x=uniLib.Global.screenWidth,egret.Tween.get(this.ticketGame_scr).to({x:n},400,egret.Ease.quintOut),this.begin_btn.y=uniLib.Global.screenHeight+this.begin_btn.height,egret.Tween.get(this.begin_btn).to({y:uniLib.Global.screenHeight-.5*this.begin_btn.height},400,egret.Ease.quintOut).call(function(){i.begin_btn.bottom=0,i.begin_btn.visible=!1,i.begin_ac.visible=!0},this)},i.prototype.onGameListHandler=function(t){var e=t.param;this.ticketGame_lst.dataProvider=new eui.ArrayCollection(e)},i.prototype.onTouchHandler=function(e){if(e.target==this.ret_btn)uniLib.PopUpMgr.removePopUp(this);else if(e.target==this.begin_btn||e.target==this.begin_ac){var i=table.getMatchConfigBySceneId(this._beginSceneId);Array.isArray(i.HaoPaiMatchCost)&&t.judgeItemIsEnough(i.HaoPaiMatchCost[0].goodId,i.HaoPaiMatchCost[0].goodNbr)&&(wxgame.Global.instance.aldSendEvent("淘汰赛","点击快速开始"),t.OnRequestJoinHpMatchCmd_C(this._beginSceneId))}else e.target==this.rule_btn&&uniLib.PopUpMgr.addPopUp(t.WxGameRule,null,!0,!0,0,uniLib.PopUpEffect.CENTER,0,0,t.SceneType.TYPE_MATCH)},i.prototype.onResize=function(){this.width=uniLib.Global.screenWidth,this.height=uniLib.Global.screenHeight},i.prototype.onItemTapHandler=function(e){var i=this.ticketGame_lst.selectedItem;0==i.unLocked?uniLib.PopUpMgr.addPopUp(t.WxUnlockGame,null,!0,!0,0,uniLib.PopUpEffect.CENTER,0,0,i):uniLib.PopUpMgr.addPopUp(t.WxGameDetail,null,!0,!0,0,uniLib.PopUpEffect.CENTER,0,0,i)},i.prototype.destroy=function(){this._param=null,this.top_skin.destroy(),this.top_skin=null,egret.Tween.removeTweens(this.ticketGame_scr),egret.Tween.removeTweens(this.begin_btn),uniLib.Global.dispatchEvent(commonConfirm.EVENT_PANEL_CLOSE),egret.MainContext.instance.stage.removeEventListener(egret.Event.RESIZE,this.onResize,this),this.begin_ac.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.ret_btn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchHandler,this),this.rule_btn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchHandler,this),uniLib.Global.removeEventListener(t.EVENT_GAMELIST,this.onGameListHandler,this),this.ticketGame_lst.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTapHandler,this)},i}(eui.Component);t.WxGameList=e,__reflect(e.prototype,"match.WxGameList")}(match||(match={}));var match;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="WxGameListItemSkin",t}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var i=this.data,n=this.tick_btn.skin,s=table.getMatchConfigBySceneId(i.sceneId);s&&(s.HaoPaiMatchType==t.GameType.TYPE_OUT?(n.desc_lbl.textFlow=[{text:"前"},{text:s.mainrewardRank,style:{textColor:16404290}},{text:"名可获得福卡奖励"}],n.desc_lbl.visible=!0):s.HaoPaiMatchType==t.GameType.TYPE_DIAMOND?(n.desc_lbl.textFlow=[{text:"前"},{text:s.mainrewardRank,style:{textColor:16404290}},{text:"名可获得钻石奖励"}],n.desc_lbl.visible=!0):n.desc_lbl.visible=!1,0==i.unLocked?(n.black_img.visible=!0,n.lock_img.visible=!0,n.lockDesc_lbl.visible=!0,n.lockDesc_lbl.text="邀请"+s.unlockNumber+"个好友解锁"):(n.black_img.visible=!1,n.lock_img.visible=!1,n.lockDesc_lbl.visible=!1),s.HaoPaiMatchType==t.GameType.TYPE_CARD||s.HaoPaiMatchType==t.GameType.TYPE_DIAMOND?n.icon_img.source="lb_bisai_type"+t.GameType.TYPE_CARD+"_png":n.icon_img.source="lb_bisai_type"+s.HaoPaiMatchType+"_png",s.HaoPaiMatchCost[0].goodNbr?(n.mf_img.visible=!1,n.diamond_blbl.text=s.HaoPaiMatchCost[0].goodNbr,s.HaoPaiMatchCost[0].goodId==t.GoodType.TYPE_DIAMOND?n.diamond_img.source="bs_diamond_png":s.HaoPaiMatchCost[0].goodId==t.GoodType.TYPE_GOLD&&(n.diamond_img.source="bs_jibi_png")):(n.diamond_img.visible=!1,n.diamond_blbl.text="",n.mf_img.visible=!0),s.matchName?(n.money_lbl.text=s.matchName.toString(),s.matchName<10?n.money_lbl.size=80:s.matchName<100?n.money_lbl.size=60:n.money_lbl.size=46):n.money_lbl.text="")},i}(eui.ItemRenderer);t.WxGameListItem=e,__reflect(e.prototype,"match.WxGameListItem")}(match||(match={}));var match;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i._sub1Index=0,i._sceneId=t,i.skinName="WxGameRecordSkin",i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.record_lst.itemRenderer=t.WxGameRecordItem,this._recordColl=new eui.ArrayCollection([]),this.record_lst.dataProvider=this._recordColl,uniLib.Global.addEventListener(t.EVENT_REWARDRECORD,this.onDataHandler,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchHandler,this)},i.prototype.onDataHandler=function(t){var e=t.param;Array.isArray(e.records)||(e.records=[]);var i=[];this._data&&(i=this._data.records),this._data=e,this._data.records=i.concat(this._data.records),this.nextPage()},i.prototype.nextPage=function(){var e=this._data.records;e.length>5*(this._sub1Index+1)?(this._recordColl.replaceAll(e.slice(5*this._sub1Index,5*this._sub1Index+5)),this._recordColl.refresh(),this._sub1Index++):this._data.isLastPage?e.length>5*this._sub1Index?(this._recordColl.replaceAll(e.slice(5*this._sub1Index)),this._recordColl.refresh()):uniLib.TipsUtils.showTipsDownToUp("已到尾页"):t.OnRequestRewardRecordHpMatchCmd_C(this._data.curPage+1,this._sceneId)},i.prototype.prePage=function(){this._sub1Index>=1?(this._sub1Index--,this._recordColl.replaceAll(this._data.records.slice(5*this._sub1Index,5*this._sub1Index+5)),this._recordColl.refresh()):uniLib.TipsUtils.showTipsDownToUp("已到首页")},i.prototype.onTouchHandler=function(t){t.target==this.close_btn?uniLib.PopUpMgr.removePopUp(this):t.target==this.nextPage_btn?this.nextPage():t.target==this.prePage_btn&&this.prePage()},i.prototype.destroy=function(){uniLib.Global.removeEventListener(t.EVENT_REWARDRECORD,this.onDataHandler,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchHandler,this),this._data=null,this._recordColl=null,this._sceneId=null,this._sub1Index=null},i}(eui.Component);t.WxGameRecord=e,__reflect(e.prototype,"match.WxGameRecord")}(match||(match={}));var match;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="WxGameRecordItemSkin",t}return __extends(i,e),i.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var i=this.data;this.one_lbl.text=i.rankList[0],this.two_lbl.text=i.rankList[1],this.third_lbl.text=i.rankList[2],-1==i.myRank?this.rank_lbl.text="未参加":0==i.myRank?this.rank_lbl.text="未上榜":this.rank_lbl.text=i.myRank.toString();var n=t.formatTime(1e3*i.beginTime,"/").split(" ");this.min_lbl.text=n[0],this.sec_lbl.text=n[1]},i}(eui.ItemRenderer);t.WxGameRecordItem=e,__reflect(e.prototype,"match.WxGameRecordItem")}(match||(match={}));var match;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="WxGameRewardSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchHandler,this)},e.prototype.onTouchHandler=function(t){if(t.target==this.close_btn)uniLib.PopUpMgr.removePopUp(this);else if(t.target==this.share_btn&&uniLib.Global.isWxGame()){var e=new uniLib.WXShareVo;e.opType=Cmd.ShareOpType.share,uniLib.ZQGameSdk.share(e)}},e.prototype.destroy=function(){this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchHandler,this)},e}(eui.Component);t.WxGameReward=e,__reflect(e.prototype,"match.WxGameReward")}(match||(match={}));var match;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i._sceneType=t,i.skinName="WxGameRuleSkin",i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.close_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),null!=this._sceneType&&void 0!=this._sceneType&&this.setData(this._sceneType)},i.prototype.setData=function(e){if(this.title_img.source="wx_lb_res_json.ruler_title_png",e==t.SceneType.TYPE_NOTICE)this.title_img.source="wx_lb_res_json.lb_gonggao_title_png",this.title_lbl.text="游戏更新公告",this.rule_lbl.textFlow=(new egret.HtmlTextParser).parse(RES.getRes("lb_notice_txt"));else if(RES.hasRes("hcpdk_rule_txt")){var i=JSON.parse(RES.getRes("hcpdk_rule_txt"));i&&i[e]&&(this.title_lbl.text=i[e].title,this.rule_lbl.textFlow=(new egret.HtmlTextParser).parse(i[e].context))}},i.prototype.onTouch=function(){uniLib.PopUpMgr.removePopUp(this)},i.prototype.destroy=function(){this.close_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.destroy,this),this.close_btn=null,this.title_img=null,this._sceneType=null,this.title_lbl=null,this.rule_lbl=null},i}(eui.Component);t.WxGameRule=e,__reflect(e.prototype,"match.WxGameRule")}(match||(match={}));var match;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i._data=t,i.width=uniLib.Global.screenWidth,i._matchType=table.getMatchConfigBySceneId(i._data.sceneId).HaoPaiMatchType,i.skinName="WxMatchWaitSkin",i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),uniLib.Global.screenWidth>this.bg_img.width&&(this.bg_img.width=uniLib.Global.screenWidth),egret.MainContext.instance.stage.addEventListener(egret.Event.RESIZE,this.onResize,this),uniLib.Global.addEventListener(uniLib.ZqEvent.ON_RECONNEC,this.onEventHandler,this),uniLib.Global.addEventListener(uniLib.ZqEvent.WX_ONSHOW,this.onEventHandler,this),this.close_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onExitHandler,this),wxgame.Global.instance.createBannerAd("",{left:0}),this.update(this._data)},i.prototype.update=function(t){if(this._data=t,t){var e=table.getMatchConfigBySceneId(t.sceneId);this.title_lbl.text=e.HaoPaiMatchName;for(var i=0;i<this.num_grp.numChildren;i++){var n=this.num_grp.getChildAt(i);i<t.curUserNbr?0==i?(n.skin.head_img.source=uniLib.UserInfo.headUrl,n.skin.mask_img.source="bs_pipei_kuang1_png",n.label=uniLib.UserInfo.nickName,n.skin.labelDisplay.textColor=16777215):(n.skin.head_img.source="bs_pipei_touxiang1_png",n.skin.mask_img.source="bs_pipei_kuang1_png",n.label="玩家"+(i+1),n.skin.labelDisplay.textColor=16777215):(n.skin.head_img.source="bs_pipei_touxiang_png",n.skin.mask_img.source="bs_pipei_kuang_png",n.label="匹配中...",n.skin.labelDisplay.textColor=16763904)}6==e.MatchPlayerNumber?this.condition_lbl.text="满6人开赛":this.condition_lbl.text="限时赛",this._timer||(this._timer=new egret.Timer(1e3,120),this._timer.addEventListener(egret.TimerEvent.TIMER,this.onTimerHandler,this),this._timer.start())}},i.prototype.onTimerHandler=function(t){this.time_lbl.text=this._timer.currentCount+"s",this._timer.currentCount==this._timer.repeatCount&&(this._timer.stop(),this._timer.removeEventListener(egret.TimerEvent.TIMER,this.onTimerHandler,this))},i.prototype.onExitHandler=function(e){var i=new commonConfirm.ConfirmPanel("返回大厅将会取消报名，是否要返回？",null,null,t.OnRequestExitHpMatchCmd_C,function(){});uniLib.PopUpMgr.addPopUp(i,egret.MainContext.instance.stage,!0,!0,0,uniLib.PopUpEffect.CENTER)},i.prototype.onEventHandler=function(e){e.type==uniLib.ZqEvent.ON_RECONNEC?t.OnRequestExitHpMatchCmd_C(1):e.type==uniLib.ZqEvent.WX_ONSHOW&&t.OnRequestExitHpMatchCmd_C(2)},i.prototype.numberFullHandler=function(){},i.prototype.onResize=function(){this.width=uniLib.Global.screenWidth,this.height=uniLib.Global.screenHeight},i.prototype.destroy=function(){wxgame.Global.instance.destroyBannerAd(),egret.MainContext.instance.stage.removeEventListener(egret.Event.RESIZE,this.onResize,this),uniLib.Global.removeEventListener(uniLib.ZqEvent.ON_RECONNEC,this.onEventHandler,this),uniLib.Global.removeEventListener(uniLib.ZqEvent.WX_ONSHOW,this.onEventHandler,this),this._timer&&(this._timer.stop(),this._timer.removeEventListener(egret.TimerEvent.TIMER,this.onTimerHandler,this)),this._timer=null,this._data=null,this.close_btn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onExitHandler,this),uniLib.DisplayUtils.removeAllChildren(this),uniLib.DisplayUtils.removeFromParent(this)},i}(eui.Component);t.WxMatchWait=e,__reflect(e.prototype,"match.WxMatchWait")}(match||(match={}));var match;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i._data=t,i.skinName="WxRushGameDetailSkin",i}return __extends(i,e),i.prototype.childrenCreated=function(){if(e.prototype.childrenCreated.call(this),this.close_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.sign_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this._data){this.rule_lbl.text="1.第"+this._data.reviveRounds.join("、")+"关可复活\n2.彩蛋最高可得"+this._data.maxGoldEgg+"福卡",1==this._data.type||3==this._data.type?(this.title_lbl.text="福卡闯关",this.rewardType_img.source="match_pig_json.cg_baoming_fuka"):2==this._data.type?(this.title_lbl.text="金币闯关",this.rewardType_img.source="match_pig_json.cg_baoming_jinbi"):3==this._data.type&&(this.title_lbl.text="钻石闯关",this.rewardType_img.source="match_pig_json.cg_baoming_fuka");var i=this._data.rewards[this._data.rewards.length-1];this.lastRush_lbl.text="第"+this._data.rewards.length+"关",this.lastReward_lbl.text=this.format(i);for(var n=0;n<this._data.rewards.length-1;n++){var s=new eui.Label;s.fontFamily="微软雅黑",s.size=30,s.textFlow=[{text:"第"+(n+1)+"关:",style:{textColor:16731648}},{text:this.format(this._data.rewards[n]),style:{textColor:10773337}}],this.rush_grp.addChild(s)}var o=this._data.signFee[0];this.cost_lbl.text="x"+(o.goodNbr>1e3?o.goodNbr/1e4+"万":o.goodNbr),o.goodId==t.GoodType.TYPE_DIAMOND?this.costType_img.source="match_pig_json.cg_baoming_BMdiamond":o.goodId==t.GoodType.TYPE_FUKA?this.costType_img.source="match_pig_json.cg_baoming_BMfuka":o.goodId==t.GoodType.TYPE_GOLD&&(this.costType_img.source="match_pig_json.cg_baoming_BMgold")}},i.prototype.format=function(e){for(var i,n="",s=0;s<e.rewards.length;s++){i=i?i+"+":"";var o=e.rewards[s];o.goodId==t.GoodType.TYPE_DIAMOND?i=o.goodNbr+"钻石":o.goodId==t.GoodType.TYPE_FUKA?i=o.goodNbr+"福卡":o.goodId==t.GoodType.TYPE_GOLD?i=(o.goodNbr>1e4?o.goodNbr/1e4+"万":o.goodNbr)+"金币":o.goodId==t.GoodType.TYPE_EGG&&(n="彩蛋")}return i+n},i.prototype.onTouchHandler=function(e){if(e.target==this.close_btn)uniLib.PopUpMgr.removePopUp(this);else if(e.target==this.sign_btn){var i=this._data.signFee[0];if(t.judgeItemIsEnough(i.goodId,i.goodNbr)){var n=new Cmd.EnterRushHpMatchCmd_C;n.type=this._data.type,NetMgr.tcpSend(n)}}},i.prototype.destroy=function(){this.close_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.sign_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this._data=null},i}(eui.Component);t.WxRushGameDetail=e,__reflect(e.prototype,"match.WxRushGameDetail")}(match||(match={}));var match;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="WxTopOpBtnSkin",t}return __extends(i,e),i.prototype.gold2str=function(t){return t>1e8?(t/1e8).toFixed(1)+"亿":t>1e7?(t/1e4).toFixed(1)+"万":t>1e5?(t/1e4).toFixed(2)+"万":t.toString()},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.x=248,this.diamond_btn.label=uniLib.UserInfo.chips.toString(),this.ticket_btn.label=uniLib.UserInfo.giftCoupon.toString(),this.gold_btn.label=this.gold2str(uniLib.UserInfo.goldChips),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),uniLib.Global.addEventListener(uniLib.ZqEvent.USER_INFO,this.onUserInfoChanged,this)},i.prototype.onUserInfoChanged=function(t){this.diamond_btn&&(this.diamond_btn.label=uniLib.UserInfo.chips.toString()),this.ticket_btn&&(this.ticket_btn.label=uniLib.UserInfo.giftCoupon.toString()),this.gold_btn&&(this.gold_btn.label=this.gold2str(uniLib.UserInfo.goldChips))},i.prototype.onTouchHandler=function(e){if(e.target==this.diamond_btn)LobbyModuleMgr.getInstance().showMarketPanel(0);else if(e.target==this.ticket_btn){if(0==i.HAS_HPW_MATCH)return;RES.loadGroup(t.MatchConst.HPW_MATCH).then(function(){t.OnGetSceneInfoHpMatchCmd_C(t.BigSceneType.TYPE_MATCH,t.GameId.ID_MATCH_PIG)},function(){var t=new commonConfirm.ConfirmPanel("资源加载失败，请检查网络后重试");uniLib.PopUpMgr.addPopUp(t,null,!0,!0,0,uniLib.PopUpEffect.CENTER)})}else e.target==this.gold_btn&&LobbyModuleMgr.getInstance().showMarketPanel(1)},i.prototype.destroy=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),uniLib.Global.removeEventListener(uniLib.ZqEvent.USER_INFO,this.onUserInfoChanged,this)},i.HAS_HPW_MATCH=!0,i}(eui.Component);t.WxTopOpBtn=e,__reflect(e.prototype,"match.WxTopOpBtn")}(match||(match={}));var match;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i._data=t,i.skinName="WxUnlockGameSkin",i}return __extends(i,e),i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),uniLib.Global.isNative&&uniLib.Utils.isIOS&&1==uniLib.Global.is_sandbox&&(this.tips_lbl.visible=!1),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchHandler,this),this.head_grp.removeChildren();var t=table.getMatchConfigBySceneId(this._data.sceneId);this.unlock_btn.label="x"+t.unlockdiamond;for(var i=0;i<t.unlockNumber;i++){var n=new eui.Image("bs_unlock_jia_png");n.width=n.height=100,this.head_grp.addChild(n)}for(var i=0;i<this._data.unLockList.length;i++){var n=this.head_grp.getChildAt(i);n.source=this._data.unLockList[i]}uniLib.Global.isWxGame()||152==uniLib.Global.platId?this.share_btn.visible=!0:this.share_btn.visible=!1},i.prototype.onTouchHandler=function(e){if(e.target==this.close_btn)uniLib.PopUpMgr.removePopUp(this);else if(e.target==this.share_btn)if(uniLib.Global.isWxGame()){var i=new uniLib.WXShareVo;i.shareType=Cmd.ShareType.unlock;var n={sceneId:this._data.sceneId};i.wgShareData=JSON.stringify(n),uniLib.ZQGameSdk.share(i)}else share.shareNativeMessage(Cmd.ShareType.unlock,0,Cmd.ShareType.unlock+"_"+this._data.sceneId,JSON.stringify({sceneId:this._data.sceneId}));else if(e.target==this.unlock_btn){var s=table.getMatchConfigBySceneId(this._data.sceneId);uniLib.UserInfo.chips>=s.unlockdiamond?t.OnRequestUnLockHpMatchCmd_C(this._data.sceneId):uniLib.TipsUtils.showTipsDownToUp("钻石不足")}},i.prototype.destroy=function(){this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchHandler,this),this._data=null},i}(eui.Component);t.WxUnlockGame=e,__reflect(e.prototype,"match.WxUnlockGame")}(match||(match={}));