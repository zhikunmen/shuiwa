var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);i.prototype=e.prototype,t.prototype=new i},ItemScroller=function(t){function e(){var e=t.call(this)||this;return e.delayScroll=200,e.addEventListener(eui.UIEvent.COMPLETE,e.onCreateComplete,e),e}return __extends(e,t),e.prototype.onCreateComplete=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.onCreateComplete,this),this.validateNow();var t=this.viewport.contentWidth-this.viewport.width;t>0?(this.isHScroller=!0,this.itemSize=this.viewport.width,this.itemNum=this.viewport.contentWidth/this.viewport.width):(this.isHScroller=!1,this.itemSize=this.viewport.height,this.itemNum=this.viewport.contentHeight/this.viewport.height),this.horizontalScrollBar.thumb.visible=!1,this.verticalScrollBar.thumb.visible=!1,this.bounces=!0,this.addEventListener(eui.UIEvent.CHANGE_START,this.onChangeStartHandler,this),this.addEventListener(eui.UIEvent.CHANGE_END,this.onChangeEndHandler,this)},e.prototype.onChangeStartHandler=function(){this.isHScroller?this.touchStartPos=this.viewport.scrollH:this.touchStartPos=this.viewport.scrollV},e.prototype.onChangeEndHandler=function(){var t;t=this.isHScroller?this.viewport.scrollH-this.touchStartPos:this.viewport.scrollV-this.touchStartPos,t>0?this.scrollToNext():this.scrollToLast()},e.prototype.scrollToNext=function(){var t=this.curItemCount;t<this.itemNum-1&&t++,this.scrollToItem(t)},e.prototype.scrollToLast=function(){var t=this.curItemCount;t>0&&t--,this.scrollToItem(t)},e.prototype.scrollToItem=function(t){t>=0&&t<=this.itemNum&&(this.curItemCount=t,egret.Tween.removeTweens(this.viewport),this.isHScroller?egret.Tween.get(this.viewport).to({scrollH:t*this.itemSize,ease:egret.Ease.quadOut},this.delayScroll):egret.Tween.get(this.viewport).to({scrollV:t*this.itemSize,ease:egret.Ease.quadOut},this.delayScroll))},e.prototype.destroy=function(){},e}(eui.Scroller);__reflect(ItemScroller.prototype,"ItemScroller");var vip;!function(t){var e=function(){function t(){}return t.RES_JSON="resource/vip/vip.res_44fb95aa.json",t.THM_JSON="resource/vip/gameEui_416f71ad.json",t.PUB_VIP="pub_vip",t}();t.VIPConsts=e,__reflect(e.prototype,"vip.VIPConsts")}(vip||(vip={}));var VIPItemView=function(t){function e(){var e=t.call(this)||this;return e.skinName="VipItemSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.vip_receive.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandle,this)},e.prototype.onTouchHandle=function(t){var e=new Cmd.GetFishVipRewardCmd_CS;e.level=this.data.level,NetMgr.tcpSend(e)},e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this.data,i=e.level;this.vip_level.textFlow=[{text:"VIP"+i,style:{textColor:16711912}},{text:"特权",style:{textColor:9316870}}];var o=ConfigMgr.getInstance().getFishVipByLv(i),s=new egret.HtmlTextParser;this.vip_desc.textFlow=s.parser(o.des);var n=ConfigMgr.getInstance().getFishGunTypeByID(o.unlockCannon);if(o.unlockCannon>0)this.setPaoWH(o.unlockCannon),this.setEffect(o.unlockCannon),this.vip_receive.visible=!1,n&&(this.pao_text.text=n.gunName);else{var r=o.vipReward[0].count;1e6>r?this.pao_img.source="vip_json.vip_gold2":this.pao_img.source="vip_json.vip_gold3",this.pao_img.x=41,this.pao_img.y=60,r>=1e4?this.pao_text.text=r/1e4+"万金币":this.pao_text.text=r+"金币",MJLobbyData.getInstance().userInfoSynLobby.userInfo.vip>=i&&e.unReceived?this.vip_receive.visible=!0:this.vip_receive.visible=!1,this.removeEffect()}this.pao_text.x=129-this.pao_text.width/2},e.prototype.setPaoWH=function(t){this.pao_img.source="pao_tai_"+t,0==this.pao_img.width?(this.pao_img.x=39,this.pao_img.y=73):(this.pao_img.x=129-this.pao_img.width/2,this.pao_img.y=148-this.pao_img.height/2)},e.prototype.setEffect=function(t){this.removeEffect(),this.paoEffect=vip.VIPPanel.createMovieClicp("paotai_effect_"+t),this.addChild(this.paoEffect),this.paoEffect.x=129,this.paoEffect.y=148,this.paoEffect.play(-1)},e.prototype.removeEffect=function(){this.paoEffect&&(this.paoEffect.stop(),uniLib.DisplayUtils.removeFromParent(this.paoEffect),this.paoEffect=null)},e.prototype.destroy=function(){this.vip_receive.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandle,this),this.removeEffect()},e}(eui.ItemRenderer);__reflect(VIPItemView.prototype,"VIPItemView");var vip;!function(t){var e=function(e){function o(t){var i=e.call(this)||this;return i._level=-1,i._extra=-1,t&&(i._extra=t),i.skinName="VipPanelSkin",i}return __extends(o,e),o.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this._rechargeCur.mask=this._rechargeMask,this.addEvents();var t=new Cmd.GetFishVipInfoCmd_C;NetMgr.tcpSend(t)},o.prototype.addEvents=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandle,this),uniLib.Global.addEventListener(t.CmdConstant.FISHVIP_INFO,this.onFishVipInfo,this),uniLib.Global.addEventListener(t.CmdConstant.FISHVIP_REWARD,this.onFishVipReward,this)},o.prototype.initUI=function(t,e){this._extra>-1&&(e=this._extra);var i=this.getVIPLvList(t);this._maxLevel=i[i.length-1].level;for(var o=0;o<i.length;o++)if(i[o].level==e){this._level=e;break}-1==this._level&&(this._level=i[0].level),this.vip_list.itemRenderer=VIPItemView,this._dataList=new eui.ArrayCollection(i),this.vip_list.dataProvider=this._dataList,this.vip_list.validateNow(),this.scrol.viewport.scrollH=785*(this._level-1)},o.prototype.onFishVipInfo=function(t){var e=t.param;this.setVip2(e),null==e.noget&&(e.noget=[]),this.initUI(e.noget,e.level)},o.prototype.onFishVipReward=function(t){for(var e=t.param,i=0;i<this._dataList.length;i++)this._dataList.source[i].level==e.level&&(this._dataList.source[i].unReceived=!1,this._dataList.replaceItemAt(this._dataList.source[i],i))},o.prototype.setVip2=function(t){this.vip_start.source="vip_small_"+t.level;var e=ConfigMgr.getInstance().getFishVipByLv(t.level),i=ConfigMgr.getInstance().getFishVipByLv(t.level+1);i?(this.vip_end.source="vip_small_"+i.vipLv,this._progressTex.text=t.curnum+"/"+t.totalnum,this._rechargeMask.width=t.curnum/t.totalnum*420,this._needTex.textFlow=[{text:"再充值",style:{textColor:9316870}},{text:t.diamond+"元",style:{textColor:16515327}},{text:"即可升级",style:{textColor:9316870}}],this._needTex.x=300-this._needTex.width/2):(this.vip_end.source="vip_small_"+t.level,this._progressTex.text=e.recharge+"/"+e.recharge,this._rechargeMask.width=420,this._needTex.text="")},o.prototype.removeEvents=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandle,this),uniLib.Global.removeEventListener(t.CmdConstant.FISHVIP_INFO,this.onFishVipInfo,this),uniLib.Global.removeEventListener(t.CmdConstant.FISHVIP_REWARD,this.onFishVipReward,this)},o.prototype.onTouchHandle=function(t){var e=t.target;e==this._closeBtn?uniLib.PopUpMgr.removePopUp(this):e==this._leftBtn?(this._level--,this._level<=0?this._level=1:this.scrollVip()):e==this._rightBtn?(this._level++,this._level>this._maxLevel?this._level=this._maxLevel:this.scrollVip()):e==this._recharge&&LobbyModuleMgr.getInstance().showMarketPanel(0)},o.prototype.scrollVip=function(){this.scrol.viewport.scrollH!=785*(this._level-1)&&(egret.Tween.removeTweens(this.scrol.viewport),egret.Tween.get(this.scrol.viewport).to({scrollH:785*(this._level-1)},200))},o.prototype.getVIPLvList=function(t){var e=RES.getRes("TableFishVIP_json"),o=[];return e.forEach(function(e){var s=new i;s.level=e.vipLv,s.unReceived=t.indexOf(e.vipLv)>-1,o.push(s)}),o},o.createMovieClicp=function(t,e){var i=RES.getRes(t+"_json"),o=RES.getRes(t+"_png"),s=new egret.MovieClipDataFactory(i,o),n=new egret.MovieClip(s.generateMovieClipData(e));return n},o.prototype.destroy=function(){egret.Tween.removeTweens(this.scrol.viewport),this.paoEffect&&(this.paoEffect.stop(),uniLib.DisplayUtils.removeFromParent(this.paoEffect),this.paoEffect=null),this.removeEvents(),uniLib.DisplayUtils.removeFromParent(this)},o}(eui.Component);t.VIPPanel=e,__reflect(e.prototype,"vip.VIPPanel");var i=function(){function t(){}return t}();t.VipReward=i,__reflect(i.prototype,"vip.VipReward")}(vip||(vip={}));var vip;!function(t){var e=function(){function t(){}return t.FISHVIP_INFO="fishvip_info",t.FISHVIP_REWARD="fishvip_reward",t}();t.CmdConstant=e,__reflect(e.prototype,"vip.CmdConstant")}(vip||(vip={}));var VipReciveMgr=function(){function t(){}return t}();__reflect(VipReciveMgr.prototype,"VipReciveMgr");var Cmd;!function(t){function e(t){uniLib.Global.dispatchEvent(vip.CmdConstant.FISHVIP_INFO,t,!0)}function i(t){uniLib.Global.dispatchEvent(vip.CmdConstant.FISHVIP_REWARD,t,!0)}t.OnGetFishVipInfoCmd_S=e,t.OnGetFishVipRewardCmd_CS=i}(Cmd||(Cmd={}));