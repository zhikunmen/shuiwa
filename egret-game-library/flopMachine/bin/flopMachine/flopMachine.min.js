var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);i.prototype=t.prototype,e.prototype=new i},FlopMachine;!function(e){var t=function(e){function t(t){var i=e.call(this)||this;return i._info=t,i.skinName="FlopMachineBonusPoolSkin",i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this._rubCard=uniLib.DragonUtils.createDragonBonesDisplay("xipai_ske_json","xipai_tex_json","xipai_tex_png",uniLib.DragonType.ARMATURE),this._rubCard.addEventListener(dragonBones.EgretEvent.LOOP_COMPLETE,this.onComplete,this),this._rubCard.display.x=642,this._rubCard.display.y=225,this._bonusPoolArmature=uniLib.DragonUtils.createDragonBonesDisplay("caijindajiang_ske_json","caijindajiang_tex_json","caijindajiang_tex_png",uniLib.DragonType.ARMATURE),this._bonusPoolArmature.addEventListener(dragonBones.EgretEvent.LOOP_COMPLETE,this.onBonusPoolComplete,this),this._bonusPoolArmature.display.x=this.width>>1,this._bonusPoolArmature.display.y=this.height>>1,this.addChild(this._bonusPoolArmature.display),uniLib.DragonUtils.runDragonBonesArmature(this._bonusPoolArmature,"newAnimation"),this._info.chips.length>=5&&(this.one_btn.label=this._info.chips[0].toString(),this.two_btn.label=this._info.chips[1].toString(),this.three_btn.label=this._info.chips[2].toString(),this.four_btn.label=this._info.chips[3].toString(),this.five_btn.label=this._info.chips[4].toString(),this.five_btn.max.visible=!0)},t.prototype.onBonusPoolComplete=function(){uniLib.DisplayUtils.removeFromParent(this._bonusPoolArmature.display),this._bonusPoolArmature.removeEventListener(dragonBones.EgretEvent.LOOP_COMPLETE,this.onBonusPoolComplete,this),uniLib.DragonUtils.destoryDragonBonesArmature(this._bonusPoolArmature,"newAnimation"),this._bonusPoolArmature=null,this.open.addEventListener("complete",this.onTweenGroupComplete,this),this.open.play(0)},t.prototype.onTweenGroupComplete=function(){var e=this;egret.Tween.get(this.five_btn).to({scaleX:0},200).to({enabled:!0}).call(function(){e.five_btn.max.visible=!1},this).to({scaleX:1},200).wait(900).to({x:642,y:225,rotation:0},300),egret.Tween.get(this.three_btn).wait(100).to({scaleX:0},200).to({enabled:!0}).to({scaleX:1},200).wait(800).to({x:642,y:225,rotation:0},200),egret.Tween.get(this.one_btn).wait(200).to({scaleX:0},200).to({enabled:!0}).to({scaleX:1},200),egret.Tween.get(this.two_btn).wait(300).to({scaleX:0},200).to({enabled:!0}).to({scaleX:1},200).wait(600).to({x:642,y:225,rotation:0},200),egret.Tween.get(this.four_btn).wait(400).to({scaleX:0},200).to({enabled:!0}).to({scaleX:1},200).wait(500).to({x:642,y:225,rotation:0},300).call(this.playRubbingCards,this)},t.prototype.playRubbingCards=function(){this.setVisible(!1),this.addChild(this._rubCard.display),uniLib.DragonUtils.runDragonBonesArmature(this._rubCard,"newAnimation")},t.prototype.onComplete=function(){var e=this;uniLib.DisplayUtils.removeFromParent(this._rubCard.display),this._rubCard.removeEventListener(dragonBones.EgretEvent.LOOP_COMPLETE,this.onComplete,this),uniLib.DragonUtils.destoryDragonBonesArmature(this._rubCard,"newAnimation"),this._rubCard=null,this.setVisible(!0),egret.Tween.get(this.two_btn).to({x:801,y:252,rotation:10},200),egret.Tween.get(this.three_btn).to({x:478,y:252,rotation:-10},200),egret.Tween.get(this.four_btn).to({x:958,y:298,rotation:20},300),egret.Tween.get(this.five_btn).to({x:320,y:298,rotation:-20},300).call(function(){e.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onTouch,e)},this)},t.prototype.onTouch=function(e){var t=this,i=e.target;if(i==this.one_btn||i==this.two_btn||i==this.three_btn||i==this.four_btn||i==this.five_btn){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this);var n=Math.max.apply(Math,this._info.chips),s=this._info.chips.indexOf(this._info.rewardchips);this._info.chips.splice(s,1),this._info.chips.sort(function(e,t){return Math.random()>.5?-1:1}),i.label=this._info.rewardchips+"",this._info.rewardchips==n&&i.max&&(i.max.visible=!0),egret.Tween.get(i).to({scaleX:0},200).to({enabled:!1}).to({scaleX:1},200).wait(200).call(function(){uniLib.UserInfo.goldChips+=t._info.rewardchips,i.kuang&&(i.kuang.visible=!0);for(var e=0,s=0;s<t.btn_grp.numChildren;s++){var o=t.btn_grp.getChildByName(s+"");o&&o!=i&&(o.label=t._info.chips[e]+"",t._info.chips[e]==n&&o.max&&(o.max.visible=!0),e++,egret.Tween.get(o).to({scaleX:0},200).to({enabled:!1}).to({scaleX:1},200))}egret.Tween.get(t).wait(2e3).call(function(){uniLib.PopUpMgr.removePopUp(t)},t)},this)}},t.prototype.setVisible=function(e){this.one_btn.visible=e,this.two_btn.visible=e,this.three_btn.visible=e,this.four_btn.visible=e,this.five_btn.visible=e},t.prototype.destroy=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.open.removeEventListener("complete",this.onTweenGroupComplete,this),egret.Tween.removeTweens(this),egret.Tween.removeTweens(this.one_btn),egret.Tween.removeTweens(this.two_btn),egret.Tween.removeTweens(this.three_btn),egret.Tween.removeTweens(this.four_btn),egret.Tween.removeTweens(this.five_btn),this._rubCard&&(this._rubCard.removeEventListener(dragonBones.EgretEvent.LOOP_COMPLETE,this.onComplete,this),uniLib.DisplayUtils.destoryDragonBonesArmature(this._rubCard,"newAnimation")),this._rubCard=null,this._bonusPoolArmature&&(this._bonusPoolArmature.removeEventListener(dragonBones.EgretEvent.LOOP_COMPLETE,this.onComplete,this),uniLib.DisplayUtils.destoryDragonBonesArmature(this._bonusPoolArmature,"newAnimation")),this._bonusPoolArmature=null},t}(eui.Component);e.FlopMachineBonusPool=t,__reflect(t.prototype,"FlopMachine.FlopMachineBonusPool")}(FlopMachine||(FlopMachine={}));var FlopMachine;!function(e){var t=function(){function e(){}return e.RES_JSON="resource/flopMachine/flopMachine.res_1a3c4cd.json",e.THM_JSON="resource/flopMachine/gameEui_72b9276a.json",e.FLOP_MACHIN="flopMachine",e.BONUS_POOL="bonusPool",e}();e.FlopMachineConsts=t,__reflect(t.prototype,"FlopMachine.FlopMachineConsts"),e.SOUND_START_BTN="start_btn_mp3",e.SOUND_BAOLIU="baoliu_btn_mp3",e.SOUND_COIN="coinAni_mp3",e.SOUND_BIDAXIAO_BG="bidaxiao_bg_mp3",e.SOUND_BIDAXIAO_LOSE="daxiao_lose_mp3",e.SOUND_BIDAXIAO_PING="daxiao_ping_mp3",e.SOUND_BIDAXIAO_WIN="daxiao_win_mp3",e.SOUND_FANPAI="fanpai_mp3",e.SOUND_FANPAI_LOSE="fanpai_lose_mp3",e.SOUND_FANPAI_WIN="fanpai_win_mp3"}(FlopMachine||(FlopMachine={}));var FlopMachine;!function(e){var t=function(t){function i(e){void 0===e&&(e=0);var i=t.call(this)||this;return i._lotchips=e,i.skinName="FlopMachineGuessSkin",i}return __extends(i,t),i.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),uniLib.SoundMgr.instance.playSound(e.SOUND_BIDAXIAO_BG,0),this.addEvents(),uniLib.Global.screenWidth>this.bg_img.width&&(this.bg_img.width=uniLib.Global.screenWidth),this.top_skin.ticket_btn.touchEnabled=!1,this._notice=new LobbyNotice,this._notice.visible=!1,this._notice.y=88,this._notice.x=this.width-this._notice.width>>1,this.addChild(this._notice),this.win_lbl.text=this._lotchips+"",this._timer=new egret.Timer(200,0),this._timer.addEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this.reset()},i.prototype.reset=function(){this.result_img.visible=!1,this.big_btn.enabled=!0,this.small_btn.enabled=!0,this.over_btn.enabled=!0,this.poker_img.x=515,this.poker_img.y=270,this.poker_img.scaleX=this.poker_img.scaleY=1,this.poker_img.source="flopMachine_json.fpj_card_back",this._timer.start()},i.prototype.onTimer=function(){this.poker_img.source="Poker_"+(Math.floor(4*Math.random())+1)+(Math.floor(13*Math.random())+1)},i.prototype.addEvents=function(){uniLib.Global.addEventListener(e.GET_CHIPS,this.onGetChips,this),uniLib.Global.addEventListener(e.GUESS,this.onGuess,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandle,this)},i.prototype.removeEvents=function(){uniLib.Global.removeEventListener(e.GET_CHIPS,this.onGetChips,this),uniLib.Global.removeEventListener(e.GUESS,this.onGuess,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandle,this)},i.prototype.onGuess=function(t){var i=this,n=t.param;this.big_btn.enabled=!1,this.small_btn.enabled=!1,this.over_btn.enabled=!1;var s=n.guessInfo.card.toString();if(this._timer.stop(),this.poker_img.source="Poker_"+s.slice(1,s.length),this.win_lbl.text=n.guessInfo.lotchips.toString(),1==n.guessInfo.lotret){uniLib.SoundMgr.instance.playSound(e.SOUND_BIDAXIAO_WIN),this.result_img.source="flopMachine_json.fpj_cdx_win";var o=this["card"+n.guessInfo.round];o.source="Poker_"+s.slice(1,s.length),egret.Tween.get(this.poker_img).to({x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY},700).call(this.onCall,this,[o,n.guessInfo.round])}else if(2==n.guessInfo.lotret){uniLib.SoundMgr.instance.playSound(e.SOUND_BIDAXIAO_LOSE),this.result_img.source="flopMachine_json.fpj_cdx_lose";var o=this["card"+n.guessInfo.round];o.source="Poker_"+s.slice(1,s.length),egret.Tween.get(this).wait(1200).call(function(){uniLib.PopUpMgr.removePopUp(i),uniLib.Global.dispatchEvent(e.CLOSE_GUESS)},this)}else 3==n.guessInfo.lotret&&(uniLib.SoundMgr.instance.playSound(e.SOUND_BIDAXIAO_PING),this.result_img.source="flopMachine_json.fpj_cdx_ping",egret.Tween.get(this).wait(1200).call(this.reset,this));this.result_img.visible=!0,this.result_tween.play(0)},i.prototype.onGetChips=function(t){var i=t.param;this.qufen_lbl.text="+"+i.chips,this.win_tween.play(0),this.big_btn.enabled=!1,this.small_btn.enabled=!1,this.over_btn.enabled=!1,this._coinArmature||(this._coinArmature=uniLib.DragonUtils.createDragonBonesDisplay("jinbi_ske_json","jinbi_tex_json","jinbi_tex_png",uniLib.DragonType.ARMATURE),this._coinArmature.addEventListener(dragonBones.EgretEvent.LOOP_COMPLETE,this.onComplete,this),this._coinArmature.display.x=this.width>>1,this._coinArmature.display.y=this.height>>1),this.addChild(this._coinArmature.display),uniLib.DisplayUtils.runDragonBonesArmature(this._coinArmature,"newAnimation"),uniLib.SoundMgr.instance.playSound(e.SOUND_COIN)},i.prototype.onComplete=function(){uniLib.DisplayUtils.removeFromParent(this._coinArmature.display),this._coinArmature.animation.stop(),uniLib.PopUpMgr.removePopUp(this),uniLib.Global.dispatchEvent(e.CLOSE_GUESS)},i.prototype.onCall=function(e,t){e.visible=!0,this.result_img.visible=!1;var i=["零","一","二","三","四","五","六","七","八","九"];this.round_lbl.text="第"+i[t]+"关";var n=this.rush_grp.getChildAt(2*(t-1));n&&(n.visible=!0),n=this.rush_grp.getChildAt(2*(t-1)+1),n&&(n.visible=!0),this.reset(),7==t&&(this._timer&&this._timer.stop(),this.big_btn.visible=!1,this.small_btn.visible=!1,this.pass_img.visible=!0,this.poker_img.visible=!1)},i.prototype.onTouchHandle=function(t){var i=t.target;if(i==this.close_btn){var n=new Cmd.ExitSalvoLobbyCmd_C;NetMgr.tcpSend(n),uniLib.PopUpMgr.removePopUp(e.FlopMachinePanel),uniLib.PopUpMgr.removePopUp(this)}else if(i==this.big_btn){var n=new Cmd.GuessLobbyCmd_C;n.guesstype=1,NetMgr.tcpSend(n)}else if(i==this.small_btn){var n=new Cmd.GuessLobbyCmd_C;n.guesstype=2,NetMgr.tcpSend(n)}else i==this.over_btn?NetMgr.tcpSend(new Cmd.GetLotchipsLobbyCmd_C):t.target==this.rule_btn&&uniLib.PopUpMgr.addPopUp(e.FlopMachineRule,null,!0,!0,!0,uniLib.PopUpEffect.CENTER)},i.prototype.destroy=function(){uniLib.SoundMgr.instance.stopSound(e.SOUND_BIDAXIAO_BG),egret.Tween.removeTweens(this),egret.Tween.removeTweens(this.poker_img),this.removeEvents(),this._notice.destroy(),this._notice=null,this.win_tween&&this.win_tween.stop(),this.result_tween&&this.result_tween.stop(),egret.Tween.removeTweens(this.qufen_lbl),this._timer&&(this._timer.stop(),this._timer.removeEventListener(egret.TimerEvent.TIMER,this.onTimer,this)),this._timer=null,this._coinArmature&&(this._coinArmature.removeEventListener(dragonBones.EgretEvent.LOOP_COMPLETE,this.onComplete,this),uniLib.DisplayUtils.destoryDragonBonesArmature(this._coinArmature,"newAnimation")),this._coinArmature=null},i}(eui.Component);e.FlopMachineGuess=t,__reflect(t.prototype,"FlopMachine.FlopMachineGuess")}(FlopMachine||(FlopMachine={}));var FlopMachine;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e._isTween=!1,e._chipsBtnIsOpen=!1,e._lotchips=0,e.skinName="FlopMachinePanelSkin",e}return __extends(i,t),i.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),uniLib.SoundMgr.instance.pauseBgMusic(),this.addEvents(),NetMgr.tcpSend(new Cmd.GetJackpotLobbyCmd_C),uniLib.Global.screenWidth>this.bg_img.width&&(this.bg_img.width=uniLib.Global.screenWidth),this.top_skin.ticket_btn.touchEnabled=!1,this._notice=new LobbyNotice,this._notice.visible=!1,this._notice.y=88,this._notice.x=this.width-this._notice.width>>1,this.addChild(this._notice);var e=uniLib.Utils.getLocalStorage("fpjChips");this.chip5_btn.label=e?e:"500",uniLib.Utils.setLocalStorage("fpjChips",this.chip5_btn.label),this.reset()},i.prototype.reset=function(){for(var e=1;5>=e;e++)this["retain"+e].visible=!1,this["poker"+e].source="flopMachine_json.fpj_card_back",this["poker"+e].name=e+"",this["poker"+e].touchEnabled=!1,egret.Tween.removeTweens(this["light"+e]),this["light"+e].visible=!1;this.lottery_img.visible=!1,this.guess_btn.visible=!1,this.begin_btn.skin.type.source="flopMachine_json.fpj_word_start",this.begin_btn.name="begin",this.begin_btn.enabled=!1,this.chip5_btn.enabled=!1,this.cardType_grp.visible=!1,this.hang_btn.enabled=!1,this.sendcard_tween.play(0)},i.prototype.addEvents=function(){uniLib.Global.addEventListener(e.CLOSE_GUESS,this.reset,this),uniLib.Global.addEventListener(e.JACKPOT,this.onUpJackPot,this),this.sendcard_tween.addEventListener(egret.Event.COMPLETE,this.onSendCardComplete,this),this.open_tween.addEventListener(egret.Event.COMPLETE,this.onOpen,this),this.close_tween.addEventListener(egret.Event.COMPLETE,this.onClose,this),uniLib.Global.addEventListener(e.GET_CHIPS,this.onGetChips,this),uniLib.Global.addEventListener(e.TURN,this.onTurn,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandle,this)},i.prototype.removeEvents=function(){uniLib.Global.removeEventListener(e.CLOSE_GUESS,this.reset,this),uniLib.Global.removeEventListener(e.JACKPOT,this.onUpJackPot,this),this.sendcard_tween.removeEventListener(egret.Event.COMPLETE,this.onSendCardComplete,this),this.open_tween.removeEventListener(egret.Event.COMPLETE,this.onOpen,this),this.close_tween.removeEventListener(egret.Event.COMPLETE,this.onClose,this),uniLib.Global.removeEventListener(e.GET_CHIPS,this.onGetChips,this),uniLib.Global.removeEventListener(e.TURN,this.onTurn,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandle,this)},i.prototype.onUpJackPot=function(e){var t=e.param;this.coinPond_blbl.text=("0000000000"+t.jackpot).slice(-10)},i.prototype.onSendCardComplete=function(){this.hang_btn.enabled=!0,this.hang_btn.visible&&(this.begin_btn.enabled=!0),this.chip5_btn.enabled=!0},i.prototype.onOpen=function(){this._chipsBtnIsOpen=!0},i.prototype.onClose=function(){this.chipsDesc_lbl.visible=!0,this._chipsBtnIsOpen=!1},i.prototype.onGetChips=function(t){var i=t.param;this.win_lbl.text="+"+i.chips,this.win_tween.play(0),this.begin_btn.enabled=!1,this.guess_btn.visible=!1,uniLib.PopUpMgr.hasPopup(e.FlopMachineGuess)||(this._coinArmature||(this._coinArmature=uniLib.DragonUtils.createDragonBonesDisplay("jinbi_ske_json","jinbi_tex_json","jinbi_tex_png",uniLib.DragonType.ARMATURE),this._coinArmature.addEventListener(dragonBones.EgretEvent.LOOP_COMPLETE,this.onComplete,this),this._coinArmature.display.x=this.width>>1,this._coinArmature.display.y=this.height>>1),this.addChild(this._coinArmature.display),uniLib.DisplayUtils.runDragonBonesArmature(this._coinArmature,"newAnimation"),uniLib.SoundMgr.instance.playSound(e.SOUND_COIN))},i.prototype.onComplete=function(){this.reset(),uniLib.DisplayUtils.removeFromParent(this._coinArmature.display),this._coinArmature.animation.stop()},i.prototype.onTurn=function(t){var i=this,n=t.param;if(1==n.type){this._chipsBtnIsOpen&&this.close_tween.play(0),this.chip5_btn.enabled=!1,this.begin_btn.enabled=!1,this.hang_btn.enabled=!1;for(var s=function(t){var s=o["poker"+(t+1)];if(s){var r=n.cards[t].toString();o._isTween=!0,egret.Tween.get(s).wait(200*t).call(function(){uniLib.SoundMgr.instance.playSound(e.SOUND_FANPAI)},o).to({scaleX:0},200).to({source:"Poker_"+r.slice(1,r.length)}).to({scaleX:1},200).call(function(){t+1==n.cards.length&&(i._isTween=!1,i.begin_btn.skin.type.source="flopMachine_json.fpj_word_jixu",i.begin_btn.name="continue",i.hang_btn.enabled=!0,i.hang_btn.visible&&(i.begin_btn.enabled=!0)),s.touchEnabled=!0,n.autostay&&-1!=n.autostay.indexOf(n.cards[t])&&i["retain"+s.name]&&(i["retain"+s.name].visible=!0),s.name=n.cards[t]+"",i["light"+(t+1)]&&(i["light"+(t+1)].name="light"+s.name)},o)}},o=this,r=0;r<n.cards.length;r++)s(r)}else if(2==n.type){this._isTween=!0,this.hang_btn.enabled=!1,this.begin_btn.enabled=!1;var h=1e3;if(Array.isArray(n.cards)){h=200*n.cards.length+550;for(var a=1,r=0;r<n.cards.length;r++)for(;5>=a;a++){var l=this["retain"+a];if(!l.visible){var p=n.cards[r].toString();this["poker"+a].source="flopMachine_json.fpj_card_back",egret.Tween.get(this["poker"+a]).wait(200*r+150).call(function(){uniLib.SoundMgr.instance.playSound(e.SOUND_FANPAI)},this).to({scaleX:0},200).to({source:"Poker_"+p.slice(1,p.length)}).to({scaleX:1},200),this["poker"+a].name=n.cards[r]+"",this["light"+a]&&(this["light"+a].name="light"+n.cards[r]),a++;break}}}egret.Tween.get(this).wait(h).call(this.lotteryInfo,this,[n.lotteryInfo])}},i.prototype.lotteryInfo=function(t){var i=this;if(t.cardtype==Cmd.CARD_TYPE.Scattered)uniLib.SoundMgr.instance.playSound(e.SOUND_FANPAI_LOSE),this.reset();else{uniLib.SoundMgr.instance.playSound(e.SOUND_FANPAI_WIN),this._lotchips=t.lotchips,this.cardType_grp.visible=!0,this.cardType_lbl.text=this.getCardType(t.cardtype),this.cardType_tween.play(0);for(var n=0;n<t.cards.length;n++){var s=this.flop_grp.getChildByName("light"+t.cards[n]);s&&egret.Tween.get(s,{loop:!0}).to({visible:!0}).wait(500).to({visible:!1}).wait(500)}var o=this.lottery_grp.getChildByName("type"+t.cardtype);this.lottery_img.x=o.x-24,this.lottery_img.y=o.y,this.lottery_img.visible=!0,this.begin_btn.skin.type.source="flopMachine_json.fpj_word_qufen",this.begin_btn.name="qufen",this._isTween=!1,this.hang_btn.visible&&(this.begin_btn.enabled=!0),this.hang_btn.enabled=!0,this.guess_btn.visible=!0,t.rewardchips&&Array.isArray(t.chips)&&LoadPanelTipMgr.getInstance().loadRes(e.FlopMachineConsts.BONUS_POOL,function(){i.hang_btn.visible=!0,i.cancelHang_btn.visible=!1,uniLib.PopUpMgr.addPopUp(e.FlopMachineBonusPool,null,!0,!0,!1,uniLib.PopUpEffect.NOMAL,0,0,t)})}},i.prototype.getCardType=function(e){var t=["","","一对10以上","两对","三条","顺子","同花","葫芦","四条","同花顺","同花大顺","五条"];return t[e]?t[e]:""},i.prototype.onTouchHandle=function(t){var i=t.target;if(i==this.chip5_btn)this._chipsBtnIsOpen?this.close_tween.play(0):(this.open_tween.play(0),this.chipsDesc_lbl.visible=!1);else if(i==this.close_btn){var n=new Cmd.ExitSalvoLobbyCmd_C;NetMgr.tcpSend(n),uniLib.PopUpMgr.removePopUp(this)}else if(i==this.guess_btn)uniLib.PopUpMgr.addPopUp(e.FlopMachineGuess,null,!0,!1,0,uniLib.PopUpEffect.NOMAL,0,0,this._lotchips);else if(i==this.chip1_btn||i==this.chip2_btn||i==this.chip3_btn||i==this.chip4_btn||i==this.chip6_btn)this.chip5_btn.label=i.name,uniLib.Utils.setLocalStorage("fpjChips",this.chip5_btn.label),this.close_tween.play(0);else if(i==this.poker1||i==this.poker2||i==this.poker3||i==this.poker4||i==this.poker5)uniLib.SoundMgr.instance.playSound(e.SOUND_BAOLIU),i==this.poker1&&(this.retain1.visible=!this.retain1.visible),i==this.poker2&&(this.retain2.visible=!this.retain2.visible),i==this.poker3&&(this.retain3.visible=!this.retain3.visible),i==this.poker4&&(this.retain4.visible=!this.retain4.visible),i==this.poker5&&(this.retain5.visible=!this.retain5.visible);else if(i==this.hang_btn){this.hang_btn.visible=!1,this.cancelHang_btn.visible=!0,this.chip5_btn.enabled=!1;var s=new Cmd.HangUpLobbyCmd_C;s.type=1,s.betchips=Number.parseInt(this.chip5_btn.label),NetMgr.tcpSend(s)}else if(i==this.cancelHang_btn){this.cancelHang_btn.visible=!1,this.hang_btn.visible=!0,!this._isTween&&(this.begin_btn.enabled=!0);var s=new Cmd.HangUpLobbyCmd_C;s.type=2,NetMgr.tcpSend(s)}else if(i==this.begin_btn){if(uniLib.SoundMgr.instance.playSound(e.SOUND_START_BTN),"begin"==i.name)if(uniLib.UserInfo.goldChips<Number.parseInt(this.chip5_btn.label))uniLib.TipsUtils.showTipsDownToUp("您的金币已不足");else{var n=new Cmd.TurntLobbyCmd_C;n.betchips=Number.parseInt(this.chip5_btn.label),NetMgr.tcpSend(n)}else if("qufen"==i.name)NetMgr.tcpSend(new Cmd.GetLotchipsLobbyCmd_C);else if("continue"==i.name){var n=new Cmd.TurntLobbyCmd_C;n.stay=[];for(var o=1;5>=o;o++)this["retain"+o].visible&&n.stay.push(Number.parseInt(this["poker"+o].name)),this["poker"+o].touchEnabled=!1;NetMgr.tcpSend(n)}}else t.target==this.rule_btn&&uniLib.PopUpMgr.addPopUp(e.FlopMachineRule,null,!0,!0,!0,uniLib.PopUpEffect.CENTER)},i.prototype.destroy=function(){uniLib.SoundMgr.instance.resumeBgMusic(),this.removeEvents(),this._notice.destroy(),this._notice=null,this.win_tween&&this.win_tween.stop(),egret.Tween.removeTweens(this.win_lbl),this.sendcard_tween&&this.sendcard_tween.stop(),this.open_tween&&this.open_tween.stop(),this.close_tween&&this.close_tween.stop(),this.cardType_tween&&this.cardType_tween.stop(),egret.Tween.removeTweens(this);for(var e=1;5>=e;e++)egret.Tween.removeTweens(this["poker"+e]),egret.Tween.removeTweens(this["light"+e]);this._coinArmature&&(this._coinArmature.removeEventListener(dragonBones.EgretEvent.LOOP_COMPLETE,this.onComplete,this),uniLib.DisplayUtils.destoryDragonBonesArmature(this._coinArmature,"newAnimation")),this._coinArmature=null,this._chipsBtnIsOpen=null,this._lotchips=null,this._isTween=null},i}(eui.Component);e.FlopMachinePanel=t,__reflect(t.prototype,"FlopMachine.FlopMachinePanel")}(FlopMachine||(FlopMachine={}));var FlopMachine;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="FlopMachineRuleSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.cj_rbtn.group.addEventListener(eui.UIEvent.CHANGE,this.onChange,this),this.lhp_rbtn.selected=!0,this.setLabel(1),this.close_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},t.prototype.onChange=function(e){var t=e.target;this.setLabel(Number.parseInt(t.selectedValue))},t.prototype.setLabel=function(e){1==e?this.rule_lbl.text="开始游戏后系统自动发放5张牌，可选择任意牌进行保留，点继续后，保留牌不变，不保留牌重新随机，如果最终出现奖励牌型，则获得对应倍数奖励。当出现大小王时，大小王可以代替任意牌。":2==e?this.rule_lbl.text="1.获得五条，同花大顺，同花顺时获得投入金额的10-120倍奖励。\n2.当系统彩金不足以发放时，将发放当前所有彩金。":3==e&&(this.rule_lbl.text="1.游戏共分为7关，每一关都要猜随机牌的大小，猜对则进入下一关，猜错将失去所有奖励。\n2.在游戏的过程中随时可以取分离开。\n3.2、3、4、5、6、7为小，8为平，9、10、J、Q、K、A为大。")},t.prototype.onTouch=function(){uniLib.PopUpMgr.removePopUp(this)},t.prototype.destroy=function(){this.close_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.cj_rbtn.group.removeEventListener(eui.UIEvent.CHANGE,this.onChange,this)},t}(eui.Component);e.FlopMachineRule=t,__reflect(t.prototype,"FlopMachine.FlopMachineRule")}(FlopMachine||(FlopMachine={}));var FlopMachine;!function(e){e.TURN="turn",e.GET_CHIPS="getChips",e.GUESS="guess",e.JACKPOT="jackPot",e.CLOSE_GUESS="closeGuess",e.HANG_UP="hang_up"}(FlopMachine||(FlopMachine={}));var Cmd;!function(e){function t(e){uniLib.Global.dispatchEvent(FlopMachine.TURN,e)}function i(e){uniLib.Global.dispatchEvent(FlopMachine.GET_CHIPS,e)}function n(e){uniLib.Global.dispatchEvent(FlopMachine.GUESS,e)}function s(e){uniLib.Global.dispatchEvent(FlopMachine.JACKPOT,e)}function o(e){uniLib.Global.dispatchEvent(FlopMachine.HANG_UP,e)}e.OnTurnLobbyCmd_S=t,e.OnGetLotchipsLobbyCmd_S=i,e.OnGuessLobbyCmd_S=n,e.OnGetJackpotLobbyCmd_S=s,e.OnHangUpLobbyCmd_S=o}(Cmd||(Cmd={}));